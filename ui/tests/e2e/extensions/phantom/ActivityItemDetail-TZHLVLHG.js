import{a as U}from"./chunk-4DQNYOFM.js";import{b as J,c as Se}from"./chunk-LRFHH3ZB.js";import{a as B}from"./chunk-O47TP2CJ.js";import{a as xe}from"./chunk-6FQCFTF7.js";import"./chunk-6VBZ34UF.js";import{pa as Ne,v as w,wa as Ie,ya as Re}from"./chunk-ZPSIMYUC.js";import"./chunk-3W7DN42P.js";import"./chunk-66RATSMU.js";import"./chunk-3CN4PSQF.js";import"./chunk-N6BAVOMX.js";import"./chunk-BV3TS4XT.js";import"./chunk-MSKCA54N.js";import"./chunk-WIVKFT3Y.js";import"./chunk-2DLZSCTQ.js";import"./chunk-DGD53LCE.js";import"./chunk-SAN2LWG5.js";import"./chunk-JVLGNGOV.js";import"./chunk-EMDZTJKZ.js";import"./chunk-26BEY7UU.js";import"./chunk-KHFCJUHU.js";import"./chunk-75HMBX3C.js";import{g as Ee}from"./chunk-3JMYJD4J.js";import"./chunk-FLIG3OXX.js";import"./chunk-IRT22BM2.js";import{a as fe}from"./chunk-GDHNPAWS.js";import"./chunk-QCUZPSGD.js";import"./chunk-4NOCLPPV.js";import"./chunk-HRUBPS3N.js";import"./chunk-G46R4HGO.js";import{E as g,G as f,H as X,I as j,L as x,M as G,O as ge}from"./chunk-QY5YIVDQ.js";import"./chunk-MUAOONPW.js";import"./chunk-BY77CZR3.js";import"./chunk-CEYX4EEL.js";import"./chunk-Q2MU5Q7Q.js";import"./chunk-CCUQPG33.js";import"./chunk-IHXFHG2Y.js";import"./chunk-JAQNMSBC.js";import"./chunk-MYAJJRTU.js";import"./chunk-EBUZAGLB.js";import"./chunk-QCKHHJ5F.js";import"./chunk-HPK5Q66L.js";import"./chunk-MEINW66A.js";import"./chunk-QMDPT5WS.js";import"./chunk-PQHYTRV5.js";import{c as q}from"./chunk-Y6JOYO4T.js";import{db as Le,m as _}from"./chunk-FABKKW5E.js";import"./chunk-ZWNJSFU4.js";import"./chunk-MZPVJTUS.js";import"./chunk-JSLOSOZX.js";import"./chunk-GCJPSL4T.js";import{b as we}from"./chunk-RY7HN3SK.js";import{c as Ae}from"./chunk-YI2NXTPE.js";import"./chunk-TCB6NDII.js";import{$ as be,f as ve,h as Ce,ja as he,n as De}from"./chunk-R5GARSZH.js";import"./chunk-F24UB3BO.js";import{$a as ke,A as ye,B as P,y as M}from"./chunk-VOCOWPRG.js";import"./chunk-F63TUCMM.js";import"./chunk-CJHTJRVG.js";import{Zb as R,dc as N}from"./chunk-PJ6PRBE2.js";import"./chunk-DHKCVHRA.js";import{X as ue,c as Te,ya as A}from"./chunk-UTOBJRXZ.js";import"./chunk-3Q6WUW5S.js";import"./chunk-I5GRDOQ7.js";import"./chunk-3KRCODTN.js";import{f as pe,h as de,n as me}from"./chunk-SVG5OEFH.js";de();me();var o=pe(Te()),W=pe(Te());var je=_.a`
  cursor: pointer;
`,Ge=_.div`
  display: flex;
  justify-content: space-between;
  gap: 8px;
`,L=_.span`
  cursor: pointer;
  color: ${m=>m.color||"white"};
  &:hover {
    color: ${A.colors.legacy.spotBase};
  }
`,qe=_.div`
  margin: -16px -16px 0 -16px;
  width: calc(100% + 32px);
  height: calc(100% + 16px);
  overflow-y: auto;
  position: absolute;
  top: 0;
  left: 0;
`,Pe=({label:m,url:p})=>o.createElement(je,{onClick:()=>self.open(p)},o.createElement(Le,{color:A.colors.legacy.spotBase,noWrap:!0,lineHeight:14,maxWidth:`${we/2}`,weight:600,size:14},m)),Je=({activityItem:m})=>{let{interactionData:p,chainMeta:V}=m,{t:e}=ue(),{transactionType:O}=p,{status:_e,networkFee:Be,networkFeePayer:Q}=V,D=V.chainId,b=_e==="failed",{pushDetailView:Z}=Ee(),{getKnownAddressLabel:Ue}=he(),{data:ee}=be(),{handleHideModalVisibility:te}=Re(),z=(0,W.useCallback)(()=>te("activityItem"),[te]),{data:F}=ke(),ae=F?.isReadOnly,r=(0,W.useCallback)((a,t)=>{Z(o.createElement(qe,null,o.createElement(Ie,{caip19:a,title:t,entryPoint:"activityItemDetail"})))},[Z]),Oe=Q?F?.addresses.some(a=>a.address.toLowerCase()===Q.toLowerCase()):!1,Fe=xe(m.timestamp*1e3,e("richTransactionDetailAt")),$=R.getTokenDecimals(D),h=R.getTokenSymbol(D),$e=G(Be,$,h),I=o.createElement(w,{activityItem:m,size:"medium"}),u={label:e("richTransactionDetailDate"),value:Fe},oe=g(m.id),Me="dapp"in p?p.dapp?.displayName:void 0,{bridgeUrl:K,isLoading:We}=ge(oe,Me),y=[];if(ee){let a=V.chainId,t=ee.explorers[a]??ve.get(a).defaultExplorer,i=De({networkID:a,endpoint:"transaction",explorerType:t,param:oe});i!==""&&y.push({label:e("richTransactionDetailViewOnExplorer",{explorer:Ce[t]}),value:i,type:"link"})}let S=N({chainId:D,slip44:R.getSlip44(D),resourceType:"nativeToken"}),k=b?{label:e("richTransactionDetailStatus"),value:e("richTransactionDetailFailed"),color:A.colors.legacy.spotNegative}:{label:e("richTransactionDetailStatus"),value:e("historyStatusSucceeded"),color:A.colors.legacy.spotPositive},v={label:e("richTransactionDetailNetworkFee"),value:Oe?$e:void 0},C={label:e("historyNetwork"),value:R.getNetworkName(D)},ie=Ne(),ne=(0,W.useCallback)((a,t)=>{Ae.capture("activityItemSwapAgainClicked",{data:{from_asset_caip19:t,to_asset_caip19:a}}),ie({buyFungibleCaip19:a,sellFungibleCaip19:t}),z()},[ie,z]),d;switch(O){case"TOKEN_SEND":{let t=p.balanceChanges[0],i=j(t,F?.addresses??[]),{token:{symbol:n,decimals:l,displayName:s,tokenType:c,isSpam:T},amount:E}=t,se=X(c),le=N(x(t.token,D)),Ve=i?"+":"-",H=l!==void 0?`${f(E,l)} ${n||""}`:e("transactionsUnknownAmount"),ze=`${Ve}${H}`,Y=g(i?t.from:t.to),re=ye(Y,void 0,Ue(Y,D)),Ke={label:e(i?"richTransactionDetailFrom":"richTransactionDetailTo"),value:o.createElement(U,{delayedChildren:o.createElement(B,{alignment:"topCenter",copyString:Y},re)},re)},ce=Xe=>o.createElement(L,{onClick:()=>r(le,t.token.symbol),color:i&&!b?A.colors.legacy.spotPositive:void 0},Xe),He=b?[{label:e("historyAttemptedAmount"),value:H}]:[],Ye=b?e("transactionsSendFailed"):`${e("transactionsSent")}`;d={sections:[{rows:[u,k,Ke,C,v,...He,...y]}],title:i?e("transactionsReceived"):Ye,primaryText:se?{value:s||e("richTransactionDetailUnknownNFT")}:b||l===void 0?{value:ce(H)}:{value:ce(ze)},secondaryText:{value:""},image:se?I:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(le,t.token.symbol)}),warning:i&&T?e("spamActivityWarning"):""};break}case"TOKEN_BURN":{let{amount:a,token:t}=p,i="";b||(t.displayName?a==="1"?i=t.displayName:i=`${t.displayName} (${a})`:i=e("richTransactionDetailUnknownNFT")),d={sections:[{rows:[u,k,C,v,...y]}],title:e("richTransactionDetailBurned"),primaryText:{value:i},secondaryText:{value:""},image:I};break}case"TOKEN_SWAP":{let{receiveAmount:a,receiveToken:t,sendAmount:i,sendToken:n,dapp:l}=p,s=P(g(n.id)||""),c=P(g(t.id)||""),T=N(x(n,D)),E=N(x(t,D));d={sections:[{rows:[u,k,C,v]},{title:e("richTransactionDetailSwapDetails"),rows:[{label:e("richTransactionDetailProvider"),value:l?.displayName&&l.logoURI?o.createElement(J,{name:l.displayName,imageURL:l.logoURI}):l?.displayName||e("historyUnknownDappName")},{label:e("richTransactionDetailYouPaid"),value:G(i,n.decimals,n.symbol||""),onClick:()=>r(T,n.symbol||s)},{label:e("richTransactionDetailYouReceived"),value:t.decimals!==void 0?`+${f(a,t.decimals)} ${t.symbol||""}`:e("transactionsUnknownAmount"),color:t.decimals!==void 0&&!b?A.colors.legacy.spotPositive:"",onClick:()=>r(E,t.symbol||c)},...y]}],title:e("richTransactionDetailTokenSwap"),primaryText:{value:o.createElement(o.Fragment,null,o.createElement(L,{onClick:()=>r(T,n.symbol||s)},n.symbol||s)," \u2192 ",o.createElement(L,{onClick:()=>r(E,t.symbol||c)},t.symbol||c))},secondaryText:{value:""},image:o.createElement(w,{activityItem:m,size:"medium",onClick:ae?void 0:()=>ne(E,T)}),swapAgain:ae?void 0:{sendToken:T,receiveToken:E}};break}case"BRIDGE_INIT":{let t=p.balanceChanges[0],i=j(t,F?.addresses??[]),{token:{symbol:n,decimals:l},amount:s}=t,c=N(x(t.token,D)),T=l!==void 0?`${f(s,l)} ${n||""}`:e("transactionsUnknownAmount"),E=We||!K?[]:[{label:K.label,value:K.value,type:"link"}];d={sections:[{rows:[u,k,C,v,...E]}],title:b?e("transactionBridgeInitiatedFailed"):`${e("transactionBridgeInitiated")}`,primaryText:{value:o.createElement(L,{onClick:()=>r(c,n),color:i&&!b?A.colors.legacy.spotPositive:void 0},T)},secondaryText:{value:""},image:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(c,n)})};break}case"TOKEN_UNWRAP":{let{token:a,amount:t}=p,i=P(g(a.id)||""),n=N(x(a,D)),l=a.decimals!==void 0?`+${f(t,a.decimals)} ${a.symbol||""}`:e("transactionsUnknownAmount");d={sections:[{rows:[u,k,C,v]},{title:e("richTransactionDetailUnwrapDetails"),rows:[{label:e("richTransactionDetailYouReceived"),value:o.createElement(L,{onClick:()=>r(n,a.symbol),color:b?void 0:A.colors.legacy.spotPositive},l)},...y]}],title:e("richTransactionDetailTokenUnwrap"),primaryText:{value:o.createElement(L,{onClick:()=>r(n,a.symbol)},a.symbol||i)},secondaryText:{value:""},image:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(n,a.symbol)})};break}case"WITHDRAW_STAKE":{let{amount:a,stakeAccount:t}=p,i=g(t),n=M(i,4);d={sections:[{rows:[u,k,{label:e("richTransactionDetailAccount"),value:o.createElement(U,{delayedChildren:o.createElement(B,{alignment:"topCenter",copyString:i},n)},n)},C,v,...y]}],title:e("richTransactionDetailWithdrawStake"),primaryText:{value:o.createElement(L,{onClick:()=>r(S,h),color:b?void 0:A.colors.legacy.spotPositive},"+",f(a,$)," ",h)},secondaryText:{value:""},image:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(S,h)})};break}case"DEACTIVATE_STAKE":{let{amount:a,stakeAccount:t}=p,i=g(t),n=M(i,4);d={sections:[{rows:[u,k,{label:e("richTransactionDetailAccount"),value:o.createElement(U,{delayedChildren:o.createElement(B,{alignment:"topCenter",copyString:i},n)},n)},C,v,...y]}],title:e("richTransactionDetailUnstaked"),primaryText:{value:o.createElement(L,{onClick:()=>r(S,h)},f(a,$)," ",h)},secondaryText:{value:""},image:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(S,h)})};break}case"STAKE":{let{amount:a,stakeAccount:t,validatorName:i,validatorWebsite:n}=p,l=g(t),s=M(l,4);d={sections:[{rows:[u,k,{label:e("richTransactionDetailAccount"),value:o.createElement(U,{delayedChildren:o.createElement(B,{alignment:"topCenter",copyString:l},s)},s)},{label:"Validator",value:i&&n?o.createElement(Pe,{label:i,url:n}):i},C,v,...y]}],title:e("richTransactionDetailStaked"),primaryText:{value:o.createElement(L,{onClick:()=>r(S,h)},"-",f(a,$)," ",h)},secondaryText:{value:""},image:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(S,h)})};break}case"COLLECTIBLE_LIST":case"COLLECTIBLE_BUY_ITEM":case"COLLECTIBLE_CANCEL_BID":case"COLLECTIBLE_BID_ITEM":case"COLLECTIBLE_UNLIST":case"COLLECTIBLE_SELL_ITEM":{let{dapp:a,item:t,forAmount:i,forAsset:n,listingUrl:l}=p,s=n.decimals!==void 0?`${f(i,n.decimals)} ${n.symbol||""}`:e("transactionsUnknownAmount"),c=t.displayName||e("richTransactionDetailUnknownNFT"),T={COLLECTIBLE_LIST:{priceRow:{label:e("richTransactionDetailListingPrice"),value:s},sectionTitle:e("richTransactionDetailListingDetails"),detailTitle:e("richTransactionDetailListed")},COLLECTIBLE_UNLIST:{priceRow:{label:e("richTransactionDetailOriginalListingPrice"),value:s},sectionTitle:e("richTransactionDetailListingDetails"),detailTitle:e("richTransactionDetailUnlisted")},COLLECTIBLE_BID_ITEM:{priceRow:{label:e("richTransactionDetailPrice"),value:s},sectionTitle:e("richTransactionDetailBidDetails"),detailTitle:e("richTransactionDetailBid")},COLLECTIBLE_CANCEL_BID:{priceRow:{label:e("richTransactionDetailPrice"),value:s},sectionTitle:e("richTransactionDetailBidDetails"),detailTitle:e("richTransactionDetailCancelBid")},COLLECTIBLE_BUY_ITEM:{priceRow:{label:e("richTransactionDetailPrice"),value:s},sectionTitle:e("richTransactionDetailPurchaseDetails"),detailTitle:e("richTransactionDetailBought")},COLLECTIBLE_SELL_ITEM:{priceRow:{label:e("richTransactionDetailPrice"),value:s},sectionTitle:e("richTransactionDetailSaleDetails"),detailTitle:e("richTransactionDetailSold")}};d={sections:[{rows:[u,k,C,v]},{title:T[O].sectionTitle,rows:[T[O].priceRow,{label:e("richTransactionDetailItem"),value:c&&l?o.createElement(Pe,{label:c,url:l}):c},{label:e("richTransactionDetailMarketplace"),value:a?.displayName&&a?.logoURI?o.createElement(J,{name:a.displayName,imageURL:a.logoURI}):a?.displayName||""},...y]}],title:T[O].detailTitle,primaryText:{value:c},secondaryText:{value:""},image:I};break}case"CANCEL_TX":{d={sections:[{rows:[u,k,C,v,...y]}],title:e("transactionCancelled"),primaryText:{value:""},secondaryText:{value:""},image:I};break}case"TOKEN_APPROVAL":{let{dapp:a,token:t,isApproved:i}=p,n=a?.displayName||e("historyUnknownDappName"),l=a?.displayName?[{label:e("transactionApproveAppLabel"),value:a?.displayName}]:[],s=P(g(t.id)||""),c=X(t.tokenType)?t.displayName:t.symbol,T=N(x(t,D));d={sections:[{rows:[u,k,C,v]},{title:e("transactionApproveDetailsTitle"),rows:[...l,{label:e("transactionApproveTokenLabel"),value:c||s,onClick:()=>r(T,c||s)},...y]}],title:o.createElement(L,{onClick:()=>r(T,c||s)},e(i?"transactionApproveToken":"transactionRevokeApproveToken",{tokenSymbol:c||""})),primaryText:{value:""},secondaryText:{value:n},image:o.createElement(w,{activityItem:m,size:"medium",onClick:()=>r(T,c||s)})};break}case"COLLECTION_APPROVAL":{let{dapp:a,collection:t,isApproved:i}=p,n=a?.displayName||e("historyUnknownDappName"),l=a?.displayName?[{label:e("transactionApproveAppLabel"),value:a?.displayName}]:[],s=t.displayName;d={sections:[{rows:[u,k,C,v]},{title:e("transactionApproveDetailsTitle"),rows:[...l,{label:e("transactionApproveCollectionLabel"),value:s},...y]}],title:e(i?"transactionApproveToken":"transactionRevokeApproveToken",{tokenSymbol:s}),primaryText:{value:""},secondaryText:{value:n},image:I};break}case"CANCEL_ORDER":{let{dapp:a}=p;d={sections:[{rows:[u,k,C,v,...y]}],title:e("transactionCancelOrder"),primaryText:{value:""},secondaryText:{value:a?.displayName||e("historyUnknownDappName")},image:I};break}case"UNCLASSIFIED_APP_INTERACTION":default:{let{dapp:a}=p,t=a?.displayName||e("historyUnknownDappName");d={sections:[{rows:[u,k,C,v,...y]}],title:e("richTransactionDetailAppInteraction"),primaryText:{value:""},secondaryText:{value:t},image:I};break}}return o.createElement(o.Fragment,null,o.createElement(Se,{...d}),o.createElement(fe,{removeFooterExpansion:!1},o.createElement(Ge,null,o.createElement(q,{onClick:z},e("commandClose")),d.swapAgain&&o.createElement(q,{onClick:()=>ne(d.swapAgain.receiveToken,d.swapAgain.sendToken),theme:"primary"},e("commandSwapAgain")))))},wt=Je;export{Je as ActivityItemDetail,Pe as Link,wt as default};
//# sourceMappingURL=ActivityItemDetail-TZHLVLHG.js.map
