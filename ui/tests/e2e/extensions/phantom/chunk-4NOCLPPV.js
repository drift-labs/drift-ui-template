import{lc as h}from"./chunk-QY5YIVDQ.js";import{m as i}from"./chunk-ZWNJSFU4.js";import{c as a}from"./chunk-MZPVJTUS.js";import{a as I}from"./chunk-F24UB3BO.js";import{$ as y,Cb as c,Y as w,qb as g,vb as U}from"./chunk-VOCOWPRG.js";import{Pc as l,ka as R}from"./chunk-PJ6PRBE2.js";import{c as d}from"./chunk-UTOBJRXZ.js";import{f as m,h as o,n as t}from"./chunk-SVG5OEFH.js";o();t();var u=m(I());var Q=async()=>{let e=i("hasOnboarded"),r=await a(u.default.runtime,e);if("error"in r)throw new Error(r.error.message);return r.result},V=async()=>{let e=i("resetHasOnboarded"),r=await a(u.default.runtime,e);if("error"in r)throw new Error(r.error.message);return r.result},W=async e=>{let r=i("unlockExtension",e),s=await l.startSpan("unlockExtension",()=>a(u.default.runtime,r));if("error"in s)throw new Error(s.error.message);if(!s.result)throw new Error("Missing unlock extension response.");let{isUnlocked:n,migrationResult:f}=s.result;if(n===void 0)throw new Error("Missing isUnlocked in unlock response.");if(f===void 0)throw new Error("Missing migrationResult in unlock response.");switch(f){case"success":await h.invalidateQueries({refetchType:"all"});break;case"no-migration":case"failure":break;default:R(f)}return{isUnlocked:n,migrationResult:f}},X=async()=>{let e=i("IsExtensionUnlocked"),r=await l.startSpan("isExtensionUnlocked",()=>a(u.default.runtime,e));if("error"in r)throw new Error(r.error.message);return r.result},$=async()=>{let e=i("lockExtension"),r=await l.startSpan("lockExtension",()=>a(u.default.runtime,e));if("error"in r)throw new Error(r.error.message);return r.result},z=async e=>{let r=i("setPassword",e),s=await l.startSpan("setPassword",()=>a(u.default.runtime,r));if("error"in s)throw new Error(s.error.message);return s.result},J=async e=>{let r=i("verifyPassword",e),s=await l.startSpan("verifyPassword",()=>a(u.default.runtime,r));if("error"in s)throw new Error(s.error.message);return s.result},K=async(e,r)=>{let s=i("updatePassword",[e,r]),n=await l.startSpan("updatePassword",()=>a(u.default.runtime,s));if("error"in n)throw new Error(n.error.message);return n.result};o();t();var k=()=>{let{data:e}=c();return e?.username};o();t();var P=m(d());o();t();var A=/^https?:\/\/.+$/,x=e=>S(e?.icon),S=e=>e?e.match(A)?{type:g.Image,imageUrl:e}:{type:g.Emoji,unicode:e}:{type:g.Default};var q=()=>{let{data:e}=c();return(0,P.useMemo)(()=>x(e),[e])};o();t();var b=m(d());var T=0,v=e=>e!==null?e.split("@")[T]:null,B=async(e,r)=>{let s=await e.getUser();if(!s)throw new Error("no user");let n=await r.getUserProfile();return{userID:s.userID,username:n?.username??null,email:v(s.email??null)}},D=()=>{let e=w(),r=U(),{data:s={}}=y();return(0,b.useCallback)(async()=>{try{return{...await B(e,r),authFactors:s}}catch{return{userID:null,username:null,email:null,authFactors:s}}},[s,e,r])};o();t();o();t();var E=m(d());var L=()=>{let{data:e}=c();return(0,E.useMemo)(()=>e?.privacyState??"public",[e?.privacyState])};o();t();var M=m(d());var F=()=>{let{data:e}=c();return(0,M.useMemo)(()=>e?.addresses,[e?.addresses])};o();t();export{k as a,q as b,L as c,F as d,D as e,Q as f,V as g,W as h,X as i,$ as j,z as k,J as l,K as m};
//# sourceMappingURL=chunk-4NOCLPPV.js.map
