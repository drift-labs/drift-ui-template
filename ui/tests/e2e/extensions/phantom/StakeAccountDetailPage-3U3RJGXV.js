import{a as _t}from"./chunk-5RNJCHDS.js";import"./chunk-QJICHCC4.js";import"./chunk-62R3RHBC.js";import{a as Ht}from"./chunk-6VBZ34UF.js";import"./chunk-ZPSIMYUC.js";import"./chunk-3W7DN42P.js";import{b as Ot,d as v}from"./chunk-66RATSMU.js";import"./chunk-3CN4PSQF.js";import{o as Ft,p as Mt}from"./chunk-N6BAVOMX.js";import{b as zt}from"./chunk-BV3TS4XT.js";import"./chunk-MSKCA54N.js";import"./chunk-WIVKFT3Y.js";import"./chunk-2DLZSCTQ.js";import"./chunk-DGD53LCE.js";import"./chunk-SAN2LWG5.js";import"./chunk-JVLGNGOV.js";import"./chunk-EMDZTJKZ.js";import"./chunk-26BEY7UU.js";import"./chunk-KHFCJUHU.js";import"./chunk-75HMBX3C.js";import{g as Et,k as T}from"./chunk-3JMYJD4J.js";import"./chunk-FLIG3OXX.js";import"./chunk-IRT22BM2.js";import"./chunk-GDHNPAWS.js";import"./chunk-QCUZPSGD.js";import"./chunk-4NOCLPPV.js";import"./chunk-HRUBPS3N.js";import"./chunk-G46R4HGO.js";import"./chunk-QY5YIVDQ.js";import"./chunk-MUAOONPW.js";import"./chunk-BY77CZR3.js";import"./chunk-CEYX4EEL.js";import{$ as Wt,C as xt,I as bt,J as Dt,R as Pt,S as Tt,W as Bt,_ as Ut,ca as It,ja as Vt,ka as Lt,z as _}from"./chunk-Q2MU5Q7Q.js";import"./chunk-CCUQPG33.js";import{Da as yt,s as ft}from"./chunk-IHXFHG2Y.js";import"./chunk-JAQNMSBC.js";import"./chunk-MYAJJRTU.js";import"./chunk-EBUZAGLB.js";import{na as wt,qa as ht}from"./chunk-QCKHHJ5F.js";import"./chunk-HPK5Q66L.js";import"./chunk-MEINW66A.js";import"./chunk-QMDPT5WS.js";import"./chunk-PQHYTRV5.js";import{a as Nt}from"./chunk-Y6JOYO4T.js";import{db as i,m as c}from"./chunk-FABKKW5E.js";import"./chunk-ZWNJSFU4.js";import"./chunk-MZPVJTUS.js";import{b as St}from"./chunk-JSLOSOZX.js";import{b as H}from"./chunk-GCJPSL4T.js";import"./chunk-RY7HN3SK.js";import"./chunk-YI2NXTPE.js";import"./chunk-TCB6NDII.js";import{Y as vt,Z as At}from"./chunk-R5GARSZH.js";import"./chunk-F24UB3BO.js";import{$a as kt,y as M}from"./chunk-VOCOWPRG.js";import{cb as gt,db as Ct}from"./chunk-F63TUCMM.js";import"./chunk-CJHTJRVG.js";import{Gc as F,Zb as ut,sc as dt}from"./chunk-PJ6PRBE2.js";import{R as lt}from"./chunk-DHKCVHRA.js";import{Ca as mt,Da as pt,X as C,c as ct,cb as k,ya as s}from"./chunk-UTOBJRXZ.js";import"./chunk-3Q6WUW5S.js";import"./chunk-I5GRDOQ7.js";import"./chunk-3KRCODTN.js";import{f as st,h as D,n as P}from"./chunk-SVG5OEFH.js";D();P();var t=st(ct());D();P();var p=st(ct());var ie=c.div`
  display: grid;
  grid-template-columns: 100%;
  grid-template-rows: 47px auto;
  align-items: center;
  justify-content: flex-start;
  background: ${s.colors.legacy.elementBase};
  width: 328px;
  border-radius: 6px;
  margin-top: 24px;
`,re=c.div`
  display: grid;
  gap: 10px;
  grid-template-columns: 33px 1fr auto;
  align-items: center;
  padding: 9px 14px;
  border-bottom: 1px solid ${s.colors.legacy.areaBase};
`,se=c(Ot)``,ce=c.section`
  padding: 14px;
`,le=c.div`
  display: grid;
  grid-template-columns: 1fr 1fr;
  height: 30px;
  align-items: center;
`,ue=c(i)`
  color: ${a=>a.activationState==="active"?s.colors.legacy.spotPositive:a.activationState==="inactive"?s.colors.legacy.spotNegative:a.activationState==="activating"?s.colors.brand.yellowMoon:a.activationState==="deactivating"?s.colors.brand.yellowMoon:s.colors.legacy.textDiminished};
`,de=c(Ht).attrs(()=>({tooltipAlignment:"bottomCenter",iconSize:12,lineHeight:17,fontWeight:400,fontSize:14,noWrap:!0}))``,K=a=>{let{t:e}=C(),{data:u}=Bt(a.validatorKeybaseUsername),d=a.validatorName??a.validatorKeybaseUsername??a.voteAccountPubkey??a.stakeAccountPubkey;return p.default.createElement(ie,null,p.default.createElement(re,null,p.default.createElement(se,{width:28,iconUrl:a.validatorIconUrl??u}),p.default.createElement(i,{textAlign:"left",weight:600,size:16,noWrap:!0},d),p.default.createElement(ue,{activationState:a.status,textAlign:"right",weight:400,size:14,noWrap:!0,textTransform:"capitalize"},a.status??"")),p.default.createElement(ce,null,Object.entries(a.data).map(([r,n])=>p.default.createElement(le,{key:r,onClick:n.onClick},p.default.createElement(de,{info:n.tooltip?p.default.createElement(Mt,null,p.default.createElement(Ft,null,n.tooltip)):null},r==="Stake Account"?e("stakeAccountCardStakeAccount"):"",r==="Balance"?e("stakeAccountCardBalance"):"",r==="Rent Reserve"?e("stakeAccountCardRentReserve"):"",r==="Active Stake"?e("stakeAccountCardActiveStake"):"",r==="Lockup"?e("stakeAccountCardLockup"):"",r==="Rewards"?e("stakeAccountCardRewards"):""),n.node))))};var B=c.div`
  position: relative;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow-y: scroll;
`,U=c.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-grow: 1;
`,j=c.a.attrs({target:"_blank",rel:"noopener noreferrer"})`
  color: ${s.colors.legacy.spotBase};
  text-decoration: none;
  cursor: pointer;
`,x=c.section`
  display: flex;
  gap: 15px;
`,Kt=c.section`
  display: flex;
  gap: 15px;
  margin-top: 24px;
  flex-direction: column;
`,ke=c.div`
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
`,me=5e3,pe=a=>{let{t:e}=C(),{showStakeAccountDeactivateStakeStatusModal:u,showStakeAccountDelegateStakeStatusModal:d,showStakeAccountWithdrawStakeStatusModal:r,closeAllModals:n}=zt(),{data:S}=kt(),A=(0,t.useMemo)(()=>S?.addresses.find(h=>ut.isSolanaNetworkID(h.networkID)),[S]),{solanaPublicKey:b,connection:g,networkID:Q}=(0,t.useMemo)(()=>{let h=A?.address??"",rt=A?.networkID,ne=gt(Ct(rt));return{solanaPublicKey:h,connection:ne,networkID:rt}},[A]),$=It(wt),$t=dt("solana"),{data:qt}=ft({query:{data:$t}}),{data:q}=yt(),W=qt?.usd,f=Ut(g,b),o=f.data?.find(h=>h.pubkey===a.stakeAccountPubkey),I=o?.info.meta.authorized.staker,Yt=o?.lamports??0,Y=parseFloat(o?.info.meta.rentExemptReserve??"0"),Gt=!!o?.inflationReward,{data:Jt=Y}=ht(A),V=!!(q&&new lt(q.totalQuantityString).gt(Jt+me)),G=Vt(),l=Wt(g,o?.pubkey).data,Xt=l?.active??0,Zt=l?.inactive??0,L=Yt-Y-Xt,J=o?.info.stake?.delegation.voter,Rt=Se(g),m=J?Rt.get(J):void 0,X=new Date((o?.info.meta.lockup?.unixTimestamp??0)*1e3),N=Tt(o),z=Dt(l?.state)&&V,E=bt(l?.state)&&!N&&V,te=F("enable-psol-native-convert"),Z=F("enable-psol-native-delayed-convert"),y=$&&te&&E,w=$&&Z&&z,R=Z&&l?.state==="deactivating",{data:ee}=vt(Q),{data:tt}=At(Q,o?.pubkey??""),{pushDetailView:et}=Et(),oe=(0,t.useCallback)(()=>{et(t.default.createElement(_t,null))},[et]),ot=Lt(oe),nt=(0,t.useCallback)(()=>{if(!o)throw new Error("Stake account not found");ot({stakeAccount:o,validatorName:m?.info?.name??"",activationState:l?.state})},[ot,o,m,l]),O=[{key:"viewOnExplorer",label:e("stakeAccountViewViewOnExplorer",{explorer:ee}),onClick:()=>{tt&&self.open(tt,"_blank")}}];o&&(m&&(l?.state==="inactive"||l?.state==="deactivating")&&O.push({key:"restake",label:e("stakeAccountViewRestake"),onClick:()=>{d({stakeAccountPubkey:o.pubkey,voteAccountPubkey:m?.voteAccountPubkey,lamports:l.inactive,onClose:n})}}),L>0&&L>Zt&&O.push({key:"withdrawUnstakedSOL",label:e("stakeAccountViewWithdrawUnstakedSOL"),onClick:()=>{r({stakeAccountPubkey:o.pubkey,amount:L,usdPerSol:W,onClose:n})}}));let at=(0,t.useCallback)(()=>{!o||!I||u({stakeAccountPubkey:o.pubkey,stakeAuthorityPubkey:I,onClose:n})},[o,I,u,n]),it=(0,t.useCallback)(()=>{o&&r({stakeAccountPubkey:o.pubkey,amount:o.lamports,usdPerSol:W,onClose:n})},[o,r,W,n]);return f.isPending?t.default.createElement(B,null,t.default.createElement(Nt,null)):f.isError?t.default.createElement(B,null,t.default.createElement(T,null,e("stakeAccountViewPrimaryText")),t.default.createElement(U,null,t.default.createElement(i,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},f.error?.message??e("stakeAccountViewError"))),t.default.createElement(x,null,t.default.createElement(k,{onClick:n},e("commandClose")))):f.isSuccess&&o?t.default.createElement(B,{canConvertStake:y,canConvertDelayedStake:w},t.default.createElement(T,{items:O},e("stakeAccountViewPrimaryText")),m?t.default.createElement(t.default.Fragment,null,t.default.createElement(U,null,t.default.createElement(jt,{canConvertStake:y,canConvertDelayedStake:w,hasValidator:!!m,durationUntilEpochEnds:G,isDeactivating:R}),t.default.createElement(K,{stakeAccountPubkey:o.pubkey,voteAccountPubkey:m?.voteAccountPubkey,validatorName:m?.info?.name,validatorKeybaseUsername:m?.info?.keybaseUsername,validatorIconUrl:m?.info?.iconUrl,status:l?.state,data:{"Stake Account":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},M(o.pubkey))},Balance:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.lamports))},"Rent Reserve":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.info.meta.rentExemptReserve))},"Active Stake":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,l?.active))},Lockup:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},N?H(X):"\u2013")},Rewards:Gt?{node:t.default.createElement(ke,null,t.default.createElement(i,{color:s.colors.legacy.spotPositive,textAlign:"right",weight:500,size:14,noWrap:!0},"+",t.default.createElement(v,null,o?.inflationReward))),tooltip:e("stakeAccountCardRewardsTooltip")}:{node:t.default.createElement(i,{color:s.colors.legacy.textDiminished,textAlign:"right",weight:500,size:14,noWrap:!0},"\u2013")}}}),V?null:t.default.createElement(mt,{marginY:"base"},t.default.createElement(pt,{color:"spotNegative",children:e("stakeAccountInsufficientFunds")}))),t.default.createElement(Qt,{canConvertStake:y,canUnstake:z,canWithdrawStake:E,canConvertDelayedStake:w,onClose:n,onUnstake:at,onWithdrawStake:it,onConvertStake:nt})):t.default.createElement(t.default.Fragment,null,t.default.createElement(U,null,t.default.createElement(jt,{canConvertStake:y,canConvertDelayedStake:w,hasValidator:!!m,durationUntilEpochEnds:G,isDeactivating:R}),t.default.createElement(K,{stakeAccountPubkey:o.pubkey,status:l?.state,data:{"Stake Account":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},M(o.pubkey))},Balance:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.lamports))},"Rent Reserve":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,o.info.meta.rentExemptReserve))},"Active Stake":{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},t.default.createElement(v,null,l?.active))},Lockup:{node:t.default.createElement(i,{textAlign:"right",weight:500,size:14,noWrap:!0},N?H(X):"\u2013")}}})),t.default.createElement(Qt,{canUnstake:z,canWithdrawStake:E,canConvertStake:y,canConvertDelayedStake:w,onClose:n,onUnstake:at,onWithdrawStake:it,onConvertStake:nt}))):t.default.createElement(B,null,t.default.createElement(T,null,e("stakeAccountViewPrimaryText")),t.default.createElement(U,null,t.default.createElement(i,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},e("stakeAccountViewStakeNotFound"))),t.default.createElement(x,null,t.default.createElement(k,{onClick:n},e("commandClose"))))},to=pe,jt=({canConvertStake:a,canConvertDelayedStake:e,isDeactivating:u,hasValidator:d,durationUntilEpochEnds:r})=>{let{t:n}=C(),S=(0,t.useMemo)(()=>a?t.default.createElement(t.default.Fragment,null,n("stakeAccountViewStakeInactiveToPSOL.part1")," ",t.default.createElement(j,{href:xt},n("stakeAccountViewStakeInactiveToPSOL.part2"))):u?n("stakeAccountViewStakeDeactivatingToPSOL",{durationUntilEpochEnds:r}):e?n("convertToPSOLDelayDisclaimer",{durationUntilEpochEnds:r}):d?t.default.createElement(St,{i18nKey:"stakeAccountViewSOLCurrentlyStakedInterpolated"},"Your SOL is currently staked with a validator. You'll need to unstake to ",t.default.createElement("br",null),"access these funds. ",t.default.createElement(j,{href:_},"Learn more")):t.default.createElement(t.default.Fragment,null,n("stakeAccountViewStakeInactive.part1")," ",t.default.createElement(j,{href:_},n("stakeAccountViewStakeInactive.part2"))),[a,e,u,d,r,n]);return t.default.createElement(i,{size:16,color:s.colors.legacy.textDiminished,lineHeight:20},S)},Qt=a=>{let{t:e}=C(),{canUnstake:u,canWithdrawStake:d,canConvertStake:r,canConvertDelayedStake:n,onClose:S,onUnstake:A,onWithdrawStake:b,onConvertStake:g}=a;return r?t.default.createElement(Kt,null,t.default.createElement(k,{background:"spot",onClick:g},e("convertToPhantomLST")),t.default.createElement(x,null,t.default.createElement(k,{onClick:S},e("commandClose")),t.default.createElement(k,{onClick:b},e("stakeAccountViewWithdrawStake")))):n?t.default.createElement(Kt,null,t.default.createElement(k,{background:"spot",onClick:g},e("convertToPhantomLST")),t.default.createElement(x,null,t.default.createElement(k,{onClick:S},e("commandClose")),t.default.createElement(k,{onClick:A},e("stakeAccountViewActionButtonUnstake")))):t.default.createElement(x,null,t.default.createElement(k,{onClick:S},e("commandClose")),d&&t.default.createElement(k,{onClick:b},e("stakeAccountViewWithdrawStake")),u&&t.default.createElement(k,{background:"spot",onClick:A},e("stakeAccountViewActionButtonUnstake")))},Se=a=>{let e=Pt(a),u=e.results??[],d=(0,t.useRef)(u);return d.current=u,(0,t.useMemo)(()=>new Map(d.current.map(n=>[n.voteAccountPubkey,n])),[e.dataUpdatedAt,d])};export{pe as StakeAccountDetailPage,to as default};
//# sourceMappingURL=StakeAccountDetailPage-3U3RJGXV.js.map
