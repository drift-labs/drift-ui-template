import{Ea as Y,Pc as z,Zb as J}from"./chunk-PJ6PRBE2.js";import{D as f}from"./chunk-DHKCVHRA.js";import{c as ht,l as n}from"./chunk-UTOBJRXZ.js";import{c as ut,d as yt,f as M,h as o,i as g,n as c}from"./chunk-SVG5OEFH.js";var N=ut((X,B)=>{o();c();(function(e,t){"use strict";typeof define=="function"&&define.amd?define(t):typeof B=="object"&&B.exports?B.exports=t():e.log=t()})(X,function(){"use strict";var e=function(){},t="undefined",a=typeof self!==t&&typeof self.navigator!==t&&/Trident\/|MSIE /.test(self.navigator.userAgent),s=["trace","debug","info","warn","error"],r={},l=null;function h(d,u){var i=d[u];if(typeof i.bind=="function")return i.bind(d);try{return Function.prototype.bind.call(i,d)}catch{return function(){return Function.prototype.apply.apply(i,[d,arguments])}}}function E(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function it(d){return d==="debug"&&(d="log"),typeof console===t?!1:d==="trace"&&a?E:console[d]!==void 0?h(console,d):console.log!==void 0?h(console,"log"):e}function w(){for(var d=this.getLevel(),u=0;u<s.length;u++){var i=s[u];this[i]=u<d?e:this.methodFactory(i,d,this.name)}if(this.log=this.debug,typeof console===t&&d<this.levels.SILENT)return"No console available for logging"}function ot(d){return function(){typeof console!==t&&(w.call(this),this[d].apply(this,arguments))}}function ct(d,u,i){return it(d)||ot.apply(this,arguments)}function j(d,u){var i=this,C,k,v,m="loglevel";typeof d=="string"?m+=":"+d:typeof d=="symbol"&&(m=void 0);function dt(p){var y=(s[p]||"silent").toUpperCase();if(!(typeof i===t||!m)){try{i.localStorage[m]=y;return}catch{}try{i.document.cookie=encodeURIComponent(m)+"="+y+";"}catch{}}}function K(){var p;if(!(typeof i===t||!m)){try{p=i.localStorage[m]}catch{}if(typeof p===t)try{var y=i.document.cookie,x=encodeURIComponent(m),W=y.indexOf(x+"=");W!==-1&&(p=/^([^;]+)/.exec(y.slice(W+x.length+1))[1])}catch{}return i.levels[p]===void 0&&(p=void 0),p}}function pt(){if(!(typeof i===t||!m)){try{i.localStorage.removeItem(m)}catch{}try{i.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function b(p){var y=p;if(typeof y=="string"&&i.levels[y.toUpperCase()]!==void 0&&(y=i.levels[y.toUpperCase()]),typeof y=="number"&&y>=0&&y<=i.levels.SILENT)return y;throw new TypeError("log.setLevel() called with invalid level: "+p)}i.name=d,i.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},i.methodFactory=u||ct,i.getLevel=function(){return v??k??C},i.setLevel=function(p,y){return v=b(p),y!==!1&&dt(v),w.call(i)},i.setDefaultLevel=function(p){k=b(p),K()||i.setLevel(p,!1)},i.resetLevel=function(){v=null,pt(),w.call(i)},i.enableAll=function(p){i.setLevel(i.levels.TRACE,p)},i.disableAll=function(p){i.setLevel(i.levels.SILENT,p)},i.rebuild=function(){if(l!==i&&(C=b(l.getLevel())),w.call(i),l===i)for(var p in r)r[p].rebuild()},C=b(l?l.getLevel():"WARN");var G=K();G!=null&&(v=b(G)),w.call(i)}l=new j,l.getLogger=function(u){if(typeof u!="symbol"&&typeof u!="string"||u==="")throw new TypeError("You must supply a name when creating a logger.");var i=r[u];return i||(i=r[u]=new j(u,l.methodFactory)),i};var lt=typeof self!==t?self.log:void 0;return l.noConflict=function(){return typeof self!==t&&self.log===l&&(self.log=lt),l},l.getLoggers=function(){return r},l.default=l,l})});o();c();o();c();var V=mt;function mt(e){var t,a,s;if(e){if(Array.isArray(e)){for(t=[],a=e.length,s=0;s<a;s++){var r=e[s];r!=null&&t.push(r)}return t}if(typeof e=="object"){t={};var l=Object.keys(e);for(a=l.length,s=0;s<a;s++){var h=l[s],E=e[h];E!=null&&(t[h]=E)}return t}}}var Z=M(N());o();c();var ft=n.object({chainType:n.union([n.literal("bip122_p2wpkh"),n.literal("bip122_p2tr")]),chainName:n.literal("bitcoin"),networkId:n.union([n.literal("128"),n.literal("239")])}),Dt=n.object({chainType:n.literal("eip155"),chainName:n.literal("ethereum"),networkId:n.union([n.literal("1"),n.literal("5"),n.literal("11155111")])}),Tt=n.object({chainType:n.literal("eip155"),chainName:n.literal("polygon"),networkId:n.union([n.literal("137"),n.literal("80002")])}),St=n.object({chainType:n.literal("eip155"),chainName:n.literal("base"),networkId:n.union([n.literal("8453"),n.literal("84532")])}),At=n.object({chainType:n.literal("eip155"),chainName:n.literal("arbitrum"),networkId:n.union([n.literal("42161"),n.literal("421614")])}),vt=n.object({chainType:n.literal("eip155"),chainName:n.literal("monad"),networkId:n.union([n.literal("143"),n.literal("10143"),n.literal("41454")])}),H=n.object({chainType:n.literal("solana"),chainName:n.literal("solana"),networkId:n.union([n.literal("mainnet"),n.literal("testnet"),n.literal("devnet"),n.literal("localnet")])}),It=n.object({chainType:n.literal("sui"),chainName:n.literal("sui"),networkId:n.union([n.literal("mainnet"),n.literal("testnet")])}),Q=n.union([ft,Dt,St,At,vt,Tt,H,It]);var U=()=>["t","y","1","true","yes"].some(e=>g.DISABLE_ANALYTICS?.toLowerCase()===e)??!1;function L(e){if(!e)return;let t=e.data??{},a=e.data?.asset??{};try{t=JSON.parse(JSON.stringify(t)),a=JSON.parse(JSON.stringify(a))}catch(r){Z.default.error("Failed to parse analytics payload",r);return}let s={...t,...e.action?{action:e.action}:{},...a&&typeof a=="object"?a:{},...e.type?{type:e.type}:{}};if("chainID"in s&&!("chainType"in s)&&!("chainName"in s)&&!("networkId"in s)){let r=Y.safeParse(s.chainID);r.success&&Object.assign(s,tt(r.data))}return V(s)}function tt(e){let t=J.getChainDefinition(e);return Q.parse({chainType:t.addressTypes[0],chainName:t.id,networkId:t.networks[e].value.toString()})}o();c();o();c();var F=g.RUDDERSTACK_DATAPLANE??g.VITE_RUDDERSTACK_DATAPLANE??"https://data.phantom.app",wt=g.RUDDERSTACK_KEY_EXT,bt=g.RUDDERSTACK_KEY_WEB;o();c();function P(e,{action:t,data:a}){let s={action:t,data:a};return e.capture("actionApprovedByUser",s)}function _(e,{action:t,data:a}){let s={action:t,data:{...a,chainId:a.chainId??a.networkId}};return e.capture("actionDeniedByUser",s)}function O(e,{action:t,data:a}){let s={type:"transaction",data:{...a,chainId:a.chainId??a.networkId},action:t};return(!s.data.ids||s.data.ids.length===0)&&z.captureError(new Error("No ids found in transactionSubmitted payload"),"provider"),e.capture("transactionSubmitted",s)}function Pt(e,{action:t,data:a}){let s={data:{...a,chainId:a.chainId??a.networkId},action:t};return e.capture("transactionStatus",s)}function q(e,t){let a={type:"message",data:{...t,chainId:t.chainId??t.networkId}};return e.capture("transactionSubmitted",a)}var D=class{analytics;action;constructor(t,a){this.analytics=t,this.action=a}approved=t=>{P(this.analytics,{action:this.action,data:{...t,chainId:t.chainId??t.networkId}})};denied=async t=>{_(this.analytics,{action:this.action,data:{...t,chainId:t.chainId??t.networkId}})};submittedTransaction=async(t,a)=>{O(this.analytics,{action:this.action,data:{...a,ids:a.ids??[t],chainId:a.chainId??a.networkId}})};signedMessage=async t=>{q(this.analytics,{...t,chainId:t.chainId??t.networkId})};transactionStatus=async(t,a)=>{a.ids||(a.ids=[t]),Pt(this.analytics,{action:this.action,data:{...a,chainId:a.chainId??a.networkId}})}};async function et(e,t,a){let{origin:s}=t;switch(e.method){case"eth_sendTransaction":{let[r]=e.params,l=f(r.chainId);return l?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${r.chainId}) for method "${e.method}"`}:{success:!0,data:{...l,origin:s,method:e.method,gas:r.gas,maxFeePerGas:r.maxFeePerGas,maxPriorityFeePerGas:r.maxPriorityFeePerGas,ids:a}}}case"sol_signTransaction":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signTransaction",ids:a}}}case"sol_signAndSendTransaction":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signAndSendTransaction",ids:a}}}case"sol_signAndSendAllTransactions":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signAndSendAllTransactions",ids:a}}}case"sol_signAllTransactions":{let r=f(t.chainId);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${t.chainId}) for method "${e.method}"`}:{success:!0,data:{...r,origin:s,method:"signAllTransactions",ids:a}}}}}async function at(e,t){let{origin:a}=t;switch(e.method){case"eth_sign":case"personal_sign":{let s=t.chainId,r=f(s);return r?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${s}) for method "${e.method}"`}:{success:!0,data:{...r,method:e.method,origin:a}}}case"eth_signTypedData":{let[s]=e.params,r=t.chainId;for(let h of s)if(h.name==="chainId"){r=h.value;break}let l=f(r);return l?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${r}) for method "${e.method}"`}:{success:!0,data:{...l,method:e.method,origin:a}}}case"eth_signTypedData_v3":{let[s,r]=e.params,l=r.domain.chainId??t.chainId,h=f(l);return h?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${l}) for method "${e.method}"`}:{success:!0,data:{...h,method:e.method,origin:a}}}case"eth_signTypedData_v4":{let[s,r]=e.params,l=t.chainId;(typeof r.domain.chainId=="string"||typeof r.domain.chainId=="number")&&(l=r.domain.chainId);let h=f(l);return h?.chainType!=="eip155"?{success:!1,error:`Unsupported Ethereum chain ID (${l}) for method "${e.method}"`}:{success:!0,data:{...h,method:e.method,origin:a}}}case"sol_signIn":case"sol_signMessage":{let s=t.chainId,r=f(s);return r?.chainType!=="solana"?{success:!1,error:`Unsupported Solana chain ID (${s}) for method "${e.method}"`}:{success:!0,data:{...r,method:e.method==="sol_signIn"?"signIn":"signMessage",origin:a}}}}}o();c();o();c();var T=M(N());var S="[Analytics Log]",I=class{storage;constructor(t){this.storage=t}async capture(t,a){T.default.debug(S,"Capture Event:",t,L(a))}async addUserProperties(t){T.default.debug(S,"User Properties:",JSON.stringify(t))}async identify(t,a){T.default.debug(S,"Identify, id:",t," traits:",a)}async getDeviceId(){return"mock-device-id"}setDeviceId(t){T.default.debug(S,`SetDeviceId: ${t}`)}async getAnonymousId(){return"mock-anonymous-id"}async setAnalyticsOptedOut(t){T.default.debug(S,`SetAnalyticsOptedOut: ${t}`)}async setDisplayLanguage(t){T.default.debug(S,`SetDisplayLanguage: ${t}`)}screen(t,a){T.default.debug(S,`Screen: ${t}`,a)}page(t,a,s,r){T.default.debug(S,`Page: ${t}`,a,s,r)}rudderClient};var nt=()=>F,_t=({storage:e,rudderStackKey:t,createAnalytics:a})=>{if(!t)throw new Error("RUDDERSTACK_KEY_[*] env variables required.");let s=nt();if(!s)throw new Error("[*]_RUDDERSTACK_DATAPLANE env variables required.");return U()?new I(e):a(t,s)};o();c();o();c();var Et="burn",st=e=>new D(e,Et);o();c();var Ct="send",rt=e=>new D(e,Ct);var $={};yt($,{action:()=>R,createDappAnalytics:()=>xt,userApprovedAction:()=>Bt,userDeniedAction:()=>Rt});o();c();var R="dapp",xt=e=>new D(e,R);async function Bt(e,t){return await P(e,{action:R,data:{...t,chainId:t.networkId}})}async function Rt(e,t){return await _(e,{action:R,data:{...t,chainId:t.networkId}})}var kt=e=>({send:rt(e),burn:st(e)});o();c();async function A(){}var Mt=()=>({capture:A,addUserProperties:A,identify:A,getDeviceId:async()=>"",setDeviceId:A,setAnalyticsOptedOut:A,setDisplayLanguage:A,screen:A,page:A,rudderClient:{}});o();c();o();c();o();c();function Nt(e){return new Promise(t=>setTimeout(t,e))}var Ut=M(ht());export{Nt as a,wt as b,O as c,q as d,D as e,et as f,at as g,L as h,tt as i,_t as j,$ as k,kt as l,Mt as m};
//# sourceMappingURL=chunk-CJHTJRVG.js.map
