import{Ab as am,Ad as wm,Bb as sm,Bd as Sm,Cd as xm,Db as Yb,Dd as Mm,Ea as Xh,Ed as Em,Fa as $r,Fb as Ar,Ga as Nn,Gb as cm,Hb as lt,Ib as zs,Jb as um,Kb as lm,Kc as gm,Kd as Tm,Lb as Fs,Ld as Hs,Mb as Xb,Md as ml,Nb as ew,Nd as Pm,Od as ci,Pb as tw,Pc as G,Pd as rw,Qd as Im,Rd as li,Sb as fm,Sd as km,Tb as Kt,Td as yl,Ub as qs,Ud as Cm,Vc as hl,Vd as gl,Wb as dm,Wd as _m,X as $h,Xd as Rm,Yb as pl,Yc as vm,Yd as $s,Zb as ie,_ as mt,_d as Gt,ad as le,b as Vh,ba as To,c as Dh,d as $b,dc as pm,dd as Am,f as Nh,g as Jb,ga as ka,gb as em,ha as ll,ia as fl,ja as Gh,jd as me,ka as He,la as Jh,ld as pe,ma as Qh,na as Zh,nb as tm,oa as Yh,ob as dl,od as et,pa as Ca,pb as $t,qb as It,qc as hm,rb as Ls,rc as Io,rd as si,sb as Fi,sc as mm,sd as js,tb as rm,ua as Po,ub as I,vb as nm,wb as im,wc as ym,xa as _a,xb as om,xc as Ws,yb as Zb,yd as bm,za as Ht,zb as Ln}from"./chunk-PJ6PRBE2.js";import{b as Uh,c as Gb,e as Ia,g as Qb,i as Eo,p as Lh,r as zh,s as Fh,t as qh,w as Wh,x as jh}from"./chunk-DHKCVHRA.js";import{S as ui,X as zn,c as vt,l as y,p as Hh,r as Ns,va as nw}from"./chunk-UTOBJRXZ.js";import{c as se,d as jb,f as ne,h as l,i as M,j as Hb,l as Un,m as Buffer,n as f}from"./chunk-SVG5OEFH.js";var Ko=se(tc=>{"use strict";l();f();Object.defineProperty(tc,"__esModule",{value:!0});tc.AppAuthError=void 0;var Pw=function(){function e(t,r){this.message=t,this.extras=r}return e}();tc.AppAuthError=Pw});var rc=se(cn=>{"use strict";l();f();Object.defineProperty(cn,"__esModule",{value:!0});cn.DefaultCrypto=cn.textEncodeLite=cn.urlSafe=cn.bufferToString=void 0;var Iw=Hb(),Hm=Ko(),$m=typeof self<"u"&&!!self.crypto,kw=$m&&!!self.crypto.subtle,El="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function Gm(e){for(var t=[],r=0;r<e.byteLength;r+=1){var n=e[r]%El.length;t.push(El[n])}return t.join("")}cn.bufferToString=Gm;function Jm(e){var t=Iw.fromByteArray(new Uint8Array(e));return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}cn.urlSafe=Jm;function Qm(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}cn.textEncodeLite=Qm;var Cw=function(){function e(){}return e.prototype.generateRandom=function(t){var r=new Uint8Array(t);if($m)self.crypto.getRandomValues(r);else for(var n=0;n<t;n+=1)r[n]=Math.random()*El.length|0;return Gm(r)},e.prototype.deriveChallenge=function(t){return t.length<43||t.length>128?Promise.reject(new Hm.AppAuthError("Invalid code length.")):kw?new Promise(function(r,n){self.crypto.subtle.digest("SHA-256",Qm(t)).then(function(i){return r(Jm(new Uint8Array(i)))},function(i){return n(i)})}):Promise.reject(new Hm.AppAuthError("window.crypto.subtle is unavailable."))},e}();cn.DefaultCrypto=Cw});var Tl=se(ar=>{"use strict";l();f();Object.defineProperty(ar,"__esModule",{value:!0});ar.IS_PROFILE=ar.IS_LOG=ar.setFlag=ar.Flags=void 0;ar.Flags={IS_LOG:!0,IS_PROFILE:!1};function _w(e,t){ar.Flags[e]=t}ar.setFlag=_w;ar.IS_LOG=ar.Flags.IS_LOG,ar.IS_PROFILE=ar.Flags.IS_PROFILE});var Da=se(di=>{"use strict";l();f();var Pl=di&&di.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(di,"__esModule",{value:!0});di.profile=di.log=void 0;var Zm=Tl();function Il(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Zm.Flags.IS_LOG){var n=t?t.length:0;n>0?console.log.apply(console,Pl([e],t,!1)):console.log(e)}}di.log=Il;var Rw=typeof self<"u"&&!!self.performance&&!!console.profile;function Kw(e,t,r){return Zm.Flags.IS_PROFILE?Bw(e,t,r):r}di.profile=Kw;function Bw(e,t,r){var n=r.value,i=n.name;return i||(i="anonymous function"),Rw?r.value=function(a){console.profile(i);var u=self.performance.now(),d=n.call.apply(n,Pl([this||self],a,!1)),g=self.performance.now()-u;return console.log("".concat(i," took ").concat(g," ms")),console.profileEnd(),d}:r.value=function(a){Il("Profile start ".concat(i));var u=Date.now(),d=n.call.apply(n,Pl([this||self],a,!1)),g=Date.now()-u;return Il("Profile end ".concat(i," took ").concat(g," ms.")),d},r}});var kl=se(nc=>{"use strict";l();f();Object.defineProperty(nc,"__esModule",{value:!0});nc.AuthorizationRequest=void 0;var Ow=rc(),Vw=Da(),Dw=10,Uw=function(e){return e.generateRandom(Dw)},Nw=function(){function e(t,r,n){r===void 0&&(r=new Ow.DefaultCrypto),n===void 0&&(n=!0),this.crypto=r,this.usePkce=n,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||Uw(r),this.extras=t.extras,this.internal=t.internal}return e.prototype.setupCodeVerifier=function(){var t=this;if(this.usePkce){var r=this.crypto.generateRandom(128),n=this.crypto.deriveChallenge(r).catch(function(i){(0,Vw.log)("Unable to generate PKCE challenge. Not using PKCE",i)});return n.then(function(i){i&&(t.internal=t.internal||{},t.internal.code_verifier=r,t.extras=t.extras||{},t.extras.code_challenge=i,t.extras.code_challenge_method="S256")})}else return Promise.resolve()},e.prototype.toJson=function(){var t=this;return this.setupCodeVerifier().then(function(){return{response_type:t.responseType,client_id:t.clientId,redirect_uri:t.redirectUri,scope:t.scope,state:t.state,extras:t.extras,internal:t.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();nc.AuthorizationRequest=Nw});var Ym=se(ic=>{"use strict";l();f();Object.defineProperty(ic,"__esModule",{value:!0});ic.requireValidUrl=void 0;var Lw=Ko();function zw(e){try{return new URL(e),e}catch{throw new Lw.AppAuthError("Invalid input url ".concat(e))}}ic.requireValidUrl=zw});var _l=se(Wn=>{"use strict";l();f();Object.defineProperty(Wn,"__esModule",{value:!0});Wn.AuthorizationRequestHandler=Wn.BUILT_IN_PARAMETERS=Wn.AuthorizationNotifier=void 0;var Cl=Da(),Fw=Ym(),qw=function(){function e(){this.listener=null}return e.prototype.setAuthorizationListener=function(t){this.listener=t},e.prototype.onAuthorizationComplete=function(t,r,n){this.listener&&this.listener(t,r,n)},e}();Wn.AuthorizationNotifier=qw;Wn.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var Ww=function(){function e(t,r){this.utils=t,this.crypto=r,this.notifier=null}return e.prototype.buildRequestUrl=function(t,r){var n={redirect_uri:r.redirectUri,client_id:r.clientId,response_type:r.responseType,state:r.state,scope:r.scope};if(r.extras)for(var i in r.extras)r.extras.hasOwnProperty(i)&&Wn.BUILT_IN_PARAMETERS.indexOf(i)<0&&(n[i]=r.extras[i]);var a=this.utils.stringify(n),u=(0,Fw.requireValidUrl)(t.authorizationEndpoint),d="".concat(u,"?").concat(a);return d},e.prototype.completeAuthorizationRequestIfPossible=function(){var t=this;return(0,Cl.log)("Checking to see if there is an authorization response to be delivered."),this.notifier||(0,Cl.log)(`Notifier is not present on AuthorizationRequest handler.
          No delivery of result will be possible`),this.completeAuthorizationRequest().then(function(r){r||(0,Cl.log)("No result is available yet."),r&&t.notifier&&t.notifier.onAuthorizationComplete(r.request,r.response,r.error)})},e.prototype.setAuthorizationNotifier=function(t){return this.notifier=t,this},e}();Wn.AuthorizationRequestHandler=Ww});var Rl=se(Bo=>{"use strict";l();f();Object.defineProperty(Bo,"__esModule",{value:!0});Bo.AuthorizationError=Bo.AuthorizationResponse=void 0;var jw=function(){function e(t){this.code=t.code,this.state=t.state}return e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();Bo.AuthorizationResponse=jw;var Hw=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri,this.state=t.state}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();Bo.AuthorizationError=Hw});var ac=se(Sr=>{"use strict";l();f();var Bl=Sr&&Sr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Sr,"__esModule",{value:!0});Sr.TestRequestor=Sr.FetchRequestor=Sr.JQueryRequestor=Sr.Requestor=void 0;var Kl=Ko(),oc=function(){function e(){}return e}();Sr.Requestor=oc;var $w=function(e){Bl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){var n=$.ajax(r);return new Promise(function(i,a){n.then(function(u,d,g){i(u)},function(u,d,g){a(new Kl.AppAuthError(g))})})},t}(oc);Sr.JQueryRequestor=$w;var Gw=function(e){Bl(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.xhr=function(r){if(!r.url)return Promise.reject(new Kl.AppAuthError("A URL must be provided."));var n=new URL(r.url),i={};if(i.method=r.method,i.mode="cors",r.data)if(r.method&&r.method.toUpperCase()==="POST")i.body=r.data;else{var a=new URLSearchParams(r.data);a.forEach(function(g,S){n.searchParams.append(S,g)})}if(i.headers={},r.headers)for(var u in r.headers)r.headers.hasOwnProperty(u)&&(i.headers[u]=r.headers[u]);var d=r.dataType&&r.dataType.toLowerCase()==="json";return d&&(i.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(n.toString(),i).then(function(g){if(g.status>=200&&g.status<300){var S=g.headers.get("content-type");return d||S&&S.indexOf("application/json")!==-1?g.json():g.text()}else return Promise.reject(new Kl.AppAuthError(g.status.toString(),g.statusText))})},t}(oc);Sr.FetchRequestor=Gw;var Jw=function(e){Bl(t,e);function t(r){var n=e.call(this)||this;return n.promise=r,n}return t.prototype.xhr=function(r){return this.promise},t}(oc);Sr.TestRequestor=Jw});var Xm=se(sc=>{"use strict";l();f();Object.defineProperty(sc,"__esModule",{value:!0});sc.AuthorizationServiceConfiguration=void 0;var Qw=ac(),Zw=".well-known",Yw="openid-configuration",Xw=function(){function e(t){this.authorizationEndpoint=t.authorization_endpoint,this.tokenEndpoint=t.token_endpoint,this.revocationEndpoint=t.revocation_endpoint,this.userInfoEndpoint=t.userinfo_endpoint,this.endSessionEndpoint=t.end_session_endpoint}return e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,r){var n="".concat(t,"/").concat(Zw,"/").concat(Yw),i=r||new Qw.JQueryRequestor;return i.xhr({url:n,dataType:"json",method:"GET"}).then(function(a){return new e(a)})},e}();sc.AuthorizationServiceConfiguration=Xw});var uc=se(cc=>{"use strict";l();f();Object.defineProperty(cc,"__esModule",{value:!0});cc.BasicQueryStringUtils=void 0;var eS=function(){function e(){}return e.prototype.parse=function(t,r){return r?this.parseQueryString(t.hash):this.parseQueryString(t.search)},e.prototype.parseQueryString=function(t){var r={};t=t.trim().replace(/^(\?|#|&)/,"");for(var n=t.split("&"),i=0;i<n.length;i+=1){var a=n[i],u=a.split("=");if(u.length>=2){var d=decodeURIComponent(u.shift()),g=u.length>0?u.join("="):null;g&&(r[d]=decodeURIComponent(g))}}return r},e.prototype.stringify=function(t){var r=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&r.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n])));return r.join("&")},e}();cc.BasicQueryStringUtils=eS});var Ol=se(pi=>{"use strict";l();f();var tS=pi&&pi.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(pi,"__esModule",{value:!0});pi.LocalStorageBackend=pi.StorageBackend=void 0;var e0=function(){function e(){}return e}();pi.StorageBackend=e0;var rS=function(e){tS(t,e);function t(r){var n=e.call(this)||this;return n.storage=r||self.localStorage,n}return t.prototype.getItem=function(r){var n=this;return new Promise(function(i,a){var u=n.storage.getItem(r);i(u||null)})},t.prototype.removeItem=function(r){var n=this;return new Promise(function(i,a){n.storage.removeItem(r),i()})},t.prototype.clear=function(){var r=this;return new Promise(function(n,i){r.storage.clear(),n()})},t.prototype.setItem=function(r,n){var i=this;return new Promise(function(a,u){i.storage.setItem(r,n),a()})},t}(e0);pi.LocalStorageBackend=rS});var n0=se(Oo=>{"use strict";l();f();var nS=Oo&&Oo.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.RedirectRequestHandler=void 0;var iS=kl(),oS=_l(),t0=Rl(),aS=rc(),lc=Da(),sS=uc(),cS=Ol(),Vl=function(e){return"".concat(e,"_appauth_authorization_request")},r0=function(e){return"".concat(e,"_appauth_authorization_service_configuration")},Dl="appauth_current_authorization_request",uS=function(e){nS(t,e);function t(r,n,i,a){r===void 0&&(r=new cS.LocalStorageBackend),n===void 0&&(n=new sS.BasicQueryStringUtils),i===void 0&&(i=self.location),a===void 0&&(a=new aS.DefaultCrypto);var u=e.call(this,n,a)||this;return u.storageBackend=r,u.locationLike=i,u}return t.prototype.performAuthorizationRequest=function(r,n){var i=this,a=this.crypto.generateRandom(10),u=Promise.all([this.storageBackend.setItem(Dl,a),n.toJson().then(function(d){return i.storageBackend.setItem(Vl(a),JSON.stringify(d))}),this.storageBackend.setItem(r0(a),JSON.stringify(r.toJson()))]);u.then(function(){var d=i.buildRequestUrl(r,n);(0,lc.log)("Making a request to ",n,d),i.locationLike.assign(d)})},t.prototype.completeAuthorizationRequest=function(){var r=this;return this.storageBackend.getItem(Dl).then(function(n){return n?r.storageBackend.getItem(Vl(n)).then(function(i){return JSON.parse(i)}).then(function(i){return new iS.AuthorizationRequest(i)}).then(function(i){var a="".concat(r.locationLike.origin).concat(r.locationLike.pathname),u=r.utils.parse(r.locationLike,!0),d=u.state,g=u.code,S=u.error;(0,lc.log)("Potential authorization request ",a,u,d,g,S);var E=d===i.state,T=null,P=null;if(E){if(S){var C=u.error_uri,K=u.error_description;P=new t0.AuthorizationError({error:S,error_description:K,error_uri:C,state:d})}else T=new t0.AuthorizationResponse({code:g,state:d});return Promise.all([r.storageBackend.removeItem(Dl),r.storageBackend.removeItem(Vl(n)),r.storageBackend.removeItem(r0(n))]).then(function(){return(0,lc.log)("Delivering authorization response"),{request:i,response:T,error:P}})}else return(0,lc.log)("Mismatched request (state and request_uri) dont match."),Promise.resolve(null)}):null})},t}(oS.AuthorizationRequestHandler);Oo.RedirectRequestHandler=uS});var i0=se(fc=>{"use strict";l();f();Object.defineProperty(fc,"__esModule",{value:!0});fc.RevokeTokenRequest=void 0;var lS=function(){function e(t){this.token=t.token,this.tokenTypeHint=t.token_type_hint,this.clientId=t.client_id,this.clientSecret=t.client_secret}return e.prototype.toJson=function(){var t={token:this.token};return this.tokenTypeHint&&(t.token_type_hint=this.tokenTypeHint),this.clientId&&(t.client_id=this.clientId),this.clientSecret&&(t.client_secret=this.clientSecret),t},e.prototype.toStringMap=function(){var t=this.toJson();return t},e}();fc.RevokeTokenRequest=lS});var o0=se(hi=>{"use strict";l();f();Object.defineProperty(hi,"__esModule",{value:!0});hi.TokenRequest=hi.GRANT_TYPE_REFRESH_TOKEN=hi.GRANT_TYPE_AUTHORIZATION_CODE=void 0;hi.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code";hi.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var fS=function(){function e(t){this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.grantType=t.grant_type,this.code=t.code,this.refreshToken=t.refresh_token,this.extras=t.extras}return e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var t={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(t.code=this.code),this.refreshToken&&(t.refresh_token=this.refreshToken),this.extras)for(var r in this.extras)this.extras.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=this.extras[r]);return t},e}();hi.TokenRequest=fS});var Ul=se(un=>{"use strict";l();f();Object.defineProperty(un,"__esModule",{value:!0});un.TokenError=un.TokenResponse=un.nowInSeconds=void 0;var dS=10*60*-1,pS=function(){return Math.round(new Date().getTime()/1e3)};un.nowInSeconds=pS;var hS=function(){function e(t){this.accessToken=t.access_token,this.tokenType=t.token_type||"bearer",t.expires_in&&(this.expiresIn=parseInt(t.expires_in,10)),this.refreshToken=t.refresh_token,this.scope=t.scope,this.idToken=t.id_token,this.issuedAt=t.issued_at||(0,un.nowInSeconds)()}return e.prototype.toJson=function(){var t;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:(t=this.expiresIn)===null||t===void 0?void 0:t.toString()}},e.prototype.isValid=function(t){if(t===void 0&&(t=dS),this.expiresIn){var r=(0,un.nowInSeconds)();return r<this.issuedAt+this.expiresIn+t}else return!0},e}();un.TokenResponse=hS;var mS=function(){function e(t){this.error=t.error,this.errorDescription=t.error_description,this.errorUri=t.error_uri}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();un.TokenError=mS});var s0=se(dc=>{"use strict";l();f();Object.defineProperty(dc,"__esModule",{value:!0});dc.BaseTokenRequestHandler=void 0;var yS=Ko(),gS=uc(),a0=Ul(),vS=ac(),AS=function(){function e(t,r){t===void 0&&(t=new vS.JQueryRequestor),r===void 0&&(r=new gS.BasicQueryStringUtils),this.requestor=t,this.utils=r}return e.prototype.isTokenResponse=function(t){return t.error===void 0},e.prototype.performRevokeTokenRequest=function(t,r){var n=this.requestor.xhr({url:t.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return n.then(function(i){return!0})},e.prototype.performTokenRequest=function(t,r){var n=this,i=this.requestor.xhr({url:t.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(r.toStringMap())});return i.then(function(a){return n.isTokenResponse(a)?new a0.TokenResponse(a):Promise.reject(new yS.AppAuthError(a.error,new a0.TokenError(a)))})},e}();dc.BaseTokenRequestHandler=AS});var u0=se(c0=>{"use strict";l();f();Object.defineProperty(c0,"__esModule",{value:!0})});var Nl=se(gt=>{"use strict";l();f();var bS=gt&&gt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Bt=gt&&gt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&bS(t,e,r)};Object.defineProperty(gt,"__esModule",{value:!0});Bt(kl(),gt);Bt(_l(),gt);Bt(Rl(),gt);Bt(Xm(),gt);Bt(rc(),gt);Bt(Ko(),gt);Bt(Tl(),gt);Bt(Da(),gt);Bt(uc(),gt);Bt(n0(),gt);Bt(i0(),gt);Bt(Ol(),gt);Bt(o0(),gt);Bt(s0(),gt);Bt(Ul(),gt);Bt(u0(),gt);Bt(ac(),gt)});var G0=se((SO,$0)=>{l();f();var rt={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function Mr(e,t){if(!e)throw new Error(t)}function Xe(e,t,r){if(Mr(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),r!==void 0)if(Array.isArray(r)){let n=r.join(", "),i=`Expected ${e} to be an Uint8Array with length [${n}]`;Mr(r.includes(t.length),i)}else{let n=`Expected ${e} to be an Uint8Array with length ${r}`;Mr(t.length===r,n)}}function ro(e){Mr(Ho(e)==="Boolean","Expected compressed to be a Boolean")}function Jr(e=r=>new Uint8Array(r),t){return typeof e=="function"&&(e=e(t)),Xe("output",e,t),e}function Ho(e){return Object.prototype.toString.call(e).slice(8,-1)}$0.exports=e=>({contextRandomize(t){switch(Mr(t===null||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),t!==null&&Xe("seed",t,32),e.contextRandomize(t)){case 1:throw new Error(rt.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(t){return Xe("private key",t,32),e.privateKeyVerify(t)===0},privateKeyNegate(t){switch(Xe("private key",t,32),e.privateKeyNegate(t)){case 0:return t;case 1:throw new Error(rt.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(t,r){switch(Xe("private key",t,32),Xe("tweak",r,32),e.privateKeyTweakAdd(t,r)){case 0:return t;case 1:throw new Error(rt.TWEAK_ADD)}},privateKeyTweakMul(t,r){switch(Xe("private key",t,32),Xe("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(rt.TWEAK_MUL)}},publicKeyVerify(t){return Xe("public key",t,[33,65]),e.publicKeyVerify(t)===0},publicKeyCreate(t,r=!0,n){switch(Xe("private key",t,32),ro(r),n=Jr(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(rt.SECKEY_INVALID);case 2:throw new Error(rt.PUBKEY_SERIALIZE)}},publicKeyConvert(t,r=!0,n){switch(Xe("public key",t,[33,65]),ro(r),n=Jr(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(rt.PUBKEY_PARSE);case 2:throw new Error(rt.PUBKEY_SERIALIZE)}},publicKeyNegate(t,r=!0,n){switch(Xe("public key",t,[33,65]),ro(r),n=Jr(n,r?33:65),e.publicKeyNegate(n,t)){case 0:return n;case 1:throw new Error(rt.PUBKEY_PARSE);case 2:throw new Error(rt.IMPOSSIBLE_CASE);case 3:throw new Error(rt.PUBKEY_SERIALIZE)}},publicKeyCombine(t,r=!0,n){Mr(Array.isArray(t),"Expected public keys to be an Array"),Mr(t.length>0,"Expected public keys array will have more than zero items");for(let i of t)Xe("public key",i,[33,65]);switch(ro(r),n=Jr(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(rt.PUBKEY_PARSE);case 2:throw new Error(rt.PUBKEY_COMBINE);case 3:throw new Error(rt.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(t,r,n=!0,i){switch(Xe("public key",t,[33,65]),Xe("tweak",r,32),ro(n),i=Jr(i,n?33:65),e.publicKeyTweakAdd(i,t,r)){case 0:return i;case 1:throw new Error(rt.PUBKEY_PARSE);case 2:throw new Error(rt.TWEAK_ADD)}},publicKeyTweakMul(t,r,n=!0,i){switch(Xe("public key",t,[33,65]),Xe("tweak",r,32),ro(n),i=Jr(i,n?33:65),e.publicKeyTweakMul(i,t,r)){case 0:return i;case 1:throw new Error(rt.PUBKEY_PARSE);case 2:throw new Error(rt.TWEAK_MUL)}},signatureNormalize(t){switch(Xe("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(rt.SIG_PARSE)}},signatureExport(t,r){Xe("signature",t,64),r=Jr(r,72);let n={output:r,outputlen:72};switch(e.signatureExport(n,t)){case 0:return r.slice(0,n.outputlen);case 1:throw new Error(rt.SIG_PARSE);case 2:throw new Error(rt.IMPOSSIBLE_CASE)}},signatureImport(t,r){switch(Xe("signature",t),r=Jr(r,64),e.signatureImport(r,t)){case 0:return r;case 1:throw new Error(rt.SIG_PARSE);case 2:throw new Error(rt.IMPOSSIBLE_CASE)}},ecdsaSign(t,r,n={},i){Xe("message",t,32),Xe("private key",r,32),Mr(Ho(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Xe("options.data",n.data),n.noncefn!==void 0&&Mr(Ho(n.noncefn)==="Function","Expected options.noncefn to be a Function"),i=Jr(i,64);let a={signature:i,recid:null};switch(e.ecdsaSign(a,t,r,n.data,n.noncefn)){case 0:return a;case 1:throw new Error(rt.SIGN);case 2:throw new Error(rt.IMPOSSIBLE_CASE)}},ecdsaVerify(t,r,n){switch(Xe("signature",t,64),Xe("message",r,32),Xe("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(rt.SIG_PARSE);case 2:throw new Error(rt.PUBKEY_PARSE)}},ecdsaRecover(t,r,n,i=!0,a){switch(Xe("signature",t,64),Mr(Ho(r)==="Number"&&r>=0&&r<=3,"Expected recovery id to be a Number within interval [0, 3]"),Xe("message",n,32),ro(i),a=Jr(a,i?33:65),e.ecdsaRecover(a,t,r,n)){case 0:return a;case 1:throw new Error(rt.SIG_PARSE);case 2:throw new Error(rt.RECOVER);case 3:throw new Error(rt.IMPOSSIBLE_CASE)}},ecdh(t,r,n={},i){switch(Xe("public key",t,[33,65]),Xe("private key",r,32),Mr(Ho(n)==="Object","Expected options to be an Object"),n.data!==void 0&&Xe("options.data",n.data),n.hashfn!==void 0?(Mr(Ho(n.hashfn)==="Function","Expected options.hashfn to be a Function"),n.xbuf!==void 0&&Xe("options.xbuf",n.xbuf,32),n.ybuf!==void 0&&Xe("options.ybuf",n.ybuf,32),Xe("output",i)):i=Jr(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(rt.PUBKEY_PARSE);case 2:throw new Error(rt.ECDH)}}})});var Q0=se((EO,J0)=>{l();f();var Lx=Nh().ec,pn=new Lx("secp256k1"),Ye=pn.curve,ct=Ye.n.constructor;function zx(e,t){let r=new ct(t);if(r.cmp(Ye.p)>=0)return null;r=r.toRed(Ye.red);let n=r.redSqr().redIMul(r).redIAdd(Ye.b).redSqrt();return e===3!==n.isOdd()&&(n=n.redNeg()),pn.keyPair({pub:{x:r,y:n}})}function Fx(e,t,r){let n=new ct(t),i=new ct(r);if(n.cmp(Ye.p)>=0||i.cmp(Ye.p)>=0||(n=n.toRed(Ye.red),i=i.toRed(Ye.red),(e===6||e===7)&&i.isOdd()!==(e===7)))return null;let a=n.redSqr().redIMul(n);return i.redSqr().redISub(a.redIAdd(Ye.b)).isZero()?pn.keyPair({pub:{x:n,y:i}}):null}function Ai(e){let t=e[0];switch(t){case 2:case 3:return e.length!==33?null:zx(t,e.subarray(1,33));case 4:case 6:case 7:return e.length!==65?null:Fx(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function no(e,t){let r=t.encode(null,e.length===33);for(let n=0;n<e.length;++n)e[n]=r[n]}J0.exports={contextRandomize(){return 0},privateKeyVerify(e){let t=new ct(e);return t.cmp(Ye.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){let t=new ct(e),r=Ye.n.sub(t).umod(Ye.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){let r=new ct(t);if(r.cmp(Ye.n)>=0||(r.iadd(new ct(e)),r.cmp(Ye.n)>=0&&r.isub(Ye.n),r.isZero()))return 1;let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new ct(t);if(r.cmp(Ye.n)>=0||r.isZero())return 1;r.imul(new ct(e)),r.cmp(Ye.n)>=0&&(r=r.umod(Ye.n));let n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify(e){return Ai(e)===null?1:0},publicKeyCreate(e,t){let r=new ct(t);if(r.cmp(Ye.n)>=0||r.isZero())return 1;let n=pn.keyFromPrivate(t).getPublic();return no(e,n),0},publicKeyConvert(e,t){let r=Ai(t);if(r===null)return 1;let n=r.getPublic();return no(e,n),0},publicKeyNegate(e,t){let r=Ai(t);if(r===null)return 1;let n=r.getPublic();return n.y=n.y.redNeg(),no(e,n),0},publicKeyCombine(e,t){let r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=Ai(t[i]),r[i]===null)return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(no(e,n),0)},publicKeyTweakAdd(e,t,r){let n=Ai(t);if(n===null)return 1;if(r=new ct(r),r.cmp(Ye.n)>=0)return 2;let i=n.getPublic().add(Ye.g.mul(r));return i.isInfinity()?2:(no(e,i),0)},publicKeyTweakMul(e,t,r){let n=Ai(t);if(n===null)return 1;if(r=new ct(r),r.cmp(Ye.n)>=0||r.isZero())return 2;let i=n.getPublic().mul(r);return no(e,i),0},signatureNormalize(e){let t=new ct(e.subarray(0,32)),r=new ct(e.subarray(32,64));return t.cmp(Ye.n)>=0||r.cmp(Ye.n)>=0?1:(r.cmp(pn.nh)===1&&e.set(Ye.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){let r=t.subarray(0,32),n=t.subarray(32,64);if(new ct(r).cmp(Ye.n)>=0||new ct(n).cmp(Ye.n)>=0)return 1;let{output:i}=e,a=i.subarray(4,37);a[0]=0,a.set(r,1);let u=33,d=0;for(;u>1&&a[d]===0&&!(a[d+1]&128);--u,++d);if(a=a.subarray(d),a[0]&128||u>1&&a[0]===0&&!(a[1]&128))return 1;let g=i.subarray(39,72);g[0]=0,g.set(n,1);let S=33,E=0;for(;S>1&&g[E]===0&&!(g[E+1]&128);--S,++E);return g=g.subarray(E),g[0]&128||S>1&&g[0]===0&&!(g[1]&128)?1:(e.outputlen=6+u+S,i[0]=48,i[1]=e.outputlen-2,i[2]=2,i[3]=a.length,i.set(a,4),i[4+u]=2,i[5+u]=g.length,i.set(g,6+u),0)},signatureImport(e,t){if(t.length<8||t.length>72||t[0]!==48||t[1]!==t.length-2||t[2]!==2)return 1;let r=t[3];if(r===0||5+r>=t.length||t[4+r]!==2)return 1;let n=t[5+r];if(n===0||6+r+n!==t.length||t[4]&128||r>1&&t[4]===0&&!(t[5]&128)||t[r+6]&128||n>1&&t[r+6]===0&&!(t[r+7]&128))return 1;let i=t.subarray(4,4+r);if(i.length===33&&i[0]===0&&(i=i.subarray(1)),i.length>32)return 1;let a=t.subarray(6+r);if(a.length===33&&a[0]===0&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let u=new ct(i);u.cmp(Ye.n)>=0&&(u=new ct(0));let d=new ct(t.subarray(6+r));return d.cmp(Ye.n)>=0&&(d=new ct(0)),e.set(u.toArrayLike(Uint8Array,"be",32),0),e.set(d.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,n,i){if(i){let d=i;i=g=>{let S=d(t,r,null,n,g);if(!(S instanceof Uint8Array&&S.length===32))throw new Error("This is the way");return new ct(S)}}let a=new ct(r);if(a.cmp(Ye.n)>=0||a.isZero())return 1;let u;try{u=pn.sign(t,r,{canonical:!0,k:i,pers:n})}catch{return 1}return e.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),e.recid=u.recoveryParam,0},ecdsaVerify(e,t,r){let n={r:e.subarray(0,32),s:e.subarray(32,64)},i=new ct(n.r),a=new ct(n.s);if(i.cmp(Ye.n)>=0||a.cmp(Ye.n)>=0)return 1;if(a.cmp(pn.nh)===1||i.isZero()||a.isZero())return 3;let u=Ai(r);if(u===null)return 2;let d=u.getPublic();return pn.verify(t,n,d)?0:3},ecdsaRecover(e,t,r,n){let i={r:t.slice(0,32),s:t.slice(32,64)},a=new ct(i.r),u=new ct(i.s);if(a.cmp(Ye.n)>=0||u.cmp(Ye.n)>=0)return 1;if(a.isZero()||u.isZero())return 2;let d;try{d=pn.recoverPubKey(n,i,r)}catch{return 2}return no(e,d),0},ecdh(e,t,r,n,i,a,u){let d=Ai(t);if(d===null)return 1;let g=new ct(r);if(g.cmp(Ye.n)>=0||g.isZero())return 2;let S=d.getPublic().mul(g);if(i===void 0){let E=S.encode(null,!0),T=pn.hash().update(E).digest();for(let P=0;P<32;++P)e[P]=T[P]}else{a||(a=new Uint8Array(32));let E=S.getX().toArray("be",32);for(let K=0;K<32;++K)a[K]=E[K];u||(u=new Uint8Array(32));let T=S.getY().toArray("be",32);for(let K=0;K<32;++K)u[K]=T[K];let P=i(a,u,n);if(!(P instanceof Uint8Array&&P.length===e.length))return 2;e.set(P)}return 0}}});var Rf=se((IO,Z0)=>{l();f();Z0.exports=G0()(Q0())});var X0=se(kc=>{"use strict";l();f();Object.defineProperty(kc,"__esModule",{value:!0});var Y0=Vh();function qx(e){return new Promise(function(t,r){Y0(e,function(n,i){if(n){r(n);return}t(i)})})}kc.getRandomBytes=qx;function Wx(e){return Y0(e)}kc.getRandomBytesSync=Wx});var ny=se(hn=>{"use strict";l();f();var jx=hn&&hn.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function d(E){try{S(n.next(E))}catch(T){u(T)}}function g(E){try{S(n.throw(E))}catch(T){u(T)}}function S(E){E.done?a(E.value):i(E.value).then(d,g)}S((n=n.apply(e,t||[])).next())})},Hx=hn&&hn.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(S){return function(E){return g([S,E])}}function g(S){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=S[0]&2?i.return:S[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,S[1])).done)return a;switch(i=0,a&&(S=[S[0]&2,a.value]),S[0]){case 0:case 1:a=S;break;case 4:return r.label++,{value:S[1],done:!1};case 5:r.label++,i=S[1],S=[0];continue;case 7:S=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(S[0]===6||S[0]===2)){r=0;continue}if(S[0]===3&&(!a||S[1]>a[0]&&S[1]<a[3])){r.label=S[1];break}if(S[0]===6&&r.label<a[1]){r.label=a[1],a=S;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(S);break}a[2]&&r.ops.pop(),r.trys.pop();continue}S=t.call(e,r)}catch(E){S=[6,E],i=0}finally{n=a=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}};function $x(e){for(var t in e)hn.hasOwnProperty(t)||(hn[t]=e[t])}Object.defineProperty(hn,"__esModule",{value:!0});var ey=Rf(),ty=X0(),ry=32;function Gx(){return jx(this,void 0,void 0,function(){var e;return Hx(this,function(t){switch(t.label){case 0:return[4,ty.getRandomBytes(ry)];case 1:return e=t.sent(),ey.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}})})}hn.createPrivateKey=Gx;function Jx(){for(;;){var e=ty.getRandomBytesSync(ry);if(ey.privateKeyVerify(e))return e}}hn.createPrivateKeySync=Jx;$x(Rf())});var io=se((iy,Kf)=>{l();f();(function(e,t){"use strict";function r(b,o){if(!b)throw new Error(o||"Assertion failed")}function n(b,o){b.super_=o;var c=function(){};c.prototype=o.prototype,b.prototype=new c,b.prototype.constructor=b}function i(b,o,c){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(b||0,o||10,c||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=Uh().Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,p){if(typeof o=="number")return this._initNumber(o,c,p);if(typeof o=="object")return this._initArray(o,c,p);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var h=0;o[0]==="-"&&(h++,this.negative=1),h<o.length&&(c===16?this._parseHex(o,h,p):(this._parseBase(o,c,h),p==="le"&&this._initArray(this.toArray(),c,p)))},i.prototype._initNumber=function(o,c,p){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),c,p)},i.prototype._initArray=function(o,c,p){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,w,x=0;if(p==="be")for(h=o.length-1,m=0;h>=0;h-=3)w=o[h]|o[h-1]<<8|o[h-2]<<16,this.words[m]|=w<<x&67108863,this.words[m+1]=w>>>26-x&67108863,x+=24,x>=26&&(x-=26,m++);else if(p==="le")for(h=0,m=0;h<o.length;h+=3)w=o[h]|o[h+1]<<8|o[h+2]<<16,this.words[m]|=w<<x&67108863,this.words[m+1]=w>>>26-x&67108863,x+=24,x>=26&&(x-=26,m++);return this.strip()};function u(b,o){var c=b.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function d(b,o,c){var p=u(b,c);return c-1>=o&&(p|=u(b,c-1)<<4),p}i.prototype._parseHex=function(o,c,p){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,w=0,x;if(p==="be")for(h=o.length-1;h>=c;h-=2)x=d(o,c,h)<<m,this.words[w]|=x&67108863,m>=18?(m-=18,w+=1,this.words[w]|=x>>>26):m+=8;else{var v=o.length-c;for(h=v%2===0?c+1:c;h<o.length;h+=2)x=d(o,c,h)<<m,this.words[w]|=x&67108863,m>=18?(m-=18,w+=1,this.words[w]|=x>>>26):m+=8}this.strip()};function g(b,o,c,p){for(var h=0,m=Math.min(b.length,c),w=o;w<m;w++){var x=b.charCodeAt(w)-48;h*=p,x>=49?h+=x-49+10:x>=17?h+=x-17+10:h+=x}return h}i.prototype._parseBase=function(o,c,p){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=c)h++;h--,m=m/c|0;for(var w=o.length-p,x=w%h,v=Math.min(w,w-x)+p,s=0,A=p;A<v;A+=h)s=g(o,A,A+h,c),this.imuln(m),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(x!==0){var V=1;for(s=g(o,A,o.length,c),A=0;A<x;A++)V*=c;this.imuln(V),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var p;if(o===16||o==="hex"){p="";for(var h=0,m=0,w=0;w<this.length;w++){var x=this.words[w],v=((x<<h|m)&16777215).toString(16);m=x>>>24-h&16777215,m!==0||w!==this.length-1?p=S[6-v.length]+v+p:p=v+p,h+=2,h>=26&&(h-=26,w--)}for(m!==0&&(p=m.toString(16)+p);p.length%c!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(o===(o|0)&&o>=2&&o<=36){var s=E[o],A=T[o];p="";var V=this.clone();for(V.negative=0;!V.isZero();){var D=V.modn(A).toString(o);V=V.idivn(A),V.isZero()?p=D+p:p=S[s-D.length]+D+p}for(this.isZero()&&(p="0"+p);p.length%c!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return r(typeof a<"u"),this.toArrayLike(a,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,p){var h=this.byteLength(),m=p||Math.max(1,h);r(h<=m,"byte array longer than desired length"),r(m>0,"Requested array length <= 0"),this.strip();var w=c==="le",x=new o(m),v,s,A=this.clone();if(w){for(s=0;!A.isZero();s++)v=A.andln(255),A.iushrn(8),x[s]=v;for(;s<m;s++)x[s]=0}else{for(s=0;s<m-h;s++)x[s]=0;for(s=0;!A.isZero();s++)v=A.andln(255),A.iushrn(8),x[m-s-1]=v}return x},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,p=0;return c>=4096&&(p+=13,c>>>=13),c>=64&&(p+=7,c>>>=7),c>=8&&(p+=4,c>>>=4),c>=2&&(p+=2,c>>>=2),p+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,p=0;return c&8191||(p+=13,c>>>=13),c&127||(p+=7,c>>>=7),c&15||(p+=4,c>>>=4),c&3||(p+=2,c>>>=2),c&1||p++,p},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function P(b){for(var o=new Array(b.bitLength()),c=0;c<o.length;c++){var p=c/26|0,h=c%26;o[c]=(b.words[p]&1<<h)>>>h}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var p=this._zeroBits(this.words[c]);if(o+=p,p!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var p=0;p<c.length;p++)this.words[p]=this.words[p]&o.words[p];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,p;this.length>o.length?(c=this,p=o):(c=o,p=this);for(var h=0;h<p.length;h++)this.words[h]=c.words[h]^p.words[h];if(this!==c)for(;h<c.length;h++)this.words[h]=c.words[h];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,p=o%26;this._expand(c),p>0&&c--;for(var h=0;h<c;h++)this.words[h]=~this.words[h]&67108863;return p>0&&(this.words[h]=~this.words[h]&67108863>>26-p),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){r(typeof o=="number"&&o>=0);var p=o/26|0,h=o%26;return this._expand(p+1),c?this.words[p]=this.words[p]|1<<h:this.words[p]=this.words[p]&~(1<<h),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var p,h;this.length>o.length?(p=this,h=o):(p=o,h=this);for(var m=0,w=0;w<h.length;w++)c=(p.words[w]|0)+(h.words[w]|0)+m,this.words[w]=c&67108863,m=c>>>26;for(;m!==0&&w<p.length;w++)c=(p.words[w]|0)+m,this.words[w]=c&67108863,m=c>>>26;if(this.length=p.length,m!==0)this.words[this.length]=m,this.length++;else if(p!==this)for(;w<p.length;w++)this.words[w]=p.words[w];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var p=this.cmp(o);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;p>0?(h=this,m=o):(h=o,m=this);for(var w=0,x=0;x<m.length;x++)c=(h.words[x]|0)-(m.words[x]|0)+w,w=c>>26,this.words[x]=c&67108863;for(;w!==0&&x<h.length;x++)c=(h.words[x]|0)+w,w=c>>26,this.words[x]=c&67108863;if(w===0&&x<h.length&&h!==this)for(;x<h.length;x++)this.words[x]=h.words[x];return this.length=Math.max(this.length,x),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function C(b,o,c){c.negative=o.negative^b.negative;var p=b.length+o.length|0;c.length=p,p=p-1|0;var h=b.words[0]|0,m=o.words[0]|0,w=h*m,x=w&67108863,v=w/67108864|0;c.words[0]=x;for(var s=1;s<p;s++){for(var A=v>>>26,V=v&67108863,D=Math.min(s,o.length-1),z=Math.max(0,s-b.length+1);z<=D;z++){var j=s-z|0;h=b.words[j]|0,m=o.words[z]|0,w=h*m+V,A+=w/67108864|0,V=w&67108863}c.words[s]=V|0,v=A|0}return v!==0?c.words[s]=v|0:c.length--,c.strip()}var K=function(o,c,p){var h=o.words,m=c.words,w=p.words,x=0,v,s,A,V=h[0]|0,D=V&8191,z=V>>>13,j=h[1]|0,X=j&8191,re=j>>>13,nt=h[2]|0,ae=nt&8191,k=nt>>>13,O=h[3]|0,R=O&8191,F=O>>>13,Q=h[4]|0,N=Q&8191,W=Q>>>13,Ge=h[5]|0,fe=Ge&8191,he=Ge>>>13,vr=h[6]|0,Ae=vr&8191,ye=vr>>>13,sn=h[7]|0,ge=sn&8191,Fe=sn>>>13,ai=h[8]|0,qe=ai&8191,We=ai>>>13,Pn=h[9]|0,be=Pn&8191,we=Pn>>>13,In=m[0]|0,Se=In&8191,xe=In>>>13,kn=m[1]|0,Me=kn&8191,Ee=kn>>>13,Cn=m[2]|0,Te=Cn&8191,Pe=Cn>>>13,_n=m[3]|0,Ie=_n&8191,ke=_n>>>13,Rn=m[4]|0,Ce=Rn&8191,_e=Rn>>>13,Kn=m[5]|0,Re=Kn&8191,Ke=Kn>>>13,Bn=m[6]|0,Be=Bn&8191,Oe=Bn>>>13,On=m[7]|0,Ve=On&8191,De=On>>>13,Vn=m[8]|0,Ue=Vn&8191,Ne=Vn>>>13,Dn=m[9]|0,Le=Dn&8191,ze=Dn>>>13;p.negative=o.negative^c.negative,p.length=19,v=Math.imul(D,Se),s=Math.imul(D,xe),s=s+Math.imul(z,Se)|0,A=Math.imul(z,xe);var Cr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,v=Math.imul(X,Se),s=Math.imul(X,xe),s=s+Math.imul(re,Se)|0,A=Math.imul(re,xe),v=v+Math.imul(D,Me)|0,s=s+Math.imul(D,Ee)|0,s=s+Math.imul(z,Me)|0,A=A+Math.imul(z,Ee)|0;var _r=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(_r>>>26)|0,_r&=67108863,v=Math.imul(ae,Se),s=Math.imul(ae,xe),s=s+Math.imul(k,Se)|0,A=Math.imul(k,xe),v=v+Math.imul(X,Me)|0,s=s+Math.imul(X,Ee)|0,s=s+Math.imul(re,Me)|0,A=A+Math.imul(re,Ee)|0,v=v+Math.imul(D,Te)|0,s=s+Math.imul(D,Pe)|0,s=s+Math.imul(z,Te)|0,A=A+Math.imul(z,Pe)|0;var Rr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,v=Math.imul(R,Se),s=Math.imul(R,xe),s=s+Math.imul(F,Se)|0,A=Math.imul(F,xe),v=v+Math.imul(ae,Me)|0,s=s+Math.imul(ae,Ee)|0,s=s+Math.imul(k,Me)|0,A=A+Math.imul(k,Ee)|0,v=v+Math.imul(X,Te)|0,s=s+Math.imul(X,Pe)|0,s=s+Math.imul(re,Te)|0,A=A+Math.imul(re,Pe)|0,v=v+Math.imul(D,Ie)|0,s=s+Math.imul(D,ke)|0,s=s+Math.imul(z,Ie)|0,A=A+Math.imul(z,ke)|0;var Kr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,v=Math.imul(N,Se),s=Math.imul(N,xe),s=s+Math.imul(W,Se)|0,A=Math.imul(W,xe),v=v+Math.imul(R,Me)|0,s=s+Math.imul(R,Ee)|0,s=s+Math.imul(F,Me)|0,A=A+Math.imul(F,Ee)|0,v=v+Math.imul(ae,Te)|0,s=s+Math.imul(ae,Pe)|0,s=s+Math.imul(k,Te)|0,A=A+Math.imul(k,Pe)|0,v=v+Math.imul(X,Ie)|0,s=s+Math.imul(X,ke)|0,s=s+Math.imul(re,Ie)|0,A=A+Math.imul(re,ke)|0,v=v+Math.imul(D,Ce)|0,s=s+Math.imul(D,_e)|0,s=s+Math.imul(z,Ce)|0,A=A+Math.imul(z,_e)|0;var Br=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Br>>>26)|0,Br&=67108863,v=Math.imul(fe,Se),s=Math.imul(fe,xe),s=s+Math.imul(he,Se)|0,A=Math.imul(he,xe),v=v+Math.imul(N,Me)|0,s=s+Math.imul(N,Ee)|0,s=s+Math.imul(W,Me)|0,A=A+Math.imul(W,Ee)|0,v=v+Math.imul(R,Te)|0,s=s+Math.imul(R,Pe)|0,s=s+Math.imul(F,Te)|0,A=A+Math.imul(F,Pe)|0,v=v+Math.imul(ae,Ie)|0,s=s+Math.imul(ae,ke)|0,s=s+Math.imul(k,Ie)|0,A=A+Math.imul(k,ke)|0,v=v+Math.imul(X,Ce)|0,s=s+Math.imul(X,_e)|0,s=s+Math.imul(re,Ce)|0,A=A+Math.imul(re,_e)|0,v=v+Math.imul(D,Re)|0,s=s+Math.imul(D,Ke)|0,s=s+Math.imul(z,Re)|0,A=A+Math.imul(z,Ke)|0;var Or=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Or>>>26)|0,Or&=67108863,v=Math.imul(Ae,Se),s=Math.imul(Ae,xe),s=s+Math.imul(ye,Se)|0,A=Math.imul(ye,xe),v=v+Math.imul(fe,Me)|0,s=s+Math.imul(fe,Ee)|0,s=s+Math.imul(he,Me)|0,A=A+Math.imul(he,Ee)|0,v=v+Math.imul(N,Te)|0,s=s+Math.imul(N,Pe)|0,s=s+Math.imul(W,Te)|0,A=A+Math.imul(W,Pe)|0,v=v+Math.imul(R,Ie)|0,s=s+Math.imul(R,ke)|0,s=s+Math.imul(F,Ie)|0,A=A+Math.imul(F,ke)|0,v=v+Math.imul(ae,Ce)|0,s=s+Math.imul(ae,_e)|0,s=s+Math.imul(k,Ce)|0,A=A+Math.imul(k,_e)|0,v=v+Math.imul(X,Re)|0,s=s+Math.imul(X,Ke)|0,s=s+Math.imul(re,Re)|0,A=A+Math.imul(re,Ke)|0,v=v+Math.imul(D,Be)|0,s=s+Math.imul(D,Oe)|0,s=s+Math.imul(z,Be)|0,A=A+Math.imul(z,Oe)|0;var Vr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,v=Math.imul(ge,Se),s=Math.imul(ge,xe),s=s+Math.imul(Fe,Se)|0,A=Math.imul(Fe,xe),v=v+Math.imul(Ae,Me)|0,s=s+Math.imul(Ae,Ee)|0,s=s+Math.imul(ye,Me)|0,A=A+Math.imul(ye,Ee)|0,v=v+Math.imul(fe,Te)|0,s=s+Math.imul(fe,Pe)|0,s=s+Math.imul(he,Te)|0,A=A+Math.imul(he,Pe)|0,v=v+Math.imul(N,Ie)|0,s=s+Math.imul(N,ke)|0,s=s+Math.imul(W,Ie)|0,A=A+Math.imul(W,ke)|0,v=v+Math.imul(R,Ce)|0,s=s+Math.imul(R,_e)|0,s=s+Math.imul(F,Ce)|0,A=A+Math.imul(F,_e)|0,v=v+Math.imul(ae,Re)|0,s=s+Math.imul(ae,Ke)|0,s=s+Math.imul(k,Re)|0,A=A+Math.imul(k,Ke)|0,v=v+Math.imul(X,Be)|0,s=s+Math.imul(X,Oe)|0,s=s+Math.imul(re,Be)|0,A=A+Math.imul(re,Oe)|0,v=v+Math.imul(D,Ve)|0,s=s+Math.imul(D,De)|0,s=s+Math.imul(z,Ve)|0,A=A+Math.imul(z,De)|0;var Dr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,v=Math.imul(qe,Se),s=Math.imul(qe,xe),s=s+Math.imul(We,Se)|0,A=Math.imul(We,xe),v=v+Math.imul(ge,Me)|0,s=s+Math.imul(ge,Ee)|0,s=s+Math.imul(Fe,Me)|0,A=A+Math.imul(Fe,Ee)|0,v=v+Math.imul(Ae,Te)|0,s=s+Math.imul(Ae,Pe)|0,s=s+Math.imul(ye,Te)|0,A=A+Math.imul(ye,Pe)|0,v=v+Math.imul(fe,Ie)|0,s=s+Math.imul(fe,ke)|0,s=s+Math.imul(he,Ie)|0,A=A+Math.imul(he,ke)|0,v=v+Math.imul(N,Ce)|0,s=s+Math.imul(N,_e)|0,s=s+Math.imul(W,Ce)|0,A=A+Math.imul(W,_e)|0,v=v+Math.imul(R,Re)|0,s=s+Math.imul(R,Ke)|0,s=s+Math.imul(F,Re)|0,A=A+Math.imul(F,Ke)|0,v=v+Math.imul(ae,Be)|0,s=s+Math.imul(ae,Oe)|0,s=s+Math.imul(k,Be)|0,A=A+Math.imul(k,Oe)|0,v=v+Math.imul(X,Ve)|0,s=s+Math.imul(X,De)|0,s=s+Math.imul(re,Ve)|0,A=A+Math.imul(re,De)|0,v=v+Math.imul(D,Ue)|0,s=s+Math.imul(D,Ne)|0,s=s+Math.imul(z,Ue)|0,A=A+Math.imul(z,Ne)|0;var Ur=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,v=Math.imul(be,Se),s=Math.imul(be,xe),s=s+Math.imul(we,Se)|0,A=Math.imul(we,xe),v=v+Math.imul(qe,Me)|0,s=s+Math.imul(qe,Ee)|0,s=s+Math.imul(We,Me)|0,A=A+Math.imul(We,Ee)|0,v=v+Math.imul(ge,Te)|0,s=s+Math.imul(ge,Pe)|0,s=s+Math.imul(Fe,Te)|0,A=A+Math.imul(Fe,Pe)|0,v=v+Math.imul(Ae,Ie)|0,s=s+Math.imul(Ae,ke)|0,s=s+Math.imul(ye,Ie)|0,A=A+Math.imul(ye,ke)|0,v=v+Math.imul(fe,Ce)|0,s=s+Math.imul(fe,_e)|0,s=s+Math.imul(he,Ce)|0,A=A+Math.imul(he,_e)|0,v=v+Math.imul(N,Re)|0,s=s+Math.imul(N,Ke)|0,s=s+Math.imul(W,Re)|0,A=A+Math.imul(W,Ke)|0,v=v+Math.imul(R,Be)|0,s=s+Math.imul(R,Oe)|0,s=s+Math.imul(F,Be)|0,A=A+Math.imul(F,Oe)|0,v=v+Math.imul(ae,Ve)|0,s=s+Math.imul(ae,De)|0,s=s+Math.imul(k,Ve)|0,A=A+Math.imul(k,De)|0,v=v+Math.imul(X,Ue)|0,s=s+Math.imul(X,Ne)|0,s=s+Math.imul(re,Ue)|0,A=A+Math.imul(re,Ne)|0,v=v+Math.imul(D,Le)|0,s=s+Math.imul(D,ze)|0,s=s+Math.imul(z,Le)|0,A=A+Math.imul(z,ze)|0;var Nr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,v=Math.imul(be,Me),s=Math.imul(be,Ee),s=s+Math.imul(we,Me)|0,A=Math.imul(we,Ee),v=v+Math.imul(qe,Te)|0,s=s+Math.imul(qe,Pe)|0,s=s+Math.imul(We,Te)|0,A=A+Math.imul(We,Pe)|0,v=v+Math.imul(ge,Ie)|0,s=s+Math.imul(ge,ke)|0,s=s+Math.imul(Fe,Ie)|0,A=A+Math.imul(Fe,ke)|0,v=v+Math.imul(Ae,Ce)|0,s=s+Math.imul(Ae,_e)|0,s=s+Math.imul(ye,Ce)|0,A=A+Math.imul(ye,_e)|0,v=v+Math.imul(fe,Re)|0,s=s+Math.imul(fe,Ke)|0,s=s+Math.imul(he,Re)|0,A=A+Math.imul(he,Ke)|0,v=v+Math.imul(N,Be)|0,s=s+Math.imul(N,Oe)|0,s=s+Math.imul(W,Be)|0,A=A+Math.imul(W,Oe)|0,v=v+Math.imul(R,Ve)|0,s=s+Math.imul(R,De)|0,s=s+Math.imul(F,Ve)|0,A=A+Math.imul(F,De)|0,v=v+Math.imul(ae,Ue)|0,s=s+Math.imul(ae,Ne)|0,s=s+Math.imul(k,Ue)|0,A=A+Math.imul(k,Ne)|0,v=v+Math.imul(X,Le)|0,s=s+Math.imul(X,ze)|0,s=s+Math.imul(re,Le)|0,A=A+Math.imul(re,ze)|0;var Lr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,v=Math.imul(be,Te),s=Math.imul(be,Pe),s=s+Math.imul(we,Te)|0,A=Math.imul(we,Pe),v=v+Math.imul(qe,Ie)|0,s=s+Math.imul(qe,ke)|0,s=s+Math.imul(We,Ie)|0,A=A+Math.imul(We,ke)|0,v=v+Math.imul(ge,Ce)|0,s=s+Math.imul(ge,_e)|0,s=s+Math.imul(Fe,Ce)|0,A=A+Math.imul(Fe,_e)|0,v=v+Math.imul(Ae,Re)|0,s=s+Math.imul(Ae,Ke)|0,s=s+Math.imul(ye,Re)|0,A=A+Math.imul(ye,Ke)|0,v=v+Math.imul(fe,Be)|0,s=s+Math.imul(fe,Oe)|0,s=s+Math.imul(he,Be)|0,A=A+Math.imul(he,Oe)|0,v=v+Math.imul(N,Ve)|0,s=s+Math.imul(N,De)|0,s=s+Math.imul(W,Ve)|0,A=A+Math.imul(W,De)|0,v=v+Math.imul(R,Ue)|0,s=s+Math.imul(R,Ne)|0,s=s+Math.imul(F,Ue)|0,A=A+Math.imul(F,Ne)|0,v=v+Math.imul(ae,Le)|0,s=s+Math.imul(ae,ze)|0,s=s+Math.imul(k,Le)|0,A=A+Math.imul(k,ze)|0;var zr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(zr>>>26)|0,zr&=67108863,v=Math.imul(be,Ie),s=Math.imul(be,ke),s=s+Math.imul(we,Ie)|0,A=Math.imul(we,ke),v=v+Math.imul(qe,Ce)|0,s=s+Math.imul(qe,_e)|0,s=s+Math.imul(We,Ce)|0,A=A+Math.imul(We,_e)|0,v=v+Math.imul(ge,Re)|0,s=s+Math.imul(ge,Ke)|0,s=s+Math.imul(Fe,Re)|0,A=A+Math.imul(Fe,Ke)|0,v=v+Math.imul(Ae,Be)|0,s=s+Math.imul(Ae,Oe)|0,s=s+Math.imul(ye,Be)|0,A=A+Math.imul(ye,Oe)|0,v=v+Math.imul(fe,Ve)|0,s=s+Math.imul(fe,De)|0,s=s+Math.imul(he,Ve)|0,A=A+Math.imul(he,De)|0,v=v+Math.imul(N,Ue)|0,s=s+Math.imul(N,Ne)|0,s=s+Math.imul(W,Ue)|0,A=A+Math.imul(W,Ne)|0,v=v+Math.imul(R,Le)|0,s=s+Math.imul(R,ze)|0,s=s+Math.imul(F,Le)|0,A=A+Math.imul(F,ze)|0;var Fr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,v=Math.imul(be,Ce),s=Math.imul(be,_e),s=s+Math.imul(we,Ce)|0,A=Math.imul(we,_e),v=v+Math.imul(qe,Re)|0,s=s+Math.imul(qe,Ke)|0,s=s+Math.imul(We,Re)|0,A=A+Math.imul(We,Ke)|0,v=v+Math.imul(ge,Be)|0,s=s+Math.imul(ge,Oe)|0,s=s+Math.imul(Fe,Be)|0,A=A+Math.imul(Fe,Oe)|0,v=v+Math.imul(Ae,Ve)|0,s=s+Math.imul(Ae,De)|0,s=s+Math.imul(ye,Ve)|0,A=A+Math.imul(ye,De)|0,v=v+Math.imul(fe,Ue)|0,s=s+Math.imul(fe,Ne)|0,s=s+Math.imul(he,Ue)|0,A=A+Math.imul(he,Ne)|0,v=v+Math.imul(N,Le)|0,s=s+Math.imul(N,ze)|0,s=s+Math.imul(W,Le)|0,A=A+Math.imul(W,ze)|0;var qr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(qr>>>26)|0,qr&=67108863,v=Math.imul(be,Re),s=Math.imul(be,Ke),s=s+Math.imul(we,Re)|0,A=Math.imul(we,Ke),v=v+Math.imul(qe,Be)|0,s=s+Math.imul(qe,Oe)|0,s=s+Math.imul(We,Be)|0,A=A+Math.imul(We,Oe)|0,v=v+Math.imul(ge,Ve)|0,s=s+Math.imul(ge,De)|0,s=s+Math.imul(Fe,Ve)|0,A=A+Math.imul(Fe,De)|0,v=v+Math.imul(Ae,Ue)|0,s=s+Math.imul(Ae,Ne)|0,s=s+Math.imul(ye,Ue)|0,A=A+Math.imul(ye,Ne)|0,v=v+Math.imul(fe,Le)|0,s=s+Math.imul(fe,ze)|0,s=s+Math.imul(he,Le)|0,A=A+Math.imul(he,ze)|0;var Wr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,v=Math.imul(be,Be),s=Math.imul(be,Oe),s=s+Math.imul(we,Be)|0,A=Math.imul(we,Oe),v=v+Math.imul(qe,Ve)|0,s=s+Math.imul(qe,De)|0,s=s+Math.imul(We,Ve)|0,A=A+Math.imul(We,De)|0,v=v+Math.imul(ge,Ue)|0,s=s+Math.imul(ge,Ne)|0,s=s+Math.imul(Fe,Ue)|0,A=A+Math.imul(Fe,Ne)|0,v=v+Math.imul(Ae,Le)|0,s=s+Math.imul(Ae,ze)|0,s=s+Math.imul(ye,Le)|0,A=A+Math.imul(ye,ze)|0;var jr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(jr>>>26)|0,jr&=67108863,v=Math.imul(be,Ve),s=Math.imul(be,De),s=s+Math.imul(we,Ve)|0,A=Math.imul(we,De),v=v+Math.imul(qe,Ue)|0,s=s+Math.imul(qe,Ne)|0,s=s+Math.imul(We,Ue)|0,A=A+Math.imul(We,Ne)|0,v=v+Math.imul(ge,Le)|0,s=s+Math.imul(ge,ze)|0,s=s+Math.imul(Fe,Le)|0,A=A+Math.imul(Fe,ze)|0;var Hr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,v=Math.imul(be,Ue),s=Math.imul(be,Ne),s=s+Math.imul(we,Ue)|0,A=Math.imul(we,Ne),v=v+Math.imul(qe,Le)|0,s=s+Math.imul(qe,ze)|0,s=s+Math.imul(We,Le)|0,A=A+Math.imul(We,ze)|0;var Li=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Li>>>26)|0,Li&=67108863,v=Math.imul(be,Le),s=Math.imul(be,ze),s=s+Math.imul(we,Le)|0,A=Math.imul(we,ze);var zi=(x+v|0)+((s&8191)<<13)|0;return x=(A+(s>>>13)|0)+(zi>>>26)|0,zi&=67108863,w[0]=Cr,w[1]=_r,w[2]=Rr,w[3]=Kr,w[4]=Br,w[5]=Or,w[6]=Vr,w[7]=Dr,w[8]=Ur,w[9]=Nr,w[10]=Lr,w[11]=zr,w[12]=Fr,w[13]=qr,w[14]=Wr,w[15]=jr,w[16]=Hr,w[17]=Li,w[18]=zi,x!==0&&(w[19]=x,p.length++),p};Math.imul||(K=C);function _(b,o,c){c.negative=o.negative^b.negative,c.length=b.length+o.length;for(var p=0,h=0,m=0;m<c.length-1;m++){var w=h;h=0;for(var x=p&67108863,v=Math.min(m,o.length-1),s=Math.max(0,m-b.length+1);s<=v;s++){var A=m-s,V=b.words[A]|0,D=o.words[s]|0,z=V*D,j=z&67108863;w=w+(z/67108864|0)|0,j=j+x|0,x=j&67108863,w=w+(j>>>26)|0,h+=w>>>26,w&=67108863}c.words[m]=x,p=w,w=h}return p!==0?c.words[m]=p:c.length--,c.strip()}function B(b,o,c){var p=new L;return p.mulp(b,o,c)}i.prototype.mulTo=function(o,c){var p,h=this.length+o.length;return this.length===10&&o.length===10?p=K(this,o,c):h<63?p=C(this,o,c):h<1024?p=_(this,o,c):p=B(this,o,c),p};function L(b,o){this.x=b,this.y=o}L.prototype.makeRBT=function(o){for(var c=new Array(o),p=i.prototype._countBits(o)-1,h=0;h<o;h++)c[h]=this.revBin(h,p,o);return c},L.prototype.revBin=function(o,c,p){if(o===0||o===p-1)return o;for(var h=0,m=0;m<c;m++)h|=(o&1)<<c-m-1,o>>=1;return h},L.prototype.permute=function(o,c,p,h,m,w){for(var x=0;x<w;x++)h[x]=c[o[x]],m[x]=p[o[x]]},L.prototype.transform=function(o,c,p,h,m,w){this.permute(w,o,c,p,h,m);for(var x=1;x<m;x<<=1)for(var v=x<<1,s=Math.cos(2*Math.PI/v),A=Math.sin(2*Math.PI/v),V=0;V<m;V+=v)for(var D=s,z=A,j=0;j<x;j++){var X=p[V+j],re=h[V+j],nt=p[V+j+x],ae=h[V+j+x],k=D*nt-z*ae;ae=D*ae+z*nt,nt=k,p[V+j]=X+nt,h[V+j]=re+ae,p[V+j+x]=X-nt,h[V+j+x]=re-ae,j!==v&&(k=s*D-A*z,z=s*z+A*D,D=k)}},L.prototype.guessLen13b=function(o,c){var p=Math.max(c,o)|1,h=p&1,m=0;for(p=p/2|0;p;p=p>>>1)m++;return 1<<m+1+h},L.prototype.conjugate=function(o,c,p){if(!(p<=1))for(var h=0;h<p/2;h++){var m=o[h];o[h]=o[p-h-1],o[p-h-1]=m,m=c[h],c[h]=-c[p-h-1],c[p-h-1]=-m}},L.prototype.normalize13b=function(o,c){for(var p=0,h=0;h<c/2;h++){var m=Math.round(o[2*h+1]/c)*8192+Math.round(o[2*h]/c)+p;o[h]=m&67108863,m<67108864?p=0:p=m/67108864|0}return o},L.prototype.convert13b=function(o,c,p,h){for(var m=0,w=0;w<c;w++)m=m+(o[w]|0),p[2*w]=m&8191,m=m>>>13,p[2*w+1]=m&8191,m=m>>>13;for(w=2*c;w<h;++w)p[w]=0;r(m===0),r((m&-8192)===0)},L.prototype.stub=function(o){for(var c=new Array(o),p=0;p<o;p++)c[p]=0;return c},L.prototype.mulp=function(o,c,p){var h=2*this.guessLen13b(o.length,c.length),m=this.makeRBT(h),w=this.stub(h),x=new Array(h),v=new Array(h),s=new Array(h),A=new Array(h),V=new Array(h),D=new Array(h),z=p.words;z.length=h,this.convert13b(o.words,o.length,x,h),this.convert13b(c.words,c.length,A,h),this.transform(x,w,v,s,h,m),this.transform(A,w,V,D,h,m);for(var j=0;j<h;j++){var X=v[j]*V[j]-s[j]*D[j];s[j]=v[j]*D[j]+s[j]*V[j],v[j]=X}return this.conjugate(v,s,h),this.transform(v,s,z,w,h,m),this.conjugate(z,w,h),this.normalize13b(z,h),p.negative=o.negative^c.negative,p.length=o.length+c.length,p.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),B(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){r(typeof o=="number"),r(o<67108864);for(var c=0,p=0;p<this.length;p++){var h=(this.words[p]|0)*o,m=(h&67108863)+(c&67108863);c>>=26,c+=h/67108864|0,c+=m>>>26,this.words[p]=m&67108863}return c!==0&&(this.words[p]=c,this.length++),this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=P(o);if(c.length===0)return new i(1);for(var p=this,h=0;h<c.length&&c[h]===0;h++,p=p.sqr());if(++h<c.length)for(var m=p.sqr();h<c.length;h++,m=m.sqr())c[h]!==0&&(p=p.mul(m));return p},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var c=o%26,p=(o-c)/26,h=67108863>>>26-c<<26-c,m;if(c!==0){var w=0;for(m=0;m<this.length;m++){var x=this.words[m]&h,v=(this.words[m]|0)-x<<c;this.words[m]=v|w,w=x>>>26-c}w&&(this.words[m]=w,this.length++)}if(p!==0){for(m=this.length-1;m>=0;m--)this.words[m+p]=this.words[m];for(m=0;m<p;m++)this.words[m]=0;this.length+=p}return this.strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,p){r(typeof o=="number"&&o>=0);var h;c?h=(c-c%26)/26:h=0;var m=o%26,w=Math.min((o-m)/26,this.length),x=67108863^67108863>>>m<<m,v=p;if(h-=w,h=Math.max(0,h),v){for(var s=0;s<w;s++)v.words[s]=this.words[s];v.length=w}if(w!==0)if(this.length>w)for(this.length-=w,s=0;s<this.length;s++)this.words[s]=this.words[s+w];else this.words[0]=0,this.length=1;var A=0;for(s=this.length-1;s>=0&&(A!==0||s>=h);s--){var V=this.words[s]|0;this.words[s]=A<<26-m|V>>>m,A=V&x}return v&&A!==0&&(v.words[v.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,p){return r(this.negative===0),this.iushrn(o,c,p)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var c=o%26,p=(o-c)/26,h=1<<c;if(this.length<=p)return!1;var m=this.words[p];return!!(m&h)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var c=o%26,p=(o-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(c!==0&&p++,this.length=Math.min(p,this.length),c!==0){var h=67108863^67108863>>>c<<c;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,p){var h=o.length+p,m;this._expand(h);var w,x=0;for(m=0;m<o.length;m++){w=(this.words[m+p]|0)+x;var v=(o.words[m]|0)*c;w-=v&67108863,x=(w>>26)-(v/67108864|0),this.words[m+p]=w&67108863}for(;m<this.length-p;m++)w=(this.words[m+p]|0)+x,x=w>>26,this.words[m+p]=w&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,m=0;m<this.length;m++)w=-(this.words[m]|0)+x,x=w>>26,this.words[m]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var p=this.length-o.length,h=this.clone(),m=o,w=m.words[m.length-1]|0,x=this._countBits(w);p=26-x,p!==0&&(m=m.ushln(p),h.iushln(p),w=m.words[m.length-1]|0);var v=h.length-m.length,s;if(c!=="mod"){s=new i(null),s.length=v+1,s.words=new Array(s.length);for(var A=0;A<s.length;A++)s.words[A]=0}var V=h.clone()._ishlnsubmul(m,1,v);V.negative===0&&(h=V,s&&(s.words[v]=1));for(var D=v-1;D>=0;D--){var z=(h.words[m.length+D]|0)*67108864+(h.words[m.length+D-1]|0);for(z=Math.min(z/w|0,67108863),h._ishlnsubmul(m,z,D);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,D),h.isZero()||(h.negative^=1);s&&(s.words[D]=z)}return s&&s.strip(),h.strip(),c!=="div"&&p!==0&&h.iushrn(p),{div:s||null,mod:h}},i.prototype.divmod=function(o,c,p){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,w;return this.negative!==0&&o.negative===0?(w=this.neg().divmod(o,c),c!=="mod"&&(h=w.div.neg()),c!=="div"&&(m=w.mod.neg(),p&&m.negative!==0&&m.iadd(o)),{div:h,mod:m}):this.negative===0&&o.negative!==0?(w=this.divmod(o.neg(),c),c!=="mod"&&(h=w.div.neg()),{div:h,mod:w.mod}):this.negative&o.negative?(w=this.neg().divmod(o.neg(),c),c!=="div"&&(m=w.mod.neg(),p&&m.negative!==0&&m.isub(o)),{div:w.div,mod:m}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var p=c.div.negative!==0?c.mod.isub(o):c.mod,h=o.ushrn(1),m=o.andln(1),w=p.cmp(h);return w<0||m===1&&w===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){r(o<=67108863);for(var c=(1<<26)%o,p=0,h=this.length-1;h>=0;h--)p=(c*p+(this.words[h]|0))%o;return p},i.prototype.idivn=function(o){r(o<=67108863);for(var c=0,p=this.length-1;p>=0;p--){var h=(this.words[p]|0)+c*67108864;this.words[p]=h/o|0,c=h%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var c=this,p=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var h=new i(1),m=new i(0),w=new i(0),x=new i(1),v=0;c.isEven()&&p.isEven();)c.iushrn(1),p.iushrn(1),++v;for(var s=p.clone(),A=c.clone();!c.isZero();){for(var V=0,D=1;!(c.words[0]&D)&&V<26;++V,D<<=1);if(V>0)for(c.iushrn(V);V-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(s),m.isub(A)),h.iushrn(1),m.iushrn(1);for(var z=0,j=1;!(p.words[0]&j)&&z<26;++z,j<<=1);if(z>0)for(p.iushrn(z);z-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(s),x.isub(A)),w.iushrn(1),x.iushrn(1);c.cmp(p)>=0?(c.isub(p),h.isub(w),m.isub(x)):(p.isub(c),w.isub(h),x.isub(m))}return{a:w,b:x,gcd:p.iushln(v)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var c=this,p=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var h=new i(1),m=new i(0),w=p.clone();c.cmpn(1)>0&&p.cmpn(1)>0;){for(var x=0,v=1;!(c.words[0]&v)&&x<26;++x,v<<=1);if(x>0)for(c.iushrn(x);x-- >0;)h.isOdd()&&h.iadd(w),h.iushrn(1);for(var s=0,A=1;!(p.words[0]&A)&&s<26;++s,A<<=1);if(s>0)for(p.iushrn(s);s-- >0;)m.isOdd()&&m.iadd(w),m.iushrn(1);c.cmp(p)>=0?(c.isub(p),h.isub(m)):(p.isub(c),m.isub(h))}var V;return c.cmpn(1)===0?V=h:V=m,V.cmpn(0)<0&&V.iadd(o),V},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),p=o.clone();c.negative=0,p.negative=0;for(var h=0;c.isEven()&&p.isEven();h++)c.iushrn(1),p.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;p.isEven();)p.iushrn(1);var m=c.cmp(p);if(m<0){var w=c;c=p,p=w}else if(m===0||p.cmpn(1)===0)break;c.isub(p)}while(!0);return p.iushln(h)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var c=o%26,p=(o-c)/26,h=1<<c;if(this.length<=p)return this._expand(p+1),this.words[p]|=h,this;for(var m=h,w=p;m!==0&&w<this.length;w++){var x=this.words[w]|0;x+=m,m=x>>>26,x&=67108863,this.words[w]=x}return m!==0&&(this.words[w]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var p;if(this.length>1)p=1;else{c&&(o=-o),r(o<=67108863,"Number is too big");var h=this.words[0]|0;p=h===o?0:h<o?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,p=this.length-1;p>=0;p--){var h=this.words[p]|0,m=o.words[p]|0;if(h!==m){h<m?c=-1:h>m&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new q(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var H={k256:null,p224:null,p192:null,p25519:null};function U(b,o){this.name=b,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,p;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),p=c.bitLength();while(p>this.n);var h=p<this.n?-1:c.ucmp(this.p);return h===0?(c.words[0]=0,c.length=1):h>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function te(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(te,U),te.prototype.split=function(o,c){for(var p=4194303,h=Math.min(o.length,9),m=0;m<h;m++)c.words[m]=o.words[m];if(c.length=h,o.length<=9){o.words[0]=0,o.length=1;return}var w=o.words[9];for(c.words[c.length++]=w&p,m=10;m<o.length;m++){var x=o.words[m]|0;o.words[m-10]=(x&p)<<4|w>>>22,w=x}w>>>=22,o.words[m-10]=w,w===0&&o.length>10?o.length-=10:o.length-=9},te.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,p=0;p<o.length;p++){var h=o.words[p]|0;c+=h*977,o.words[p]=c&67108863,c=h*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function J(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(J,U);function Y(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(Y,U);function ee(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ee,U),ee.prototype.imulK=function(o){for(var c=0,p=0;p<o.length;p++){var h=(o.words[p]|0)*19+c,m=h&67108863;h>>>=26,o.words[p]=m,c=h}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(H[o])return H[o];var c;if(o==="k256")c=new te;else if(o==="p224")c=new J;else if(o==="p192")c=new Y;else if(o==="p25519")c=new ee;else throw new Error("Unknown prime "+o);return H[o]=c,c};function q(b){if(typeof b=="string"){var o=i._prime(b);this.m=o.p,this.prime=o}else r(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}q.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},q.prototype._verify2=function(o,c){r((o.negative|c.negative)===0,"red works only with positives"),r(o.red&&o.red===c.red,"red works only with red numbers")},q.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},q.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},q.prototype.add=function(o,c){this._verify2(o,c);var p=o.add(c);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},q.prototype.iadd=function(o,c){this._verify2(o,c);var p=o.iadd(c);return p.cmp(this.m)>=0&&p.isub(this.m),p},q.prototype.sub=function(o,c){this._verify2(o,c);var p=o.sub(c);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},q.prototype.isub=function(o,c){this._verify2(o,c);var p=o.isub(c);return p.cmpn(0)<0&&p.iadd(this.m),p},q.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},q.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},q.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},q.prototype.isqr=function(o){return this.imul(o,o.clone())},q.prototype.sqr=function(o){return this.mul(o,o)},q.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(o,p)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);r(!h.isZero());var w=new i(1).toRed(this),x=w.redNeg(),v=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,v).cmp(x)!==0;)s.redIAdd(x);for(var A=this.pow(s,h),V=this.pow(o,h.addn(1).iushrn(1)),D=this.pow(o,h),z=m;D.cmp(w)!==0;){for(var j=D,X=0;j.cmp(w)!==0;X++)j=j.redSqr();r(X<z);var re=this.pow(A,new i(1).iushln(z-X-1));V=V.redMul(re),A=re.redSqr(),D=D.redMul(A),z=X}return V},q.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},q.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var p=4,h=new Array(1<<p);h[0]=new i(1).toRed(this),h[1]=o;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],o);var w=h[0],x=0,v=0,s=c.bitLength()%26;for(s===0&&(s=26),m=c.length-1;m>=0;m--){for(var A=c.words[m],V=s-1;V>=0;V--){var D=A>>V&1;if(w!==h[0]&&(w=this.sqr(w)),D===0&&x===0){v=0;continue}x<<=1,x|=D,v++,!(v!==p&&(m!==0||V!==0))&&(w=this.mul(w,h[x]),v=0,x=0)}s=26}return w},q.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},q.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new ue(o)};function ue(b){q.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ue,q),ue.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},ue.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},ue.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var p=o.imul(c),h=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=p.isub(h).iushrn(this.shift),w=m;return m.cmp(this.m)>=0?w=m.isub(this.m):m.cmpn(0)<0&&(w=m.iadd(this.m)),w._forceRed(this)},ue.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var p=o.mul(c),h=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=p.isub(h).iushrn(this.shift),w=m;return m.cmp(this.m)>=0?w=m.isub(this.m):m.cmpn(0)<0&&(w=m.iadd(this.m)),w._forceRed(this)},ue.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(typeof Kf>"u"||Kf,iy)});var ay=se(Go=>{"use strict";l();f();Object.defineProperty(Go,"__esModule",{value:!0});var oo=io(),Qx=Nh().ec,Bf=new Qx("secp256k1"),$o=Bf.curve;Go.privateKeyExport=function(e,t){t===void 0&&(t=!0);var r=new oo(e);if(r.ucmp($o.n)>=0)throw new Error("couldn't export to DER format");var n=Bf.g.mul(r);return oy(n.getX(),n.getY(),t)};Go.privateKeyModInverse=function(e){var t=new oo(e);if(t.ucmp($o.n)>=0||t.isZero())throw new Error("private key range is invalid");return t.invm($o.n).toArrayLike(Buffer,"be",32)};Go.signatureImport=function(e){var t=new oo(e.r);t.ucmp($o.n)>=0&&(t=new oo(0));var r=new oo(e.s);return r.ucmp($o.n)>=0&&(r=new oo(0)),Buffer.concat([t.toArrayLike(Buffer,"be",32),r.toArrayLike(Buffer,"be",32)])};Go.ecdhUnsafe=function(e,t,r){r===void 0&&(r=!0);var n=Bf.keyFromPublic(e),i=new oo(t);if(i.ucmp($o.n)>=0||i.isZero())throw new Error("scalar was invalid (zero or overflow)");var a=n.pub.mul(i);return oy(a.getX(),a.getY(),r)};var oy=function(e,t,r){var n;return r?(n=Buffer.alloc(33),n[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(n,1)):(n=Buffer.alloc(65),n[0]=4,e.toArrayLike(Buffer,"be",32).copy(n,1),t.toArrayLike(Buffer,"be",32).copy(n,33)),n}});var sy=se(ts=>{"use strict";l();f();Object.defineProperty(ts,"__esModule",{value:!0});var{Buffer:es}=Un(),Zx=es.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Yx=es.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);ts.privateKeyExport=function(e,t,r){r===void 0&&(r=!0);var n=es.from(r?Zx:Yx);return e.copy(n,r?8:9),t.copy(n,r?181:214),n};ts.privateKeyImport=function(e){var t=e.length,r=0;if(t<r+1||e[r]!==48||(r+=1,t<r+1||!(e[r]&128)))return null;var n=e[r]&127;if(r+=1,n<1||n>2||t<r+n)return null;var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);return r+=n,t<r+i||t<r+3||e[r]!==2||e[r+1]!==1||e[r+2]!==1||(r+=3,t<r+2||e[r]!==4||e[r+1]>32||t<r+2+e[r+1])?null:e.slice(r+2,r+2+e[r+1])};ts.signatureImportLax=function(e){var t=es.alloc(32,0),r=es.alloc(32,0),n=e.length,i=0;if(e[i++]!==48)return null;var a=e[i++];if(a&128&&(i+=a-128,i>n)||e[i++]!==2)return null;var u=e[i++];if(u&128){if(a=u-128,i+a>n)return null;for(;a>0&&e[i]===0;i+=1,a-=1);for(u=0;a>0;i+=1,a-=1)u=(u<<8)+e[i]}if(u>n-i)return null;var d=i;if(i+=u,e[i++]!==2)return null;var g=e[i++];if(g&128){if(a=g-128,i+a>n)return null;for(;a>0&&e[i]===0;i+=1,a-=1);for(g=0;a>0;i+=1,a-=1)g=(g<<8)+e[i]}if(g>n-i)return null;var S=i;for(i+=g;u>0&&e[d]===0;u-=1,d+=1);if(u>32)return null;var E=e.slice(d,d+u);for(E.copy(t,32-E.length);g>0&&e[S]===0;g-=1,S+=1);if(g>32)return null;var T=e.slice(S,S+g);return T.copy(r,32-T.length),{r:t,s:r}}});var _c=se(ve=>{"use strict";l();f();Object.defineProperty(ve,"__esModule",{value:!0});ve.ecdhUnsafe=ve.ecdh=ve.recover=ve.verify=ve.sign=ve.signatureImportLax=ve.signatureImport=ve.signatureExport=ve.signatureNormalize=ve.publicKeyCombine=ve.publicKeyTweakMul=ve.publicKeyTweakAdd=ve.publicKeyVerify=ve.publicKeyConvert=ve.publicKeyCreate=ve.privateKeyTweakMul=ve.privateKeyTweakAdd=ve.privateKeyModInverse=ve.privateKeyNegate=ve.privateKeyImport=ve.privateKeyExport=ve.privateKeyVerify=void 0;var Vt=ny(),Cc=ay(),Of=sy();ve.privateKeyVerify=function(e){return e.length!==32?!1:Vt.privateKeyVerify(Uint8Array.from(e))};ve.privateKeyExport=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var r=Cc.privateKeyExport(e,t);return Of.privateKeyExport(e,r,t)};ve.privateKeyImport=function(e){if(e=Of.privateKeyImport(e),e!==null&&e.length===32&&ve.privateKeyVerify(e))return e;throw new Error("couldn't import from DER format")};ve.privateKeyNegate=function(e){return Buffer.from(Vt.privateKeyNegate(Uint8Array.from(e)))};ve.privateKeyModInverse=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from(Cc.privateKeyModInverse(Uint8Array.from(e)))};ve.privateKeyTweakAdd=function(e,t){return Buffer.from(Vt.privateKeyTweakAdd(Uint8Array.from(e),t))};ve.privateKeyTweakMul=function(e,t){return Buffer.from(Vt.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))};ve.publicKeyCreate=function(e,t){return Buffer.from(Vt.publicKeyCreate(Uint8Array.from(e),t))};ve.publicKeyConvert=function(e,t){return Buffer.from(Vt.publicKeyConvert(Uint8Array.from(e),t))};ve.publicKeyVerify=function(e){return e.length!==33&&e.length!==65?!1:Vt.publicKeyVerify(Uint8Array.from(e))};ve.publicKeyTweakAdd=function(e,t,r){return Buffer.from(Vt.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),r))};ve.publicKeyTweakMul=function(e,t,r){return Buffer.from(Vt.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),r))};ve.publicKeyCombine=function(e,t){var r=[];return e.forEach(function(n){r.push(Uint8Array.from(n))}),Buffer.from(Vt.publicKeyCombine(r,t))};ve.signatureNormalize=function(e){return Buffer.from(Vt.signatureNormalize(Uint8Array.from(e)))};ve.signatureExport=function(e){return Buffer.from(Vt.signatureExport(Uint8Array.from(e)))};ve.signatureImport=function(e){return Buffer.from(Vt.signatureImport(Uint8Array.from(e)))};ve.signatureImportLax=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=Of.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return Cc.signatureImport(t)};ve.sign=function(e,t,r){if(r===null)throw new TypeError("options should be an Object");var n=void 0;if(r){if(n={},r.data===null)throw new TypeError("options.data should be a Buffer");if(r.data){if(r.data.length!=32)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(r.data)}if(r.noncefn===null)throw new TypeError("options.noncefn should be a Function");r.noncefn&&(n.noncefn=function(a,u,d,g,S){var E=d!=null?Buffer.from(d):null,T=g!=null?Buffer.from(g):null,P=Buffer.from("");return r.noncefn&&(P=r.noncefn(Buffer.from(a),Buffer.from(u),E,T,S)),new Uint8Array(P)})}var i=Vt.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),n);return{signature:Buffer.from(i.signature),recovery:i.recid}};ve.verify=function(e,t,r){return Vt.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),r)};ve.recover=function(e,t,r,n){return Buffer.from(Vt.ecdsaRecover(Uint8Array.from(t),r,Uint8Array.from(e),n))};ve.ecdh=function(e,t){return Buffer.from(Vt.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))};ve.ecdhUnsafe=function(e,t,r){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from(Cc.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),r))}});var Vf=se((GO,cy)=>{l();f();cy.exports=function(t){if(typeof t!="string")throw new Error("[is-hex-prefixed] value must be type 'string', is currently type "+typeof t+", while checking isHexPrefixed.");return t.slice(0,2)==="0x"}});var ly=se((ZO,uy)=>{l();f();var Xx=Vf();uy.exports=function(t){return typeof t!="string"?t:Xx(t)?t.slice(2):t}});var ao=se((e4,py)=>{"use strict";l();f();var e1=Vf(),fy=ly();function Rc(e){var t=e;if(typeof t!="string")throw new Error("[ethjs-util] while padding to even, value must be string, is currently "+typeof t+", while padToEven.");return t.length%2&&(t="0"+t),t}function dy(e){var t=e.toString(16);return"0x"+t}function t1(e){var t=dy(e);return new Buffer(Rc(t.slice(2)),"hex")}function r1(e){if(typeof e!="string")throw new Error("[ethjs-util] while getting binary size, method getBinarySize requires input 'str' to be type String, got '"+typeof e+"'.");return Buffer.byteLength(e,"utf8")}function n1(e,t,r){if(Array.isArray(e)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'superset' to be an array got type '"+typeof e+"'");if(Array.isArray(t)!==!0)throw new Error("[ethjs-util] method arrayContainsArray requires input 'subset' to be an array got type '"+typeof t+"'");return t[!!r&&"some"||"every"](function(n){return e.indexOf(n)>=0})}function i1(e){var t=new Buffer(Rc(fy(e).replace(/^0+|0+$/g,"")),"hex");return t.toString("utf8")}function o1(e){var t="",r=0,n=e.length;for(e.substring(0,2)==="0x"&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t}function a1(e){var t=new Buffer(e,"utf8");return"0x"+Rc(t.toString("hex")).replace(/^0+|0+$/g,"")}function s1(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n.toString(16);t+=i.length<2?"0"+i:i}return"0x"+t}function c1(e,t,r){if(!Array.isArray(e))throw new Error("[ethjs-util] method getKeys expecting type Array as 'params' input, got '"+typeof e+"'");if(typeof t!="string")throw new Error("[ethjs-util] method getKeys expecting type String for input 'key' got '"+typeof t+"'.");for(var n=[],i=0;i<e.length;i++){var a=e[i][t];if(r&&!a)a="";else if(typeof a!="string")throw new Error("invalid abi");n.push(a)}return n}function u1(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}py.exports={arrayContainsArray:n1,intToBuffer:t1,getBinarySize:r1,isHexPrefixed:e1,stripHexPrefix:fy,padToEven:Rc,intToHex:dy,fromAscii:s1,fromUtf8:a1,toAscii:o1,toUtf8:i1,getKeys:c1,isHexString:u1}});var Kc=se(mn=>{"use strict";l();f();var l1=mn&&mn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mn,"__esModule",{value:!0});mn.getLength=mn.decode=mn.encode=void 0;var f1=l1(Gb());function my(e){if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(my(e[r]));var n=Buffer.concat(t);return Buffer.concat([hy(n.length,192),n])}else{var i=Lf(e);return i.length===1&&i[0]<128?i:Buffer.concat([hy(i.length,128),i])}}mn.encode=my;function Df(e,t){if(e[0]==="0"&&e[1]==="0")throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function hy(e,t){if(e<56)return Buffer.from([e+t]);var r=Nf(e),n=r.length/2,i=Nf(t+55+n);return Buffer.from(i+r,"hex")}function d1(e,t){if(t===void 0&&(t=!1),!e||e.length===0)return Buffer.from([]);var r=Lf(e),n=Uf(r);if(t)return n;if(n.remainder.length!==0)throw new Error("invalid remainder");return n.data}mn.decode=d1;function p1(e){if(!e||e.length===0)return Buffer.from([]);var t=Lf(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246,i=Df(t.slice(1,n).toString("hex"),16);return n+i}mn.getLength=p1;function Uf(e){var t,r,n,i,a,u=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,d===128?n=Buffer.from([]):n=e.slice(1,t),t===2&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}else if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=Df(e.slice(1,r).toString("hex"),16),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if(n=e.slice(r,t+r),n.length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}else if(d<=247){for(t=d-191,i=e.slice(1,t);i.length;)a=Uf(i),u.push(a.data),i=a.remainder;return{data:u,remainder:e.slice(t)}}else{r=d-246,t=Df(e.slice(1,r).toString("hex"),16);var g=r+t;if(g>e.length)throw new Error("invalid rlp: total length is larger than the data");if(i=e.slice(r,g),i.length===0)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)a=Uf(i),u.push(a.data),i=a.remainder;return{data:u,remainder:e.slice(g)}}}function yy(e){return e.slice(0,2)==="0x"}function h1(e){return typeof e!="string"?e:yy(e)?e.slice(2):e}function Nf(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function m1(e){return e.length%2?"0"+e:e}function y1(e){var t=Nf(e);return Buffer.from(t,"hex")}function Lf(e){if(!Buffer.isBuffer(e)){if(typeof e=="string")return yy(e)?Buffer.from(m1(h1(e)),"hex"):Buffer.from(e);if(typeof e=="number"||typeof e=="bigint")return e?y1(e):Buffer.from([]);if(e==null)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(f1.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}return e}});var vy=se(wt=>{"use strict";l();f();Object.defineProperty(wt,"__esModule",{value:!0});wt.KECCAK256_RLP=wt.KECCAK256_RLP_S=wt.KECCAK256_RLP_ARRAY=wt.KECCAK256_RLP_ARRAY_S=wt.KECCAK256_NULL=wt.KECCAK256_NULL_S=wt.TWO_POW256=wt.MAX_INTEGER=void 0;var gy=io(),{Buffer:zf}=Un();wt.MAX_INTEGER=new gy("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16);wt.TWO_POW256=new gy("10000000000000000000000000000000000000000000000000000000000000000",16);wt.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";wt.KECCAK256_NULL=zf.from(wt.KECCAK256_NULL_S,"hex");wt.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";wt.KECCAK256_RLP_ARRAY=zf.from(wt.KECCAK256_RLP_ARRAY_S,"hex");wt.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";wt.KECCAK256_RLP=zf.from(wt.KECCAK256_RLP_S,"hex")});var Qo=se(Ze=>{"use strict";l();f();Object.defineProperty(Ze,"__esModule",{value:!0});Ze.baToJSON=Ze.addHexPrefix=Ze.toUnsigned=Ze.fromSigned=Ze.bufferToHex=Ze.bufferToInt=Ze.toBuffer=Ze.stripZeros=Ze.unpad=Ze.setLengthRight=Ze.setLength=Ze.setLengthLeft=Ze.zeros=void 0;var Jo=ao(),Ff=io();Ze.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};Ze.setLengthLeft=function(e,t,r){r===void 0&&(r=!1);var n=Ze.zeros(t);return e=Ze.toBuffer(e),r?e.length<t?(e.copy(n),n):e.slice(0,t):e.length<t?(e.copy(n,t-e.length),n):e.slice(-t)};Ze.setLength=Ze.setLengthLeft;Ze.setLengthRight=function(e,t){return Ze.setLength(e,t,!0)};Ze.unpad=function(e){e=Jo.stripHexPrefix(e);for(var t=e[0];e.length>0&&t.toString()==="0";)e=e.slice(1),t=e[0];return e};Ze.stripZeros=Ze.unpad;Ze.toBuffer=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")if(Jo.isHexString(e))e=Buffer.from(Jo.padToEven(Jo.stripHexPrefix(e)),"hex");else throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+e);else if(typeof e=="number")e=Jo.intToBuffer(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(Ff.isBN(e))e=e.toArrayLike(Buffer);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e};Ze.bufferToInt=function(e){return new Ff(Ze.toBuffer(e)).toNumber()};Ze.bufferToHex=function(e){return e=Ze.toBuffer(e),"0x"+e.toString("hex")};Ze.fromSigned=function(e){return new Ff(e).fromTwos(256)};Ze.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};Ze.addHexPrefix=function(e){return typeof e!="string"||Jo.isHexPrefixed(e)?e:"0x"+e};Ze.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(Ze.baToJSON(e[r]));return t}}});var Ay=se(qf=>{"use strict";l();f();Object.defineProperty(qf,"__esModule",{value:!0});function g1(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}qf.createHashFunction=g1});var Sy=se((m4,wy)=>{l();f();var{Transform:v1}=Dh();wy.exports=e=>class by extends v1{constructor(r,n,i,a,u){super(u),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._hashBitLength=a,this._options=u,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let a=null;try{this.update(r,n)}catch(u){a=u}i(a)}_flush(r){let n=null;try{this.push(this.digest())}catch(i){n=i}r(n)}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}digest(r){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let n=this._state.squeeze(this._hashBitLength/8);return r!==void 0&&(n=n.toString(r)),this._resetState(),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new by(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Ey=se((v4,My)=>{l();f();var{Transform:A1}=Dh();My.exports=e=>class xy extends A1{constructor(r,n,i,a){super(a),this._rate=r,this._capacity=n,this._delimitedSuffix=i,this._options=a,this._state=new e,this._state.initialize(r,n),this._finalized=!1}_transform(r,n,i){let a=null;try{this.update(r,n)}catch(u){a=u}i(a)}_flush(){}_read(r){this.push(this.squeeze(r))}update(r,n){if(!Buffer.isBuffer(r)&&typeof r!="string")throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(r)||(r=Buffer.from(r,n)),this._state.absorb(r),this}squeeze(r,n){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let i=this._state.squeeze(r);return n!==void 0&&(i=i.toString(n)),i}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){let r=new xy(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(r._state),r._finalized=this._finalized,r}}});var Py=se((w4,Ty)=>{l();f();var b1=Sy(),w1=Ey();Ty.exports=function(e){let t=b1(e),r=w1(e);return function(n,i){switch(typeof n=="string"?n.toLowerCase():n){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+n)}}}});var Cy=se(ky=>{l();f();var Iy=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];ky.p1600=function(e){for(let t=0;t<24;++t){let r=e[0]^e[10]^e[20]^e[30]^e[40],n=e[1]^e[11]^e[21]^e[31]^e[41],i=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],d=e[5]^e[15]^e[25]^e[35]^e[45],g=e[6]^e[16]^e[26]^e[36]^e[46],S=e[7]^e[17]^e[27]^e[37]^e[47],E=e[8]^e[18]^e[28]^e[38]^e[48],T=e[9]^e[19]^e[29]^e[39]^e[49],P=E^(i<<1|a>>>31),C=T^(a<<1|i>>>31),K=e[0]^P,_=e[1]^C,B=e[10]^P,L=e[11]^C,H=e[20]^P,U=e[21]^C,te=e[30]^P,J=e[31]^C,Y=e[40]^P,ee=e[41]^C;P=r^(u<<1|d>>>31),C=n^(d<<1|u>>>31);let q=e[2]^P,ue=e[3]^C,b=e[12]^P,o=e[13]^C,c=e[22]^P,p=e[23]^C,h=e[32]^P,m=e[33]^C,w=e[42]^P,x=e[43]^C;P=i^(g<<1|S>>>31),C=a^(S<<1|g>>>31);let v=e[4]^P,s=e[5]^C,A=e[14]^P,V=e[15]^C,D=e[24]^P,z=e[25]^C,j=e[34]^P,X=e[35]^C,re=e[44]^P,nt=e[45]^C;P=u^(E<<1|T>>>31),C=d^(T<<1|E>>>31);let ae=e[6]^P,k=e[7]^C,O=e[16]^P,R=e[17]^C,F=e[26]^P,Q=e[27]^C,N=e[36]^P,W=e[37]^C,Ge=e[46]^P,fe=e[47]^C;P=g^(r<<1|n>>>31),C=S^(n<<1|r>>>31);let he=e[8]^P,vr=e[9]^C,Ae=e[18]^P,ye=e[19]^C,sn=e[28]^P,ge=e[29]^C,Fe=e[38]^P,ai=e[39]^C,qe=e[48]^P,We=e[49]^C,Pn=K,be=_,we=L<<4|B>>>28,In=B<<4|L>>>28,Se=H<<3|U>>>29,xe=U<<3|H>>>29,kn=J<<9|te>>>23,Me=te<<9|J>>>23,Ee=Y<<18|ee>>>14,Cn=ee<<18|Y>>>14,Te=q<<1|ue>>>31,Pe=ue<<1|q>>>31,_n=o<<12|b>>>20,Ie=b<<12|o>>>20,ke=c<<10|p>>>22,Rn=p<<10|c>>>22,Ce=m<<13|h>>>19,_e=h<<13|m>>>19,Kn=w<<2|x>>>30,Re=x<<2|w>>>30,Ke=s<<30|v>>>2,Bn=v<<30|s>>>2,Be=A<<6|V>>>26,Oe=V<<6|A>>>26,On=z<<11|D>>>21,Ve=D<<11|z>>>21,De=j<<15|X>>>17,Vn=X<<15|j>>>17,Ue=nt<<29|re>>>3,Ne=re<<29|nt>>>3,Dn=ae<<28|k>>>4,Le=k<<28|ae>>>4,ze=R<<23|O>>>9,Cr=O<<23|R>>>9,_r=F<<25|Q>>>7,Rr=Q<<25|F>>>7,Kr=N<<21|W>>>11,Br=W<<21|N>>>11,Or=fe<<24|Ge>>>8,Vr=Ge<<24|fe>>>8,Dr=he<<27|vr>>>5,Ur=vr<<27|he>>>5,Nr=Ae<<20|ye>>>12,Lr=ye<<20|Ae>>>12,zr=ge<<7|sn>>>25,Fr=sn<<7|ge>>>25,qr=Fe<<8|ai>>>24,Wr=ai<<8|Fe>>>24,jr=qe<<14|We>>>18,Hr=We<<14|qe>>>18;e[0]=Pn^~_n&On,e[1]=be^~Ie&Ve,e[10]=Dn^~Nr&Se,e[11]=Le^~Lr&xe,e[20]=Te^~Be&_r,e[21]=Pe^~Oe&Rr,e[30]=Dr^~we&ke,e[31]=Ur^~In&Rn,e[40]=Ke^~ze&zr,e[41]=Bn^~Cr&Fr,e[2]=_n^~On&Kr,e[3]=Ie^~Ve&Br,e[12]=Nr^~Se&Ce,e[13]=Lr^~xe&_e,e[22]=Be^~_r&qr,e[23]=Oe^~Rr&Wr,e[32]=we^~ke&De,e[33]=In^~Rn&Vn,e[42]=ze^~zr&kn,e[43]=Cr^~Fr&Me,e[4]=On^~Kr&jr,e[5]=Ve^~Br&Hr,e[14]=Se^~Ce&Ue,e[15]=xe^~_e&Ne,e[24]=_r^~qr&Ee,e[25]=Rr^~Wr&Cn,e[34]=ke^~De&Or,e[35]=Rn^~Vn&Vr,e[44]=zr^~kn&Kn,e[45]=Fr^~Me&Re,e[6]=Kr^~jr&Pn,e[7]=Br^~Hr&be,e[16]=Ce^~Ue&Dn,e[17]=_e^~Ne&Le,e[26]=qr^~Ee&Te,e[27]=Wr^~Cn&Pe,e[36]=De^~Or&Dr,e[37]=Vn^~Vr&Ur,e[46]=kn^~Kn&Ke,e[47]=Me^~Re&Bn,e[8]=jr^~Pn&_n,e[9]=Hr^~be&Ie,e[18]=Ue^~Dn&Nr,e[19]=Ne^~Le&Lr,e[28]=Ee^~Te&Be,e[29]=Cn^~Pe&Oe,e[38]=Or^~Dr&we,e[39]=Vr^~Ur&In,e[48]=Kn^~Ke&ze,e[49]=Re^~Bn&Cr,e[0]^=Iy[t*2],e[1]^=Iy[t*2+1]}}});var Ry=se((P4,_y)=>{l();f();var Bc=Cy();function Zo(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}Zo.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1};Zo.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<8*(this.count%4),this.count+=1,this.count===this.blockSize&&(Bc.p1600(this.state),this.count=0)};Zo.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<8*(this.count%4),e&128&&this.count===this.blockSize-1&&Bc.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<8*((this.blockSize-1)%4),Bc.p1600(this.state),this.count=0,this.squeezing=!0};Zo.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);let t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>8*(this.count%4)&255,this.count+=1,this.count===this.blockSize&&(Bc.p1600(this.state),this.count=0);return t};Zo.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing};_y.exports=Zo});var By=se((C4,Ky)=>{l();f();Ky.exports=Py()(Ry())});var Oy=se(Yo=>{"use strict";l();f();Object.defineProperty(Yo,"__esModule",{value:!0});var Oc=Ay(),Vc=By();Yo.keccak224=Oc.createHashFunction(function(){return Vc("keccak224")});Yo.keccak256=Oc.createHashFunction(function(){return Vc("keccak256")});Yo.keccak384=Oc.createHashFunction(function(){return Vc("keccak384")});Yo.keccak512=Oc.createHashFunction(function(){return Vc("keccak512")})});var Nc=se(Jt=>{"use strict";l();f();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.rlphash=Jt.ripemd160=Jt.sha256=Jt.keccak256=Jt.keccak=void 0;var Uc=Oy(),S1=Uc.keccak224,x1=Uc.keccak384,M1=Uc.keccak256,E1=Uc.keccak512,Vy=$b(),T1=ao(),P1=Kc(),Dc=Qo();Jt.keccak=function(e,t){switch(t===void 0&&(t=256),typeof e=="string"&&!T1.isHexString(e)?e=Buffer.from(e,"utf8"):e=Dc.toBuffer(e),t||(t=256),t){case 224:return S1(e);case 256:return M1(e);case 384:return x1(e);case 512:return E1(e);default:throw new Error("Invald algorithm: keccak"+t)}};Jt.keccak256=function(e){return Jt.keccak(e)};Jt.sha256=function(e){return e=Dc.toBuffer(e),Vy("sha256").update(e).digest()};Jt.ripemd160=function(e,t){e=Dc.toBuffer(e);var r=Vy("rmd160").update(e).digest();return t===!0?Dc.setLength(r,32):r};Jt.rlphash=function(e){return Jt.keccak(P1.encode(e))}});var Dy=se(Je=>{"use strict";l();f();Object.defineProperty(Je,"__esModule",{value:!0});Je.importPublic=Je.privateToPublic=Je.privateToAddress=Je.publicToAddress=Je.pubToAddress=Je.isValidPublic=Je.isValidPrivate=Je.isPrecompiled=Je.generateAddress2=Je.generateAddress=Je.isValidChecksumAddress=Je.toChecksumAddress=Je.isZeroAddress=Je.isValidAddress=Je.zeroAddress=void 0;var Wf=Im(),I1=ao(),Xo=_c(),k1=io(),Qr=Qo(),ea=Nc();Je.zeroAddress=function(){var e=20,t=Qr.zeros(e);return Qr.bufferToHex(t)};Je.isValidAddress=function(e){return/^0x[0-9a-fA-F]{40}$/.test(e)};Je.isZeroAddress=function(e){var t=Je.zeroAddress();return t===Qr.addHexPrefix(e)};Je.toChecksumAddress=function(e,t){e=I1.stripHexPrefix(e).toLowerCase();for(var r=t!==void 0?t.toString()+"0x":"",n=ea.keccak(r+e).toString("hex"),i="0x",a=0;a<e.length;a++)parseInt(n[a],16)>=8?i+=e[a].toUpperCase():i+=e[a];return i};Je.isValidChecksumAddress=function(e,t){return Je.isValidAddress(e)&&Je.toChecksumAddress(e,t)===e};Je.generateAddress=function(e,t){e=Qr.toBuffer(e);var r=new k1(t);return r.isZero()?ea.rlphash([e,null]).slice(-20):ea.rlphash([e,Buffer.from(r.toArray())]).slice(-20)};Je.generateAddress2=function(e,t,r){var n=Qr.toBuffer(e),i=Qr.toBuffer(t),a=Qr.toBuffer(r);Wf(n.length===20),Wf(i.length===32);var u=ea.keccak256(Buffer.concat([Buffer.from("ff","hex"),n,i,ea.keccak256(a)]));return u.slice(-20)};Je.isPrecompiled=function(e){var t=Qr.unpad(e);return t.length===1&&t[0]>=1&&t[0]<=8};Je.isValidPrivate=function(e){return Xo.privateKeyVerify(e)};Je.isValidPublic=function(e,t){return t===void 0&&(t=!1),e.length===64?Xo.publicKeyVerify(Buffer.concat([Buffer.from([4]),e])):t?Xo.publicKeyVerify(e):!1};Je.pubToAddress=function(e,t){return t===void 0&&(t=!1),e=Qr.toBuffer(e),t&&e.length!==64&&(e=Xo.publicKeyConvert(e,!1).slice(1)),Wf(e.length===64),ea.keccak(e).slice(-20)};Je.publicToAddress=Je.pubToAddress;Je.privateToAddress=function(e){return Je.publicToAddress(Je.privateToPublic(e))};Je.privateToPublic=function(e){return e=Qr.toBuffer(e),Xo.publicKeyCreate(e,!1).slice(1)};Je.importPublic=function(e){return e=Qr.toBuffer(e),e.length!==64&&(e=Xo.publicKeyConvert(e,!1).slice(1)),e}});var Uy=se(Qt=>{"use strict";l();f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.hashPersonalMessage=Qt.isValidSignature=Qt.fromRpcSig=Qt.toRpcSig=Qt.ecrecover=Qt.ecsign=void 0;var jf=_c(),Lc=io(),so=Qo(),C1=Nc();Qt.ecsign=function(e,t,r){var n=jf.sign(e,t),i=n.recovery,a={r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:r?i+(r*2+35):i+27};return a};Qt.ecrecover=function(e,t,r,n,i){var a=Buffer.concat([so.setLength(r,32),so.setLength(n,32)],64),u=Hf(t,i);if(!$f(u))throw new Error("Invalid signature v value");var d=jf.recover(e,a,u);return jf.publicKeyConvert(d,!1).slice(1)};Qt.toRpcSig=function(e,t,r,n){var i=Hf(e,n);if(!$f(i))throw new Error("Invalid signature v value");return so.bufferToHex(Buffer.concat([so.setLengthLeft(t,32),so.setLengthLeft(r,32),so.toBuffer(e)]))};Qt.fromRpcSig=function(e){var t=so.toBuffer(e);if(t.length!==65)throw new Error("Invalid signature length");var r=t[64];return r<27&&(r+=27),{v:r,r:t.slice(0,32),s:t.slice(32,64)}};Qt.isValidSignature=function(e,t,r,n,i){n===void 0&&(n=!0);var a=new Lc("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),u=new Lc("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(t.length!==32||r.length!==32||!$f(Hf(e,i)))return!1;var d=new Lc(t),g=new Lc(r);return!(d.isZero()||d.gt(u)||g.isZero()||g.gt(u)||n&&g.cmp(a)===1)};Qt.hashPersonalMessage=function(e){var t=Buffer.from(`Ethereum Signed Message:
`+e.length.toString(),"utf-8");return C1.keccak(Buffer.concat([t,e]))};function Hf(e,t){return t?e-(2*t+35):e-27}function $f(e){return e===0||e===1}});var zy=se(Fc=>{"use strict";l();f();Object.defineProperty(Fc,"__esModule",{value:!0});Fc.defineProperties=void 0;var Ny=Im(),_1=ao(),Ly=Kc(),zc=Qo();Fc.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(i){if(i===void 0&&(i=!1),i){var a={};return e._fields.forEach(function(u){a[u]="0x"+e[u].toString("hex")}),a}return zc.baToJSON(e.raw)},e.serialize=function(){return Ly.encode(e.raw)},t.forEach(function(i,a){e._fields.push(i.name);function u(){return e.raw[a]}function d(g){g=zc.toBuffer(g),g.toString("hex")==="00"&&!i.allowZero&&(g=Buffer.allocUnsafe(0)),i.allowLess&&i.length?(g=zc.stripZeros(g),Ny(i.length>=g.length,"The field "+i.name+" must not have more "+i.length+" bytes")):!(i.allowZero&&g.length===0)&&i.length&&Ny(i.length===g.length,"The field "+i.name+" must have byte length of "+i.length),e.raw[a]=g}Object.defineProperty(e,i.name,{enumerable:!0,configurable:!0,get:u,set:d}),i.default&&(e[i.name]=i.default),i.alias&&Object.defineProperty(e,i.alias,{enumerable:!1,configurable:!0,set:d,get:u})}),r)if(typeof r=="string"&&(r=Buffer.from(_1.stripHexPrefix(r),"hex")),Buffer.isBuffer(r)&&(r=Ly.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach(function(i,a){e[e._fields[a]]=zc.toBuffer(i)})}else if(typeof r=="object"){var n=Object.keys(r);t.forEach(function(i){n.indexOf(i.name)!==-1&&(e[i.name]=r[i.name]),n.indexOf(i.alias)!==-1&&(e[i.alias]=r[i.alias])})}else throw new Error("invalid data")}});var rs=se(Et=>{"use strict";l();f();var R1=Et&&Et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ta=Et&&Et.__exportStar||function(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&R1(t,e,r)};Object.defineProperty(Et,"__esModule",{value:!0});Et.secp256k1=Et.rlp=Et.BN=void 0;var K1=_c();Et.secp256k1=K1;var B1=ao(),O1=io();Et.BN=O1;var V1=Kc();Et.rlp=V1;Object.assign(Et,B1);ta(vy(),Et);ta(Dy(),Et);ta(Nc(),Et);ta(Uy(),Et);ta(Qo(),Et);ta(zy(),Et)});var ns=se(Zt=>{"use strict";l();f();Object.defineProperty(Zt,"__esModule",{value:!0});Zt.normalize=Zt.recoverPublicKey=Zt.concatSig=Zt.legacyToBuffer=Zt.isNullish=Zt.padWithZeroes=void 0;var Er=rs(),Gf=ao();function Jf(e,t){if(e!==""&&!/^[a-f0-9]+$/iu.test(e))throw new Error(`Expected an unprefixed hex string. Received: ${e}`);if(t<0)throw new Error(`Expected a non-negative integer target length. Received: ${t}`);return String.prototype.padStart.call(e,t,"0")}Zt.padWithZeroes=Jf;function D1(e){return e==null}Zt.isNullish=D1;function U1(e){return typeof e=="string"&&!Gf.isHexString(e)?Buffer.from(e):Er.toBuffer(e)}Zt.legacyToBuffer=U1;function N1(e,t,r){let n=Er.fromSigned(t),i=Er.fromSigned(r),a=Er.bufferToInt(e),u=Jf(Er.toUnsigned(n).toString("hex"),64),d=Jf(Er.toUnsigned(i).toString("hex"),64),g=Gf.stripHexPrefix(Gf.intToHex(a));return Er.addHexPrefix(u.concat(d,g))}Zt.concatSig=N1;function L1(e,t){let r=Er.fromRpcSig(t);return Er.ecrecover(e,r.v,r.r,r.s)}Zt.recoverPublicKey=L1;function z1(e){if(e){if(typeof e=="number"){let t=Er.toBuffer(e);e=Er.bufferToHex(t)}if(typeof e!="string"){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=` received ${typeof e}: ${e}`,new Error(t)}return Er.addHexPrefix(e.toLowerCase())}}Zt.normalize=z1});var qy=se(bi=>{"use strict";l();f();Object.defineProperty(bi,"__esModule",{value:!0});bi.extractPublicKey=bi.recoverPersonalSignature=bi.personalSign=void 0;var ra=rs(),yn=ns();function F1({privateKey:e,data:t}){if(yn.isNullish(t))throw new Error("Missing data parameter");if(yn.isNullish(e))throw new Error("Missing privateKey parameter");let r=yn.legacyToBuffer(t),n=ra.hashPersonalMessage(r),i=ra.ecsign(n,e);return yn.concatSig(ra.toBuffer(i.v),i.r,i.s)}bi.personalSign=F1;function q1({data:e,signature:t}){if(yn.isNullish(e))throw new Error("Missing data parameter");if(yn.isNullish(t))throw new Error("Missing signature parameter");let r=Fy(e,t),n=ra.publicToAddress(r);return ra.bufferToHex(n)}bi.recoverPersonalSignature=q1;function W1({data:e,signature:t}){if(yn.isNullish(e))throw new Error("Missing data parameter");if(yn.isNullish(t))throw new Error("Missing signature parameter");return`0x${Fy(e,t).toString("hex")}`}bi.extractPublicKey=W1;function Fy(e,t){let r=ra.hashPersonalMessage(yn.legacyToBuffer(e));return yn.recoverPublicKey(r,t)}});var jy=se((Wy,Qf)=>{l();f();(function(e,t){"use strict";function r(b,o){if(!b)throw new Error(o||"Assertion failed")}function n(b,o){b.super_=o;var c=function(){};c.prototype=o.prototype,b.prototype=new c,b.prototype.constructor=b}function i(b,o,c){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((o==="le"||o==="be")&&(c=o,o=10),this._init(b||0,o||10,c||"be"))}typeof e=="object"?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof self<"u"&&typeof self.Buffer<"u"?a=self.Buffer:a=Uh().Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,c){return o.cmp(c)>0?o:c},i.min=function(o,c){return o.cmp(c)<0?o:c},i.prototype._init=function(o,c,p){if(typeof o=="number")return this._initNumber(o,c,p);if(typeof o=="object")return this._initArray(o,c,p);c==="hex"&&(c=16),r(c===(c|0)&&c>=2&&c<=36),o=o.toString().replace(/\s+/g,"");var h=0;o[0]==="-"&&(h++,this.negative=1),h<o.length&&(c===16?this._parseHex(o,h,p):(this._parseBase(o,c,h),p==="le"&&this._initArray(this.toArray(),c,p)))},i.prototype._initNumber=function(o,c,p){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),c,p)},i.prototype._initArray=function(o,c,p){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m,w,x=0;if(p==="be")for(h=o.length-1,m=0;h>=0;h-=3)w=o[h]|o[h-1]<<8|o[h-2]<<16,this.words[m]|=w<<x&67108863,this.words[m+1]=w>>>26-x&67108863,x+=24,x>=26&&(x-=26,m++);else if(p==="le")for(h=0,m=0;h<o.length;h+=3)w=o[h]|o[h+1]<<8|o[h+2]<<16,this.words[m]|=w<<x&67108863,this.words[m+1]=w>>>26-x&67108863,x+=24,x>=26&&(x-=26,m++);return this.strip()};function u(b,o){var c=b.charCodeAt(o);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function d(b,o,c){var p=u(b,c);return c-1>=o&&(p|=u(b,c-1)<<4),p}i.prototype._parseHex=function(o,c,p){this.length=Math.ceil((o.length-c)/6),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var m=0,w=0,x;if(p==="be")for(h=o.length-1;h>=c;h-=2)x=d(o,c,h)<<m,this.words[w]|=x&67108863,m>=18?(m-=18,w+=1,this.words[w]|=x>>>26):m+=8;else{var v=o.length-c;for(h=v%2===0?c+1:c;h<o.length;h+=2)x=d(o,c,h)<<m,this.words[w]|=x&67108863,m>=18?(m-=18,w+=1,this.words[w]|=x>>>26):m+=8}this.strip()};function g(b,o,c,p){for(var h=0,m=Math.min(b.length,c),w=o;w<m;w++){var x=b.charCodeAt(w)-48;h*=p,x>=49?h+=x-49+10:x>=17?h+=x-17+10:h+=x}return h}i.prototype._parseBase=function(o,c,p){this.words=[0],this.length=1;for(var h=0,m=1;m<=67108863;m*=c)h++;h--,m=m/c|0;for(var w=o.length-p,x=w%h,v=Math.min(w,w-x)+p,s=0,A=p;A<v;A+=h)s=g(o,A,A+h,c),this.imuln(m),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(x!==0){var V=1;for(s=g(o,A,o.length,c),A=0;A<x;A++)V*=c;this.imuln(V),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this.strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var c=0;c<this.length;c++)o.words[c]=this.words[c];o.length=this.length,o.negative=this.negative,o.red=this.red},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],T=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,c){o=o||10,c=c|0||1;var p;if(o===16||o==="hex"){p="";for(var h=0,m=0,w=0;w<this.length;w++){var x=this.words[w],v=((x<<h|m)&16777215).toString(16);m=x>>>24-h&16777215,m!==0||w!==this.length-1?p=S[6-v.length]+v+p:p=v+p,h+=2,h>=26&&(h-=26,w--)}for(m!==0&&(p=m.toString(16)+p);p.length%c!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(o===(o|0)&&o>=2&&o<=36){var s=E[o],A=T[o];p="";var V=this.clone();for(V.negative=0;!V.isZero();){var D=V.modn(A).toString(o);V=V.idivn(A),V.isZero()?p=D+p:p=S[s-D.length]+D+p}for(this.isZero()&&(p="0"+p);p.length%c!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(o,c){return r(typeof a<"u"),this.toArrayLike(a,o,c)},i.prototype.toArray=function(o,c){return this.toArrayLike(Array,o,c)},i.prototype.toArrayLike=function(o,c,p){var h=this.byteLength(),m=p||Math.max(1,h);r(h<=m,"byte array longer than desired length"),r(m>0,"Requested array length <= 0"),this.strip();var w=c==="le",x=new o(m),v,s,A=this.clone();if(w){for(s=0;!A.isZero();s++)v=A.andln(255),A.iushrn(8),x[s]=v;for(;s<m;s++)x[s]=0}else{for(s=0;s<m-h;s++)x[s]=0;for(s=0;!A.isZero();s++)v=A.andln(255),A.iushrn(8),x[m-s-1]=v}return x},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var c=o,p=0;return c>=4096&&(p+=13,c>>>=13),c>=64&&(p+=7,c>>>=7),c>=8&&(p+=4,c>>>=4),c>=2&&(p+=2,c>>>=2),p+c},i.prototype._zeroBits=function(o){if(o===0)return 26;var c=o,p=0;return c&8191||(p+=13,c>>>=13),c&127||(p+=7,c>>>=7),c&15||(p+=4,c>>>=4),c&3||(p+=2,c>>>=2),c&1||p++,p},i.prototype.bitLength=function(){var o=this.words[this.length-1],c=this._countBits(o);return(this.length-1)*26+c};function P(b){for(var o=new Array(b.bitLength()),c=0;c<o.length;c++){var p=c/26|0,h=c%26;o[c]=(b.words[p]&1<<h)>>>h}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,c=0;c<this.length;c++){var p=this._zeroBits(this.words[c]);if(o+=p,p!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var c=0;c<o.length;c++)this.words[c]=this.words[c]|o.words[c];return this.strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var c;this.length>o.length?c=o:c=this;for(var p=0;p<c.length;p++)this.words[p]=this.words[p]&o.words[p];return this.length=c.length,this.strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var c,p;this.length>o.length?(c=this,p=o):(c=o,p=this);for(var h=0;h<p.length;h++)this.words[h]=c.words[h]^p.words[h];if(this!==c)for(;h<c.length;h++)this.words[h]=c.words[h];return this.length=c.length,this.strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var c=Math.ceil(o/26)|0,p=o%26;this._expand(c),p>0&&c--;for(var h=0;h<c;h++)this.words[h]=~this.words[h]&67108863;return p>0&&(this.words[h]=~this.words[h]&67108863>>26-p),this.strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,c){r(typeof o=="number"&&o>=0);var p=o/26|0,h=o%26;return this._expand(p+1),c?this.words[p]=this.words[p]|1<<h:this.words[p]=this.words[p]&~(1<<h),this.strip()},i.prototype.iadd=function(o){var c;if(this.negative!==0&&o.negative===0)return this.negative=0,c=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,c=this.isub(o),o.negative=1,c._normSign();var p,h;this.length>o.length?(p=this,h=o):(p=o,h=this);for(var m=0,w=0;w<h.length;w++)c=(p.words[w]|0)+(h.words[w]|0)+m,this.words[w]=c&67108863,m=c>>>26;for(;m!==0&&w<p.length;w++)c=(p.words[w]|0)+m,this.words[w]=c&67108863,m=c>>>26;if(this.length=p.length,m!==0)this.words[this.length]=m,this.length++;else if(p!==this)for(;w<p.length;w++)this.words[w]=p.words[w];return this},i.prototype.add=function(o){var c;return o.negative!==0&&this.negative===0?(o.negative=0,c=this.sub(o),o.negative^=1,c):o.negative===0&&this.negative!==0?(this.negative=0,c=o.sub(this),this.negative=1,c):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var c=this.iadd(o);return o.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var p=this.cmp(o);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,m;p>0?(h=this,m=o):(h=o,m=this);for(var w=0,x=0;x<m.length;x++)c=(h.words[x]|0)-(m.words[x]|0)+w,w=c>>26,this.words[x]=c&67108863;for(;w!==0&&x<h.length;x++)c=(h.words[x]|0)+w,w=c>>26,this.words[x]=c&67108863;if(w===0&&x<h.length&&h!==this)for(;x<h.length;x++)this.words[x]=h.words[x];return this.length=Math.max(this.length,x),h!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function C(b,o,c){c.negative=o.negative^b.negative;var p=b.length+o.length|0;c.length=p,p=p-1|0;var h=b.words[0]|0,m=o.words[0]|0,w=h*m,x=w&67108863,v=w/67108864|0;c.words[0]=x;for(var s=1;s<p;s++){for(var A=v>>>26,V=v&67108863,D=Math.min(s,o.length-1),z=Math.max(0,s-b.length+1);z<=D;z++){var j=s-z|0;h=b.words[j]|0,m=o.words[z]|0,w=h*m+V,A+=w/67108864|0,V=w&67108863}c.words[s]=V|0,v=A|0}return v!==0?c.words[s]=v|0:c.length--,c.strip()}var K=function(o,c,p){var h=o.words,m=c.words,w=p.words,x=0,v,s,A,V=h[0]|0,D=V&8191,z=V>>>13,j=h[1]|0,X=j&8191,re=j>>>13,nt=h[2]|0,ae=nt&8191,k=nt>>>13,O=h[3]|0,R=O&8191,F=O>>>13,Q=h[4]|0,N=Q&8191,W=Q>>>13,Ge=h[5]|0,fe=Ge&8191,he=Ge>>>13,vr=h[6]|0,Ae=vr&8191,ye=vr>>>13,sn=h[7]|0,ge=sn&8191,Fe=sn>>>13,ai=h[8]|0,qe=ai&8191,We=ai>>>13,Pn=h[9]|0,be=Pn&8191,we=Pn>>>13,In=m[0]|0,Se=In&8191,xe=In>>>13,kn=m[1]|0,Me=kn&8191,Ee=kn>>>13,Cn=m[2]|0,Te=Cn&8191,Pe=Cn>>>13,_n=m[3]|0,Ie=_n&8191,ke=_n>>>13,Rn=m[4]|0,Ce=Rn&8191,_e=Rn>>>13,Kn=m[5]|0,Re=Kn&8191,Ke=Kn>>>13,Bn=m[6]|0,Be=Bn&8191,Oe=Bn>>>13,On=m[7]|0,Ve=On&8191,De=On>>>13,Vn=m[8]|0,Ue=Vn&8191,Ne=Vn>>>13,Dn=m[9]|0,Le=Dn&8191,ze=Dn>>>13;p.negative=o.negative^c.negative,p.length=19,v=Math.imul(D,Se),s=Math.imul(D,xe),s=s+Math.imul(z,Se)|0,A=Math.imul(z,xe);var Cr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,v=Math.imul(X,Se),s=Math.imul(X,xe),s=s+Math.imul(re,Se)|0,A=Math.imul(re,xe),v=v+Math.imul(D,Me)|0,s=s+Math.imul(D,Ee)|0,s=s+Math.imul(z,Me)|0,A=A+Math.imul(z,Ee)|0;var _r=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(_r>>>26)|0,_r&=67108863,v=Math.imul(ae,Se),s=Math.imul(ae,xe),s=s+Math.imul(k,Se)|0,A=Math.imul(k,xe),v=v+Math.imul(X,Me)|0,s=s+Math.imul(X,Ee)|0,s=s+Math.imul(re,Me)|0,A=A+Math.imul(re,Ee)|0,v=v+Math.imul(D,Te)|0,s=s+Math.imul(D,Pe)|0,s=s+Math.imul(z,Te)|0,A=A+Math.imul(z,Pe)|0;var Rr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,v=Math.imul(R,Se),s=Math.imul(R,xe),s=s+Math.imul(F,Se)|0,A=Math.imul(F,xe),v=v+Math.imul(ae,Me)|0,s=s+Math.imul(ae,Ee)|0,s=s+Math.imul(k,Me)|0,A=A+Math.imul(k,Ee)|0,v=v+Math.imul(X,Te)|0,s=s+Math.imul(X,Pe)|0,s=s+Math.imul(re,Te)|0,A=A+Math.imul(re,Pe)|0,v=v+Math.imul(D,Ie)|0,s=s+Math.imul(D,ke)|0,s=s+Math.imul(z,Ie)|0,A=A+Math.imul(z,ke)|0;var Kr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Kr>>>26)|0,Kr&=67108863,v=Math.imul(N,Se),s=Math.imul(N,xe),s=s+Math.imul(W,Se)|0,A=Math.imul(W,xe),v=v+Math.imul(R,Me)|0,s=s+Math.imul(R,Ee)|0,s=s+Math.imul(F,Me)|0,A=A+Math.imul(F,Ee)|0,v=v+Math.imul(ae,Te)|0,s=s+Math.imul(ae,Pe)|0,s=s+Math.imul(k,Te)|0,A=A+Math.imul(k,Pe)|0,v=v+Math.imul(X,Ie)|0,s=s+Math.imul(X,ke)|0,s=s+Math.imul(re,Ie)|0,A=A+Math.imul(re,ke)|0,v=v+Math.imul(D,Ce)|0,s=s+Math.imul(D,_e)|0,s=s+Math.imul(z,Ce)|0,A=A+Math.imul(z,_e)|0;var Br=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Br>>>26)|0,Br&=67108863,v=Math.imul(fe,Se),s=Math.imul(fe,xe),s=s+Math.imul(he,Se)|0,A=Math.imul(he,xe),v=v+Math.imul(N,Me)|0,s=s+Math.imul(N,Ee)|0,s=s+Math.imul(W,Me)|0,A=A+Math.imul(W,Ee)|0,v=v+Math.imul(R,Te)|0,s=s+Math.imul(R,Pe)|0,s=s+Math.imul(F,Te)|0,A=A+Math.imul(F,Pe)|0,v=v+Math.imul(ae,Ie)|0,s=s+Math.imul(ae,ke)|0,s=s+Math.imul(k,Ie)|0,A=A+Math.imul(k,ke)|0,v=v+Math.imul(X,Ce)|0,s=s+Math.imul(X,_e)|0,s=s+Math.imul(re,Ce)|0,A=A+Math.imul(re,_e)|0,v=v+Math.imul(D,Re)|0,s=s+Math.imul(D,Ke)|0,s=s+Math.imul(z,Re)|0,A=A+Math.imul(z,Ke)|0;var Or=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Or>>>26)|0,Or&=67108863,v=Math.imul(Ae,Se),s=Math.imul(Ae,xe),s=s+Math.imul(ye,Se)|0,A=Math.imul(ye,xe),v=v+Math.imul(fe,Me)|0,s=s+Math.imul(fe,Ee)|0,s=s+Math.imul(he,Me)|0,A=A+Math.imul(he,Ee)|0,v=v+Math.imul(N,Te)|0,s=s+Math.imul(N,Pe)|0,s=s+Math.imul(W,Te)|0,A=A+Math.imul(W,Pe)|0,v=v+Math.imul(R,Ie)|0,s=s+Math.imul(R,ke)|0,s=s+Math.imul(F,Ie)|0,A=A+Math.imul(F,ke)|0,v=v+Math.imul(ae,Ce)|0,s=s+Math.imul(ae,_e)|0,s=s+Math.imul(k,Ce)|0,A=A+Math.imul(k,_e)|0,v=v+Math.imul(X,Re)|0,s=s+Math.imul(X,Ke)|0,s=s+Math.imul(re,Re)|0,A=A+Math.imul(re,Ke)|0,v=v+Math.imul(D,Be)|0,s=s+Math.imul(D,Oe)|0,s=s+Math.imul(z,Be)|0,A=A+Math.imul(z,Oe)|0;var Vr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,v=Math.imul(ge,Se),s=Math.imul(ge,xe),s=s+Math.imul(Fe,Se)|0,A=Math.imul(Fe,xe),v=v+Math.imul(Ae,Me)|0,s=s+Math.imul(Ae,Ee)|0,s=s+Math.imul(ye,Me)|0,A=A+Math.imul(ye,Ee)|0,v=v+Math.imul(fe,Te)|0,s=s+Math.imul(fe,Pe)|0,s=s+Math.imul(he,Te)|0,A=A+Math.imul(he,Pe)|0,v=v+Math.imul(N,Ie)|0,s=s+Math.imul(N,ke)|0,s=s+Math.imul(W,Ie)|0,A=A+Math.imul(W,ke)|0,v=v+Math.imul(R,Ce)|0,s=s+Math.imul(R,_e)|0,s=s+Math.imul(F,Ce)|0,A=A+Math.imul(F,_e)|0,v=v+Math.imul(ae,Re)|0,s=s+Math.imul(ae,Ke)|0,s=s+Math.imul(k,Re)|0,A=A+Math.imul(k,Ke)|0,v=v+Math.imul(X,Be)|0,s=s+Math.imul(X,Oe)|0,s=s+Math.imul(re,Be)|0,A=A+Math.imul(re,Oe)|0,v=v+Math.imul(D,Ve)|0,s=s+Math.imul(D,De)|0,s=s+Math.imul(z,Ve)|0,A=A+Math.imul(z,De)|0;var Dr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Dr>>>26)|0,Dr&=67108863,v=Math.imul(qe,Se),s=Math.imul(qe,xe),s=s+Math.imul(We,Se)|0,A=Math.imul(We,xe),v=v+Math.imul(ge,Me)|0,s=s+Math.imul(ge,Ee)|0,s=s+Math.imul(Fe,Me)|0,A=A+Math.imul(Fe,Ee)|0,v=v+Math.imul(Ae,Te)|0,s=s+Math.imul(Ae,Pe)|0,s=s+Math.imul(ye,Te)|0,A=A+Math.imul(ye,Pe)|0,v=v+Math.imul(fe,Ie)|0,s=s+Math.imul(fe,ke)|0,s=s+Math.imul(he,Ie)|0,A=A+Math.imul(he,ke)|0,v=v+Math.imul(N,Ce)|0,s=s+Math.imul(N,_e)|0,s=s+Math.imul(W,Ce)|0,A=A+Math.imul(W,_e)|0,v=v+Math.imul(R,Re)|0,s=s+Math.imul(R,Ke)|0,s=s+Math.imul(F,Re)|0,A=A+Math.imul(F,Ke)|0,v=v+Math.imul(ae,Be)|0,s=s+Math.imul(ae,Oe)|0,s=s+Math.imul(k,Be)|0,A=A+Math.imul(k,Oe)|0,v=v+Math.imul(X,Ve)|0,s=s+Math.imul(X,De)|0,s=s+Math.imul(re,Ve)|0,A=A+Math.imul(re,De)|0,v=v+Math.imul(D,Ue)|0,s=s+Math.imul(D,Ne)|0,s=s+Math.imul(z,Ue)|0,A=A+Math.imul(z,Ne)|0;var Ur=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Ur>>>26)|0,Ur&=67108863,v=Math.imul(be,Se),s=Math.imul(be,xe),s=s+Math.imul(we,Se)|0,A=Math.imul(we,xe),v=v+Math.imul(qe,Me)|0,s=s+Math.imul(qe,Ee)|0,s=s+Math.imul(We,Me)|0,A=A+Math.imul(We,Ee)|0,v=v+Math.imul(ge,Te)|0,s=s+Math.imul(ge,Pe)|0,s=s+Math.imul(Fe,Te)|0,A=A+Math.imul(Fe,Pe)|0,v=v+Math.imul(Ae,Ie)|0,s=s+Math.imul(Ae,ke)|0,s=s+Math.imul(ye,Ie)|0,A=A+Math.imul(ye,ke)|0,v=v+Math.imul(fe,Ce)|0,s=s+Math.imul(fe,_e)|0,s=s+Math.imul(he,Ce)|0,A=A+Math.imul(he,_e)|0,v=v+Math.imul(N,Re)|0,s=s+Math.imul(N,Ke)|0,s=s+Math.imul(W,Re)|0,A=A+Math.imul(W,Ke)|0,v=v+Math.imul(R,Be)|0,s=s+Math.imul(R,Oe)|0,s=s+Math.imul(F,Be)|0,A=A+Math.imul(F,Oe)|0,v=v+Math.imul(ae,Ve)|0,s=s+Math.imul(ae,De)|0,s=s+Math.imul(k,Ve)|0,A=A+Math.imul(k,De)|0,v=v+Math.imul(X,Ue)|0,s=s+Math.imul(X,Ne)|0,s=s+Math.imul(re,Ue)|0,A=A+Math.imul(re,Ne)|0,v=v+Math.imul(D,Le)|0,s=s+Math.imul(D,ze)|0,s=s+Math.imul(z,Le)|0,A=A+Math.imul(z,ze)|0;var Nr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,v=Math.imul(be,Me),s=Math.imul(be,Ee),s=s+Math.imul(we,Me)|0,A=Math.imul(we,Ee),v=v+Math.imul(qe,Te)|0,s=s+Math.imul(qe,Pe)|0,s=s+Math.imul(We,Te)|0,A=A+Math.imul(We,Pe)|0,v=v+Math.imul(ge,Ie)|0,s=s+Math.imul(ge,ke)|0,s=s+Math.imul(Fe,Ie)|0,A=A+Math.imul(Fe,ke)|0,v=v+Math.imul(Ae,Ce)|0,s=s+Math.imul(Ae,_e)|0,s=s+Math.imul(ye,Ce)|0,A=A+Math.imul(ye,_e)|0,v=v+Math.imul(fe,Re)|0,s=s+Math.imul(fe,Ke)|0,s=s+Math.imul(he,Re)|0,A=A+Math.imul(he,Ke)|0,v=v+Math.imul(N,Be)|0,s=s+Math.imul(N,Oe)|0,s=s+Math.imul(W,Be)|0,A=A+Math.imul(W,Oe)|0,v=v+Math.imul(R,Ve)|0,s=s+Math.imul(R,De)|0,s=s+Math.imul(F,Ve)|0,A=A+Math.imul(F,De)|0,v=v+Math.imul(ae,Ue)|0,s=s+Math.imul(ae,Ne)|0,s=s+Math.imul(k,Ue)|0,A=A+Math.imul(k,Ne)|0,v=v+Math.imul(X,Le)|0,s=s+Math.imul(X,ze)|0,s=s+Math.imul(re,Le)|0,A=A+Math.imul(re,ze)|0;var Lr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,v=Math.imul(be,Te),s=Math.imul(be,Pe),s=s+Math.imul(we,Te)|0,A=Math.imul(we,Pe),v=v+Math.imul(qe,Ie)|0,s=s+Math.imul(qe,ke)|0,s=s+Math.imul(We,Ie)|0,A=A+Math.imul(We,ke)|0,v=v+Math.imul(ge,Ce)|0,s=s+Math.imul(ge,_e)|0,s=s+Math.imul(Fe,Ce)|0,A=A+Math.imul(Fe,_e)|0,v=v+Math.imul(Ae,Re)|0,s=s+Math.imul(Ae,Ke)|0,s=s+Math.imul(ye,Re)|0,A=A+Math.imul(ye,Ke)|0,v=v+Math.imul(fe,Be)|0,s=s+Math.imul(fe,Oe)|0,s=s+Math.imul(he,Be)|0,A=A+Math.imul(he,Oe)|0,v=v+Math.imul(N,Ve)|0,s=s+Math.imul(N,De)|0,s=s+Math.imul(W,Ve)|0,A=A+Math.imul(W,De)|0,v=v+Math.imul(R,Ue)|0,s=s+Math.imul(R,Ne)|0,s=s+Math.imul(F,Ue)|0,A=A+Math.imul(F,Ne)|0,v=v+Math.imul(ae,Le)|0,s=s+Math.imul(ae,ze)|0,s=s+Math.imul(k,Le)|0,A=A+Math.imul(k,ze)|0;var zr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(zr>>>26)|0,zr&=67108863,v=Math.imul(be,Ie),s=Math.imul(be,ke),s=s+Math.imul(we,Ie)|0,A=Math.imul(we,ke),v=v+Math.imul(qe,Ce)|0,s=s+Math.imul(qe,_e)|0,s=s+Math.imul(We,Ce)|0,A=A+Math.imul(We,_e)|0,v=v+Math.imul(ge,Re)|0,s=s+Math.imul(ge,Ke)|0,s=s+Math.imul(Fe,Re)|0,A=A+Math.imul(Fe,Ke)|0,v=v+Math.imul(Ae,Be)|0,s=s+Math.imul(Ae,Oe)|0,s=s+Math.imul(ye,Be)|0,A=A+Math.imul(ye,Oe)|0,v=v+Math.imul(fe,Ve)|0,s=s+Math.imul(fe,De)|0,s=s+Math.imul(he,Ve)|0,A=A+Math.imul(he,De)|0,v=v+Math.imul(N,Ue)|0,s=s+Math.imul(N,Ne)|0,s=s+Math.imul(W,Ue)|0,A=A+Math.imul(W,Ne)|0,v=v+Math.imul(R,Le)|0,s=s+Math.imul(R,ze)|0,s=s+Math.imul(F,Le)|0,A=A+Math.imul(F,ze)|0;var Fr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,v=Math.imul(be,Ce),s=Math.imul(be,_e),s=s+Math.imul(we,Ce)|0,A=Math.imul(we,_e),v=v+Math.imul(qe,Re)|0,s=s+Math.imul(qe,Ke)|0,s=s+Math.imul(We,Re)|0,A=A+Math.imul(We,Ke)|0,v=v+Math.imul(ge,Be)|0,s=s+Math.imul(ge,Oe)|0,s=s+Math.imul(Fe,Be)|0,A=A+Math.imul(Fe,Oe)|0,v=v+Math.imul(Ae,Ve)|0,s=s+Math.imul(Ae,De)|0,s=s+Math.imul(ye,Ve)|0,A=A+Math.imul(ye,De)|0,v=v+Math.imul(fe,Ue)|0,s=s+Math.imul(fe,Ne)|0,s=s+Math.imul(he,Ue)|0,A=A+Math.imul(he,Ne)|0,v=v+Math.imul(N,Le)|0,s=s+Math.imul(N,ze)|0,s=s+Math.imul(W,Le)|0,A=A+Math.imul(W,ze)|0;var qr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(qr>>>26)|0,qr&=67108863,v=Math.imul(be,Re),s=Math.imul(be,Ke),s=s+Math.imul(we,Re)|0,A=Math.imul(we,Ke),v=v+Math.imul(qe,Be)|0,s=s+Math.imul(qe,Oe)|0,s=s+Math.imul(We,Be)|0,A=A+Math.imul(We,Oe)|0,v=v+Math.imul(ge,Ve)|0,s=s+Math.imul(ge,De)|0,s=s+Math.imul(Fe,Ve)|0,A=A+Math.imul(Fe,De)|0,v=v+Math.imul(Ae,Ue)|0,s=s+Math.imul(Ae,Ne)|0,s=s+Math.imul(ye,Ue)|0,A=A+Math.imul(ye,Ne)|0,v=v+Math.imul(fe,Le)|0,s=s+Math.imul(fe,ze)|0,s=s+Math.imul(he,Le)|0,A=A+Math.imul(he,ze)|0;var Wr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,v=Math.imul(be,Be),s=Math.imul(be,Oe),s=s+Math.imul(we,Be)|0,A=Math.imul(we,Oe),v=v+Math.imul(qe,Ve)|0,s=s+Math.imul(qe,De)|0,s=s+Math.imul(We,Ve)|0,A=A+Math.imul(We,De)|0,v=v+Math.imul(ge,Ue)|0,s=s+Math.imul(ge,Ne)|0,s=s+Math.imul(Fe,Ue)|0,A=A+Math.imul(Fe,Ne)|0,v=v+Math.imul(Ae,Le)|0,s=s+Math.imul(Ae,ze)|0,s=s+Math.imul(ye,Le)|0,A=A+Math.imul(ye,ze)|0;var jr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(jr>>>26)|0,jr&=67108863,v=Math.imul(be,Ve),s=Math.imul(be,De),s=s+Math.imul(we,Ve)|0,A=Math.imul(we,De),v=v+Math.imul(qe,Ue)|0,s=s+Math.imul(qe,Ne)|0,s=s+Math.imul(We,Ue)|0,A=A+Math.imul(We,Ne)|0,v=v+Math.imul(ge,Le)|0,s=s+Math.imul(ge,ze)|0,s=s+Math.imul(Fe,Le)|0,A=A+Math.imul(Fe,ze)|0;var Hr=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,v=Math.imul(be,Ue),s=Math.imul(be,Ne),s=s+Math.imul(we,Ue)|0,A=Math.imul(we,Ne),v=v+Math.imul(qe,Le)|0,s=s+Math.imul(qe,ze)|0,s=s+Math.imul(We,Le)|0,A=A+Math.imul(We,ze)|0;var Li=(x+v|0)+((s&8191)<<13)|0;x=(A+(s>>>13)|0)+(Li>>>26)|0,Li&=67108863,v=Math.imul(be,Le),s=Math.imul(be,ze),s=s+Math.imul(we,Le)|0,A=Math.imul(we,ze);var zi=(x+v|0)+((s&8191)<<13)|0;return x=(A+(s>>>13)|0)+(zi>>>26)|0,zi&=67108863,w[0]=Cr,w[1]=_r,w[2]=Rr,w[3]=Kr,w[4]=Br,w[5]=Or,w[6]=Vr,w[7]=Dr,w[8]=Ur,w[9]=Nr,w[10]=Lr,w[11]=zr,w[12]=Fr,w[13]=qr,w[14]=Wr,w[15]=jr,w[16]=Hr,w[17]=Li,w[18]=zi,x!==0&&(w[19]=x,p.length++),p};Math.imul||(K=C);function _(b,o,c){c.negative=o.negative^b.negative,c.length=b.length+o.length;for(var p=0,h=0,m=0;m<c.length-1;m++){var w=h;h=0;for(var x=p&67108863,v=Math.min(m,o.length-1),s=Math.max(0,m-b.length+1);s<=v;s++){var A=m-s,V=b.words[A]|0,D=o.words[s]|0,z=V*D,j=z&67108863;w=w+(z/67108864|0)|0,j=j+x|0,x=j&67108863,w=w+(j>>>26)|0,h+=w>>>26,w&=67108863}c.words[m]=x,p=w,w=h}return p!==0?c.words[m]=p:c.length--,c.strip()}function B(b,o,c){var p=new L;return p.mulp(b,o,c)}i.prototype.mulTo=function(o,c){var p,h=this.length+o.length;return this.length===10&&o.length===10?p=K(this,o,c):h<63?p=C(this,o,c):h<1024?p=_(this,o,c):p=B(this,o,c),p};function L(b,o){this.x=b,this.y=o}L.prototype.makeRBT=function(o){for(var c=new Array(o),p=i.prototype._countBits(o)-1,h=0;h<o;h++)c[h]=this.revBin(h,p,o);return c},L.prototype.revBin=function(o,c,p){if(o===0||o===p-1)return o;for(var h=0,m=0;m<c;m++)h|=(o&1)<<c-m-1,o>>=1;return h},L.prototype.permute=function(o,c,p,h,m,w){for(var x=0;x<w;x++)h[x]=c[o[x]],m[x]=p[o[x]]},L.prototype.transform=function(o,c,p,h,m,w){this.permute(w,o,c,p,h,m);for(var x=1;x<m;x<<=1)for(var v=x<<1,s=Math.cos(2*Math.PI/v),A=Math.sin(2*Math.PI/v),V=0;V<m;V+=v)for(var D=s,z=A,j=0;j<x;j++){var X=p[V+j],re=h[V+j],nt=p[V+j+x],ae=h[V+j+x],k=D*nt-z*ae;ae=D*ae+z*nt,nt=k,p[V+j]=X+nt,h[V+j]=re+ae,p[V+j+x]=X-nt,h[V+j+x]=re-ae,j!==v&&(k=s*D-A*z,z=s*z+A*D,D=k)}},L.prototype.guessLen13b=function(o,c){var p=Math.max(c,o)|1,h=p&1,m=0;for(p=p/2|0;p;p=p>>>1)m++;return 1<<m+1+h},L.prototype.conjugate=function(o,c,p){if(!(p<=1))for(var h=0;h<p/2;h++){var m=o[h];o[h]=o[p-h-1],o[p-h-1]=m,m=c[h],c[h]=-c[p-h-1],c[p-h-1]=-m}},L.prototype.normalize13b=function(o,c){for(var p=0,h=0;h<c/2;h++){var m=Math.round(o[2*h+1]/c)*8192+Math.round(o[2*h]/c)+p;o[h]=m&67108863,m<67108864?p=0:p=m/67108864|0}return o},L.prototype.convert13b=function(o,c,p,h){for(var m=0,w=0;w<c;w++)m=m+(o[w]|0),p[2*w]=m&8191,m=m>>>13,p[2*w+1]=m&8191,m=m>>>13;for(w=2*c;w<h;++w)p[w]=0;r(m===0),r((m&-8192)===0)},L.prototype.stub=function(o){for(var c=new Array(o),p=0;p<o;p++)c[p]=0;return c},L.prototype.mulp=function(o,c,p){var h=2*this.guessLen13b(o.length,c.length),m=this.makeRBT(h),w=this.stub(h),x=new Array(h),v=new Array(h),s=new Array(h),A=new Array(h),V=new Array(h),D=new Array(h),z=p.words;z.length=h,this.convert13b(o.words,o.length,x,h),this.convert13b(c.words,c.length,A,h),this.transform(x,w,v,s,h,m),this.transform(A,w,V,D,h,m);for(var j=0;j<h;j++){var X=v[j]*V[j]-s[j]*D[j];s[j]=v[j]*D[j]+s[j]*V[j],v[j]=X}return this.conjugate(v,s,h),this.transform(v,s,z,w,h,m),this.conjugate(z,w,h),this.normalize13b(z,h),p.negative=o.negative^c.negative,p.length=o.length+c.length,p.strip()},i.prototype.mul=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),this.mulTo(o,c)},i.prototype.mulf=function(o){var c=new i(null);return c.words=new Array(this.length+o.length),B(this,o,c)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){r(typeof o=="number"),r(o<67108864);for(var c=0,p=0;p<this.length;p++){var h=(this.words[p]|0)*o,m=(h&67108863)+(c&67108863);c>>=26,c+=h/67108864|0,c+=m>>>26,this.words[p]=m&67108863}return c!==0&&(this.words[p]=c,this.length++),this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var c=P(o);if(c.length===0)return new i(1);for(var p=this,h=0;h<c.length&&c[h]===0;h++,p=p.sqr());if(++h<c.length)for(var m=p.sqr();h<c.length;h++,m=m.sqr())c[h]!==0&&(p=p.mul(m));return p},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var c=o%26,p=(o-c)/26,h=67108863>>>26-c<<26-c,m;if(c!==0){var w=0;for(m=0;m<this.length;m++){var x=this.words[m]&h,v=(this.words[m]|0)-x<<c;this.words[m]=v|w,w=x>>>26-c}w&&(this.words[m]=w,this.length++)}if(p!==0){for(m=this.length-1;m>=0;m--)this.words[m+p]=this.words[m];for(m=0;m<p;m++)this.words[m]=0;this.length+=p}return this.strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,c,p){r(typeof o=="number"&&o>=0);var h;c?h=(c-c%26)/26:h=0;var m=o%26,w=Math.min((o-m)/26,this.length),x=67108863^67108863>>>m<<m,v=p;if(h-=w,h=Math.max(0,h),v){for(var s=0;s<w;s++)v.words[s]=this.words[s];v.length=w}if(w!==0)if(this.length>w)for(this.length-=w,s=0;s<this.length;s++)this.words[s]=this.words[s+w];else this.words[0]=0,this.length=1;var A=0;for(s=this.length-1;s>=0&&(A!==0||s>=h);s--){var V=this.words[s]|0;this.words[s]=A<<26-m|V>>>m,A=V&x}return v&&A!==0&&(v.words[v.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(o,c,p){return r(this.negative===0),this.iushrn(o,c,p)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var c=o%26,p=(o-c)/26,h=1<<c;if(this.length<=p)return!1;var m=this.words[p];return!!(m&h)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var c=o%26,p=(o-c)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(c!==0&&p++,this.length=Math.min(p,this.length),c!==0){var h=67108863^67108863>>>c<<c;this.words[this.length-1]&=h}return this.strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,c,p){var h=o.length+p,m;this._expand(h);var w,x=0;for(m=0;m<o.length;m++){w=(this.words[m+p]|0)+x;var v=(o.words[m]|0)*c;w-=v&67108863,x=(w>>26)-(v/67108864|0),this.words[m+p]=w&67108863}for(;m<this.length-p;m++)w=(this.words[m+p]|0)+x,x=w>>26,this.words[m+p]=w&67108863;if(x===0)return this.strip();for(r(x===-1),x=0,m=0;m<this.length;m++)w=-(this.words[m]|0)+x,x=w>>26,this.words[m]=w&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(o,c){var p=this.length-o.length,h=this.clone(),m=o,w=m.words[m.length-1]|0,x=this._countBits(w);p=26-x,p!==0&&(m=m.ushln(p),h.iushln(p),w=m.words[m.length-1]|0);var v=h.length-m.length,s;if(c!=="mod"){s=new i(null),s.length=v+1,s.words=new Array(s.length);for(var A=0;A<s.length;A++)s.words[A]=0}var V=h.clone()._ishlnsubmul(m,1,v);V.negative===0&&(h=V,s&&(s.words[v]=1));for(var D=v-1;D>=0;D--){var z=(h.words[m.length+D]|0)*67108864+(h.words[m.length+D-1]|0);for(z=Math.min(z/w|0,67108863),h._ishlnsubmul(m,z,D);h.negative!==0;)z--,h.negative=0,h._ishlnsubmul(m,1,D),h.isZero()||(h.negative^=1);s&&(s.words[D]=z)}return s&&s.strip(),h.strip(),c!=="div"&&p!==0&&h.iushrn(p),{div:s||null,mod:h}},i.prototype.divmod=function(o,c,p){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var h,m,w;return this.negative!==0&&o.negative===0?(w=this.neg().divmod(o,c),c!=="mod"&&(h=w.div.neg()),c!=="div"&&(m=w.mod.neg(),p&&m.negative!==0&&m.iadd(o)),{div:h,mod:m}):this.negative===0&&o.negative!==0?(w=this.divmod(o.neg(),c),c!=="mod"&&(h=w.div.neg()),{div:h,mod:w.mod}):this.negative&o.negative?(w=this.neg().divmod(o.neg(),c),c!=="div"&&(m=w.mod.neg(),p&&m.negative!==0&&m.isub(o)),{div:w.div,mod:m}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?c==="div"?{div:this.divn(o.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modn(o.words[0]))}:this._wordDiv(o,c)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var c=this.divmod(o);if(c.mod.isZero())return c.div;var p=c.div.negative!==0?c.mod.isub(o):c.mod,h=o.ushrn(1),m=o.andln(1),w=p.cmp(h);return w<0||m===1&&w===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modn=function(o){r(o<=67108863);for(var c=(1<<26)%o,p=0,h=this.length-1;h>=0;h--)p=(c*p+(this.words[h]|0))%o;return p},i.prototype.idivn=function(o){r(o<=67108863);for(var c=0,p=this.length-1;p>=0;p--){var h=(this.words[p]|0)+c*67108864;this.words[p]=h/o|0,c=h%o}return this.strip()},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var c=this,p=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var h=new i(1),m=new i(0),w=new i(0),x=new i(1),v=0;c.isEven()&&p.isEven();)c.iushrn(1),p.iushrn(1),++v;for(var s=p.clone(),A=c.clone();!c.isZero();){for(var V=0,D=1;!(c.words[0]&D)&&V<26;++V,D<<=1);if(V>0)for(c.iushrn(V);V-- >0;)(h.isOdd()||m.isOdd())&&(h.iadd(s),m.isub(A)),h.iushrn(1),m.iushrn(1);for(var z=0,j=1;!(p.words[0]&j)&&z<26;++z,j<<=1);if(z>0)for(p.iushrn(z);z-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(s),x.isub(A)),w.iushrn(1),x.iushrn(1);c.cmp(p)>=0?(c.isub(p),h.isub(w),m.isub(x)):(p.isub(c),w.isub(h),x.isub(m))}return{a:w,b:x,gcd:p.iushln(v)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var c=this,p=o.clone();c.negative!==0?c=c.umod(o):c=c.clone();for(var h=new i(1),m=new i(0),w=p.clone();c.cmpn(1)>0&&p.cmpn(1)>0;){for(var x=0,v=1;!(c.words[0]&v)&&x<26;++x,v<<=1);if(x>0)for(c.iushrn(x);x-- >0;)h.isOdd()&&h.iadd(w),h.iushrn(1);for(var s=0,A=1;!(p.words[0]&A)&&s<26;++s,A<<=1);if(s>0)for(p.iushrn(s);s-- >0;)m.isOdd()&&m.iadd(w),m.iushrn(1);c.cmp(p)>=0?(c.isub(p),h.isub(m)):(p.isub(c),m.isub(h))}var V;return c.cmpn(1)===0?V=h:V=m,V.cmpn(0)<0&&V.iadd(o),V},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var c=this.clone(),p=o.clone();c.negative=0,p.negative=0;for(var h=0;c.isEven()&&p.isEven();h++)c.iushrn(1),p.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;p.isEven();)p.iushrn(1);var m=c.cmp(p);if(m<0){var w=c;c=p,p=w}else if(m===0||p.cmpn(1)===0)break;c.isub(p)}while(!0);return p.iushln(h)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var c=o%26,p=(o-c)/26,h=1<<c;if(this.length<=p)return this._expand(p+1),this.words[p]|=h,this;for(var m=h,w=p;m!==0&&w<this.length;w++){var x=this.words[w]|0;x+=m,m=x>>>26,x&=67108863,this.words[w]=x}return m!==0&&(this.words[w]=m,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var c=o<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var p;if(this.length>1)p=1;else{c&&(o=-o),r(o<=67108863,"Number is too big");var h=this.words[0]|0;p=h===o?0:h<o?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var c=this.ucmp(o);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var c=0,p=this.length-1;p>=0;p--){var h=this.words[p]|0,m=o.words[p]|0;if(h!==m){h<m?c=-1:h>m&&(c=1);break}}return c},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new q(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var H={k256:null,p224:null,p192:null,p25519:null};function U(b,o){this.name=b,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},U.prototype.ireduce=function(o){var c=o,p;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),p=c.bitLength();while(p>this.n);var h=p<this.n?-1:c.ucmp(this.p);return h===0?(c.words[0]=0,c.length=1):h>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},U.prototype.split=function(o,c){o.iushrn(this.n,0,c)},U.prototype.imulK=function(o){return o.imul(this.k)};function te(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(te,U),te.prototype.split=function(o,c){for(var p=4194303,h=Math.min(o.length,9),m=0;m<h;m++)c.words[m]=o.words[m];if(c.length=h,o.length<=9){o.words[0]=0,o.length=1;return}var w=o.words[9];for(c.words[c.length++]=w&p,m=10;m<o.length;m++){var x=o.words[m]|0;o.words[m-10]=(x&p)<<4|w>>>22,w=x}w>>>=22,o.words[m-10]=w,w===0&&o.length>10?o.length-=10:o.length-=9},te.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var c=0,p=0;p<o.length;p++){var h=o.words[p]|0;c+=h*977,o.words[p]=c&67108863,c=h*64+(c/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function J(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(J,U);function Y(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(Y,U);function ee(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(ee,U),ee.prototype.imulK=function(o){for(var c=0,p=0;p<o.length;p++){var h=(o.words[p]|0)*19+c,m=h&67108863;h>>>=26,o.words[p]=m,c=h}return c!==0&&(o.words[o.length++]=c),o},i._prime=function(o){if(H[o])return H[o];var c;if(o==="k256")c=new te;else if(o==="p224")c=new J;else if(o==="p192")c=new Y;else if(o==="p25519")c=new ee;else throw new Error("Unknown prime "+o);return H[o]=c,c};function q(b){if(typeof b=="string"){var o=i._prime(b);this.m=o.p,this.prime=o}else r(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}q.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},q.prototype._verify2=function(o,c){r((o.negative|c.negative)===0,"red works only with positives"),r(o.red&&o.red===c.red,"red works only with red numbers")},q.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):o.umod(this.m)._forceRed(this)},q.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},q.prototype.add=function(o,c){this._verify2(o,c);var p=o.add(c);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},q.prototype.iadd=function(o,c){this._verify2(o,c);var p=o.iadd(c);return p.cmp(this.m)>=0&&p.isub(this.m),p},q.prototype.sub=function(o,c){this._verify2(o,c);var p=o.sub(c);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},q.prototype.isub=function(o,c){this._verify2(o,c);var p=o.isub(c);return p.cmpn(0)<0&&p.iadd(this.m),p},q.prototype.shl=function(o,c){return this._verify1(o),this.imod(o.ushln(c))},q.prototype.imul=function(o,c){return this._verify2(o,c),this.imod(o.imul(c))},q.prototype.mul=function(o,c){return this._verify2(o,c),this.imod(o.mul(c))},q.prototype.isqr=function(o){return this.imul(o,o.clone())},q.prototype.sqr=function(o){return this.mul(o,o)},q.prototype.sqrt=function(o){if(o.isZero())return o.clone();var c=this.m.andln(3);if(r(c%2===1),c===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(o,p)}for(var h=this.m.subn(1),m=0;!h.isZero()&&h.andln(1)===0;)m++,h.iushrn(1);r(!h.isZero());var w=new i(1).toRed(this),x=w.redNeg(),v=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new i(2*s*s).toRed(this);this.pow(s,v).cmp(x)!==0;)s.redIAdd(x);for(var A=this.pow(s,h),V=this.pow(o,h.addn(1).iushrn(1)),D=this.pow(o,h),z=m;D.cmp(w)!==0;){for(var j=D,X=0;j.cmp(w)!==0;X++)j=j.redSqr();r(X<z);var re=this.pow(A,new i(1).iushln(z-X-1));V=V.redMul(re),A=re.redSqr(),D=D.redMul(A),z=X}return V},q.prototype.invm=function(o){var c=o._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},q.prototype.pow=function(o,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return o.clone();var p=4,h=new Array(1<<p);h[0]=new i(1).toRed(this),h[1]=o;for(var m=2;m<h.length;m++)h[m]=this.mul(h[m-1],o);var w=h[0],x=0,v=0,s=c.bitLength()%26;for(s===0&&(s=26),m=c.length-1;m>=0;m--){for(var A=c.words[m],V=s-1;V>=0;V--){var D=A>>V&1;if(w!==h[0]&&(w=this.sqr(w)),D===0&&x===0){v=0;continue}x<<=1,x|=D,v++,!(v!==p&&(m!==0||V!==0))&&(w=this.mul(w,h[x]),v=0,x=0)}s=26}return w},q.prototype.convertTo=function(o){var c=o.umod(this.m);return c===o?c.clone():c},q.prototype.convertFrom=function(o){var c=o.clone();return c.red=null,c},i.mont=function(o){return new ue(o)};function ue(b){q.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(ue,q),ue.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},ue.prototype.convertFrom=function(o){var c=this.imod(o.mul(this.rinv));return c.red=null,c},ue.prototype.imul=function(o,c){if(o.isZero()||c.isZero())return o.words[0]=0,o.length=1,o;var p=o.imul(c),h=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=p.isub(h).iushrn(this.shift),w=m;return m.cmp(this.m)>=0?w=m.isub(this.m):m.cmpn(0)<0&&(w=m.iadd(this.m)),w._forceRed(this)},ue.prototype.mul=function(o,c){if(o.isZero()||c.isZero())return new i(0)._forceRed(this);var p=o.mul(c),h=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=p.isub(h).iushrn(this.shift),w=m;return m.cmp(this.m)>=0?w=m.isub(this.m):m.cmpn(0)<0&&(w=m.iadd(this.m)),w._forceRed(this)},ue.prototype.invm=function(o){var c=this.imod(o._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(typeof Qf>"u"||Qf,Wy)});var Jy=se((oV,Gy)=>{l();f();var vn=rs(),Yt=jy(),yt=function(){};function qc(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}yt.eventID=function(e,t){var r=e+"("+t.map(qc).join(",")+")";return vn.keccak256(Buffer.from(r))};yt.methodID=function(e,t){return yt.eventID(e,t).slice(0,4)};function wi(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function Zf(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function os(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":parseInt(t[2],10):null}function co(e){var t=typeof e;if(t==="string")return vn.isHexPrefixed(e)?new Yt(vn.stripHexPrefix(e),16):new Yt(e,10);if(t==="number")return new Yt(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function $y(e){var t=/^(\w+)\((.*)\)$/.exec(e);if(t.length!==3)throw new Error("Invalid method signature");var r=/^(.+)\):\((.+)$/.exec(t[2]);if(r!==null&&r.length===3)return{method:t[1],args:r[1].split(","),retargs:r[2].split(",")};var n=t[2].split(",");return n.length===1&&n[0]===""&&(n=[]),{method:t[1],args:n}}function gn(e,t){var r,n,i,a;if(e==="address")return gn("uint160",co(t));if(e==="bool")return gn("uint8",t?1:0);if(e==="string")return gn("bytes",Buffer.from(t,"utf8"));if(is(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(r=os(e),r!=="dynamic"&&r!==0&&t.length>r)throw new Error("Elements exceed array size: "+r);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(a in t)i.push(gn(e,t[a]));if(r==="dynamic"){var u=gn("uint256",t.length);i.unshift(u)}return Buffer.concat(i)}else{if(e==="bytes")return t=Buffer.from(t),i=Buffer.concat([gn("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,vn.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(r=wi(e),r<1||r>32)throw new Error("Invalid bytes<N> width: "+r);return vn.setLengthRight(t,32)}else if(e.startsWith("uint")){if(r=wi(e),r%8||r<8||r>256)throw new Error("Invalid uint<N> width: "+r);if(n=co(t),n.bitLength()>r)throw new Error("Supplied uint exceeds width: "+r+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}else if(e.startsWith("int")){if(r=wi(e),r%8||r<8||r>256)throw new Error("Invalid int<N> width: "+r);if(n=co(t),n.bitLength()>r)throw new Error("Supplied int exceeds width: "+r+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}else if(e.startsWith("ufixed")){if(r=Zf(e),n=co(t),n<0)throw new Error("Supplied ufixed is negative");return gn("uint256",n.mul(new Yt(2).pow(new Yt(r[1]))))}else if(e.startsWith("fixed"))return r=Zf(e),gn("int256",co(t).mul(new Yt(2).pow(new Yt(r[1]))))}throw new Error("Unsupported or invalid type: "+e)}function Zr(e,t,r){typeof e=="string"&&(e=Yf(e));var n,i,a,u;if(e.name==="address")return Zr(e.rawType,t,r).toArrayLike(Buffer,"be",20).toString("hex");if(e.name==="bool")return Zr(e.rawType,t,r).toString()===new Yt(1).toString();if(e.name==="string"){var d=Zr(e.rawType,t,r);return Buffer.from(d,"utf8").toString()}else if(e.isArray){for(a=[],n=e.size,e.size==="dynamic"&&(r=Zr("uint256",t,r).toNumber(),n=Zr("uint256",t,r).toNumber(),r=r+32),u=0;u<n;u++){var g=Zr(e.subArray,t,r);a.push(g),r+=e.subArray.memoryUsage}return a}else{if(e.name==="bytes")return r=Zr("uint256",t,r).toNumber(),n=Zr("uint256",t,r).toNumber(),t.slice(r+32,r+32+n);if(e.name.startsWith("bytes"))return t.slice(r,r+e.size);if(e.name.startsWith("uint")){if(i=new Yt(t.slice(r,r+32),16,"be"),i.bitLength()>e.size)throw new Error("Decoded int exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("int")){if(i=new Yt(t.slice(r,r+32),16,"be").fromTwos(256),i.bitLength()>e.size)throw new Error("Decoded uint exceeds width: "+e.size+" vs "+i.bitLength());return i}else if(e.name.startsWith("ufixed")){if(n=new Yt(2).pow(new Yt(e.size[1])),i=Zr("uint256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}else if(e.name.startsWith("fixed")){if(n=new Yt(2).pow(new Yt(e.size[1])),i=Zr("int256",t,r),!i.mod(n).isZero())throw new Error("Decimals not supported yet");return i.div(n)}}throw new Error("Unsupported or invalid type: "+e.name)}function Yf(e){var t,r;if(is(e)){t=os(e);var n=e.slice(0,e.lastIndexOf("["));return n=Yf(n),r={isArray:!0,name:e,size:t,memoryUsage:t==="dynamic"?32:n.memoryUsage*t,subArray:n},r}else{var i;switch(e){case"address":i="uint160";break;case"bool":i="uint8";break;case"string":i="bytes";break}if(r={rawType:i,name:e,memoryUsage:32},e.startsWith("bytes")&&e!=="bytes"||e.startsWith("uint")||e.startsWith("int")?r.size=wi(e):(e.startsWith("ufixed")||e.startsWith("fixed"))&&(r.size=Zf(e)),e.startsWith("bytes")&&e!=="bytes"&&(r.size<1||r.size>32))throw new Error("Invalid bytes<N> width: "+r.size);if((e.startsWith("uint")||e.startsWith("int"))&&(r.size%8||r.size<8||r.size>256))throw new Error("Invalid int/uint<N> width: "+r.size);return r}}function j1(e){return e==="string"||e==="bytes"||os(e)==="dynamic"}function is(e){return e.lastIndexOf("]")===e.length-1}yt.rawEncode=function(e,t){var r=[],n=[],i=0;e.forEach(function(S){if(is(S)){var E=os(S);E!=="dynamic"?i+=32*E:i+=32}else i+=32});for(var a=0;a<e.length;a++){var u=qc(e[a]),d=t[a],g=gn(u,d);j1(u)?(r.push(gn("uint256",i)),n.push(g),i+=g.length):r.push(g)}return Buffer.concat(r.concat(n))};yt.rawDecode=function(e,t){var r=[];t=Buffer.from(t);for(var n=0,i=0;i<e.length;i++){var a=qc(e[i]),u=Yf(a,t,n),d=Zr(u,t,n);n+=u.memoryUsage,r.push(d)}return r};yt.simpleEncode=function(e){var t=Array.prototype.slice.call(arguments).slice(1),r=$y(e);if(t.length!==r.args.length)throw new Error("Argument count mismatch");return Buffer.concat([yt.methodID(r.method,r.args),yt.rawEncode(r.args,t)])};yt.simpleDecode=function(e,t){var r=$y(e);if(!r.retargs)throw new Error("No return values in method");return yt.rawDecode(r.retargs,t)};function Hy(e,t){return e.startsWith("address")||e.startsWith("bytes")?"0x"+t.toString("hex"):t.toString()}yt.stringify=function(e,t){var r=[];for(var n in e){var i=e[n],a=t[n];/^[^\[]+\[.*\]$/.test(i)?a=a.map(function(u){return Hy(i,u)}).join(", "):a=Hy(i,a),r.push(a)}return r};yt.solidityHexValue=function(e,t,r){var n,i;if(is(e)){var a=e.replace(/\[.*?\]/,"");if(!is(a)){var u=os(e);if(u!=="dynamic"&&u!==0&&t.length>u)throw new Error("Elements exceed array size: "+u)}var d=t.map(function(E){return yt.solidityHexValue(a,E,256)});return Buffer.concat(d)}else{if(e==="bytes")return t;if(e==="string")return Buffer.from(t,"utf8");if(e==="bool"){r=r||8;var g=Array(r/4).join("0");return Buffer.from(t?g+"1":g+"0","hex")}else if(e==="address"){var S=20;return r&&(S=r/8),vn.setLengthLeft(t,S)}else if(e.startsWith("bytes")){if(n=wi(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return vn.setLengthRight(t,n)}else if(e.startsWith("uint")){if(n=wi(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if(i=co(t),i.bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toArrayLike(Buffer,"be",r/8)}else if(e.startsWith("int")){if(n=wi(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if(i=co(t),i.bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+i.bitLength());return r=r||n,i.toTwos(n).toArrayLike(Buffer,"be",r/8)}else throw new Error("Unsupported or invalid type: "+e)}};yt.solidityPack=function(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var r=[],n=0;n<e.length;n++){var i=qc(e[n]),a=t[n];r.push(yt.solidityHexValue(i,a,null))}return Buffer.concat(r)};yt.soliditySHA3=function(e,t){return vn.keccak256(yt.solidityPack(e,t))};yt.soliditySHA256=function(e,t){return vn.sha256(yt.solidityPack(e,t))};yt.solidityRIPEMD160=function(e,t){return vn.ripemd160(yt.solidityPack(e,t),!0)};function H1(e){return e>="0"&&e<="9"}yt.fromSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="s")t.push("bytes");else if(n==="b"){for(var i="bytes",a=r+1;a<e.length&&H1(e[a]);)i+=e[a]-"0",a++;r=a-1,t.push(i)}else if(n==="i")t.push("int256");else if(n==="a")t.push("int256[]");else throw new Error("Unsupported or invalid type: "+n)}return t};yt.toSerpent=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(n==="bytes")t.push("s");else if(n.startsWith("bytes"))t.push("b"+wi(n));else if(n==="int256")t.push("i");else if(n==="int256[]")t.push("a");else throw new Error("Unsupported or invalid type: "+n)}return t.join("")};Gy.exports=yt});var Zy=se((cV,Qy)=>{l();f();Qy.exports=Jy()});var rg=se(kt=>{"use strict";l();f();Object.defineProperty(kt,"__esModule",{value:!0});kt.recoverTypedSignature=kt.signTypedData=kt.typedSignatureHash=kt.TypedDataUtils=kt.TYPED_MESSAGE_SCHEMA=kt.SignTypedDataVersion=void 0;var Tr=rs(),as=Zy(),uo=ns(),Ft;(function(e){e.V1="V1",e.V3="V3",e.V4="V4"})(Ft=kt.SignTypedDataVersion||(kt.SignTypedDataVersion={}));kt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function na(e,t){if(Object.keys(Ft).includes(e)){if(t&&!t.includes(e))throw new Error(`SignTypedDataVersion not allowed: '${e}'. Allowed versions are: ${t.join(", ")}`)}else throw new Error(`Invalid version: '${e}'`)}function Yy(e,t,r,n,i){if(na(i,[Ft.V3,Ft.V4]),e[r]!==void 0)return["bytes32",i===Ft.V4&&n==null?"0x0000000000000000000000000000000000000000000000000000000000000000":Tr.keccak(ed(r,n,e,i))];if(n===void 0)throw new Error(`missing value for field ${t} of type ${r}`);if(r==="bytes")return["bytes32",Tr.keccak(n)];if(r==="string")return typeof n=="string"&&(n=Buffer.from(n,"utf8")),["bytes32",Tr.keccak(n)];if(r.lastIndexOf("]")===r.length-1){if(i===Ft.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let a=r.slice(0,r.lastIndexOf("[")),u=n.map(d=>Yy(e,t,a,d,i));return["bytes32",Tr.keccak(as.rawEncode(u.map(([d])=>d),u.map(([,d])=>d)))]}return[r,n]}function ed(e,t,r,n){na(n,[Ft.V3,Ft.V4]);let i=["bytes32"],a=[eg(e,r)];for(let u of r[e]){if(n===Ft.V3&&t[u.name]===void 0)continue;let[d,g]=Yy(r,u.name,u.type,t[u.name],n);i.push(d),a.push(g)}return as.rawEncode(i,a)}function Xy(e,t){let r="",n=td(e,t);n.delete(e);let i=[e,...Array.from(n).sort()];for(let a of i){if(!t[a])throw new Error(`No type definition specified: ${a}`);r+=`${a}(${t[a].map(({name:d,type:g})=>`${g} ${d}`).join(",")})`}return r}function td(e,t,r=new Set){if([e]=e.match(/^\w*/u),r.has(e)||t[e]===void 0)return r;r.add(e);for(let n of t[e])td(n.type,t,r);return r}function Xf(e,t,r,n){return na(n,[Ft.V3,Ft.V4]),Tr.keccak(ed(e,t,r,n))}function eg(e,t){return Tr.keccak(Xy(e,t))}function tg(e){let t={};for(let r in kt.TYPED_MESSAGE_SCHEMA.properties)e[r]&&(t[r]=e[r]);return"types"in t&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t}function $1(e,t){na(t,[Ft.V3,Ft.V4]);let r=tg(e),n=[Buffer.from("1901","hex")];return n.push(Xf("EIP712Domain",r.domain,r.types,t)),r.primaryType!=="EIP712Domain"&&n.push(Xf(r.primaryType,r.message,r.types,t)),Tr.keccak(Buffer.concat(n))}kt.TypedDataUtils={encodeData:ed,encodeType:Xy,findTypeDependencies:td,hashStruct:Xf,hashType:eg,sanitizeData:tg,eip712Hash:$1};function G1(e){let t=rd(e);return Tr.bufferToHex(t)}kt.typedSignatureHash=G1;function rd(e){let t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!("length"in e)||!e.length)throw t;let r=e.map(function(a){return a.type!=="bytes"?a.value:uo.legacyToBuffer(a.value)}),n=e.map(function(a){return a.type}),i=e.map(function(a){if(!a.name)throw t;return`${a.type} ${a.name}`});return as.soliditySHA3(["bytes32","bytes32"],[as.soliditySHA3(new Array(e.length).fill("string"),i),as.soliditySHA3(n,r)])}function J1({privateKey:e,data:t,version:r}){if(na(r),uo.isNullish(t))throw new Error("Missing data parameter");if(uo.isNullish(e))throw new Error("Missing private key parameter");let n=r===Ft.V1?rd(t):kt.TypedDataUtils.eip712Hash(t,r),i=Tr.ecsign(n,e);return uo.concatSig(Tr.toBuffer(i.v),i.r,i.s)}kt.signTypedData=J1;function Q1({data:e,signature:t,version:r}){if(na(r),uo.isNullish(e))throw new Error("Missing data parameter");if(uo.isNullish(t))throw new Error("Missing signature parameter");let n=r===Ft.V1?rd(e):kt.TypedDataUtils.eip712Hash(e,r),i=uo.recoverPublicKey(n,t),a=Tr.publicToAddress(i);return Tr.bufferToHex(a)}kt.recoverTypedSignature=Q1});var ig=se((ng,Wc)=>{l();f();(function(e,t){"use strict";typeof Wc<"u"&&Wc.exports?Wc.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(ng,function(){"use strict";var e={};function t(r){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(r))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(r){if(typeof r!="string")throw new TypeError("expected string");var n,i=unescape(encodeURIComponent(r)),a=new Uint8Array(i.length);for(n=0;n<i.length;n++)a[n]=i.charCodeAt(n);return a},e.encodeUTF8=function(r){var n,i=[];for(n=0;n<r.length;n++)i.push(String.fromCharCode(r[n]));return decodeURIComponent(escape(i.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(e.encodeBase64=function(r){return Buffer.from(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(Buffer.from(r,"base64"),0))}):(e.encodeBase64=function(r){return new Buffer(r).toString("base64")},e.decodeBase64=function(r){return t(r),new Uint8Array(Array.prototype.slice.call(new Buffer(r,"base64"),0))}):(e.encodeBase64=function(r){var n,i=[],a=r.length;for(n=0;n<a;n++)i.push(String.fromCharCode(r[n]));return btoa(i.join(""))},e.decodeBase64=function(r){t(r);var n,i=atob(r),a=new Uint8Array(i.length);for(n=0;n<i.length;n++)a[n]=i.charCodeAt(n);return a}),e})});var ug=se(Ct=>{"use strict";l();f();var Z1=Ct&&Ct.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Y1=Ct&&Ct.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),og=Ct&&Ct.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Z1(t,e,r);return Y1(t,e),t};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.getEncryptionPublicKey=Ct.decryptSafely=Ct.decrypt=Ct.encryptSafely=Ct.encrypt=void 0;var lo=og(Ln()),Yr=og(ig()),An=ns();function ag({publicKey:e,data:t,version:r}){if(An.isNullish(e))throw new Error("Missing publicKey parameter");if(An.isNullish(t))throw new Error("Missing data parameter");if(An.isNullish(r))throw new Error("Missing version parameter");switch(r){case"x25519-xsalsa20-poly1305":{if(typeof t!="string")throw new Error("Message data must be given as a string");let n=lo.box.keyPair(),i;try{i=Yr.decodeBase64(e)}catch{throw new Error("Bad public key")}let a=Yr.decodeUTF8(t),u=lo.randomBytes(lo.box.nonceLength),d=lo.box(a,u,i,n.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:Yr.encodeBase64(u),ephemPublicKey:Yr.encodeBase64(n.publicKey),ciphertext:Yr.encodeBase64(d)}}default:throw new Error("Encryption type/version not supported")}}Ct.encrypt=ag;function X1({publicKey:e,data:t,version:r}){if(An.isNullish(e))throw new Error("Missing publicKey parameter");if(An.isNullish(t))throw new Error("Missing data parameter");if(An.isNullish(r))throw new Error("Missing version parameter");let n=2**11,i=16;if(typeof t=="object"&&"toJSON"in t)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let a={data:t,padding:""},d=Buffer.byteLength(JSON.stringify(a),"utf-8")%n,g=0;d>0&&(g=n-d-i),a.padding="0".repeat(g);let S=JSON.stringify(a);return ag({publicKey:e,data:S,version:r})}Ct.encryptSafely=X1;function sg({encryptedData:e,privateKey:t}){if(An.isNullish(e))throw new Error("Missing encryptedData parameter");if(An.isNullish(t))throw new Error("Missing privateKey parameter");switch(e.version){case"x25519-xsalsa20-poly1305":{let r=cg(t),n=lo.box.keyPair.fromSecretKey(r).secretKey,i=Yr.decodeBase64(e.nonce),a=Yr.decodeBase64(e.ciphertext),u=Yr.decodeBase64(e.ephemPublicKey),d=lo.box.open(a,i,u,n),g;try{g=Yr.encodeUTF8(d)}catch{throw new Error("Decryption failed.")}if(g)return g;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}Ct.decrypt=sg;function eM({encryptedData:e,privateKey:t}){if(An.isNullish(e))throw new Error("Missing encryptedData parameter");if(An.isNullish(t))throw new Error("Missing privateKey parameter");return JSON.parse(sg({encryptedData:e,privateKey:t})).data}Ct.decryptSafely=eM;function tM(e){let t=cg(e),r=lo.box.keyPair.fromSecretKey(t).publicKey;return Yr.encodeBase64(r)}Ct.getEncryptionPublicKey=tM;function cg(e){let t=Buffer.from(e,"hex").toString("base64");return Yr.decodeBase64(t)}});var id=se(dr=>{"use strict";l();f();var rM=dr&&dr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nd=dr&&dr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&rM(t,e,r)};Object.defineProperty(dr,"__esModule",{value:!0});dr.normalize=dr.concatSig=void 0;nd(qy(),dr);nd(rg(),dr);nd(ug(),dr);var lg=ns();Object.defineProperty(dr,"concatSig",{enumerable:!0,get:function(){return lg.concatSig}});Object.defineProperty(dr,"normalize",{enumerable:!0,get:function(){return lg.normalize}})});var uA=se(ha=>{"use strict";l();f();Object.defineProperty(ha,"__esModule",{value:!0});ha.testnet=ha.bitcoin=void 0;ha.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};ha.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var lA=se(ut=>{"use strict";l();f();Object.defineProperty(ut,"__esModule",{value:!0});ut.maybe=ut.Boolean=ut.Array=ut.Buffer256bit=ut.Network=ut.typeforce=void 0;ut.typeforce=ew();ut.Network=ut.typeforce.compile({messagePrefix:ut.typeforce.oneOf(ut.typeforce.Buffer,ut.typeforce.String),bip32:{public:ut.typeforce.UInt32,private:ut.typeforce.UInt32},pubKeyHash:ut.typeforce.UInt8,scriptHash:ut.typeforce.UInt8,wif:ut.typeforce.UInt8});ut.Buffer256bit=ut.typeforce.BufferN(32);ut.Array=ut.typeforce.Array;ut.Boolean=ut.typeforce.Boolean;ut.maybe=ut.typeforce.maybe});var fA=se(_u=>{"use strict";l();f();Object.defineProperty(_u,"__esModule",{value:!0});_u.testEcc=void 0;var de=e=>Buffer.from(e,"hex");function ST(e){pt(e.isPoint(de("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),pt(!e.isPoint(de("030000000000000000000000000000000000000000000000000000000000000005"))),pt(e.isPrivate(de("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),pt(e.isPrivate(de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),pt(!e.isPrivate(de("0000000000000000000000000000000000000000000000000000000000000000"))),pt(!e.isPrivate(de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"))),pt(!e.isPrivate(de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364142"))),pt(Buffer.from(e.privateAdd(de("0000000000000000000000000000000000000000000000000000000000000001"),de("0000000000000000000000000000000000000000000000000000000000000000"))).equals(de("0000000000000000000000000000000000000000000000000000000000000001"))),pt(e.privateAdd(de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"),de("0000000000000000000000000000000000000000000000000000000000000003"))===null),pt(Buffer.from(e.privateAdd(de("e211078564db65c3ce7704f08262b1f38f1ef412ad15b5ac2d76657a63b2c500"),de("b51fbb69051255d1becbd683de5848242a89c229348dd72896a87ada94ae8665"))).equals(de("9730c2ee69edbb958d42db7460bafa18fef9d955325aec99044c81c8282b0a24"))),pt(Buffer.from(e.privateNegate(de("0000000000000000000000000000000000000000000000000000000000000001"))).equals(de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))),pt(Buffer.from(e.privateNegate(de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036413e"))).equals(de("0000000000000000000000000000000000000000000000000000000000000003"))),pt(Buffer.from(e.privateNegate(de("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(de("4eede1bf775995d70a494f0a7bb6bc11e0b8cccd41cce8009ab1132c8b0a3792"))),pt(Buffer.from(e.pointCompress(de("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!0)).equals(de("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),pt(Buffer.from(e.pointCompress(de("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"),!1)).equals(de("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),pt(Buffer.from(e.pointCompress(de("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!0)).equals(de("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),pt(Buffer.from(e.pointCompress(de("0279be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),!1)).equals(de("0479be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"))),pt(Buffer.from(e.pointFromScalar(de("b1121e4088a66a28f5b6b0f5844943ecd9f610196d7bb83b25214b60452c09af"))).equals(de("02b07ba9dca9523b7ef4bd97703d43d20399eb698e194704791a25ce77a400df99"))),pt(e.xOnlyPointAddTweak(de("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))===null);let t=e.xOnlyPointAddTweak(de("1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b"),de("a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac"));pt(Buffer.from(t.xOnlyPubkey).equals(de("e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"))&&t.parity===1),t=e.xOnlyPointAddTweak(de("2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991"),de("823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47")),pt(Buffer.from(t.xOnlyPubkey).equals(de("9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"))&&t.parity===0),pt(Buffer.from(e.sign(de("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),de("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140"))).equals(de("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),pt(e.verify(de("5e9f0a0d593efdcf78ac923bc3313e4e7d408d574354ee2b3288c0da9fbba6ed"),de("0379be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),de("54c4a33c6423d689378f160a7ff8b61330444abb58fb470f96ea16d99d4a2fed07082304410efa6b2943111b6a4e0aaa7b7db55a07e9861d1fb3cb1f421044a5"))),e.signSchnorr&&pt(Buffer.from(e.signSchnorr(de("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),de("c90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b14e5c9"),de("c87aa53824b4d7ae2eb035a2b5bbbccc080e76cdc6d1692c4b0b62d798e6d906"))).equals(de("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7"))),e.verifySchnorr&&pt(e.verifySchnorr(de("7e2d58d8b3bcdf1abadec7829054f90dda9805aab56c77333024b9d0a508b75c"),de("dd308afec5777e13121fa72b9cc1b7cc0139715309b086c960e18fd969774eb8"),de("5831aaeed7b44bb74e5eab94ba9d4294c49bcf2a60728d8b4c200f50dd313c1bab745879a5ad954a72c45a91c3a51d3c7adea98d82f8481e0e1e03674a6f3fb7")))}_u.testEcc=ST;function pt(e){if(!e)throw new Error("ecc library invalid")}});var pA=se(ma=>{"use strict";l();f();Object.defineProperty(ma,"__esModule",{value:!0});ma.ECPairFactory=ma.networks=void 0;var Dp=uA();ma.networks=Dp;var qt=lA(),xT=Vh(),dA=Yb(),MT=fA(),Vp=qt.typeforce.maybe(qt.typeforce.compile({compressed:qt.maybe(qt.Boolean),network:qt.maybe(qt.Network)})),ET=e=>e.length===32?e:e.slice(1,33);function TT(e){(0,MT.testEcc)(e);function t(d){return e.isPoint(d)}function r(d,g){if(qt.typeforce(qt.Buffer256bit,d),!e.isPrivate(d))throw new TypeError("Private key not in range [1, n)");return qt.typeforce(Vp,g),new u(d,void 0,g)}function n(d,g){return qt.typeforce(e.isPoint,d),qt.typeforce(Vp,g),new u(void 0,d,g)}function i(d,g){let S=dA.decode(d),E=S.version;if(qt.Array(g)){if(g=g.filter(T=>E===T.wif).pop(),!g)throw new Error("Unknown network version")}else if(g=g||Dp.bitcoin,E!==g.wif)throw new Error("Invalid network version");return r(S.privateKey,{compressed:S.compressed,network:g})}function a(d){qt.typeforce(Vp,d),d===void 0&&(d={});let g=d.rng||xT,S;do S=g(32),qt.typeforce(qt.Buffer256bit,S);while(!e.isPrivate(S));return r(S,d)}class u{__D;__Q;compressed;network;lowR;constructor(g,S,E){this.__D=g,this.__Q=S,this.lowR=!1,E===void 0&&(E={}),this.compressed=E.compressed===void 0?!0:E.compressed,this.network=E.network||Dp.bitcoin,S!==void 0&&(this.__Q=Buffer.from(e.pointCompress(S,this.compressed)))}get privateKey(){return this.__D}get publicKey(){if(!this.__Q){let g=e.pointFromScalar(this.__D,this.compressed);this.__Q=Buffer.from(g)}return this.__Q}toWIF(){if(!this.__D)throw new Error("Missing private key");return dA.encode(this.network.wif,this.__D,this.compressed)}tweak(g){return this.privateKey?this.tweakFromPrivateKey(g):this.tweakFromPublicKey(g)}sign(g,S){if(!this.__D)throw new Error("Missing private key");if(S===void 0&&(S=this.lowR),S===!1)return Buffer.from(e.sign(g,this.__D));{let E=e.sign(g,this.__D),T=Buffer.alloc(32,0),P=0;for(;E[0]>127;)P++,T.writeUIntLE(P,0,6),E=e.sign(g,this.__D,T);return Buffer.from(E)}}signSchnorr(g){if(!this.privateKey)throw new Error("Missing private key");if(!e.signSchnorr)throw new Error("signSchnorr not supported by ecc library");return Buffer.from(e.signSchnorr(g,this.privateKey))}verify(g,S){return e.verify(g,this.publicKey,S)}verifySchnorr(g,S){if(!e.verifySchnorr)throw new Error("verifySchnorr not supported by ecc library");return e.verifySchnorr(g,this.publicKey.subarray(1,33),S)}tweakFromPublicKey(g){let S=ET(this.publicKey),E=e.xOnlyPointAddTweak(S,g);if(!E||E.xOnlyPubkey===null)throw new Error("Cannot tweak public key!");let T=Buffer.from([E.parity===0?2:3]);return n(Buffer.concat([T,E.xOnlyPubkey]),{network:this.network,compressed:this.compressed})}tweakFromPrivateKey(g){let E=this.publicKey[0]===3||this.publicKey[0]===4&&(this.publicKey[64]&1)===1?e.privateNegate(this.privateKey):this.privateKey,T=e.privateAdd(E,g);if(!T)throw new Error("Invalid tweaked private key!");return r(Buffer.from(T),{network:this.network,compressed:this.compressed})}}return{isPoint:t,fromPrivateKey:r,fromPublicKey:n,fromWIF:i,makeRandom:a}}ma.ECPairFactory=TT});var hA=se(Ui=>{"use strict";l();f();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.networks=Ui.ECPairFactory=Ui.default=void 0;var Up=pA();Object.defineProperty(Ui,"default",{enumerable:!0,get:function(){return Up.ECPairFactory}});Object.defineProperty(Ui,"ECPairFactory",{enumerable:!0,get:function(){return Up.ECPairFactory}});Object.defineProperty(Ui,"networks",{enumerable:!0,get:function(){return Up.networks}})});l();f();l();f();var Gs=(i=>(i.Image="image",i.Emoji="emoji",i.ReadOnlyDefault="read-only-default",i.Default="default",i))(Gs||{}),iw=y.object({type:y.nativeEnum(Gs),imageUrl:y.string().optional(),unicode:y.string().optional()}),Js=(t=>(t.Ledger="ledger",t))(Js||{}),Qs=(t=>(t.BLE="ble",t))(Qs||{}),ow=y.object({version:y.literal(1),connectionType:y.nativeEnum(Qs),deviceType:y.nativeEnum(Js),id:y.string().min(1),name:y.string().optional(),model:y.string().optional()}),aw=y.object({value:y.number(),timestamp:y.number()}),sw=y.object({name:y.string(),icon:iw.optional(),connectedDevices:ow.array().optional()}),cw=y.object({balance:aw.optional()});var uw=100,lw={unicode:void 0,imageUrl:void 0,type:"default"},vl={version:1,isDeveloperMode:!1};var ko=$r.Solana.Devnet,Co=$r.Ethereum.Sepolia,Al=$r.Sui.Testnet;function Ka(){return{version:1,setting:{solana:ko,eip155:Co,sui:Al}}}function br(e){return e.map(t=>Nn[t].defaultDerivationPathType)}var fw={bip44Root:"bip44RootEthereum",bip44Change:"bip44Ethereum",bip44:"bip44EthereumSecondary",deprecated:"bip44EthereumTertiary",bip44RootEthereum:null,bip44Ethereum:null,bip44EthereumSecondary:null,bip44EthereumTertiary:null,bitcoinTaproot:null,bitcoinNativeSegwit:null,bitcoinNestedSegwit:null,bitcoinLegacy:null,bip44Sui:null},Fn={bip44Root:-1,bip44RootEthereum:-1,bitcoinTaproot:0,bitcoinNativeSegwit:0,bitcoinNestedSegwit:0,bitcoinLegacy:0,bip44Change:0,bip44Ethereum:0,bip44:1,bip44EthereumSecondary:1,deprecated:2,bip44EthereumTertiary:2,bip44Sui:0},dw="https://help.phantom.com/hc/en-us/articles/4406563212819";var pw="https://help.phantom.com/hc/en-us/articles/21872962238355";l();f();var Vm=ne(vt());l();f();l();f();l();f();var Zs=(e,t)=>{try{let r=Io(e,t);switch(r){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return Nn.getDisplayName(r);default:return}}catch(r){G.addBreadcrumb("account","Failed to get address badge","error",{...r instanceof Error&&{error:r.message},networkId:e,address:t});return}};var Km={badge:(e,t,r)=>t.filter(qs).length<=1?"":Zs(e,r)??"",showAddressTypeExplainer:e=>e.filter(qs).length>1,addressTooltipNetworkName:(e,t,r)=>r.filter(qs).length>=2?Zs(e,t)??ie.getChainName(e):ie.getChainName(e)};l();f();var Bm={badge:(e,t)=>{switch(e){case"eip155:41454":case"eip155:10143":return ie.getNetworkDefinition(e).shortName;case"eip155:143":return}},networkNameOverride:()=>"Monad"};var mw=new Ws({solana:{},ethereum:{},polygon:{},base:{},arbitrum:{},monad:Bm,bitcoin:Km,sui:{},hypercore:{}}),fi=ym(mw);l();f();var _o=ne(vt()),Om=(0,_o.createContext)(null);function yw({children:e,vault:t}){return _o.default.createElement(Om.Provider,{value:t},e)}function ft(){let e=(0,_o.useContext)(Om);if(!e)throw new Error("useVaultProxy must be used within a VaultProxyProvider");return e}function gw({children:e}){let t=ft(),r=fi.supportedChains.map(i=>[i,fi.get(i)]),n=new Ws(Object.fromEntries(r));return Vm.default.createElement(Tm,{effects:{deriveAddresses:async()=>{await t.deriveAddresses()}},registry:n},e)}l();f();var Ba=(e,t=5)=>{let r=e.length,n=e.startsWith("0x")?t+2:t;return`${e.substring(0,n)}...${e.substring(r-t,r)}`};l();f();l();f();var vw=e=>e.includes(".")||e.includes("@")?!1:Wh.safeParse(e).success||Lh.safeParse(e).success||dm.safeParse(e).success||jh.safeParse(e).success,bl=(e,t=5)=>vw(e)?Ba(e,t):e;var Aw=(e,t,r,n=4)=>{let i=t?t.name:r,a=bl(e,n);return i?`${i} (${a})`:a};l();f();var bw=e=>`${e.substring(0,5)}...`;l();f();var Ro=ne(vt()),Dm=(0,Ro.createContext)(null);function ww({children:e,authRepository:t}){return Ro.default.createElement(Dm.Provider,{value:t},e)}function wr(){let e=(0,Ro.useContext)(Dm);if(!e)throw new Error("useAuthRepository must be used within an AuthProvider");return e}function qn(){return wr().useUser()}l();f();l();f();var wl=ne(Un());l();f();var Oa="https://phantom.app",Va="https://api.phantom.app/oauth2/auth",Ys={prod:"a61bc25e-0c4f-4ab3-aa54-b50ec746eea2",staging:"fe26708b-7db7-4146-9fbb-9a9736acfb2b"},Xs={prod:"https://auth.phantom.app",staging:"https://staging-auth.phantom.app"},Um="/login/start",Nm="/oauth2/token";var Lm=li({minutes:60})-li({minutes:15}),qi="/v1/authentication-keys";l();f();var Sw="https://time.phantom.app/utc",xw=y.number().int().positive();async function Wi(){let e;try{let t=await mt.get(Sw);if(t.status!==200)throw new Error("Failed to fetch time from server");e=xw.parse(t.data)}catch{e=Date.now()}return Math.floor(e/1e3)}var Mw=60,Ew=()=>Math.floor(Date.now()/1e3);async function ji(e=!0){let t={alg:"ES256",type:"JWT"},r=e?await Wi():Ew(),n={iss:Oa,aud:Va,nbf:r,exp:r+Mw,iat:r};return{header:t,payload:n}}function Hi(e){let t=lt(wl.Buffer.from(JSON.stringify(e.header))),r=lt(wl.Buffer.from(JSON.stringify(e.payload)));return[t,r,e.signature].join(".")}l();f();var zm=y.object({alg:y.string(),type:y.string(),kid:y.string()}),Fm=y.object({sub:y.string(),iss:y.string(),aud:y.string(),nbf:y.number(),exp:y.number(),iat:y.number()}),Sl=y.object({header:zm,payload:Fm,signature:y.string()}),qm=y.object({alg:y.string(),type:y.string()}),Wm=y.object({iss:y.string(),aud:y.string(),nbf:y.number(),exp:y.number(),iat:y.number()}),xl=y.object({header:qm,payload:Wm}),Ml=y.object({id_token:y.string(),access_token:y.string(),refresh_token:y.string(),scope:y.string(),token_type:y.string(),expires_in:y.number().gte(0)}),Tw=y.object({redirectTo:y.string()}),jm=y.object({at_hash:y.string(),aud:y.array(y.string()),auth_time:y.number(),exp:y.number(),iat:y.number(),iss:y.string(),jti:y.string(),rat:y.number(),sid:y.string(),sub:y.string(),email:y.string().optional()}),ec=y.object({authenticationKeys:y.array(y.object({createdAt:y.string().datetime().nullish().default(null),updatedAt:y.string().datetime().nullish().default(null),id:y.string().uuid(),publicKey:y.string(),userId:y.string().uuid()})).optional()});l();f();var $i=ne(Nl());l();f();var Vo=ne(Nl()),l0=ne(Ln()),Ll={generateRandom:e=>{let t=(0,l0.randomBytes)(e);return(0,Vo.bufferToString)(t)},async deriveChallenge(e){let t=si((0,Vo.textEncodeLite)(e));return(0,Vo.urlSafe)(t)}};l();f();var xr=()=>{let e=Ns();return e==="https://staging-api.phantom.app"?Xs.staging:e==="https://api.phantom.app"?Xs.prod:M.BASE_AUTH_ENDPOINT||Xs.staging},zl=()=>`${xr()}${Um}`,pc=()=>`${xr()}${Nm}`;var f0=new $i.BasicQueryStringUtils;async function Ua(e,t){let{url:r,codeVerifier:n}=await d0(e.getClientID(),e.redirectURL,t),i=t.type==="email",a=await e.fetchAuthorizationCode(e.redirectURL,r,i);return await Fl({grantType:"authorization_code",clientID:e.getClientID(),redirectURI:e.redirectURL,tokenEndpoint:pc(),code:a,codeVerifier:n})}async function d0(e,t,r){let n=zl(),i,a=["openid","offline_access","user","incognito","seedless"],u;switch(r.type){case"key":{i={type:"key",jwt:Hi(r.clientJWT)};break}case"email":{i={type:"email",provider:r.provider,existingAccessToken:r.existingAccessToken},u=r.prompt,a.push("email");break}case"session":{i={type:"session",existingAccessToken:r.existingAccessToken};break}}let g=await new $i.AuthorizationRequest({client_id:e,redirect_uri:t,scope:a.join(" "),response_type:"code"},Ll).toJson(),S;switch(i.type){case"key":S=`jwt:${lt(Buffer.from(i.jwt,"utf8"))}`;break;case"email":S=`sso:${i.provider}`,i.existingAccessToken&&(S=`${S}:${i.existingAccessToken}`);break;case"session":S=`session:${i.existingAccessToken}`;break}let E={redirect_uri:g.redirect_uri,client_id:g.client_id,response_type:g.response_type,state:g.state??"",scope:g.scope,login_hint:S};u&&(E.prompt=u);let T=g.extras?.code_challenge,P=g.extras?.code_challenge_method,C=g.internal?.code_verifier;if(T&&P&&(E.code_challenge=T,E.code_challenge_method=P),!T||!P||!C)throw new Error("Missing code challenge or code verifier for PKCE.");let K=f0.stringify(E);return{url:`${n}?${K}`,codeVerifier:C}}async function Fl(e){let{grantType:t,tokenEndpoint:r,clientID:n,redirectURI:i}=e,a;t==="authorization_code"?a=new $i.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,code:e.code,extras:{code_verifier:e.codeVerifier}}):a=new $i.TokenRequest({client_id:n,redirect_uri:i,grant_type:t,refresh_token:e.refreshToken});let u=await mt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).auth(Hh()).post(r,f0.stringify(a.toStringMap()));SS(u,t);let d=Ml.safeParse(u.data);if(!d.success)throw new Error("Invalid OAuth2Token response.");let{data:g}=d,S=await Wi();return{idToken:g.id_token,accessToken:g.access_token,refreshToken:g.refresh_token,scope:g.scope,tokenType:g.token_type,expiresAt:(S+g.expires_in)*1e3}}async function hc(e,t){return await Fl({clientID:e.getClientID(),redirectURI:e.redirectURL,grantType:"refresh_token",tokenEndpoint:pc(),refreshToken:t})}function SS(e,t){if([401,400].includes(e.status)){let r="";if(e.status===401)switch(r="Token Request Unauthorized (401): ",t){case"authorization_code":r+="Authorization code is expired or invalid.";break;case"refresh_token":r+="Refresh token is expired or invalid.";break;default:r+=`Unknown grant type [${t}]. `}if(e.status===400)switch(r="Bad Token Request (400): ",t){case"authorization_code":r="for [authorization_code]. Possible causes: 1. The authorization code is expired or invalid. 2. Redirect URI mismatch. 3. Code verifier mismatch (if using PKCE).";break;case"refresh_token":r="for [refresh_token]. Possible causes: 1. The refresh token is expired, invalid, or revoked. 2. Client ID mismatch. 3. Missing or malformed refresh token in the request.";break;default:r=`for unknown grant type [${t}]. Check the payload and OAuth provider documentation.`}throw new Error(r)}}l();f();l();f();l();f();var Na=class{subscribers={};subscribe(t,r){return this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(r),()=>{this.subscribers[t].splice(this.subscribers[t].indexOf(r),1)}}emitEvent(t,...r){(this.subscribers[t]??[]).forEach(i=>i(...r))}};var mc=class extends Na{emit(t){t&&(this.emitEvent("user",t),this.emitEvent("userID",t.userID),this.emitEvent("accessToken",t.accessToken),t.email&&this.emitEvent("email",t.email))}emitLoggedOut(){this.emitEvent("loggedOut")}};l();f();l();f();function jn(e,t="expected value not found"){if(e==null)throw new Error(t);return e}function p0(e,t="expected value not found"){if(!e)throw new Error(t)}var yc=async(e,t)=>{let r=xr(),n=jn(e.signer,"Signer is required for key-based auth."),i=await n.getAuthenticationPublicKey(t),a=await ji(e.isServerTimeEnabled()),u=await n.sign(a,t),d=await mt.get(`${r}${qi}`,{params:{token:Hi(u)}});if(!To(d))throw new Error("Failed to get authentication keys: response is not okay");let g=d.data;return(ec.parse(g).authenticationKeys??[]).some(T=>T.publicKey===i)};l();f();l();f();var h0=async e=>{try{let t=await mt.headers({"Content-Type":"application/x-www-form-urlencoded"},{mergeHeaders:!1}).bearer(e).get(`${xr()}/userinfo`);return To(t)}catch{return!1}};l();f();var ql=".phantom.auth",Hn=`${ql}.tokens`,m0=`${ql}.authentication-factors`,MS=`${ql}.email-provider`;l();f();var Gi=e=>{let t=e.idToken.split(".");if(t.length!==3)throw new Error("Malformed ID token. Expected 3 period-delimited parts to ID token.");let r;try{let n=um(t[1]).toString("utf-8"),i=JSON.parse(n);r=jm.parse(i)}catch{throw new Error("Unable to parse ID token payload.")}return{accessToken:e.accessToken,userID:r.sub,email:r.email}};l();f();var y0="@phantom/auth",sr={user:["auth",`${y0}:user`],authFactors:["auth",`${y0}:user-auth-factors`]};l();f();var gc=async(e,t,r)=>{let{storage:n,authConfig:i}=e,a,{type:u}=r;switch(u){case"key":{let g=jn(e.signer,"Signer is required for key-based auth."),S=await ji(e.isServerTimeEnabled()),E=await g.sign(S,r.secretIdentifier);a=await Ua(i,{type:u,clientJWT:E});break}case"email":{a=await Ua(i,{type:u,prompt:r.prompt,provider:r.provider});break}case"session":{a=await Ua(i,{type:u,existingAccessToken:r.accessToken});break}}G.addBreadcrumb("Auth","\u2705 Login succeeded!","debug"),await n.set(Hn,a);let d=Gi(a);return await e.queryClient.setQueryData(sr.user,d),t.emit(d),d};var g0={queryKey:sr.user,gcTime:Lm,staleTime:li({minutes:5})},Do=async(e,t)=>await e.queryClient.fetchQuery({...g0,queryFn:()=>A0(e,t)}),v0=(e,t)=>et({...g0,queryFn:async()=>{let r=await A0(e,t);if(!r)throw new Error("Unable to log in.");return r},retryOnMount:!1}),A0=async(e,t)=>{let r=async()=>{let n=await ES(e);return n||(e.signer?await TS(e,t):null)};return e.runExclusive(async()=>{let n=await r();return t.emit(n),n})};async function ES({storage:e,authConfig:t,isLocalTokenValidityCheckEnabled:r}){let n=await e.get(Hn);if(!n)return null;let i=r(),a=!1;if(i){let u=await Wi()+10,d=Math.floor(n.expiresAt/1e3);a=u<d}else a=await h0(n.accessToken);if(a)return G.addBreadcrumb(`\u267B\uFE0F Access token still valid => Expires at ${n.expiresAt}`,"Auth","debug"),Gi(n);if(n.refreshToken)try{let u=await hc(t,n.refreshToken);return G.addBreadcrumb(`\u2705 Refreshed auth token => Expires at ${u.expiresAt}`,"Auth","debug"),await e.set(Hn,u),Gi(u)}catch(u){return G.addBreadcrumb("Error refreshing auth token.","Auth","error"),G.captureError(u,"Auth"),null}return null}async function TS(e,t){let n=await jn(e.signer,"Unable to log in with key-based auth. Signer is not available.").getAllSecretIdentifiers();if(n.length===0)return G.addBreadcrumb("Auth","Unable to log in with key-based auth. Vault is not yet onboarded or has no secrets that can perform key-based auth.","info"),null;let i;try{for(let a of n)if(await yc(e,a)){i=a;break}}catch(a){throw G.addBreadcrumb("Auth","Unable to log in with key-based auth. Error checking auth factors.","error"),a}i||(i=n[0],G.addBreadcrumb("Auth","No auth factor found, creating new user with first secret identifier.","debug"));try{return await gc(e,t,{type:"key",secretIdentifier:i})}catch(a){throw G.addBreadcrumb("Auth","Unable to log in with key-based auth. Error performing auth.","error"),a}}l();f();var Wl=async e=>{await e.removeQueries({queryKey:sr.user})},jl=async e=>{await e.resetQueries({queryKey:sr.user})},Ji=async e=>{await e.invalidateQueries({queryKey:sr.user})},$n=async e=>{await e.invalidateQueries({queryKey:sr.authFactors})};var PS=e=>{let t=new mc,r={getUser:()=>Do(e,t),useUser:()=>v0(e,t),refreshTokens:()=>IS(e),logIn:n=>gc(e,t,n),isExistingAuthFactor:n=>yc(e,n),getAuthenticationKeys:()=>kS(e,t),getLocalAuthenticationPublicKeys:()=>_S(e),addAuthFactor:n=>RS(e,t,n),deleteAuthFactor:n=>KS(e,t,n),deleteAllAuthFactors:()=>BS(e,t),subscribe:(n,i)=>t.subscribe(n,i),logOut:()=>OS(e,t)};return $h(async(n=!1)=>(n&&await Ji(e.queryClient),(await r.getUser())?.accessToken??null)),r},IS=async e=>{let t=await e.storage.get(Hn);if(!t)return!1;let r=await hc(e.authConfig,t.refreshToken);return await e.storage.set(Hn,r),await e.queryClient.setQueryData(sr.user,Gi(r)),!0},kS=async(e,t)=>({authenticationPublicKeys:(await CS(e,t)).map(n=>n.publicKey)}),CS=async(e,t)=>{let r=xr(),n=await Do(e,t);if(!n)throw new Error("User not authenticated.");let{data:i}=await mt.bearer(n.accessToken).get(`${r}${qi}`),a=ec.safeParse(i);if(!a.success)throw new Error("Unable to parse auth factors response.");return a.data.authenticationKeys??[]},_S=async e=>{try{let t=jn(e.signer,"Signer is required for key-based auth."),r=await t.getAllSecretIdentifiers(),n={};for(let i of r)n[i]=await t.getAuthenticationPublicKey(i);return n}catch{return{}}},RS=async(e,t,{secretIdentifier:r})=>{let n=xr(),i=jn(e.signer,"Signer is required for key-based auth."),a=await Do(e,t);if(!a)throw new Error("User not authenticated.");G.addBreadcrumb("Auth",`Adding auth factor: ${r}`,"info");let u=await ji(e.isServerTimeEnabled()),d=await i.sign(u,r);await mt.bearer(a.accessToken).post(`${n}${qi}`,{jwt:Hi(d)})},KS=async(e,t,{authenticationPublicKey:r})=>{let n=xr(),i=await Do(e,t);if(!i)throw new Error("User not authenticated.");G.addBreadcrumb("Auth",`Deleting auth factor: ${r}`,"info"),await mt.bearer(i.accessToken).delete(`${n}${qi}/${encodeURIComponent(r)}`)},BS=async(e,t)=>{let r=xr(),n=e.storage,i=await Do(e,t);if(!i)throw new Error("User not authenticated.");G.addBreadcrumb("Auth","Deleting all auth factors","info"),await mt.bearer(i.accessToken).delete(`${r}${qi}`),await n.remove(m0)},OS=async({storage:e},t)=>{await e.remove(Hn),t.emitLoggedOut()};l();f();var VS=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("code");if(!n)throw new Error("No authorization code");return n};l();f();var DS=(e,t)=>{let r=new URL(t);if(!r.toString().startsWith(e))throw new Error("Unexpected redirectURL. RedirectURL from auth flow must match local redirect URL.");let n=r.searchParams.get("error"),i=r.searchParams.get("error_description");if(n)throw new Error(`${n}: ${i}`,{cause:n});return!1};l();f();var US=()=>Ns()==="https://api.phantom.app"?Ys.prod:Ys.staging;l();f();var NS=()=>{let e=wr(),{data:t}=qn(),r=sr.authFactors;return et({queryKey:r,queryFn:async()=>{let i=await e.getLocalAuthenticationPublicKeys();if(Object.keys(i).length===0)return{};let a=[];try{if(t){let{authenticationPublicKeys:d=[]}=await e.getAuthenticationKeys();a=d}}catch(d){t&&d instanceof Error&&G.addBreadcrumb("Auth",`Unable to fetch existing AuthFactors for user (${t?.userID}): ${d.message}`,"error")}let u={};for(let[d,g]of Object.entries(i)){let S=a.includes(g);!S&&await e.isExistingAuthFactor(d)||(u[d]={authenticationPublicKey:g,isExistingAuthFactor:S})}return t&&Object.keys(u).length===0&&G.addBreadcrumb("Auth",`Unable to build AuthFactors map: 
- user: ${t?.userID}
- locally available auth factors: ${Object.keys(i).length}
- auth factors registered with user: ${a.length}`,"error"),u},retryOnMount:!1})};l();f();l();f();var La=()=>{let{data:e}=qn();return!!e};function LS(e,t){let r=La(),n;return e.enabled===void 0?n=r:typeof e.enabled=="function"?n=i=>(p0(typeof e.enabled=="function","expected enabled to be a function"),r&&e.enabled(i)):typeof e.enabled=="boolean"?n=r&&e.enabled:He(e.enabled),et({...e,enabled:n},t)}l();f();var zS=()=>{let e=me(),t=wr(),r=async({secretIdentifier:n})=>{await t.addAuthFactor({secretIdentifier:n}),await $n(e)};return pe({mutationFn:async n=>{try{return await r(n)}catch(i){G.addBreadcrumb("Auth",`Could not add auth factor: ${n.secretIdentifier}`,"error");let a;throw i instanceof Error?a=i:a=new Error(`Could not add auth factor: ${n.secretIdentifier}`),G.captureError(a,"Auth"),a}}})};l();f();var FS=()=>{let e=me(),t=wr(),r=async({authenticationPublicKey:n})=>{await t.deleteAuthFactor({authenticationPublicKey:n}),await $n(e)};return pe({mutationFn:async n=>{try{return await r(n)}catch(i){G.addBreadcrumb("Auth","Could not remove auth factor!","error");let a;throw i instanceof Error?a=i:a=new Error("Could not remove auth factor!"),G.captureError(a,"Auth"),a}}})};l();f();var qS=()=>{let{data:e}=qn();return e?.accessToken};l();f();l();f();l();f();var Uo=ne(vt()),b0=(0,Uo.createContext)(null);function WS({children:e,accountAnalytics:t}){return Uo.default.createElement(b0.Provider,{value:t},e)}function Hl(){let e=(0,Uo.useContext)(b0);if(!e)throw new Error("useAccountAnalytics must be used within an AccountAnalyticsProvider");return e}l();f();l();f();l();f();function Ot(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(M.NODE_ENV!=="production"){var i=YS[e],a=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+a)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function No(e){return!!e&&!!e[cr]}function Zi(e){return!!e&&(function(t){if(!t||typeof t!="object")return!1;var r=Object.getPrototypeOf(t);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===XS}(e)||Array.isArray(e)||!!e[I0]||!!e.constructor[I0]||rf(e)||nf(e))}function Fa(e,t,r){r===void 0&&(r=!1),zo(e)===0?(r?Object.keys:uf)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function zo(e){var t=e[cr];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:rf(e)?2:nf(e)?3:0}function Zl(e,t){return zo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function jS(e,t){return zo(e)===2?e.get(t):e[t]}function k0(e,t,r){var n=zo(e);n===2?e.set(t,r):n===3?(e.delete(t),e.add(r)):e[t]=r}function HS(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function rf(e){return QS&&e instanceof Map}function nf(e){return ZS&&e instanceof Set}function Qi(e){return e.o||e.t}function of(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ex(e);delete t[cr];for(var r=uf(t),n=0;n<r.length;n++){var i=r[n],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function af(e,t){return t===void 0&&(t=!1),sf(e)||No(e)||!Zi(e)||(zo(e)>1&&(e.set=e.add=e.clear=e.delete=$S),Object.freeze(e),t&&Fa(e,function(r,n){return af(n,!0)},!0)),e}function $S(){Ot(2)}function sf(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ln(e){var t=tx[e];return t||Ot(18,e),t}function w0(){return M.NODE_ENV==="production"||Lo||Ot(0),Lo}function $l(e,t){t&&(ln("Patches"),e.u=[],e.s=[],e.v=t)}function vc(e){Yl(e),e.p.forEach(GS),e.p=null}function Yl(e){e===Lo&&(Lo=e.l)}function S0(e){return Lo={p:[],l:Lo,h:e,m:!0,_:0}}function GS(e){var t=e[cr];t.i===0||t.i===1?t.j():t.O=!0}function Gl(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.g||ln("ES5").S(t,e,n),n?(r[cr].P&&(vc(t),Ot(4)),Zi(e)&&(e=Ac(t,e),t.l||bc(t,e)),t.u&&ln("Patches").M(r[cr].t,e,t.u,t.s)):e=Ac(t,r,[]),vc(t),t.u&&t.v(t.u,t.s),e!==C0?e:void 0}function Ac(e,t,r){if(sf(t))return t;var n=t[cr];if(!n)return Fa(t,function(a,u){return x0(e,n,t,a,u,r)},!0),t;if(n.A!==e)return t;if(!n.P)return bc(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=of(n.k):n.o;Fa(n.i===3?new Set(i):i,function(a,u){return x0(e,n,i,a,u,r)}),bc(e,i,!1),r&&e.u&&ln("Patches").R(n,r,e.u,e.s)}return n.o}function x0(e,t,r,n,i,a){if(M.NODE_ENV!=="production"&&i===r&&Ot(5),No(i)){var u=Ac(e,i,a&&t&&t.i!==3&&!Zl(t.D,n)?a.concat(n):void 0);if(k0(r,n,u),!No(u))return;e.m=!1}if(Zi(i)&&!sf(i)){if(!e.h.F&&e._<1)return;Ac(e,i),t&&t.A.l||bc(e,i)}}function bc(e,t,r){r===void 0&&(r=!1),e.h.F&&e.m&&af(t,r)}function Jl(e,t){var r=e[cr];return(r?Qi(r):e)[t]}function M0(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Xl(e){e.P||(e.P=!0,e.l&&Xl(e.l))}function Ql(e){e.o||(e.o=of(e.t))}function ef(e,t,r){var n=rf(t)?ln("MapSet").N(t,r):nf(t)?ln("MapSet").T(t,r):e.g?function(i,a){var u=Array.isArray(i),d={i:u?1:0,A:a?a.A:w0(),P:!1,I:!1,D:{},l:a,t:i,k:null,o:null,j:null,C:!1},g=d,S=tf;u&&(g=[d],S=za);var E=Proxy.revocable(g,S),T=E.revoke,P=E.proxy;return d.k=P,d.j=T,P}(t,r):ln("ES5").J(t,r);return(r?r.A:w0()).p.push(n),n}function JS(e){return No(e)||Ot(22,e),function t(r){if(!Zi(r))return r;var n,i=r[cr],a=zo(r);if(i){if(!i.P&&(i.i<4||!ln("ES5").K(i)))return i.t;i.I=!0,n=E0(r,a),i.I=!1}else n=E0(r,a);return Fa(n,function(u,d){i&&jS(i.t,u)===d||k0(n,u,t(d))}),a===3?new Set(n):n}(e)}function E0(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return of(e)}var T0,Lo,cf=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",QS=typeof Map<"u",ZS=typeof Set<"u",P0=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",C0=cf?Symbol.for("immer-nothing"):((T0={})["immer-nothing"]=!0,T0),I0=cf?Symbol.for("immer-draftable"):"__$immer_draftable",cr=cf?Symbol.for("immer-state"):"__$immer_state";var YS={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},XS=""+Object.prototype.constructor,uf=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ex=Object.getOwnPropertyDescriptors||function(e){var t={};return uf(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},tx={},tf={get:function(e,t){if(t===cr)return e;var r=Qi(e);if(!Zl(r,t))return function(i,a,u){var d,g=M0(a,u);return g?"value"in g?g.value:(d=g.get)===null||d===void 0?void 0:d.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!Zi(n)?n:n===Jl(e.t,t)?(Ql(e),e.o[t]=ef(e.A.h,n,e)):n},has:function(e,t){return t in Qi(e)},ownKeys:function(e){return Reflect.ownKeys(Qi(e))},set:function(e,t,r){var n=M0(Qi(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=Jl(Qi(e),t),a=i?.[cr];if(a&&a.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(HS(r,i)&&(r!==void 0||Zl(e.t,t)))return!0;Ql(e),Xl(e)}return e.o[t]===r&&typeof r!="number"&&(r!==void 0||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Jl(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Ql(e),Xl(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Qi(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Ot(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ot(12)}},za={};Fa(tf,function(e,t){za[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),za.deleteProperty=function(e,t){return M.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ot(13),za.set.call(this,e,t,void 0)},za.set=function(e,t,r){return M.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ot(14),tf.set.call(this,e[0],t,r,e[0])};var rx=function(){function e(r){var n=this;this.g=P0,this.F=!0,this.produce=function(i,a,u){if(typeof i=="function"&&typeof a!="function"){var d=a;a=i;var g=n;return function(_){var B=this;_===void 0&&(_=d);for(var L=arguments.length,H=Array(L>1?L-1:0),U=1;U<L;U++)H[U-1]=arguments[U];return g.produce(_,function(te){var J;return(J=a).call.apply(J,[B,te].concat(H))})}}var S;if(typeof a!="function"&&Ot(6),u!==void 0&&typeof u!="function"&&Ot(7),Zi(i)){var E=S0(n),T=ef(n,i,void 0),P=!0;try{S=a(T),P=!1}finally{P?vc(E):Yl(E)}return typeof Promise<"u"&&S instanceof Promise?S.then(function(_){return $l(E,u),Gl(_,E)},function(_){throw vc(E),_}):($l(E,u),Gl(S,E))}if(!i||typeof i!="object"){if((S=a(i))===void 0&&(S=i),S===C0&&(S=void 0),n.F&&af(S,!0),u){var C=[],K=[];ln("Patches").M(i,S,C,K),u(C,K)}return S}Ot(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(S){for(var E=arguments.length,T=Array(E>1?E-1:0),P=1;P<E;P++)T[P-1]=arguments[P];return n.produceWithPatches(S,function(C){return i.apply(void 0,[C].concat(T))})};var u,d,g=n.produce(i,a,function(S,E){u=S,d=E});return typeof Promise<"u"&&g instanceof Promise?g.then(function(S){return[S,u,d]}):[g,u,d]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Zi(r)||Ot(8),No(r)&&(r=JS(r));var n=S0(this),i=ef(this,r,void 0);return i[cr].C=!0,Yl(n),i},t.finishDraft=function(r,n){var i=r&&r[cr];M.NODE_ENV!=="production"&&(i&&i.C||Ot(9),i.I&&Ot(10));var a=i.A;return $l(a,n),Gl(void 0,a)},t.setAutoFreeze=function(r){this.F=r},t.setUseProxies=function(r){r&&!P0&&Ot(20),this.g=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}i>-1&&(n=n.slice(i+1));var u=ln("Patches").$;return No(r)?u(r,n):this.produce(r,function(d){return u(d,n)})},e}(),ur=new rx,lf=ur.produce,BK=ur.produceWithPatches.bind(ur),OK=ur.setAutoFreeze.bind(ur),VK=ur.setUseProxies.bind(ur),DK=ur.applyPatches.bind(ur),UK=ur.createDraft.bind(ur),NK=ur.finishDraft.bind(ur),LK=lf;l();f();var zt="@phantom/accounts",qa=`${zt}:account-identifier`,Wa=`${zt}:selected-account`,Fo=`${zt}:all-accounts`,ff=`${zt}:all-seeds`,nx=`${zt}:all-secrets`,ix=`${zt}:account-balance`,je={accountBalance(e){return[ix,{identifier:e}]},allAccountBalances(){return[`${zt}:all-account-balances`]},allAccounts(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[Fo,{chainAvailabilityQueryObject:t}]},allSeeds(e){return[ff,e]},allSecretIdentifiers(){return[nx]},developerMode(){return[`${zt}:developer-mode`]},accountIdentifier(e){return[qa,{identifier:e}]},selectedAccount(e){let t=e?{chainAvailability:{enabledChainIDs:e.enabledChainIDs,enabledAddressTypes:e.enabledAddressTypes}}:{};return[Wa,t]},selectedAccountIdentifier(){return[`${zt}:selected-account-identifier`]},selectedNetworkSetting(){return[`${zt}:selected-network-setting`]},trustedApps(){return[`${zt}:trusted-apps`]},migratedWithInvalidChecksum(){return[`${zt}:migrated-with-invalid-checksum`]},syncUserAccounts(){return[`${zt}:sync-user-accounts`]},accountsEligibleToClaim(e,t,r){return[`${zt}:are-accounts-eligible-to-claim`,{username:e,selectedAccountIdentifier:t,solanaAddresses:r}]},patchProfileAddresses(e){return[`${zt}:patch-profile-addresses`,e]}};l();f();var ox=[".phantom-labs.account.accountMetadata","developerMode","networkSetting",".phantom-labs.account.selectedAccount","termsHaveBeenAcknowledgedLastSeenVersion","notificationsHaveBeenAcknowledgedLastSeenVersion"];var $K=new Error("Failed to clear selected account index");async function df(e){try{let t=await e.get(".phantom-labs.account.selectedAccount");return t?.version===2?t.identifier:null}catch{throw ax}}var ax=new Error("Failed to get selected account identifier");async function lr(e,t){try{let r={version:2,identifier:t};return await e.set(".phantom-labs.account.selectedAccount",r)}catch{throw sx}}var sx=new Error("Failed to set selected account identifier");var pf=new Error("Failed to add user account metadata to storage"),wc=new Error("Could not find account metadata in storage");async function hf(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw wc;let i=n.accounts[t];i?i.name=r:(i={name:r},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function mf(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata");if(!n)throw wc;let i=n.accounts[t];i?i.icon=r:(i={icon:r,name:ui.t("onboardingImportAccountsAccountName",{walletIndex:""})},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata",n)}async function yf(e,t,r){let n=await e.get(".phantom-labs.account.accountMetadata.balance");n||(n={version:1,accounts:{}});let i=n.accounts[t];i?i.balance=r:(i={balance:r},n.accounts[t]=i),await e.set(".phantom-labs.account.accountMetadata.balance",n)}async function yi(e,t,r){try{let n=await e.get(".phantom-labs.account.accountMetadata");n?n.accounts[t]=r:n={version:1,accounts:{[t]:r}},await e.set(".phantom-labs.account.accountMetadata",n)}catch{throw pf}}async function gf(e,t){try{let r=await e.get(".phantom-labs.account.accountMetadata");r?r.accounts=lf(r.accounts,n=>{for(let[i,a]of Object.entries(t))n[i]||(n[i]={name:""}),n[i].name=a.name,n[i].icon=a.icon??n[i].icon,n[i].connectedDevices=a.connectedDevices??n[i].connectedDevices}):r={version:1,accounts:{...t}},await e.set(".phantom-labs.account.accountMetadata",r)}catch{throw pf}}async function vf(e,t){let r=await e.get(".phantom-labs.account.accountMetadata.balance");r||(r={version:1,accounts:{}});let n=r.accounts[t];return n||(n={}),n}async function Af(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");r||(r={version:1,accounts:{}});let n=r.accounts[t];return n||(n={name:ui.t("onboardingImportAccountsAccountName",{walletIndex:""})}),{...n}}async function bf(e){let t=await e.get(".phantom-labs.account.accountMetadata.balance");return t?t.accounts:{}}async function wf(e){let t=await e.get(".phantom-labs.account.accountMetadata"),r={},n=new Set([...Object.keys(t?.accounts||{})]);for(let i of n){let a=t?.accounts[i]||{name:ui.t("onboardingImportAccountsAccountName",{walletIndex:""})};r[i]={...a}}return r}async function _0(e,t){let r=await e.get(".phantom-labs.account.accountMetadata.balance");r&&(delete r.accounts[t],await e.set(".phantom-labs.account.accountMetadata.balance",r))}async function ja(e,t){let r=await e.get(".phantom-labs.account.accountMetadata");if(!r)throw wc;delete r.accounts[t],await e.set(".phantom-labs.account.accountMetadata",r),await _0(e,t)}var cx={...vm(".phantom-labs.account.accountMetadata",[Fo,qa,Wa,...je.selectedAccountIdentifier()])};l();f();var a6=y.string().regex(/^(root-derivation-path-group|(recommended|secondary|tertiary)-group:index-[0-9]+)$/,{message:"Invalid derivation path group."});l();f();l();f();var ux=y.object({derivationIndex:y.number(),addresses:y.array(y.object({pathType:y.union([Qh,Zh]),value:y.string()})),publicKeys:y.array(y.object({pathType:Jh,value:y.string()}))}),fn=class extends Error{message="No account exists in storage for identifier"},Yi=class extends Error{message="No account exists in storage for identifier"},gi=class extends Error{message="Address type not found or incompatible with account"},Ha=class extends Error{message="Hardware wallet account does not have known secr*ts"},$a=class extends Error{message="Read only account does not have known secr*ts"},Ga=class extends Error{message="Invalid configuration for read only account"},Xi=class extends Error{message="Seed already exists in storage"},Gn=class extends Error{message="No seed exists in storage for identifier"},Ja=class extends Error{message="The derivation index is missing or invalid"},Qa=class extends Error{message="Private key already exists in storage"},eo=class extends Error{message="No private key exists in storage for identifier"};var dn=class extends Error{message;constructor(t,r){super(),this.message=`Account of type ${t} found in Vault, while trying to add ${r} account`}},Sc=class extends Error{message="Vault already stores a seedless account"},lx=y.union([y.literal("unonboarded"),y.literal("unable-to-load-accounts")]),fx=y.union([y.literal("invalid-identifier"),y.literal("fetch-integrity-storage-error"),y.literal("fetch-entropy-storage-error"),y.literal("fetch-pk-storage-error"),y.literal("invalid-entropy"),y.literal("invalid-entropy-bip-39"),y.literal("invalid-checksum-bits"),y.literal("invalid-entropy-bits"),y.literal("invalid-checksum"),y.literal("invalid-entropy-length-less-than-twelve"),y.literal("invalid-entropy-length-more-than-twenty-four"),y.literal("invalid-entropy-length-wrong-word"),y.literal("invalid-pk-address-type"),y.literal("invalid-pk-identifier"),y.literal("invalid-pk"),y.literal("internal-error")]),dx=y.literal("safely-onboarded"),px=y.union([y.object({status:lx,isOnboarded:y.literal(!1),reonboardingNeeded:y.literal(!1)}),y.object({status:fx,isOnboarded:y.literal(!0),reonboardingNeeded:y.literal(!0)}),y.object({status:dx,isOnboarded:y.literal(!0),reonboardingNeeded:y.literal(!1)})]);var hx=(e,t,r,n)=>{let i=[];for(let a of t){let u=ie.getChainID(a);if(n.includes(u))for(let d of ie[u].addressTypes){if(!r.includes(d))continue;let g=e.chains[d];if(g)switch(g.chainType){case"eip155":case"solana":{i.push({networkID:a,addressType:d,address:g.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.addresses[a]});break}case"sui":{i.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.address});break}default:He(g)}}}return i},mx=(e,t,r,n)=>{let i=[];for(let a of t){let u=ie.getChainID(a);if(n.includes(u))for(let d of ie[u].addressTypes){if(!r.includes(d))continue;let g=e.chains[d];if(g)switch(g.chainType){case"eip155":case"solana":{i.push({networkID:a,addressType:d,address:g.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.addresses[a]});break}case"sui":{i.push({networkID:a,addressType:d,publicKey:g.publicKey,address:g.address});break}default:He(g)}}}return i},yx=(e,t,r,n)=>{let i=[];for(let a of t){let u=ie.getChainID(a);if(n.includes(u))for(let d of ie[u].addressTypes)r.includes(d)&&e.chainType===d&&i.push({networkID:a,addressType:d,address:e.address})}return i},gx=(e,t,r,n)=>{let i=[];for(let a of t){let u=ie.getChainID(a);if(n.includes(u)){for(let d of ie[u].addressTypes)if(r.includes(d)&&e.chainType===d)switch(e.chainType){case"eip155":case"solana":{i.push({networkID:a,addressType:d,address:e.address});break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{i.push({networkID:a,addressType:d,publicKey:e.publicKey,address:e.addresses[a]});break}case"sui":{i.push({networkID:a,addressType:d,publicKey:e.publicKey,address:e.address});break}default:He(e)}}}return i},vx=(e,t,r,n)=>{let i=[];for(let a of t){let u=ie.getChainID(a);if(n.includes(u)){for(let d of ie[u].addressTypes)if(r.includes(d))for(let[g,S]of Object.entries(e.addresses))g===d&&i.push({networkID:a,addressType:d,address:S})}}return i},Za=(e,t,r,n,i,a)=>{let u;switch(a?u=Object.values(i.setting):u=t,u=u.sort((d,g)=>ie.compareNetworkID(d,g)),e.type){case"seedless":case"seed":return hx(e,u,r,n);case"ledger":return mx(e,u,r,n);case"seedVault":return yx(e,u,r,n);case"privateKey":return gx(e,u,r,n);case"readOnly":return vx(e,u,r,n)}};l();f();var Ax=({index:e,offsetIndex:t})=>({name:ui.t("onboardingImportAccountsAccountName",{walletIndex:t+e+1})});l();f();l();f();var qo="Trying to find a selected account, but there no accounts in the vault.",Ya="Missing ChainAvailability.",R0=(e,t)=>`No account found! Num accounts: ${e} | Identifier used: ${t}`,Sf=new Error("The current account group has no valid bitcoin address"),xf=new Error("The current account group has no valid EIP-155 address"),Mf=new Error("The current account group has no valid solana address"),Ef=new Error("The current account group has no valid sui address"),K0=new Error("The current account group has no valid address or the the chain type was unsupported"),T6=new Error("[Legacy Mn*monic Fetch] no legacy mn*monic in storage"),P6=new Error("[Legacy Mn*monic Fetch] internal error fetching legacy mn*monic");var Jn=async(e,t)=>{if(e.length===0)throw new Error(qo);let r=await df(t),n=e.find(i=>i.identifier===r);return n||(await lr(t,e[0].identifier),e[0])};l();f();var Tf=e=>{switch(e){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":case"bip44Change":case"bip44Ethereum":return!0;case"bip44":case"deprecated":case"bip44Root":case"bip44RootEthereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Sui":return!1}};l();f();var bx=({pathType:e,index:t})=>{switch(e){case"bip44RootEthereum":case"bip44Root":return"root-derivation-path-group";case"bip44Change":case"bip44Ethereum":case"bip44Sui":case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":return`recommended-group:index-${t}`;case"bip44EthereumSecondary":case"bip44":return`secondary-group:index-${t}`;case"bip44EthereumTertiary":case"deprecated":return`tertiary-group:index-${t}`}};l();f();l();f();var wx=e=>e==null?!1:["ledger","seedVault"].includes(e);l();f();function B0(e,t){let n=(e?.addresses??[]).find(({addressType:i})=>i===t);if(!e?.addresses||!n)switch(t){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw Sf;case"eip155":throw xf;case"solana":throw Mf;case"sui":throw Ef;default:throw K0}return n}function Sx(e,t){return B0(e,t)?.address}l();f();var xx=e=>{let t=e.toString();return Ba(t)};l();f();function Mx(e){let t=e.endsWith(".sol"),r=e==="@",n=e.startsWith("@")&&e.length>1;return[t,r,n]}l();f();function Ex(e){return[e.endsWith(".eth")]}l();f();var Tx=async(e,t,r)=>{let i=(await e.fetchAllAccounts()).find(u=>{switch(u.type){case"seed":case"seedless":return u.seedIdentifier===r;case"privateKey":return u.privateKeyIdentifier===r;case"ledger":case"seedVault":case"readOnly":return!1;default:He(u)}});if(!i)throw new Error("Unable to find account to sign client JWT with.");let a=await e.sign(i.identifier,{isJWT:!0,data:t});if(a.status==="error")throw new Error("Error signing over clientJWT.");if(!("signedJWT"in a)||!a.signedJWT)throw new Error("No JWT from vault signing.");return a.signedJWT};l();f();var O0=async e=>[...(await e.fetchAllAccounts()).reduce((i,a)=>{switch(a.type){case"seed":case"seedless":{i.add(a.seedIdentifier);break}case"privateKey":{i.add(a.privateKeyIdentifier);break}case"ledger":case"seedVault":case"readOnly":break;default:He(a);break}return i},new Set)];l();f();var Px=(e,t)=>e.filter(r=>{switch(r.type){case"seed":case"seedless":return r.seedIdentifier===t;case"privateKey":return r.privateKeyIdentifier===t;case"ledger":case"seedVault":case"readOnly":return!1;default:He(r);return}});l();f();function Ix(e){return fi.get(e).networkNameOverride?.(e)??ie.getNetworkName(e,!0)}l();f();function kx(){return{version:1,setting:{solana:ko,eip155:Co,sui:Al}}}l();f();var Cx="cash",_x="cash",Rx={pathType:"bip44Change",index:0};async function Pf(e){G.addBreadcrumb("cashAccount","Getting user's Cash account from KMS","debug");let t;try{let{result:r}=await e.getOrCreatePhantomOrganization();t=r.organizationId}catch(r){G.addBreadcrumb("cashAccount","[KMS] Error getting user's Phantom Org","error");let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Phantom Org");throw G.captureError(n,"cashAccount"),n}try{let{result:{walletId:r,walletName:n,accounts:i}}=await e.getOrCreateWalletWithTag({organizationId:t,walletName:Cx,tag:_x,mnemonicLength:24,accounts:[{derivationPath:Ca(Rx),curve:"Ed25519",addressFormat:"Solana"}]});if(i.length===0)throw new Error("No Cash account found");return G.addBreadcrumb("cashAccount",`[KMS] Successfully got user's Cash wallet, address: ${i[0].address}`,"debug"),{organizationId:t,walletId:r,walletName:n,account:i[0]}}catch(r){G.addBreadcrumb("cashAccount","[KMS] Error getting user's Cash wallet","error");let n=r instanceof Error?r:new Error("[KMS] Failed to get user's Cash wallet");throw G.captureError(n,"cashAccount"),n}}l();f();l();f();l();f();function Wo(e,t){return typeof e=="string"?e===t:e.length===t.length&&e.every((r,n)=>r===t[n])}l();f();l();f();function If(e,t){return e in t}var Xa=ne(rw());function Kx(e){return e=(0,Xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{to(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}default:He(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{to(n.publicKey)&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)));break}default:He(n)}}break;case"seedVault":break;default:He(t)}}),e}function Bx(e){return e=(0,Xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{switch(t.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}default:He(t)}break}case"readOnly":break;case"ledger":case"seedless":case"seed":for(let r of Object.keys(t.chains)){let n=t.chains[r];if(n)switch(n.chainType){case"eip155":case"solana":break;case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":{n.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(n.publicKey).toJSON());break}default:He(n)}}break;case"seedVault":break;default:He(t)}}),e}function V0(e){return e=(0,Xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&to(t.publicKey)&&(t.publicKey=new Uint8Array(Buffer.from(t.publicKey)));break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))if(t.version===1&&to(t.chains[r]?.publicKey)){let n=t.chains[r];n&&(n.publicKey=new Uint8Array(Buffer.from(n.publicKey)))}break;case"seedVault":break;default:He(t)}}),e}function D0(e){return e=(0,Xa.default)(e),e.accounts.forEach(t=>{switch(t.type){case"privateKey":{t.version===1&&t.publicKey instanceof Uint8Array&&(t.publicKey=Buffer.from(t.publicKey).toJSON());break}case"readOnly":break;case"ledger":case"seed":case"seedless":for(let r of Object.keys(t.chains))t.version===1&&t.chains[r]?.publicKey instanceof Uint8Array&&(t.chains[r].publicKey=Buffer.from(t.chains[r]?.publicKey).toJSON());break;case"seedVault":break;default:He(t)}}),e}function to(e){return!!e&&typeof e=="object"&&If("type",e)&&typeof e.type=="string"&&If("data",e)&&Array.isArray(e.data)&&e.data.every(t=>!Number.isNaN(parseInt(t)))}l();f();var fr=".phantom-labs.vault";var Mc=`${fr}.accounts`,jo=`${fr}.secrets`,Ec=e=>`${fr}.privateKey.${e}`,Tc=e=>`${fr}.seed.${e}`,Pc=e=>`${fr}.seedless.${e}`,xc=`${fr}.integrityCheck`;async function st(e){return(await H0(e))?.accounts??[]}async function L0(e){let t=await Gr(e),r=new Set(t.seedIdentifiers),n=await st(e);for(let a of n)a.type==="seed"&&r.add(a.seedIdentifier);let i=[];for(let a of r)i.push({identifier:a});return i}async function Ic(e){let t=await Gr(e),r=new Set(t.seedlessIdentifiers),n=await st(e);for(let a of n)a.type==="seedless"&&r.add(a.seedIdentifier);let i=[];for(let a of r)i.push({identifier:a});return i}async function Gr(e){let t=await e.generalStorage.get(jo);return{privateKeyIdentifiers:t?.privateKeyIdentifiers??[],seedIdentifiers:t?.seedIdentifiers??[],seedlessIdentifiers:t?.seedlessIdentifiers??[]}}async function z0(e,t){let r=Tc(t),n=await e.secretsStorage.getSecureValue(r);if(n===null){let i=Pc(t);n=await e.secretsStorage.getSecureValue(i)}if(n==null)throw new Gn;return to(n.entropy)?n.entropy=new Uint8Array(Buffer.from(n.entropy)):n.entropy=new Uint8Array(Object.values(n.entropy)),n}async function vi(e,t){let r=Ec(t),n=await e.secretsStorage.getSecureValue(r);if(n==null)throw new eo;return to(n.privateKey)?n.privateKey=new Uint8Array(Buffer.from(n.privateKey)):n.privateKey=new Uint8Array(Object.values(n.privateKey)),n}async function Ut(e,t,r=!0){let n=await H0(e);if(!n)n={version:1,accounts:[t]};else{let i=n.accounts,a=Vx(i,t);if(a.length>0){if(!r)throw new dn(a[0].type,t.type);let u=N0(t.type);for(let g of a)if(N0(g.type)>=u)throw new dn(g.type,t.type);let d=a.map(g=>g.identifier);return i=i.filter(g=>!d.includes(g.identifier)),i.push(t),await Qn(e,i),await kf(e)}else i.push(t);n.accounts=i}return Qn(e,n.accounts)}async function Qn(e,t){let r={version:1,accounts:t};return e.generalStorage.set(Mc,D0(r))}async function F0(e,t){let r=Ec(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Nx(e,t.identifier)}async function q0(e,t){let r=Tc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Dx(e,t.identifier)}async function W0(e,t){let r=Pc(t.identifier);await e.secretsStorage.setSecureValue(r,t),await Ux(e,t.identifier)}async function kf(e){let t=await st(e),r=new Set,n=new Set;for(let d of t)switch(d.type){case"seed":case"seedless":r.add(d.seedIdentifier);break;case"privateKey":n.add(d.privateKeyIdentifier);break;case"ledger":case"readOnly":case"seedVault":break;default:He(d)}let i=await Gr(e),a={seedIdentifiers:i.seedIdentifiers.filter(d=>r.has(d)),seedlessIdentifiers:i.seedlessIdentifiers.filter(d=>r.has(d)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(d=>n.has(d))},u={seedIdentifiers:i.seedIdentifiers.filter(d=>!r.has(d)),seedlessIdentifiers:i.seedlessIdentifiers.filter(d=>!r.has(d)),privateKeyIdentifiers:i.privateKeyIdentifiers.filter(d=>!n.has(d))};await e.generalStorage.set(jo,{version:1,...a}),await e.secretsStorage.removeSecureValue([...u.seedIdentifiers.map(d=>Tc(d)),...u.seedlessIdentifiers.map(d=>Pc(d)),...u.privateKeyIdentifiers.map(d=>Ec(d))])}async function Cf(e,t){t?await e.secretsStorage.setSecureValue(xc,t):await e.secretsStorage.removeSecureValue(xc)}async function _f(e){return e.secretsStorage.getSecureValue(xc)}async function j0(e){await e.secureCache.clear(),await e.generalStorage.remove(Mc);let t=await Gr(e),r=t.privateKeyIdentifiers.map(a=>Ec(a)),n=t.seedIdentifiers.map(a=>Tc(a)),i=t.seedlessIdentifiers.map(a=>Pc(a));await e.secretsStorage.removeSecureValue([...r,...i,...n]),await e.generalStorage.remove(jo),await e.secretsStorage.removeSecureValue(xc)}async function H0(e){let t=await e.generalStorage.get(Mc);return t?(t=V0(t),t=await Ox(e,t),t):null}async function Ox(e,t){let r=!1;return t.accounts.forEach(n=>{switch(n.type){case"privateKey":{r=U0(n)||r;break}case"readOnly":break;case"ledger":case"seed":case"seedless":Object.values(n.chains).forEach(i=>{r=U0(i)||r});break;case"seedVault":break;default:He(n)}}),r&&await Qn(e,t.accounts),t}function U0(e){let t=!1;switch(e.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{Object.values(Ht).forEach(r=>{if(e.addresses&&e.addresses[r])return;let n=Kt({publicKey:e.publicKey,addressType:e.chainType,networkID:r});e.addresses={...e.addresses,[r]:n},t=!0});break}default:}return t}function Vx(e,t){let r=[],n=[];switch(t.type){case"seed":case"seedless":case"ledger":{Object.values(t.chains).forEach(a=>{switch(a.chainType){case"eip155":case"solana":{n.push(a.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(a.publicKey);break}case"sui":{n.push(a.address);break}default:He(a)}});break}case"readOnly":{Object.values(t.addresses).forEach(a=>{n.push(a)});break}case"privateKey":{switch(t.chainType){case"eip155":case"solana":{n.push(t.publicKey);break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{r.push(t.publicKey);break}case"sui":{n.push(t.address);break}default:He(t)}break}case"seedVault":{n.push(t.publicKey);break}default:(a=>{throw new Error("unknown account type")})(t)}let i=[];for(let a of e){let u;switch(a.type){case"seed":case"seedless":case"ledger":{u=Object.values(a.chains).some(d=>{switch(d.chainType){case"eip155":case"solana":return!!n.find(g=>Wo(g,d.publicKey));case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":case"sui":return!!r.find(g=>Wo(g,d.publicKey));default:He(d)}});break}case"readOnly":{u=Object.values(a.addresses).some(d=>!!n.find(g=>Wo(g,d)));break}case"privateKey":{u=!!n.find(d=>Wo(d,a.publicKey));break}case"seedVault":{u=!!n.find(d=>Wo(d,a.publicKey));break}default:(d=>{throw new Error("unknown account type")})(a)}u&&i.push(a)}return i}async function Dx(e,t){let r=await Gr(e);return r.seedIdentifiers=[...new Set([...r.seedIdentifiers,t])],e.generalStorage.set(jo,{version:1,...r})}async function Ux(e,t){let r=await Gr(e);return r.seedlessIdentifiers=[...new Set([...r.seedlessIdentifiers,t])],e.generalStorage.set(jo,{version:1,...r})}async function Nx(e,t){let r=await Gr(e);return r.privateKeyIdentifiers=[...new Set([...r.privateKeyIdentifiers,t])],e.generalStorage.set(jo,{version:1,...r})}function N0(e){switch(e){case"readOnly":return 1;case"privateKey":return 2;case"seedless":case"seed":return 3;case"ledger":return 4;case"seedVault":return 5;default:return 0}}l();f();l();f();var ss=ne(Un()),bn=ne(id());l();f();l();f();var nM=y.array(y.object({address:y.string(),signingIndexes:y.array(y.number()),sigHash:y.number().optional(),isScriptSpend:y.boolean().optional()})),iM=y.object({chainType:_a,signingType:y.literal("transaction"),message:y.string().min(1),inputsToSign:nM.optional(),finalize:y.boolean()}),oM=y.object({chainType:_a,signingType:y.literal("message"),message:y.instanceof(Uint8Array)}),aM=iM.or(oM),sM=y.object({chainType:y.literal("sui"),signingType:y.literal("transaction"),transaction:y.instanceof(Uint8Array)}),cM=y.object({chainType:y.literal("sui"),signingType:y.literal("personalMessage"),message:y.instanceof(Uint8Array)}),uM=sM.or(cM),lM=y.object({chainType:y.literal("solana"),signingType:y.literal("transaction"),message:y.union([y.string().min(1),y.instanceof(Uint8Array)])}),fM=y.object({chainType:y.literal("solana"),signingType:y.literal("message"),message:y.string().min(1)}),fg=lM.or(fM),dM=y.object({chainType:y.literal("eip155"),signingType:y.literal("transaction"),message:y.string().min(1)}),dg=y.object({chainType:y.literal("eip155"),signingType:y.literal("message"),message:y.string().min(1)}),pg=y.object({chainType:y.literal("eip155"),signingType:y.literal("typedData"),version:y.literal(1),data:zh}),hg=y.object({chainType:y.literal("eip155"),signingType:y.literal("typedData"),version:y.literal(3),data:Fh}),mg=y.object({chainType:y.literal("eip155"),signingType:y.literal("typedData"),version:y.literal(4),data:qh}),pM=dM.or(dg).or(pg).or(hg).or(mg),hM=y.object({isJWT:y.literal(!0),data:xl}),mM=y.object({isKMSPKIAuthenticator:y.literal(!0),payload:y.custom()}),TV=y.object({organizationId:y.string(),walletId:y.string(),derivationPath:y.string()}),yg=y.object({isCash:y.literal(!0),data:fg}),yM=yg.extend({isCashKMS:y.literal(!0)}),gM=dg.extend({isAgentWallet:y.literal(!0)}),vM=pg.extend({isAgentWallet:y.literal(!0)}),AM=hg.extend({isAgentWallet:y.literal(!0)}),bM=mg.extend({isAgentWallet:y.literal(!0)}),wM=y.union([gM,vM,AM,bM]),SM=y.object({status:y.literal("success"),signature:y.string()}),gg=y.object({status:y.literal("success"),signature:y.string()}),xM=y.object({status:y.literal("success"),signature:y.string(),message:y.instanceof(Uint8Array).optional()}),MM=y.object({status:y.literal("success"),signature:y.string()}),EM=y.object({status:y.literal("success"),signature:y.string(),signedJWT:Sl.optional()}),TM=y.object({status:y.literal("success"),signature:y.string()}),PM=gg;var od=fg.or(pM).or(aM).or(uM).or(hM).or(mM).or(wM).or(yg).or(yM),Xt=(B=>(B.InvalidInput="invalidInput",B.InvalidAccountId="invalidAccountId",B.InvalidAddressType="invalidAddressType",B.InvalidMessageEncoding="invalidMessageEncoding",B.InvalidDerivationPath="invalidDerivationPath",B.InvalidRpcPayload="invalidRpcPayload",B.LedgerAppNotOpen="ledgerAppNotOpen",B.LedgerNotConnected="ledgerNotConnected",B.LedgerNeedPermission="ledgerNeedPermission",B.LedgerRejectAction="ledgerRejectAction",B.LedgerUnknownSignError="ledgerUnknownSignError",B.UnsupportedOperation="unsupportedOperation",B.InternalError="internalError",B.ExpiredTokenError="expiredToken",B.BeforeIATError="beforeTimeOfIssuance",B.InvalidClaimError="invalidClaim",B))(Xt||{}),IM=y.object({status:y.literal("error"),type:y.nativeEnum(Xt),message:y.string()}),kM=y.union([EM,TM,PM,xM,SM,gg,MM,IM]);var CM={invalidInput:{message:"Invalid input"},invalidAccountId:{message:"Invalid account identifier."},invalidAddressType:{message:"Invalid chain type."},invalidMessageEncoding:{message:"Invalid message encoding."},invalidDerivationPath:{message:"Invalid derivation path."},invalidRpcPayload:{message:"Invalid KMS RPC payload."},ledgerAppNotOpen:{message:"Ledger App not open."},ledgerNotConnected:{message:"Ledger not connected."},ledgerNeedPermission:{message:"Need permission to connect to Ledger."},ledgerRejectAction:{message:"Ledger user rejected action."},ledgerUnknownSignError:{message:"Ledger unknown sign error."},unsupportedOperation:{message:"Unsupported operation."},internalError:{message:"Internal error."},expiredToken:{message:"Token is expired"},beforeTimeOfIssuance:{message:"Received token before issuance time"},invalidClaim:{message:"Claim is invalid"}},Qe=(e,t)=>({status:"error",type:e,message:t??CM[e].message});var vg=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=ss.Buffer.from(e.privateKey.slice()),n=bn.SignTypedDataVersion.V1,{data:i}=t,a=(0,bn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=ss.Buffer.from(e.privateKey.slice()),n=bn.SignTypedDataVersion.V3,i=t.data,a=(0,bn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=ss.Buffer.from(e.privateKey.slice()),n=bn.SignTypedDataVersion.V4,i=t.data,a=(0,bn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,n=ss.Buffer.from(e.privateKey);try{let i=(0,bn.personalSign)({privateKey:n,data:r});return Promise.resolve({status:"success",signature:i})}finally{n.fill(0)}}}}catch(r){return console.error(r),Promise.resolve(Qe("invalidMessageEncoding"))}}});l();f();var er=ne(Un());var Ag=ne(fm()),ad=ne(tw());var sd=e=>e.length===32?e:e.slice(1,33);function _M(e){return er.Buffer.concat([(0,ad.encode)(e.byteLength),e])}function RM(e){let{sha256:t}=Ag.crypto,n=t(er.Buffer.from("BIP0322-signed-message"));return t(er.Buffer.concat([n,n,er.Buffer.from(e)])).toString("hex")}var KM=(e,t)=>{switch(e){case"bip122_p2tr":return Gh.getPublicKey(t);case"bip122_p2sh":return fl(t,!0);case"bip122_p2wpkh":return fl(t,!0);default:throw new Error("Unsupported Address Type")}},BM=(e,t)=>{let r=km;switch(e){case"bip122_p2tr":return _m(t,void 0,r);case"bip122_p2wpkh":return gl(t,r);case"bip122_p2sh":{let n=gl(t,r);return Cm(n,r)}default:throw new Error("Unsupported Address Type")}};function OM(e,t,r,n){let i=$s.fromPSBT(r,{allowUnknownInputs:!0});try{t.forEach(a=>{let u=Io("bip122:000000000019d6689c085ae165831e93",a.address),d=e[u];if(!d)throw new Error("missing private key for ("+u+")");let{publicKey:g,privateKey:S}=d;a.signingIndexes.forEach(E=>{let T=i.getInput(E),P=T.witnessUtxo?.script&&Rm.decode(T.witnessUtxo.script);if(!a.isScriptSpend&&!T.tapInternalKey&&P?.type==="tr"&&i.updateInput(E,{tapInternalKey:sd(er.Buffer.from(g))}),a.sigHash)try{i.signIdx(S,E,[a.sigHash],ka(32))}catch{i.signIdx(S,E,void 0,ka(32))}else i.signIdx(S,E,void 0,ka(32));if(n)try{i.finalizeIdx(E)}catch{}})})}catch(a){throw console.error(a),new Error(`Error signing PSBT ${a.toString()}`)}return Promise.resolve(i.toPSBT(0))}var bg=()=>({type:"keyPair",sign:async(e,t)=>{try{switch(t.signingType){case"message":{let r=t.chainType,n=er.Buffer.from(t.message).toString("utf8"),i=e[t.chainType]?.privateKey;if(!i)throw new Error("missing private key for ("+t.chainType+")");let a=er.Buffer.from(i).toString("hex"),u=KM(r,a),d=BM(r,u),g=er.Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),S=0,E=4294967295,T=0,P=yl.encode(["OP_0",er.Buffer.from(RM(n),"hex")]),C=new $s({allowUnknownOutputs:!0,version:S});C.addOutput({amount:BigInt(0),script:d.script}),C.addInput({txid:g,index:E,sequence:T,finalScriptSig:P});let K=new $s({allowUnknownOutputs:!0,version:S});K.addInput({txid:C.id,index:0,sequence:T,tapInternalKey:r==="bip122_p2tr"?u:void 0,witnessUtxo:{script:d.script,amount:BigInt(0)},redeemScript:d.redeemScript}),K.addOutput({script:yl.encode(["RETURN"]),amount:BigInt(0)}),K.sign(er.Buffer.from(a,"hex"),void 0,ka(32)),K.finalize();let _=null,B=K.getInput(0);if(B.finalScriptWitness?.length){let L=(0,ad.encode)(B.finalScriptWitness?.length);_=er.Buffer.concat([L,...B.finalScriptWitness.map(H=>_M(H))])}else throw new Error("couldnt produce a signature");return{status:"success",signature:_.toString("hex"),message:K.toBytes()}}case"transaction":{let r=await OM(e,t.inputsToSign??[],er.Buffer.from(t.message??"","hex"),t.finalize??!1);return{status:"success",signature:er.Buffer.from(r).toString("hex")}}}}catch{return Qe("internalError")}}});l();f();var Sg=ne(Ia()),xg=ne(Ln());l();f();var wg=ne(Ia());function jc(e,t,r){if(r!=="solana")return Qe("invalidAddressType");if(e instanceof Uint8Array)return e;try{return t==="transaction"?wg.default.decode(e):Buffer.from(e,"utf8")}catch(n){return Qe("invalidMessageEncoding",`Failed to decode message: ${n instanceof Error?n.message:"Unknown error"}`)}}var Mg=()=>({type:"keyPair",sign:(e,t)=>{let r=t.data,n=jc(r.message,r.signingType,r.chainType);if("status"in n)return Promise.resolve(n);let i=Sg.default.encode(xg.default.sign.detached(n,e.privateKey));return Promise.resolve({status:"success",signature:i})}});l();f();var ia=ne(Un()),Eg=ne(Qb());var Sn=ne(id()),Tg=ne(Eo());var Pg=()=>({type:"keyPair",sign:(e,t)=>{try{switch(t.signingType){case"typedData":{switch(t.version){case 1:{let r=ia.Buffer.from(e.privateKey.slice()),n=Sn.SignTypedDataVersion.V1,{data:i}=t,a=(0,Sn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 3:{let r=ia.Buffer.from(e.privateKey.slice()),n=Sn.SignTypedDataVersion.V3,i=t.data,a=(0,Sn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:a})}case 4:{let r=ia.Buffer.from(e.privateKey.slice()),n=Sn.SignTypedDataVersion.V4,i=t.data,a=(0,Sn.signTypedData)({privateKey:r,version:n,data:i});return r.fill(0),Promise.resolve({status:"success",signature:a})}}break}case"message":{let r=t.message,n=(0,Sn.personalSign)({privateKey:ia.Buffer.from(e.privateKey),data:r});return Promise.resolve({status:"success",signature:n})}case"transaction":{let r=ia.Buffer.from(t.message.replace("0x",""),"hex"),n=new em(e.privateKey),i=`0x${(0,Tg.keccak256)(r)}`,a=(0,Eg.joinSignature)(n.signDigest(i));return Promise.resolve({status:"success",signature:a})}}}catch(r){return console.error(r),Promise.resolve(Qe("invalidMessageEncoding"))}}});l();f();var go=ne(Un());l();f();l();f();l();f();l();f();function Ig(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function VM(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function cd(e,...t){if(!VM(e))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function kg(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ig(e.outputLen),Ig(e.blockLen)}function oa(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Cg(e,t){cd(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}l();f();l();f();var Hc=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function _g(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var $c=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Xr=(e,t)=>e<<32-t|e>>>t,DM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!DM)throw new Error("Non little-endian hardware is not supported");function UM(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function cs(e){if(typeof e=="string"&&(e=UM(e)),!_g(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Rg(...e){let t=0;for(let n=0;n<e.length;n++){let i=e[n];if(!_g(i))throw new Error("Uint8Array expected");t+=i.length}let r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}var aa=class{clone(){return this._cloneInto()}},AD={}.toString;function Kg(e){let t=n=>e().update(cs(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Bg(e=32){if(Hc&&typeof Hc.getRandomValues=="function")return Hc.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}var Gc=class extends aa{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,kg(t);let n=cs(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?t.create().update(n).digest():n);for(let u=0;u<a.length;u++)a[u]^=54;this.iHash.update(a),this.oHash=t.create();for(let u=0;u<a.length;u++)a[u]^=106;this.oHash.update(a),a.fill(0)}update(t){return oa(this),this.iHash.update(t),this}digestInto(t){oa(this),cd(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:a,blockLen:u,outputLen:d}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=u,t.outputLen=d,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ud=(e,t,r)=>new Gc(e,t).update(r).digest();ud.create=(e,t)=>new Gc(e,t);l();f();l();f();var pd={};jb(pd,{bitGet:()=>jM,bitLen:()=>WM,bitMask:()=>us,bitSet:()=>HM,bytesToHex:()=>fo,bytesToNumberBE:()=>Yn,bytesToNumberLE:()=>Qc,concatBytes:()=>sa,createHmacDrbg:()=>dd,ensureBytes:()=>pr,equalBytes:()=>FM,hexToBytes:()=>po,hexToNumber:()=>fd,isBytes:()=>en,numberToBytesBE:()=>Si,numberToBytesLE:()=>Zc,numberToHexUnpadded:()=>Ug,numberToVarBytesBE:()=>zM,utf8ToBytes:()=>qM,validateObject:()=>xi});l();f();var Dg=BigInt(0),Jc=BigInt(1),NM=BigInt(2);function en(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}var LM=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function fo(e){if(!en(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=LM[e[r]];return t}function Ug(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function fd(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var Zn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Og(e){if(e>=Zn._0&&e<=Zn._9)return e-Zn._0;if(e>=Zn._A&&e<=Zn._F)return e-(Zn._A-10);if(e>=Zn._a&&e<=Zn._f)return e-(Zn._a-10)}function po(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){let u=Og(e.charCodeAt(a)),d=Og(e.charCodeAt(a+1));if(u===void 0||d===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}n[i]=u*16+d}return n}function Yn(e){return fd(fo(e))}function Qc(e){if(!en(e))throw new Error("Uint8Array expected");return fd(fo(Uint8Array.from(e).reverse()))}function Si(e,t){return po(e.toString(16).padStart(t*2,"0"))}function Zc(e,t){return Si(e,t).reverse()}function zM(e){return po(Ug(e))}function pr(e,t,r){let n;if(typeof t=="string")try{n=po(t)}catch(a){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${a}`)}else if(en(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function sa(...e){let t=0;for(let i=0;i<e.length;i++){let a=e[i];if(!en(a))throw new Error("Uint8Array expected");t+=a.length}let r=new Uint8Array(t),n=0;for(let i=0;i<e.length;i++){let a=e[i];r.set(a,n),n+=a.length}return r}function FM(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function qM(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function WM(e){let t;for(t=0;e>Dg;e>>=Jc,t+=1);return t}function jM(e,t){return e>>BigInt(t)&Jc}var HM=(e,t,r)=>e|(r?Jc:Dg)<<BigInt(t),us=e=>(NM<<BigInt(e-1))-Jc,ld=e=>new Uint8Array(e),Vg=e=>Uint8Array.from(e);function dd(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ld(e),i=ld(e),a=0,u=()=>{n.fill(1),i.fill(0),a=0},d=(...T)=>r(i,n,...T),g=(T=ld())=>{i=d(Vg([0]),T),n=d(),T.length!==0&&(i=d(Vg([1]),T),n=d())},S=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let T=0,P=[];for(;T<t;){n=d();let C=n.slice();P.push(C),T+=n.length}return sa(...P)};return(T,P)=>{u(),g(T);let C;for(;!(C=P(S()));)g();return u(),C}}var $M={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||en(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function xi(e,t,r={}){let n=(i,a,u)=>{let d=$M[a];if(typeof d!="function")throw new Error(`Invalid validator "${a}", expected function`);let g=e[i];if(!(u&&g===void 0)&&!d(g,e))throw new Error(`Invalid param ${String(i)}=${g} (${typeof g}), expected ${a}`)};for(let[i,a]of Object.entries(t))n(i,a,!1);for(let[i,a]of Object.entries(r))n(i,a,!0);return e}var Tt=BigInt(0),At=BigInt(1),ho=BigInt(2),GM=BigInt(3),hd=BigInt(4),Ng=BigInt(5),Lg=BigInt(8),JM=BigInt(9),QM=BigInt(16);function Nt(e,t){let r=e%t;return r>=Tt?r:t+r}function ZM(e,t,r){if(r<=Tt||t<Tt)throw new Error("Expected power/modulo > 0");if(r===At)return Tt;let n=At;for(;t>Tt;)t&At&&(n=n*e%r),e=e*e%r,t>>=At;return n}function hr(e,t,r){let n=e;for(;t-- >Tt;)n*=n,n%=r;return n}function Yc(e,t){if(e===Tt||t<=Tt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Nt(e,t),n=t,i=Tt,a=At,u=At,d=Tt;for(;r!==Tt;){let S=n/r,E=n%r,T=i-u*S,P=a-d*S;n=r,r=E,i=u,a=d,u=T,d=P}if(n!==At)throw new Error("invert: does not exist");return Nt(i,t)}function YM(e){let t=(e-At)/ho,r,n,i;for(r=e-At,n=0;r%ho===Tt;r/=ho,n++);for(i=ho;i<e&&ZM(i,t,e)!==e-At;i++);if(n===1){let u=(e+At)/hd;return function(g,S){let E=g.pow(S,u);if(!g.eql(g.sqr(E),S))throw new Error("Cannot find square root");return E}}let a=(r+At)/ho;return function(d,g){if(d.pow(g,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let S=n,E=d.pow(d.mul(d.ONE,i),r),T=d.pow(g,a),P=d.pow(g,r);for(;!d.eql(P,d.ONE);){if(d.eql(P,d.ZERO))return d.ZERO;let C=1;for(let _=d.sqr(P);C<S&&!d.eql(_,d.ONE);C++)_=d.sqr(_);let K=d.pow(E,At<<BigInt(S-C-1));E=d.sqr(K),T=d.mul(T,K),P=d.mul(P,E),S=C}return T}}function XM(e){if(e%hd===GM){let t=(e+At)/hd;return function(n,i){let a=n.pow(i,t);if(!n.eql(n.sqr(a),i))throw new Error("Cannot find square root");return a}}if(e%Lg===Ng){let t=(e-Ng)/Lg;return function(n,i){let a=n.mul(i,ho),u=n.pow(a,t),d=n.mul(i,u),g=n.mul(n.mul(d,ho),u),S=n.mul(d,n.sub(g,n.ONE));if(!n.eql(n.sqr(S),i))throw new Error("Cannot find square root");return S}}return e%QM,YM(e)}var eE=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function md(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=eE.reduce((n,i)=>(n[i]="function",n),t);return xi(e,r)}function tE(e,t,r){if(r<Tt)throw new Error("Expected power > 0");if(r===Tt)return e.ONE;if(r===At)return t;let n=e.ONE,i=t;for(;r>Tt;)r&At&&(n=e.mul(n,i)),i=e.sqr(i),r>>=At;return n}function rE(e,t){let r=new Array(t.length),n=t.reduce((a,u,d)=>e.is0(u)?a:(r[d]=a,e.mul(a,u)),e.ONE),i=e.inv(n);return t.reduceRight((a,u,d)=>e.is0(u)?a:(r[d]=e.mul(a,r[d]),e.mul(a,u)),i),r}function yd(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Xc(e,t,r=!1,n={}){if(e<=Tt)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:a}=yd(e,t);if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");let u=XM(e),d=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:us(i),ZERO:Tt,ONE:At,create:g=>Nt(g,e),isValid:g=>{if(typeof g!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof g}`);return Tt<=g&&g<e},is0:g=>g===Tt,isOdd:g=>(g&At)===At,neg:g=>Nt(-g,e),eql:(g,S)=>g===S,sqr:g=>Nt(g*g,e),add:(g,S)=>Nt(g+S,e),sub:(g,S)=>Nt(g-S,e),mul:(g,S)=>Nt(g*S,e),pow:(g,S)=>tE(d,g,S),div:(g,S)=>Nt(g*Yc(S,e),e),sqrN:g=>g*g,addN:(g,S)=>g+S,subN:(g,S)=>g-S,mulN:(g,S)=>g*S,inv:g=>Yc(g,e),sqrt:n.sqrt||(g=>u(d,g)),invertBatch:g=>rE(d,g),cmov:(g,S,E)=>E?S:g,toBytes:g=>r?Zc(g,a):Si(g,a),fromBytes:g=>{if(g.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${g.length}`);return r?Qc(g):Yn(g)}});return Object.freeze(d)}function zg(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function gd(e){let t=zg(e);return t+Math.ceil(t/2)}function eu(e,t,r=!1){let n=e.length,i=zg(t),a=gd(t);if(n<16||n<a||n>1024)throw new Error(`expected ${a}-1024 bytes of input, got ${n}`);let u=r?Yn(e):Qc(e),d=Nt(u,t-At)+At;return r?Zc(d,i):Si(d,i)}l();f();var nE=BigInt(0),vd=BigInt(1);function qg(e,t){let r=(i,a)=>{let u=a.negate();return i?u:a},n=i=>{let a=Math.ceil(t/i)+1,u=2**(i-1);return{windows:a,windowSize:u}};return{constTimeNegate:r,unsafeLadder(i,a){let u=e.ZERO,d=i;for(;a>nE;)a&vd&&(u=u.add(d)),d=d.double(),a>>=vd;return u},precomputeWindow(i,a){let{windows:u,windowSize:d}=n(a),g=[],S=i,E=S;for(let T=0;T<u;T++){E=S,g.push(E);for(let P=1;P<d;P++)E=E.add(S),g.push(E);S=E.double()}return g},wNAF(i,a,u){let{windows:d,windowSize:g}=n(i),S=e.ZERO,E=e.BASE,T=BigInt(2**i-1),P=2**i,C=BigInt(i);for(let K=0;K<d;K++){let _=K*g,B=Number(u&T);u>>=C,B>g&&(B-=P,u+=vd);let L=_,H=_+Math.abs(B)-1,U=K%2!==0,te=B<0;B===0?E=E.add(r(U,a[L])):S=S.add(r(te,a[H]))}return{p:S,f:E}},wNAFCached(i,a,u,d){let g=i._WINDOW_SIZE||1,S=a.get(i);return S||(S=this.precomputeWindow(i,g),g!==1&&a.set(i,d(S))),this.wNAF(g,S,u)}}}function Ad(e){return md(e.Fp),xi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yd(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function iE(e){let t=Ad(e);xi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:oE,hexToBytes:aE}=pd,mo={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=mo;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:oE(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=mo,r=typeof e=="string"?aE(e):e;if(!en(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:a}=mo._parseInt(r.subarray(2)),{d:u,l:d}=mo._parseInt(a);if(d.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:u}},hexFromSig(e){let t=S=>Number.parseInt(S[0],16)&8?"00"+S:S,r=S=>{let E=S.toString(16);return E.length&1?`0${E}`:E},n=t(r(e.s)),i=t(r(e.r)),a=n.length/2,u=i.length/2,d=r(a),g=r(u);return`30${r(u+a+4)}02${g}${i}02${d}${n}`}},Xn=BigInt(0),Pr=BigInt(1),zD=BigInt(2),Wg=BigInt(3),FD=BigInt(4);function sE(e){let t=iE(e),{Fp:r}=t,n=t.toBytes||((K,_,B)=>{let L=_.toAffine();return sa(Uint8Array.from([4]),r.toBytes(L.x),r.toBytes(L.y))}),i=t.fromBytes||(K=>{let _=K.subarray(1),B=r.fromBytes(_.subarray(0,r.BYTES)),L=r.fromBytes(_.subarray(r.BYTES,2*r.BYTES));return{x:B,y:L}});function a(K){let{a:_,b:B}=t,L=r.sqr(K),H=r.mul(L,K);return r.add(r.add(H,r.mul(K,_)),B)}if(!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function u(K){return typeof K=="bigint"&&Xn<K&&K<t.n}function d(K){if(!u(K))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(K){let{allowedPrivateKeyLengths:_,nByteLength:B,wrapPrivateKey:L,n:H}=t;if(_&&typeof K!="bigint"){if(en(K)&&(K=fo(K)),typeof K!="string"||!_.includes(K.length))throw new Error("Invalid key");K=K.padStart(B*2,"0")}let U;try{U=typeof K=="bigint"?K:Yn(pr("private key",K,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof K}`)}return L&&(U=Nt(U,H)),d(U),U}let S=new Map;function E(K){if(!(K instanceof T))throw new Error("ProjectivePoint expected")}class T{constructor(_,B,L){if(this.px=_,this.py=B,this.pz=L,_==null||!r.isValid(_))throw new Error("x required");if(B==null||!r.isValid(B))throw new Error("y required");if(L==null||!r.isValid(L))throw new Error("z required")}static fromAffine(_){let{x:B,y:L}=_||{};if(!_||!r.isValid(B)||!r.isValid(L))throw new Error("invalid affine point");if(_ instanceof T)throw new Error("projective point not allowed");let H=U=>r.eql(U,r.ZERO);return H(B)&&H(L)?T.ZERO:new T(B,L,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){let B=r.invertBatch(_.map(L=>L.pz));return _.map((L,H)=>L.toAffine(B[H])).map(T.fromAffine)}static fromHex(_){let B=T.fromAffine(i(pr("pointHex",_)));return B.assertValidity(),B}static fromPrivateKey(_){return T.BASE.multiply(g(_))}_setWindowSize(_){this._WINDOW_SIZE=_,S.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:_,y:B}=this.toAffine();if(!r.isValid(_)||!r.isValid(B))throw new Error("bad point: x or y not FE");let L=r.sqr(B),H=a(_);if(!r.eql(L,H))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:_}=this.toAffine();if(r.isOdd)return!r.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){E(_);let{px:B,py:L,pz:H}=this,{px:U,py:te,pz:J}=_,Y=r.eql(r.mul(B,J),r.mul(U,H)),ee=r.eql(r.mul(L,J),r.mul(te,H));return Y&&ee}negate(){return new T(this.px,r.neg(this.py),this.pz)}double(){let{a:_,b:B}=t,L=r.mul(B,Wg),{px:H,py:U,pz:te}=this,J=r.ZERO,Y=r.ZERO,ee=r.ZERO,q=r.mul(H,H),ue=r.mul(U,U),b=r.mul(te,te),o=r.mul(H,U);return o=r.add(o,o),ee=r.mul(H,te),ee=r.add(ee,ee),J=r.mul(_,ee),Y=r.mul(L,b),Y=r.add(J,Y),J=r.sub(ue,Y),Y=r.add(ue,Y),Y=r.mul(J,Y),J=r.mul(o,J),ee=r.mul(L,ee),b=r.mul(_,b),o=r.sub(q,b),o=r.mul(_,o),o=r.add(o,ee),ee=r.add(q,q),q=r.add(ee,q),q=r.add(q,b),q=r.mul(q,o),Y=r.add(Y,q),b=r.mul(U,te),b=r.add(b,b),q=r.mul(b,o),J=r.sub(J,q),ee=r.mul(b,ue),ee=r.add(ee,ee),ee=r.add(ee,ee),new T(J,Y,ee)}add(_){E(_);let{px:B,py:L,pz:H}=this,{px:U,py:te,pz:J}=_,Y=r.ZERO,ee=r.ZERO,q=r.ZERO,ue=t.a,b=r.mul(t.b,Wg),o=r.mul(B,U),c=r.mul(L,te),p=r.mul(H,J),h=r.add(B,L),m=r.add(U,te);h=r.mul(h,m),m=r.add(o,c),h=r.sub(h,m),m=r.add(B,H);let w=r.add(U,J);return m=r.mul(m,w),w=r.add(o,p),m=r.sub(m,w),w=r.add(L,H),Y=r.add(te,J),w=r.mul(w,Y),Y=r.add(c,p),w=r.sub(w,Y),q=r.mul(ue,m),Y=r.mul(b,p),q=r.add(Y,q),Y=r.sub(c,q),q=r.add(c,q),ee=r.mul(Y,q),c=r.add(o,o),c=r.add(c,o),p=r.mul(ue,p),m=r.mul(b,m),c=r.add(c,p),p=r.sub(o,p),p=r.mul(ue,p),m=r.add(m,p),o=r.mul(c,m),ee=r.add(ee,o),o=r.mul(w,m),Y=r.mul(h,Y),Y=r.sub(Y,o),o=r.mul(h,c),q=r.mul(w,q),q=r.add(q,o),new T(Y,ee,q)}subtract(_){return this.add(_.negate())}is0(){return this.equals(T.ZERO)}wNAF(_){return C.wNAFCached(this,S,_,B=>{let L=r.invertBatch(B.map(H=>H.pz));return B.map((H,U)=>H.toAffine(L[U])).map(T.fromAffine)})}multiplyUnsafe(_){let B=T.ZERO;if(_===Xn)return B;if(d(_),_===Pr)return this;let{endo:L}=t;if(!L)return C.unsafeLadder(this,_);let{k1neg:H,k1:U,k2neg:te,k2:J}=L.splitScalar(_),Y=B,ee=B,q=this;for(;U>Xn||J>Xn;)U&Pr&&(Y=Y.add(q)),J&Pr&&(ee=ee.add(q)),q=q.double(),U>>=Pr,J>>=Pr;return H&&(Y=Y.negate()),te&&(ee=ee.negate()),ee=new T(r.mul(ee.px,L.beta),ee.py,ee.pz),Y.add(ee)}multiply(_){d(_);let B=_,L,H,{endo:U}=t;if(U){let{k1neg:te,k1:J,k2neg:Y,k2:ee}=U.splitScalar(B),{p:q,f:ue}=this.wNAF(J),{p:b,f:o}=this.wNAF(ee);q=C.constTimeNegate(te,q),b=C.constTimeNegate(Y,b),b=new T(r.mul(b.px,U.beta),b.py,b.pz),L=q.add(b),H=ue.add(o)}else{let{p:te,f:J}=this.wNAF(B);L=te,H=J}return T.normalizeZ([L,H])[0]}multiplyAndAddUnsafe(_,B,L){let H=T.BASE,U=(J,Y)=>Y===Xn||Y===Pr||!J.equals(H)?J.multiplyUnsafe(Y):J.multiply(Y),te=U(this,B).add(U(_,L));return te.is0()?void 0:te}toAffine(_){let{px:B,py:L,pz:H}=this,U=this.is0();_==null&&(_=U?r.ONE:r.inv(H));let te=r.mul(B,_),J=r.mul(L,_),Y=r.mul(H,_);if(U)return{x:r.ZERO,y:r.ZERO};if(!r.eql(Y,r.ONE))throw new Error("invZ was invalid");return{x:te,y:J}}isTorsionFree(){let{h:_,isTorsionFree:B}=t;if(_===Pr)return!0;if(B)return B(T,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:_,clearCofactor:B}=t;return _===Pr?this:B?B(T,this):this.multiplyUnsafe(t.h)}toRawBytes(_=!0){return this.assertValidity(),n(T,this,_)}toHex(_=!0){return fo(this.toRawBytes(_))}}T.BASE=new T(t.Gx,t.Gy,r.ONE),T.ZERO=new T(r.ZERO,r.ONE,r.ZERO);let P=t.nBitLength,C=qg(T,t.endo?Math.ceil(P/2):P);return{CURVE:t,ProjectivePoint:T,normPrivateKeyToScalar:g,weierstrassEquation:a,isWithinCurveOrder:u}}function cE(e){let t=Ad(e);return xi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function jg(e){let t=cE(e),{Fp:r,n}=t,i=r.BYTES+1,a=2*r.BYTES+1;function u(m){return Xn<m&&m<r.ORDER}function d(m){return Nt(m,n)}function g(m){return Yc(m,n)}let{ProjectivePoint:S,normPrivateKeyToScalar:E,weierstrassEquation:T,isWithinCurveOrder:P}=sE({...t,toBytes(m,w,x){let v=w.toAffine(),s=r.toBytes(v.x),A=sa;return x?A(Uint8Array.from([w.hasEvenY()?2:3]),s):A(Uint8Array.from([4]),s,r.toBytes(v.y))},fromBytes(m){let w=m.length,x=m[0],v=m.subarray(1);if(w===i&&(x===2||x===3)){let s=Yn(v);if(!u(s))throw new Error("Point is not on curve");let A=T(s),V=r.sqrt(A),D=(V&Pr)===Pr;return(x&1)===1!==D&&(V=r.neg(V)),{x:s,y:V}}else if(w===a&&x===4){let s=r.fromBytes(v.subarray(0,r.BYTES)),A=r.fromBytes(v.subarray(r.BYTES,2*r.BYTES));return{x:s,y:A}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${a} uncompressed bytes`)}}),C=m=>fo(Si(m,t.nByteLength));function K(m){let w=n>>Pr;return m>w}function _(m){return K(m)?d(-m):m}let B=(m,w,x)=>Yn(m.slice(w,x));class L{constructor(w,x,v){this.r=w,this.s=x,this.recovery=v,this.assertValidity()}static fromCompact(w){let x=t.nByteLength;return w=pr("compactSignature",w,x*2),new L(B(w,0,x),B(w,x,2*x))}static fromDER(w){let{r:x,s:v}=mo.toSig(pr("DER",w));return new L(x,v)}assertValidity(){if(!P(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!P(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new L(this.r,this.s,w)}recoverPublicKey(w){let{r:x,s:v,recovery:s}=this,A=ee(pr("msgHash",w));if(s==null||![0,1,2,3].includes(s))throw new Error("recovery id invalid");let V=s===2||s===3?x+t.n:x;if(V>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let D=s&1?"03":"02",z=S.fromHex(D+C(V)),j=g(V),X=d(-A*j),re=d(v*j),nt=S.BASE.multiplyAndAddUnsafe(z,X,re);if(!nt)throw new Error("point at infinify");return nt.assertValidity(),nt}hasHighS(){return K(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,d(-this.s),this.recovery):this}toDERRawBytes(){return po(this.toDERHex())}toDERHex(){return mo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return po(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}let H={isValidPrivateKey(m){try{return E(m),!0}catch{return!1}},normPrivateKeyToScalar:E,randomPrivateKey:()=>{let m=gd(t.n);return eu(t.randomBytes(m),t.n)},precompute(m=8,w=S.BASE){return w._setWindowSize(m),w.multiply(BigInt(3)),w}};function U(m,w=!0){return S.fromPrivateKey(m).toRawBytes(w)}function te(m){let w=en(m),x=typeof m=="string",v=(w||x)&&m.length;return w?v===i||v===a:x?v===2*i||v===2*a:m instanceof S}function J(m,w,x=!0){if(te(m))throw new Error("first arg must be private key");if(!te(w))throw new Error("second arg must be public key");return S.fromHex(w).multiply(E(m)).toRawBytes(x)}let Y=t.bits2int||function(m){let w=Yn(m),x=m.length*8-t.nBitLength;return x>0?w>>BigInt(x):w},ee=t.bits2int_modN||function(m){return d(Y(m))},q=us(t.nBitLength);function ue(m){if(typeof m!="bigint")throw new Error("bigint expected");if(!(Xn<=m&&m<q))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Si(m,t.nByteLength)}function b(m,w,x=o){if(["recovered","canonical"].some(k=>k in x))throw new Error("sign() legacy options not supported");let{hash:v,randomBytes:s}=t,{lowS:A,prehash:V,extraEntropy:D}=x;A==null&&(A=!0),m=pr("msgHash",m),V&&(m=pr("prehashed msgHash",v(m)));let z=ee(m),j=E(w),X=[ue(j),ue(z)];if(D!=null){let k=D===!0?s(r.BYTES):D;X.push(pr("extraEntropy",k))}let re=sa(...X),nt=z;function ae(k){let O=Y(k);if(!P(O))return;let R=g(O),F=S.BASE.multiply(O).toAffine(),Q=d(F.x);if(Q===Xn)return;let N=d(R*d(nt+Q*j));if(N===Xn)return;let W=(F.x===Q?0:2)|Number(F.y&Pr),Ge=N;return A&&K(N)&&(Ge=_(N),W^=1),new L(Q,Ge,W)}return{seed:re,k2sig:ae}}let o={lowS:t.lowS,prehash:!1},c={lowS:t.lowS,prehash:!1};function p(m,w,x=o){let{seed:v,k2sig:s}=b(m,w,x),A=t;return dd(A.hash.outputLen,A.nByteLength,A.hmac)(v,s)}S.BASE._setWindowSize(8);function h(m,w,x,v=c){let s=m;if(w=pr("msgHash",w),x=pr("publicKey",x),"strict"in v)throw new Error("options.strict was renamed to lowS");let{lowS:A,prehash:V}=v,D,z;try{if(typeof s=="string"||en(s))try{D=L.fromDER(s)}catch(F){if(!(F instanceof mo.Err))throw F;D=L.fromCompact(s)}else if(typeof s=="object"&&typeof s.r=="bigint"&&typeof s.s=="bigint"){let{r:F,s:Q}=s;D=new L(F,Q)}else throw new Error("PARSE");z=S.fromHex(x)}catch(F){if(F.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(A&&D.hasHighS())return!1;V&&(w=t.hash(w));let{r:j,s:X}=D,re=ee(w),nt=g(X),ae=d(re*nt),k=d(j*nt),O=S.BASE.multiplyAndAddUnsafe(z,ae,k)?.toAffine();return O?d(O.x)===j:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:J,sign:p,verify:h,ProjectivePoint:S,Signature:L,utils:H}}function uE(e){return{hash:e,hmac:(t,...r)=>ud(e,t,Rg(...r)),randomBytes:Bg}}function tu(e,t){let r=n=>jg({...e,...uE(n)});return Object.freeze({...r(t),create:r})}l();f();l();f();function lE(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),a=BigInt(4294967295),u=Number(r>>i&a),d=Number(r&a),g=n?4:0,S=n?0:4;e.setUint32(t+g,u,n),e.setUint32(t+S,d,n)}var ru=class extends aa{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=$c(this.buffer)}update(t){oa(this);let{view:r,buffer:n,blockLen:i}=this;t=cs(t);let a=t.length;for(let u=0;u<a;){let d=Math.min(i-this.pos,a-u);if(d===i){let g=$c(t);for(;i<=a-u;u+=i)this.process(g,u);continue}n.set(t.subarray(u,u+d),this.pos),this.pos+=d,u+=d,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){oa(this),Cg(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:a}=this,{pos:u}=this;r[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>i-u&&(this.process(n,0),u=0);for(let T=u;T<i;T++)r[T]=0;lE(n,i-8,BigInt(this.length*8),a),this.process(n,0);let d=$c(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let S=g/4,E=this.get();if(S>E.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<S;T++)d.setUint32(4*T,E[T],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:a,destroyed:u,pos:d}=this;return t.length=i,t.pos=d,t.finished=a,t.destroyed=u,i%r&&t.buffer.set(n),t}};var fE=(e,t,r)=>e&t^~e&r,dE=(e,t,r)=>e&t^e&r^t&r,pE=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Mi=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ei=new Uint32Array(64),bd=class extends ru{constructor(){super(64,32,8,!1),this.A=Mi[0]|0,this.B=Mi[1]|0,this.C=Mi[2]|0,this.D=Mi[3]|0,this.E=Mi[4]|0,this.F=Mi[5]|0,this.G=Mi[6]|0,this.H=Mi[7]|0}get(){let{A:t,B:r,C:n,D:i,E:a,F:u,G:d,H:g}=this;return[t,r,n,i,a,u,d,g]}set(t,r,n,i,a,u,d,g){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=a|0,this.F=u|0,this.G=d|0,this.H=g|0}process(t,r){for(let T=0;T<16;T++,r+=4)Ei[T]=t.getUint32(r,!1);for(let T=16;T<64;T++){let P=Ei[T-15],C=Ei[T-2],K=Xr(P,7)^Xr(P,18)^P>>>3,_=Xr(C,17)^Xr(C,19)^C>>>10;Ei[T]=_+Ei[T-7]+K+Ei[T-16]|0}let{A:n,B:i,C:a,D:u,E:d,F:g,G:S,H:E}=this;for(let T=0;T<64;T++){let P=Xr(d,6)^Xr(d,11)^Xr(d,25),C=E+P+fE(d,g,S)+pE[T]+Ei[T]|0,_=(Xr(n,2)^Xr(n,13)^Xr(n,22))+dE(n,i,a)|0;E=S,S=g,g=d,d=u+C|0,u=a,a=i,i=n,n=C+_|0}n=n+this.A|0,i=i+this.B|0,a=a+this.C|0,u=u+this.D|0,d=d+this.E|0,g=g+this.F|0,S=S+this.G|0,E=E+this.H|0,this.set(n,i,a,u,d,g,S,E)}roundClean(){Ei.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var nu=Kg(()=>new bd);var Hg=Xc(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),hE=Hg.create(BigInt("-3")),mE=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),yo=tu({a:hE,b:mE,Fp:Hg,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},nu);var $g=()=>({type:"keyPair",sign:(e,t)=>{if(!t.isJWT)return Promise.resolve(Qe("invalidAddressType"));if(t.data.payload.iss!==Oa)return Promise.resolve(Qe("invalidClaim"));if(t.data.payload.aud!==Va)return Promise.resolve(Qe("invalidClaim"));let r={...t.data.header,kid:lt(go.Buffer.from(e.publicKey))},n={...t.data.payload,sub:lt(go.Buffer.from(e.publicKey))},i=lt(go.Buffer.from(JSON.stringify(r)))+"."+lt(go.Buffer.from(JSON.stringify(n))),u=yo.sign(go.Buffer.from(i).toString("hex"),e.privateKey,{prehash:!0}).toCompactRawBytes(),d=lt(go.Buffer.from(u)),g={header:r,payload:n,signature:d};return Promise.resolve({status:"success",signature:d,signedJWT:g})}});l();f();var Gg=()=>({type:"kms",sign:async(e,t,r)=>{let n=r.data,i=jc(n.message,n.signingType,n.chainType);if("status"in i)return i;try{let a=lt(i),{result:{signature:u}}=await e.signRawPayload({payload:a,organizationId:t.organizationId,walletId:t.walletId,derivationInfo:{curve:"Ed25519",derivationPath:t.derivationPath,addressFormat:"Solana"},algorithm:"Ed25519"});return{status:"success",signature:lm(u)}}catch(a){return Qe("internalError",`KMS cash signing failed: ${a instanceof Error?a.message:"Unknown error"}`)}}});l();f();l();f();l();f();l();f();l();f();l();f();var ls=class e extends Error{response;method;errorCode;requestId;constructor(t,r){let n=r.data,i=n?.error||"Unknown error",a=n?.requestId,u=`KMS RPC call failed: ${t} returned ${r.status} ${r.statusText} - ${i}${a?` (requestId: ${a})`:""}`;super(u),this.name="KMSRpcError",this.response=r,this.method=t,this.requestId=a,Object.setPrototypeOf(this,e.prototype)}};var yE="00000000-0000-0000-0000-000000000000",gE="/v1/wallets/kms/rpc";async function $e(e,t,r,n){let i={method:t,params:r,timestampMs:Date.now()},a=JSON.stringify(i),u;try{let g=await e.getPublicKey(),S=await e.signRpcPayload(i);u=lt(Buffer.from(JSON.stringify({publicKey:g,signature:S,kind:"PKI"}),"utf-8"))}catch(g){throw new Error(`[KMS] Failed to authenticate rpc call: ${g instanceof Error?g.message:"Unknown error"}`)}let d=await mt.api().bearer(!1).post(gE,a,{headers:{"Content-Type":"application/json","X-Phantom-Stamp":u,"X-App-Id":yE}});if(!To(d))throw new ls(t,d);return n.parse(d.data)}l();f();l();f();var wd=y.enum(["Ed25519","Secp256k1"]),Sd=y.enum(["Ethereum","Solana","BitcoinSegwit","Sui"]),Lt=y.object({curve:wd,derivationPath:y.string(),addressFormat:Sd}),Ti=Lt.extend({address:y.string(),publicKey:y.string().regex(zs)}),Jg=y.object({walletId:y.string(),walletName:y.string(),tags:y.array(y.string())}),L8=y.object({error:y.string(),requestId:y.string().optional()}),xd=y.union([y.array(y.number().int().min(0)),y.string()]),ou=y.object({envelope:y.string(),publicKey:y.string(),proof:y.string()}),Pi=y.enum(["Ed25519","Secp256r1","Secp256k1","Secp256k1Keccak256"]),z8=y.object({publicKey:y.array(y.number().int().min(0)),algorithm:Pi}),F8=y.discriminatedUnion("authenticatorKind",[y.object({authenticatorKind:y.literal("keypair"),publicKey:y.array(y.number().int().min(0)),algorithm:Pi}),y.object({authenticatorKind:y.literal("passkey")}),y.object({authenticatorKind:y.literal("oidc")})]),Md=y.discriminatedUnion("authenticatorKind",[y.object({authenticatorKind:y.literal("keypair"),publicKey:y.string(),algorithm:Pi,authenticatorName:y.string()}),y.object({authenticatorKind:y.literal("passkey"),authenticatorName:y.string()}),y.object({authenticatorKind:y.literal("oidc"),authenticatorName:y.string(),jwksUrl:y.string().url(),idTokenClaims:y.object({sub:y.string(),iss:y.string(),aud:y.string().nullish().default(null)})})]),vE=y.discriminatedUnion("authenticatorKind",[y.object({authenticatorKind:y.literal("keypair"),publicKey:y.string(),algorithm:Pi,authenticatorName:y.string(),id:y.string(),createdAtMs:y.number()}),y.object({authenticatorKind:y.literal("passkey"),authenticatorName:y.string(),id:y.string(),createdAtMs:y.number()}),y.object({authenticatorKind:y.literal("oidc"),authenticatorName:y.string(),jwksUrl:y.string().url(),idTokenClaims:y.object({sub:y.string(),iss:y.string(),aud:y.string().nullish().default(null)}),id:y.string(),createdAtMs:y.number()})]),Qg=y.enum(["ADMIN","USER"]),au=y.object({username:y.string(),role:Qg,authenticators:y.array(Md)}),Zg=y.object({username:y.string(),role:Qg.optional(),authenticators:y.array(vE)}),AE=Zg.extend({policy:y.object({type:y.string()})}),bE=y.union([AE,Zg]),tr=y.object({organizationId:y.string(),organizationName:y.string(),parentOrganizationId:y.string().nullish().default(null),tags:y.array(y.string()),users:y.array(bE)}),wE=y.discriminatedUnion("rule",[y.object({rule:y.literal("SystemInstructionLamportsThreshold"),min:y.number().int().min(0).nullish().default(null),max:y.number().int().min(0).nullish().default(null)}),y.object({rule:y.literal("SystemInstructionRecipientAllowlist"),allowlist:y.array(y.string())})]),SE=y.union([y.object({In:y.array(y.number().int().min(0))}),y.object({Exact:y.number().int().min(0)}),y.literal("Any")]),iu=y.object({programId:y.string(),discriminator:SE,validate:y.array(wE).optional()}),q8=y.object({max:y.number().int().min(0)}),W8=y.object({maxComputeUnitPrice:y.number().int().min(0).nullish().default(null),maxComputeUnits:y.number().int().min(0).nullish().default(null)}),j8=y.object({allowlist:y.array(iu)}),H8=y.object({allowlist:y.array(iu).optional()}),$8=y.null().default(null),xE=y.discriminatedUnion("rule",[y.object({rule:y.literal("NoSignerAccountUsage"),allowlist:y.array(iu).optional()}),y.object({rule:y.literal("BundleSizeLimit"),max:y.number().int().min(0)}),y.object({rule:y.literal("ComputeBudgetLimit"),maxComputeUnitPrice:y.number().int().min(0).nullish().default(null),maxComputeUnits:y.number().int().min(0).nullish().default(null)}),y.object({rule:y.literal("NoAddressLookupTables")}),y.object({rule:y.literal("InstructionAllowlist"),allowlist:y.array(iu)}),y.object({rule:y.literal("AllowAll")})]),ME=y.object({rules:y.array(xE)}),EE=y.object({version:y.literal("v0"),solana:ME.nullish().default(null)}),fs=EE,TE=y.enum(["owner","signaturePayload","signatureTransaction"]),PE=y.object({version:y.literal("v0"),scopes:y.array(TE),derivationAllowlist:y.array(Lt).nullish().default(null)}),ds=PE;var IE=y.object({organizationName:y.string(),tags:y.array(y.string()).optional(),users:y.array(au)}),Yg=y.object({result:tr});function Ed(e,t){return $e(e.authenticator,"createOrganization",t,Yg)}l();f();var kE=y.object({organizationId:y.string()}),Xg=y.object({result:tr});function Td(e,t){return $e(e.authenticator,"getOrganization",t,Xg)}l();f();var CE=y.object({organizationId:y.string(),user:au}),_E=y.object({result:tr});l();f();var RE=y.object({organizationId:y.string(),username:y.string()}),KE=y.object({result:tr});l();f();var BE=y.object({organizationId:y.string(),username:y.string(),authenticator:Md}),ev=y.object({result:y.discriminatedUnion("authenticatorKind",[y.object({authenticatorKind:y.literal("keypair"),publicKey:y.string(),algorithm:Pi,authenticatorName:y.string(),id:y.string(),createdAtMs:y.number()}),y.object({authenticatorKind:y.literal("passkey"),authenticatorName:y.string(),id:y.string(),createdAtMs:y.number()}),y.object({authenticatorKind:y.literal("oidc"),authenticatorName:y.string(),jwksUrl:y.string().url(),idTokenClaims:y.object({sub:y.string(),iss:y.string(),aud:y.string().nullish().default(null)}),id:y.string(),createdAtMs:y.number()})])});function Pd(e,t){return $e(e.authenticator,"createAuthenticator",t,ev)}l();f();var OE=y.object({organizationId:y.string(),username:y.string(),authenticatorId:y.string()}),tv=y.object({result:tr});function Id(e,t){return $e(e.authenticator,"deleteAuthenticator",t,tv)}l();f();var VE=y.object({walletName:y.string(),organizationId:y.string(),mnemonicLength:y.number().int().min(0).default(24).optional(),accounts:y.array(Lt).optional()}),rv=y.object({result:y.object({walletId:y.string(),walletName:y.string(),accounts:y.array(y.object({curve:wd,derivationPath:y.string(),addressFormat:Sd,publicKey:y.string()}))})});function kd(e,t){return $e(e.authenticator,"createWallet",t,rv)}l();f();var DE=y.object({organizationId:y.string(),limit:y.number().int().min(0).optional(),offset:y.number().int().min(0).optional()}),nv=y.object({result:y.object({wallets:y.array(Jg),totalCount:y.number().int().min(0),limit:y.number().int().min(0),offset:y.number().int().min(0)})});function Cd(e,t){return $e(e.authenticator,"getOrganizationWallets",t,nv)}l();f();var UE=y.object({walletName:y.string(),organizationId:y.string(),tag:y.string(),mnemonicLength:y.number().int().min(0).default(24).optional(),accounts:y.array(Lt).optional()}),iv=y.object({result:y.object({walletId:y.string(),walletName:y.string(),accounts:y.array(Ti)})});function _d(e,t){return $e(e.authenticator,"getOrCreateWalletWithTag",t,iv)}l();f();var NE=y.object({organizationId:y.string(),tag:y.string(),accounts:y.array(Lt).optional()}),ov=y.object({result:y.object({walletId:y.string(),walletName:y.string(),accounts:y.array(Ti)})});function Rd(e,t){return $e(e.authenticator,"getWalletWithTag",t,ov)}l();f();var LE=y.object({organizationId:y.string(),walletId:y.string(),publicKey:y.string()}),av=y.object({result:y.object({encrypted_bundle:y.string()})});function Kd(e,t){return $e(e.authenticator,"exportWallet",t,av)}l();f();var zE=y.object({ownerOrganizationId:y.string(),targetOrganizationId:y.string(),walletId:y.string(),policy:ds,transactionPolicy:fs.nullish().default(null)}),sv=y.object({result:y.object({organizationId:y.string(),walletId:y.string(),organizationPolicy:ds,transactionPolicy:fs.nullish().default(null)})});function Bd(e,t){return $e(e.authenticator,"grantOrganizationAccess",t,sv)}l();f();var FE=y.object({ownerOrganizationId:y.string(),targetOrganizationId:y.string(),walletId:y.string()}),cv=y.object({result:y.object({organizationId:y.string(),walletId:y.string(),organizationPolicy:ds,transactionPolicy:fs.nullish().default(null)})});function Od(e,t){return $e(e.authenticator,"revokeOrganizationAccess",t,cv)}l();f();var qE=y.object({organizationId:y.string()}),uv=y.object({result:ou});function Vd(e,t){return $e(e.authenticator,"initWalletImport",t,uv)}l();f();var WE=y.object({organizationId:y.string(),importEnvelope:ou,encryptedSecret:y.string().regex(zs),walletName:y.string(),accounts:y.array(Lt),mnemonicLength:y.number().int().min(0).default(24).optional(),tags:y.array(y.string()).optional()}),lv=y.object({result:y.object({walletId:y.string(),walletName:y.string(),accounts:y.array(Ti)})});function Dd(e,t){return $e(e.authenticator,"completeImportWallet",t,lv)}l();f();var jE=y.object({publicKey:y.string()}),fv=y.object({result:tr});function Ud(e,t){return $e(e.authenticator,"getOrCreatePhantomOrganization",t,fv)}l();f();var HE=y.object({}),dv=y.object({result:tr});function Nd(e,t){return $e(e.authenticator,"getPhantomOrganization",t,dv)}l();f();var $E=y.object({payload:y.union([y.array(y.number().int().min(0)),y.string()]),organizationId:y.string(),walletId:y.string(),derivationInfo:Lt,algorithm:Pi}),pv=y.object({result:y.object({signature:y.string(),address:y.string(),publicKey:y.string()})});function Ld(e,t){let r=Array.isArray(t.payload)?lt(Buffer.from(t.payload)):t.payload;return $e(e.authenticator,"signRawPayload",{...t,payload:r},pv)}l();f();var GE=y.object({transaction:xd,organizationId:y.string(),walletId:y.string(),derivationInfo:Lt.nullish().default(null)}),hv=y.object({result:y.object({transaction:xd,address:y.string(),publicKey:y.string()})});function zd(e,t){return $e(e.authenticator,"signTransaction",t,hv)}l();f();var JE=y.object({organizationId:y.string(),walletId:y.string(),accounts:y.array(Lt)}),mv=y.object({result:y.array(Ti)});function Fd(e,t){return $e(e.authenticator,"getAccounts",t,mv)}function qd(e){return{createOrganization:t=>Ed(e,t),getOrganization:t=>Td(e,t),createAuthenticator:t=>Pd(e,t),deleteAuthenticator:t=>Id(e,t),createWallet:t=>kd(e,t),getOrganizationWallets:t=>Cd(e,t),getOrCreateWalletWithTag:t=>_d(e,t),getWalletWithTag:t=>Rd(e,t),exportWallet:t=>Kd(e,t),grantOrganizationAccess:t=>Bd(e,t),revokeOrganizationAccess:t=>Od(e,t),initWalletImport:t=>Vd(e,t),completeImportWallet:t=>Dd(e,t),getOrCreatePhantomOrganization:async()=>{let t=await e.authenticator.getPublicKey();return Ud(e,{publicKey:t})},getPhantomOrganization:t=>Nd(e,t),signRawPayload:t=>Ld(e,t),signTransaction:t=>zd(e,t),getAccounts:t=>Fd(e,t)}}l();f();var su=ne(vt()),UN=(0,su.createContext)(null);l();f();var ZE=["createOrganization","getOrganization","getOrCreatePhantomOrganization","getPhantomOrganization","addUserToOrganization","deleteUserFromOrganization","createAuthenticator","deleteAuthenticator","createWallet","getOrganizationWallets","getOrCreateWalletWithTag","getWalletWithTag","exportWallet","grantOrganizationAccess","revokeOrganizationAccess","initWalletImport","completeImportWallet","signRawPayload","signTransaction","getAccounts"],yv=y.enum(ZE),YE=y.object({method:yv,params:y.record(y.unknown()),timestampMs:y.number().int().positive()});function Wd(e){return YE.parse(e)}var gv=()=>({type:"keyPair",sign:async(e,t)=>{if(!t.isKMSPKIAuthenticator)return Qe("invalidAddressType");try{let r=Wd(t.payload),n=JSON.stringify(r),i=Buffer.from(n).toString("hex"),u=yo.sign(i,e.privateKey,{prehash:!0}).toCompactRawBytes();return{status:"success",signature:lt(u)}}catch(r){if(r instanceof y.ZodError)return Qe("invalidRpcPayload",`Invalid KMS RPC payload: ${r.message}`);let n=r instanceof Error?r.message:"Failed to authenticate KMS RPC request";return Qe("internalError",n)}}});l();f();var vv=ne(Un());var jd=ne(Ia()),Av=ne(Ln());var bv=()=>({type:"keyPair",sign:(e,t)=>{if(t.chainType!=="solana")return Promise.resolve(Qe("invalidAddressType"));let r;try{typeof t.message=="string"?t.signingType==="transaction"?r=jd.default.decode(t.message):r=vv.Buffer.from(t.message,"utf8"):r=t.message}catch{return Promise.resolve(Qe("invalidMessageEncoding"))}let n=jd.default.encode(Av.default.sign.detached(r,e.privateKey));return Promise.resolve({status:"success",signature:n})}});l();f();l();f();l();f();var bo=ne(Ln(),1);l();f();l();f();l();f();l();f();function ca(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function XE(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ua(e,...t){if(!XE(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function wv(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ca(e.outputLen),ca(e.blockLen)}function ei(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function cu(e,t){ua(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}l();f();var la=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),uu=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);var ki=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,xv=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,tn=ki?e=>e:e=>xv(e);function vo(e){for(let t=0;t<e.length;t++)e[t]=xv(e[t])}var e2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function lu(e){ua(e);let t="";for(let r=0;r<e.length;r++)t+=e2[e[r]];return t}var ti={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Sv(e){if(e>=ti._0&&e<=ti._9)return e-ti._0;if(e>=ti._A&&e<=ti._F)return e-(ti._A-10);if(e>=ti._a&&e<=ti._f)return e-(ti._a-10)}function Mv(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let i=0,a=0;i<r;i++,a+=2){let u=Sv(e.charCodeAt(a)),d=Sv(e.charCodeAt(a+1));if(u===void 0||d===void 0){let g=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+g+'" at index '+a)}n[i]=u*16+d}return n}function t2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Ir(e){return typeof e=="string"&&(e=t2(e)),ua(e),e}var Ii=class{clone(){return this._cloneInto()}},bL={}.toString;function Ev(e){let t=n=>e().update(Ir(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Tv(e){let t=(n,i)=>e(i).update(Ir(n)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=n=>e(n),t}var Pv=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]),fu=class extends Ii{constructor(t,r,n={},i,a,u){if(super(),this.blockLen=t,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,ca(t),ca(r),ca(i),r<0||r>i)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>i))throw new Error(`key must be up 1..${i} byte long or undefined`);if(n.salt!==void 0&&n.salt.length!==a)throw new Error(`salt must be ${a} byte long or undefined`);if(n.personalization!==void 0&&n.personalization.length!==u)throw new Error(`personalization must be ${u} byte long or undefined`);this.buffer32=la(this.buffer=new Uint8Array(t))}update(t){ei(this);let{blockLen:r,buffer:n,buffer32:i}=this;t=Ir(t);let a=t.length,u=t.byteOffset,d=t.buffer;for(let g=0;g<a;){this.pos===r&&(ki||vo(i),this.compress(i,0,!1),ki||vo(i),this.pos=0);let S=Math.min(r-this.pos,a-g),E=u+g;if(S===r&&!(E%4)&&g+S<a){let T=new Uint32Array(d,E,Math.floor((a-g)/4));ki||vo(T);for(let P=0;g+r<a;P+=i.length,g+=r)this.length+=r,this.compress(T,P,!1);ki||vo(T);continue}n.set(t.subarray(g,g+S),this.pos),this.pos+=S,this.length+=S,g+=S}return this}digestInto(t){ei(this),cu(t,this);let{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),ki||vo(n),this.compress(n,0,!0),ki||vo(n);let i=la(t);this.get().forEach((a,u)=>i[u]=tn(a))}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){let{buffer:r,length:n,finished:i,destroyed:a,outputLen:u,pos:d}=this;return t||(t=new this.constructor({dkLen:u})),t.set(...this.get()),t.length=n,t.finished=i,t.destroyed=a,t.outputLen=u,t.buffer.set(r),t.pos=d,t}};l();f();var du=BigInt(4294967295),Hd=BigInt(32);function Iv(e,t=!1){return t?{h:Number(e&du),l:Number(e>>Hd&du)}:{h:Number(e>>Hd&du)|0,l:Number(e&du)|0}}function r2(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:a,l:u}=Iv(e[i],t);[r[i],n[i]]=[a,u]}return[r,n]}var n2=(e,t)=>BigInt(e>>>0)<<Hd|BigInt(t>>>0),i2=(e,t,r)=>e>>>r,o2=(e,t,r)=>e<<32-r|t>>>r,a2=(e,t,r)=>e>>>r|t<<32-r,s2=(e,t,r)=>e<<32-r|t>>>r,c2=(e,t,r)=>e<<64-r|t>>>r-32,u2=(e,t,r)=>e>>>r-32|t<<64-r,l2=(e,t)=>t,f2=(e,t)=>e,d2=(e,t,r)=>e<<r|t>>>32-r,p2=(e,t,r)=>t<<r|e>>>32-r,h2=(e,t,r)=>t<<r-32|e>>>64-r,m2=(e,t,r)=>e<<r-32|t>>>64-r;function y2(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:i|0}}var g2=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),v2=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,A2=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),b2=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,w2=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),S2=(e,t,r,n,i,a)=>t+r+n+i+a+(e/2**32|0)|0;var x2={fromBig:Iv,split:r2,toBig:n2,shrSH:i2,shrSL:o2,rotrSH:a2,rotrSL:s2,rotrBH:c2,rotrBL:u2,rotr32H:l2,rotr32L:f2,rotlSH:d2,rotlSL:p2,rotlBH:h2,rotlBL:m2,add:y2,add3L:g2,add3H:v2,add4L:A2,add4H:b2,add5H:S2,add5L:w2},ce=x2;var Pt=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),Z=new Uint32Array(32);function Ci(e,t,r,n,i,a){let u=i[a],d=i[a+1],g=Z[2*e],S=Z[2*e+1],E=Z[2*t],T=Z[2*t+1],P=Z[2*r],C=Z[2*r+1],K=Z[2*n],_=Z[2*n+1],B=ce.add3L(g,E,u);S=ce.add3H(B,S,T,d),g=B|0,{Dh:_,Dl:K}={Dh:_^S,Dl:K^g},{Dh:_,Dl:K}={Dh:ce.rotr32H(_,K),Dl:ce.rotr32L(_,K)},{h:C,l:P}=ce.add(C,P,_,K),{Bh:T,Bl:E}={Bh:T^C,Bl:E^P},{Bh:T,Bl:E}={Bh:ce.rotrSH(T,E,24),Bl:ce.rotrSL(T,E,24)},Z[2*e]=g,Z[2*e+1]=S,Z[2*t]=E,Z[2*t+1]=T,Z[2*r]=P,Z[2*r+1]=C,Z[2*n]=K,Z[2*n+1]=_}function _i(e,t,r,n,i,a){let u=i[a],d=i[a+1],g=Z[2*e],S=Z[2*e+1],E=Z[2*t],T=Z[2*t+1],P=Z[2*r],C=Z[2*r+1],K=Z[2*n],_=Z[2*n+1],B=ce.add3L(g,E,u);S=ce.add3H(B,S,T,d),g=B|0,{Dh:_,Dl:K}={Dh:_^S,Dl:K^g},{Dh:_,Dl:K}={Dh:ce.rotrSH(_,K,16),Dl:ce.rotrSL(_,K,16)},{h:C,l:P}=ce.add(C,P,_,K),{Bh:T,Bl:E}={Bh:T^C,Bl:E^P},{Bh:T,Bl:E}={Bh:ce.rotrBH(T,E,63),Bl:ce.rotrBL(T,E,63)},Z[2*e]=g,Z[2*e+1]=S,Z[2*t]=E,Z[2*t+1]=T,Z[2*r]=P,Z[2*r+1]=C,Z[2*n]=K,Z[2*n+1]=_}var $d=class extends fu{constructor(t={}){super(128,t.dkLen===void 0?64:t.dkLen,t,64,16,16),this.v0l=Pt[0]|0,this.v0h=Pt[1]|0,this.v1l=Pt[2]|0,this.v1h=Pt[3]|0,this.v2l=Pt[4]|0,this.v2h=Pt[5]|0,this.v3l=Pt[6]|0,this.v3h=Pt[7]|0,this.v4l=Pt[8]|0,this.v4h=Pt[9]|0,this.v5l=Pt[10]|0,this.v5h=Pt[11]|0,this.v6l=Pt[12]|0,this.v6h=Pt[13]|0,this.v7l=Pt[14]|0,this.v7h=Pt[15]|0;let r=t.key?t.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,t.salt){let n=la(Ir(t.salt));this.v4l^=tn(n[0]),this.v4h^=tn(n[1]),this.v5l^=tn(n[2]),this.v5h^=tn(n[3])}if(t.personalization){let n=la(Ir(t.personalization));this.v6l^=tn(n[0]),this.v6h^=tn(n[1]),this.v7l^=tn(n[2]),this.v7h^=tn(n[3])}if(t.key){let n=new Uint8Array(this.blockLen);n.set(Ir(t.key)),this.update(n)}}get(){let{v0l:t,v0h:r,v1l:n,v1h:i,v2l:a,v2h:u,v3l:d,v3h:g,v4l:S,v4h:E,v5l:T,v5h:P,v6l:C,v6h:K,v7l:_,v7h:B}=this;return[t,r,n,i,a,u,d,g,S,E,T,P,C,K,_,B]}set(t,r,n,i,a,u,d,g,S,E,T,P,C,K,_,B){this.v0l=t|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=a|0,this.v2h=u|0,this.v3l=d|0,this.v3h=g|0,this.v4l=S|0,this.v4h=E|0,this.v5l=T|0,this.v5h=P|0,this.v6l=C|0,this.v6h=K|0,this.v7l=_|0,this.v7h=B|0}compress(t,r,n){this.get().forEach((g,S)=>Z[S]=g),Z.set(Pt,16);let{h:i,l:a}=ce.fromBig(BigInt(this.length));Z[24]=Pt[8]^a,Z[25]=Pt[9]^i,n&&(Z[28]=~Z[28],Z[29]=~Z[29]);let u=0,d=Pv;for(let g=0;g<12;g++)Ci(0,4,8,12,t,r+2*d[u++]),_i(0,4,8,12,t,r+2*d[u++]),Ci(1,5,9,13,t,r+2*d[u++]),_i(1,5,9,13,t,r+2*d[u++]),Ci(2,6,10,14,t,r+2*d[u++]),_i(2,6,10,14,t,r+2*d[u++]),Ci(3,7,11,15,t,r+2*d[u++]),_i(3,7,11,15,t,r+2*d[u++]),Ci(0,5,10,15,t,r+2*d[u++]),_i(0,5,10,15,t,r+2*d[u++]),Ci(1,6,11,12,t,r+2*d[u++]),_i(1,6,11,12,t,r+2*d[u++]),Ci(2,7,8,13,t,r+2*d[u++]),_i(2,7,8,13,t,r+2*d[u++]),Ci(3,4,9,14,t,r+2*d[u++]),_i(3,4,9,14,t,r+2*d[u++]);this.v0l^=Z[0]^Z[16],this.v0h^=Z[1]^Z[17],this.v1l^=Z[2]^Z[18],this.v1h^=Z[3]^Z[19],this.v2l^=Z[4]^Z[20],this.v2h^=Z[5]^Z[21],this.v3l^=Z[6]^Z[22],this.v3h^=Z[7]^Z[23],this.v4l^=Z[8]^Z[24],this.v4h^=Z[9]^Z[25],this.v5l^=Z[10]^Z[26],this.v5h^=Z[11]^Z[27],this.v6l^=Z[12]^Z[28],this.v6h^=Z[13]^Z[29],this.v7l^=Z[14]^Z[30],this.v7h^=Z[15]^Z[31],Z.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},Ao=Tv(e=>new $d(e));var ys=ne(Zb(),1);l();f();l();f();l();f();l();f();var Ri=32;function kv(e){return M2(e)&&E2(e)===Ri}function xn(e,t=!1){let r=e.toLowerCase();return!t&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Ri*2,"0")}`}function M2(e){return/^(0x|0X)?[a-fA-F0-9]+$/.test(e)&&e.length%2===0}function E2(e){return/^(0x|0X)/.test(e)?(e.length-2)/2:e.length/2}l();f();var T2=/^vector<(.+)>$/,P2=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/,ps=class e{static parseFromStr(t,r=!1){if(t==="address")return{address:null};if(t==="bool")return{bool:null};if(t==="u8")return{u8:null};if(t==="u16")return{u16:null};if(t==="u32")return{u32:null};if(t==="u64")return{u64:null};if(t==="u128")return{u128:null};if(t==="u256")return{u256:null};if(t==="signer")return{signer:null};let n=t.match(T2);if(n)return{vector:e.parseFromStr(n[1],r)};let i=t.match(P2);if(i)return{struct:{address:r?xn(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:e.parseStructTypeArgs(i[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${t}`)}static parseStructTypeArgs(t,r=!1){return rm(t).map(n=>e.parseFromStr(n,r))}static tagToString(t){if("bool"in t)return"bool";if("u8"in t)return"u8";if("u16"in t)return"u16";if("u32"in t)return"u32";if("u64"in t)return"u64";if("u128"in t)return"u128";if("u256"in t)return"u256";if("address"in t)return"address";if("signer"in t)return"signer";if("vector"in t)return`vector<${e.tagToString(t.vector)}>`;if("struct"in t){let r=t.struct,n=r.typeParams.map(e.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};function I2(e){return I.u64({name:"unsafe_u64",...e}).transform({input:t=>t,output:t=>Number(t)})}function k2(e){return I.enum("Option",{None:null,Some:e})}var dt=I.bytes(Ri).transform({validate:e=>{let t=typeof e=="string"?e:Fi(e);if(!t||!kv(xn(t)))throw new Error(`Invalid Sui address ${t}`)},input:e=>typeof e=="string"?Ls(xn(e)):e,output:e=>xn(Fi(e))}),mr=I.vector(I.u8()).transform({name:"ObjectDigest",input:e=>dl(e),output:e=>tm(new Uint8Array(e)),validate:e=>{if(dl(e).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),rr=I.struct("SuiObjectRef",{objectId:dt,version:I.u64(),digest:mr}),Gd=I.struct("SharedObjectRef",{objectId:dt,initialSharedVersion:I.u64(),mutable:I.bool()}),Jd=I.enum("ObjectArg",{ImmOrOwnedObject:rr,SharedObject:Gd,Receiving:rr}),Qd=I.enum("CallArg",{Pure:I.struct("Pure",{bytes:I.vector(I.u8()).transform({input:e=>typeof e=="string"?$t(e):e,output:e=>It(new Uint8Array(e))})}),Object:Jd}),Zd=I.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:I.lazy(()=>Zd),struct:I.lazy(()=>np),u16:null,u32:null,u256:null}),pu=Zd.transform({input:e=>typeof e=="string"?ps.parseFromStr(e,!0):e,output:e=>ps.tagToString(e)}),rn=I.enum("Argument",{GasCoin:null,Input:I.u16(),Result:I.u16(),NestedResult:I.tuple([I.u16(),I.u16()])}),Yd=I.struct("ProgrammableMoveCall",{package:dt,module:I.string(),function:I.string(),typeArguments:I.vector(pu),arguments:I.vector(rn)}),Xd=I.enum("Command",{MoveCall:Yd,TransferObjects:I.struct("TransferObjects",{objects:I.vector(rn),address:rn}),SplitCoins:I.struct("SplitCoins",{coin:rn,amounts:I.vector(rn)}),MergeCoins:I.struct("MergeCoins",{destination:rn,sources:I.vector(rn)}),Publish:I.struct("Publish",{modules:I.vector(I.vector(I.u8()).transform({input:e=>typeof e=="string"?$t(e):e,output:e=>It(new Uint8Array(e))})),dependencies:I.vector(dt)}),MakeMoveVec:I.struct("MakeMoveVec",{type:k2(pu).transform({input:e=>e===null?{None:!0}:{Some:e},output:e=>e.Some??null}),elements:I.vector(rn)}),Upgrade:I.struct("Upgrade",{modules:I.vector(I.vector(I.u8()).transform({input:e=>typeof e=="string"?$t(e):e,output:e=>It(new Uint8Array(e))})),dependencies:I.vector(dt),package:dt,ticket:rn})}),ep=I.struct("ProgrammableTransaction",{inputs:I.vector(Qd),commands:I.vector(Xd)}),tp=I.enum("TransactionKind",{ProgrammableTransaction:ep,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),rp=I.enum("TransactionExpiration",{None:null,Epoch:I2()}),np=I.struct("StructTag",{address:dt,module:I.string(),name:I.string(),typeParams:I.vector(Zd)}),ip=I.struct("GasData",{payment:I.vector(rr),owner:dt,price:I.u64(),budget:I.u64()}),op=I.struct("TransactionDataV1",{kind:tp,sender:dt,gasData:ip,expiration:rp}),ap=I.enum("TransactionData",{V1:op}),sp=I.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),cp=I.enum("IntentVersion",{V0:null}),up=I.enum("AppId",{Sui:null}),lp=I.struct("Intent",{scope:sp,version:cp,appId:up});function fp(e){return I.struct(`IntentMessage<${e.name}>`,{intent:lp,value:e})}var dp=I.enum("CompressedSignature",{ED25519:I.fixedArray(64,I.u8()),Secp256k1:I.fixedArray(64,I.u8()),Secp256r1:I.fixedArray(64,I.u8()),ZkLogin:I.vector(I.u8())}),pp=I.enum("PublicKey",{ED25519:I.fixedArray(32,I.u8()),Secp256k1:I.fixedArray(33,I.u8()),Secp256r1:I.fixedArray(33,I.u8()),ZkLogin:I.vector(I.u8())}),hp=I.struct("MultiSigPkMap",{pubKey:pp,weight:I.u8()}),mp=I.struct("MultiSigPublicKey",{pk_map:I.vector(hp),threshold:I.u16()}),Cv=I.struct("MultiSig",{sigs:I.vector(dp),bitmap:I.u16(),multisig_pk:mp}),C2=I.vector(I.u8()).transform({input:e=>typeof e=="string"?$t(e):e,output:e=>It(new Uint8Array(e))}),yp=I.struct("SenderSignedTransaction",{intentMessage:fp(ap),txSignatures:I.vector(C2)}),_v=I.vector(yp,{name:"SenderSignedData"});l();f();var _2=I.enum("PackageUpgradeError",{UnableToFetchPackage:I.struct("UnableToFetchPackage",{packageId:dt}),NotAPackage:I.struct("NotAPackage",{objectId:dt}),IncompatibleUpgrade:null,DigestDoesNotMatch:I.struct("DigestDoesNotMatch",{digest:I.vector(I.u8())}),UnknownUpgradePolicy:I.struct("UnknownUpgradePolicy",{policy:I.u8()}),PackageIDDoesNotMatch:I.struct("PackageIDDoesNotMatch",{packageId:dt,ticketId:dt})}),R2=I.struct("ModuleId",{address:dt,name:I.string()}),Rv=I.struct("MoveLocation",{module:R2,function:I.u16(),instruction:I.u16(),functionName:I.option(I.string())}),K2=I.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:I.struct("IndexOutOfBounds",{idx:I.u16()}),SecondaryIndexOutOfBounds:I.struct("SecondaryIndexOutOfBounds",{resultIdx:I.u16(),secondaryIdx:I.u16()}),InvalidResultArity:I.struct("InvalidResultArity",{resultIdx:I.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),B2=I.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),O2=I.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:I.struct("MoveObjectTooBig",{objectSize:I.u64(),maxObjectSize:I.u64()}),MovePackageTooBig:I.struct("MovePackageTooBig",{objectSize:I.u64(),maxObjectSize:I.u64()}),CircularObjectOwnership:I.struct("CircularObjectOwnership",{object:dt}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:I.option(Rv),MoveAbort:I.tuple([Rv,I.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:I.struct("CommandArgumentError",{argIdx:I.u16(),kind:K2}),TypeArgumentError:I.struct("TypeArgumentError",{argumentIdx:I.u16(),kind:B2}),UnusedValueWithoutDrop:I.struct("UnusedValueWithoutDrop",{resultIdx:I.u16(),secondaryIdx:I.u16()}),InvalidPublicFunctionReturnType:I.struct("InvalidPublicFunctionReturnType",{idx:I.u16()}),InvalidTransferObject:null,EffectsTooLarge:I.struct("EffectsTooLarge",{currentSize:I.u64(),maxSize:I.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:I.struct("PackageUpgradeError",{upgradeError:_2}),WrittenObjectsTooLarge:I.struct("WrittenObjectsTooLarge",{currentSize:I.u64(),maxSize:I.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:I.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:I.vector(dt)}),AddressDeniedForCoin:I.struct("AddressDeniedForCoin",{address:dt,coinType:I.string()}),CoinTypeGlobalPause:I.struct("CoinTypeGlobalPause",{coinType:I.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Kv=I.enum("ExecutionStatus",{Success:null,Failed:I.struct("ExecutionFailed",{error:O2,command:I.option(I.u64())})}),Bv=I.struct("GasCostSummary",{computationCost:I.u64(),storageCost:I.u64(),storageRebate:I.u64(),nonRefundableStorageFee:I.u64()}),fa=I.enum("Owner",{AddressOwner:dt,ObjectOwner:dt,Shared:I.struct("Shared",{initialSharedVersion:I.u64()}),Immutable:null}),V2=I.struct("TransactionEffectsV1",{status:Kv,executedEpoch:I.u64(),gasUsed:Bv,modifiedAtVersions:I.vector(I.tuple([dt,I.u64()])),sharedObjects:I.vector(rr),transactionDigest:mr,created:I.vector(I.tuple([rr,fa])),mutated:I.vector(I.tuple([rr,fa])),unwrapped:I.vector(I.tuple([rr,fa])),deleted:I.vector(rr),unwrappedThenDeleted:I.vector(rr),wrapped:I.vector(rr),gasObject:I.tuple([rr,fa]),eventsDigest:I.option(mr),dependencies:I.vector(mr)}),gp=I.tuple([I.u64(),mr]),D2=I.enum("ObjectIn",{NotExist:null,Exist:I.tuple([gp,fa])}),U2=I.enum("ObjectOut",{NotExist:null,ObjectWrite:I.tuple([mr,fa]),PackageWrite:gp}),N2=I.enum("IDOperation",{None:null,Created:null,Deleted:null}),L2=I.struct("EffectsObjectChange",{inputState:D2,outputState:U2,idOperation:N2}),z2=I.enum("UnchangedSharedKind",{ReadOnlyRoot:gp,MutateDeleted:I.u64(),ReadDeleted:I.u64(),Cancelled:I.u64(),PerEpochConfig:null}),F2=I.struct("TransactionEffectsV2",{status:Kv,executedEpoch:I.u64(),gasUsed:Bv,transactionDigest:mr,gasObjectIndex:I.option(I.u32()),eventsDigest:I.option(mr),dependencies:I.vector(mr),lamportVersion:I.u64(),changedObjects:I.vector(I.tuple([dt,L2])),unchangedSharedObjects:I.vector(I.tuple([dt,z2])),auxDataDigest:I.option(mr)}),Ov=I.enum("TransactionEffects",{V1:V2,V2:F2});var ri={...I,U8:I.u8(),U16:I.u16(),U32:I.u32(),U64:I.u64(),U128:I.u128(),U256:I.u256(),ULEB128:I.uleb128(),Bool:I.bool(),String:I.string(),Address:dt,AppId:up,Argument:rn,CallArg:Qd,CompressedSignature:dp,GasData:ip,Intent:lp,IntentMessage:fp,IntentScope:sp,IntentVersion:cp,MultiSig:Cv,MultiSigPkMap:hp,MultiSigPublicKey:mp,ObjectArg:Jd,ObjectDigest:mr,ProgrammableMoveCall:Yd,ProgrammableTransaction:ep,PublicKey:pp,SenderSignedData:_v,SenderSignedTransaction:yp,SharedObjectRef:Gd,StructTag:np,SuiObjectRef:rr,Command:Xd,TransactionData:ap,TransactionDataV1:op,TransactionExpiration:rp,TransactionKind:tp,TypeTag:pu,TransactionEffects:Ov};function hu(e,t){return ri.IntentMessage(ri.fixedArray(t.length,ri.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}l();f();var ni={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},Vv={ED25519:32,Secp256k1:33,Secp256r1:33},mu={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};l();f();l();f();l();f();function vp(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var da=class{equals(t){return vp(this.toRawBytes(),t.toRawBytes())}toBase64(){return It(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return It(t)}verifyWithIntent(t,r,n){let i=hu(n,t),a=Ao(i,{dkLen:32});return this.verify(a,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(ri.vector(ri.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return xn(lu(Ao(this.toSuiBytes(),{dkLen:32})).slice(0,Ri*2))}};l();f();var Dv=e=>{throw TypeError(e)},Uv=(e,t,r)=>t.has(e)||Dv("Cannot "+r),yu=(e,t,r)=>(Uv(e,t,"read from private field"),r?r.call(e):t.get(e)),gu=(e,t,r)=>t.has(e)?Dv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),vu=(e,t,r,n)=>(Uv(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Au,bu,wu,Su,Ap=class extends Error{},xu=class{constructor({url:t,fetch:r=fetch,headers:n={},queries:i={}}){gu(this,Au),gu(this,bu),gu(this,wu),gu(this,Su),vu(this,Au,t),vu(this,bu,i),vu(this,wu,n),vu(this,Su,(...a)=>r(...a))}async query(t){let r=await yu(this,Su).call(this,yu(this,Au),{method:"POST",headers:{"Content-Type":"application/json",...yu(this,wu)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):nm(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new Ap(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:yu(this,bu)[t]})}};Au=new WeakMap;bu=new WeakMap;wu=new WeakMap;Su=new WeakMap;l();f();var Nv=im();l();f();function q2(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function W2(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),i=q2(n);t=t.concat(i)}return t}function j2(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=W2(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let i=(t+e.length-1)%4;if(i!==3)if(i===2)r=r.slice(0,r.length-2);else if(i===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let a=new Uint8Array(Math.floor(r.length/8)),u=0;for(let d=0;d<r.length;d+=8){let g=r.slice(d,d+8),S=parseInt(g.join(""),2);a[u++]=S}return new TextDecoder().decode(a)}function H2(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}function Lv(e,t){let r=j2(e.value,e.indexMod4),[n,i]=H2(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return i}l();f();l();f();var zv=I.struct("ZkLoginSignature",{inputs:I.struct("ZkLoginSignatureInputs",{proofPoints:I.struct("ZkLoginSignatureInputsProofPoints",{a:I.vector(I.string()),b:I.vector(I.vector(I.string())),c:I.vector(I.string())}),issBase64Details:I.struct("ZkLoginSignatureInputsClaim",{value:I.string(),indexMod4:I.u8()}),headerBase64:I.string(),addressSeed:I.string()}),maxEpoch:I.u64(),userSignature:I.vector(I.u8())});function Fv(e){return zv.parse(typeof e=="string"?$t(e):e)}l();f();function $2(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}function Mu(e,t){let r=e.toString(16);return Mv(r.padStart(t*2,"0").slice(-t*2))}function bp(e,t){let r=Mu(e,t),n=$2(r);return n===-1?new Uint8Array([0]):r.slice(n)}var jv=e=>{throw TypeError(e)},Hv=(e,t,r)=>t.has(e)||jv("Cannot "+r),ii=(e,t,r)=>(Hv(e,t,"read from private field"),r?r.call(e):t.get(e)),wp=(e,t,r)=>t.has(e)?jv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),pa=(e,t,r,n)=>(Hv(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),nn,hs,ms,G2=class Sp extends da{constructor(t,{client:r}={}){super(),wp(this,nn),wp(this,hs),wp(this,ms),pa(this,hs,r),typeof t=="string"?pa(this,nn,$t(t)):t instanceof Uint8Array?pa(this,nn,t):pa(this,nn,Uint8Array.from(t)),pa(this,ms,ii(this,nn).length!==ii(this,nn)[0]+1+32),ii(this,ms)&&pa(this,nn,qv(ii(this,nn)))}equals(t){return super.equals(t)}toSuiAddress(){if(ii(this,ms)){let t=qv(ii(this,nn),!0),r=new Uint8Array(t.length+1);return r[0]=this.flag(),r.set(t,1),xn(lu(Ao(r,{dkLen:32})).slice(0,Ri*2))}return super.toSuiAddress()}toRawBytes(){return ii(this,nn)}flag(){return ni.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=Eu(r),i=new Sp(n.publicKey).toSuiAddress();return Wv({address:i,bytes:It(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:ii(this,hs)})}verifyTransaction(t,r){let n=Eu(r),i=new Sp(n.publicKey).toSuiAddress();return Wv({address:i,bytes:It(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:ii(this,hs)})}};nn=new WeakMap;hs=new WeakMap;ms=new WeakMap;var J2=G2;function Q2(e,t,r){let n=r?.legacyAddress?bp(e,32):Mu(e,32),i=new TextEncoder().encode(t),a=new Uint8Array(1+i.length+n.length);return a.set([i.length],0),a.set(i,1),a.set(n,1+i.length),new J2(a,r)}var Z2=Nv(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function qv(e,t=!1){let r=e[0]+1,n=BigInt(`0x${Fi(e.slice(r))}`),i=t?bp(n,32):Mu(n,32),a=new Uint8Array(r+i.length);return a.set(e.slice(0,r),0),a.set(i,r),a}async function Wv({address:e,bytes:t,signature:r,intentScope:n,client:i=new xu({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let a=await i.query({query:Z2,variables:{bytes:t,signature:r,intentScope:n,author:e}});return a.data?.verifyZkloginSignature.success===!0&&a.data?.verifyZkloginSignature.errors.length===0}function Eu(e){let t=typeof e=="string"?$t(e):e;if(t[0]!==ni.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:i,userSignature:a}=Fv(r),{issBase64Details:u,addressSeed:d}=n,g=Lv(u,"iss"),S=Q2(BigInt(d),g);return{serializedSignature:It(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:i,userSignature:a,iss:g,addressSeed:BigInt(d)},signature:t,publicKey:S.toRawBytes()}}function $v({signature:e,signatureScheme:t,publicKey:r}){if(!r)throw new Error("`publicKey` is required");let n=r.toRawBytes(),i=new Uint8Array(1+e.length+n.length);return i.set([ni[t]]),i.set(e,1),i.set(n,1+e.length),It(i)}function Gv(e){let t=$t(e),r=mu[t[0]];switch(r){case"MultiSig":let n=ri.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return Eu(e);case"ED25519":case"Secp256k1":case"Secp256r1":let i=Vv[r],a=t.slice(1,t.length-i),u=t.slice(1+a.length);return{serializedSignature:e,signatureScheme:r,signature:a,publicKey:u,bytes:t};default:throw new Error("Unsupported signature scheme")}}var gs=32;var Jv="suiprivkey",xp=class{async signWithIntent(t,r){let n=hu(r,t),i=Ao(n,{dkLen:32});return{signature:$v({signature:await this.sign(i),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:It(t)}}async signTransaction(t){return this.signWithIntent(t,"TransactionData")}async signPersonalMessage(t){let{signature:r}=await this.signWithIntent(I.vector(I.u8()).serialize(t).toBytes(),"PersonalMessage");return{bytes:It(t),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}},Tu=class extends xp{};function Qv(e){let{prefix:t,words:r}=ys.bech32.decode(e);if(t!==Jv)throw new Error("invalid private key prefix");let n=new Uint8Array(ys.bech32.fromWords(r)),i=n.slice(1);return{schema:mu[n[0]],secretKey:i}}function Zv(e,t){if(e.length!==gs)throw new Error("Invalid bytes length");let r=ni[t],n=new Uint8Array(e.length+1);return n.set([r]),n.set(e,1),ys.bech32.encode(Jv,ys.bech32.toWords(n))}l();f();function Mp(e){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(e)}function Y2(e){return om(e,"")}function Yv(e){return Fi(Y2(e))}l();f();l();f();var Pu=class extends Ii{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,wv(t);let n=Ir(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?t.create().update(n).digest():n);for(let u=0;u<a.length;u++)a[u]^=54;this.iHash.update(a),this.oHash=t.create();for(let u=0;u<a.length;u++)a[u]^=106;this.oHash.update(a),a.fill(0)}update(t){return ei(this),this.iHash.update(t),this}digestInto(t){ei(this),ua(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:a,blockLen:u,outputLen:d}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=u,t.outputLen=d,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Iu=(e,t,r)=>new Pu(e,t).update(r).digest();Iu.create=(e,t)=>new Pu(e,t);l();f();l();f();function X2(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),a=BigInt(4294967295),u=Number(r>>i&a),d=Number(r&a),g=n?4:0,S=n?0:4;e.setUint32(t+g,u,n),e.setUint32(t+S,d,n)}var ku=class extends Ii{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=uu(this.buffer)}update(t){ei(this);let{view:r,buffer:n,blockLen:i}=this;t=Ir(t);let a=t.length;for(let u=0;u<a;){let d=Math.min(i-this.pos,a-u);if(d===i){let g=uu(t);for(;i<=a-u;u+=i)this.process(g,u);continue}n.set(t.subarray(u,u+d),this.pos),this.pos+=d,u+=d,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ei(this),cu(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:a}=this,{pos:u}=this;r[u++]=128,this.buffer.subarray(u).fill(0),this.padOffset>i-u&&(this.process(n,0),u=0);for(let T=u;T<i;T++)r[T]=0;X2(n,i-8,BigInt(this.length*8),a),this.process(n,0);let d=uu(t),g=this.outputLen;if(g%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let S=g/4,E=this.get();if(S>E.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<S;T++)d.setUint32(4*T,E[T],a)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:a,destroyed:u,pos:d}=this;return t.length=i,t.pos=d,t.finished=a,t.destroyed=u,i%r&&t.buffer.set(n),t}};var[eT,tT]=ce.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ki=new Uint32Array(80),Bi=new Uint32Array(80),Ep=class extends ku{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:i,Ch:a,Cl:u,Dh:d,Dl:g,Eh:S,El:E,Fh:T,Fl:P,Gh:C,Gl:K,Hh:_,Hl:B}=this;return[t,r,n,i,a,u,d,g,S,E,T,P,C,K,_,B]}set(t,r,n,i,a,u,d,g,S,E,T,P,C,K,_,B){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=a|0,this.Cl=u|0,this.Dh=d|0,this.Dl=g|0,this.Eh=S|0,this.El=E|0,this.Fh=T|0,this.Fl=P|0,this.Gh=C|0,this.Gl=K|0,this.Hh=_|0,this.Hl=B|0}process(t,r){for(let U=0;U<16;U++,r+=4)Ki[U]=t.getUint32(r),Bi[U]=t.getUint32(r+=4);for(let U=16;U<80;U++){let te=Ki[U-15]|0,J=Bi[U-15]|0,Y=ce.rotrSH(te,J,1)^ce.rotrSH(te,J,8)^ce.shrSH(te,J,7),ee=ce.rotrSL(te,J,1)^ce.rotrSL(te,J,8)^ce.shrSL(te,J,7),q=Ki[U-2]|0,ue=Bi[U-2]|0,b=ce.rotrSH(q,ue,19)^ce.rotrBH(q,ue,61)^ce.shrSH(q,ue,6),o=ce.rotrSL(q,ue,19)^ce.rotrBL(q,ue,61)^ce.shrSL(q,ue,6),c=ce.add4L(ee,o,Bi[U-7],Bi[U-16]),p=ce.add4H(c,Y,b,Ki[U-7],Ki[U-16]);Ki[U]=p|0,Bi[U]=c|0}let{Ah:n,Al:i,Bh:a,Bl:u,Ch:d,Cl:g,Dh:S,Dl:E,Eh:T,El:P,Fh:C,Fl:K,Gh:_,Gl:B,Hh:L,Hl:H}=this;for(let U=0;U<80;U++){let te=ce.rotrSH(T,P,14)^ce.rotrSH(T,P,18)^ce.rotrBH(T,P,41),J=ce.rotrSL(T,P,14)^ce.rotrSL(T,P,18)^ce.rotrBL(T,P,41),Y=T&C^~T&_,ee=P&K^~P&B,q=ce.add5L(H,J,ee,tT[U],Bi[U]),ue=ce.add5H(q,L,te,Y,eT[U],Ki[U]),b=q|0,o=ce.rotrSH(n,i,28)^ce.rotrBH(n,i,34)^ce.rotrBH(n,i,39),c=ce.rotrSL(n,i,28)^ce.rotrBL(n,i,34)^ce.rotrBL(n,i,39),p=n&a^n&d^a&d,h=i&u^i&g^u&g;L=_|0,H=B|0,_=C|0,B=K|0,C=T|0,K=P|0,{h:T,l:P}=ce.add(S|0,E|0,ue|0,b|0),S=d|0,E=g|0,d=a|0,g=u|0,a=n|0,u=i|0;let m=ce.add3L(b,c,h);n=ce.add3H(m,ue,o,p),i=m|0}({h:n,l:i}=ce.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:a,l:u}=ce.add(this.Bh|0,this.Bl|0,a|0,u|0),{h:d,l:g}=ce.add(this.Ch|0,this.Cl|0,d|0,g|0),{h:S,l:E}=ce.add(this.Dh|0,this.Dl|0,S|0,E|0),{h:T,l:P}=ce.add(this.Eh|0,this.El|0,T|0,P|0),{h:C,l:K}=ce.add(this.Fh|0,this.Fl|0,C|0,K|0),{h:_,l:B}=ce.add(this.Gh|0,this.Gl|0,_|0,B|0),{h:L,l:H}=ce.add(this.Hh|0,this.Hl|0,L|0,H|0),this.set(n,i,a,u,d,g,S,E,T,P,C,K,_,B,L,H)}roundClean(){Ki.fill(0),Bi.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Tp=Ev(()=>new Ep);var rT=ne(Ln(),1),nT="ed25519 seed",iT=2147483648,oT=new RegExp("^m(\\/[0-9]+')+$"),Xv=e=>e.replace("'",""),aT=e=>{let r=Iu.create(Tp,nT).update(Ls(e)).digest(),n=r.slice(0,32),i=r.slice(32);return{key:n,chainCode:i}},sT=({key:e,chainCode:t},r)=>{let n=new ArrayBuffer(4);new DataView(n).setUint32(0,r);let a=new Uint8Array(1+e.length+n.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(e,1),a.set(new Uint8Array(n,0,n.byteLength),e.length+1);let u=Iu.create(Tp,t).update(a).digest(),d=u.slice(0,32),g=u.slice(32);return{key:d,chainCode:g}};var cT=e=>oT.test(e)?!e.split("/").slice(1).map(Xv).some(isNaN):!1,Pp=(e,t,r=iT)=>{if(!cT(e))throw new Error("Invalid derivation path");let{key:n,chainCode:i}=aT(t);return e.split("/").slice(1).map(Xv).map(u=>parseInt(u,10)).reduce((u,d)=>sT(u,d+r),{key:n,chainCode:i})};l();f();var eA=ne(Ln(),1);var Ip=32,vs=class extends da{constructor(t){if(super(),typeof t=="string"?this.data=$t(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Ip)throw new Error(`Invalid public key input. Expected ${Ip} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return ni.ED25519}async verify(t,r){let n;if(typeof r=="string"){let i=Gv(r);if(i.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!vp(this.toRawBytes(),i.publicKey))throw new Error("Signature does not match public key");n=i.signature}else n=r;return eA.default.sign.detached.verify(t,n,this.toRawBytes())}};vs.SIZE=Ip;var kp="m/44'/784'/0'/0'/0'",As=class e extends Tu{constructor(t){super(),t?this.keypair=t:this.keypair=bo.default.sign.keyPair()}getKeyScheme(){return"ED25519"}static generate(){return new e(bo.default.sign.keyPair())}static fromSecretKey(t,r){if(typeof t=="string"){let a=Qv(t);if(a.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${a.schema}`);return this.fromSecretKey(a.secretKey,r)}let n=t.length;if(n!==gs)throw new Error(`Wrong secretKey size. Expected ${gs} bytes, got ${n}.`);let i=bo.default.sign.keyPair.fromSeed(t);if(!r||!r.skipValidation){let u=new TextEncoder().encode("sui validation"),d=bo.default.sign.detached(u,i.secretKey);if(!bo.default.sign.detached.verify(u,d,i.publicKey))throw new Error("provided secretKey is invalid")}return new e(i)}getPublicKey(){return new vs(this.keypair.publicKey)}getSecretKey(){return Zv(this.keypair.secretKey.slice(0,gs),this.getKeyScheme())}async sign(t){return bo.default.sign.detached(t,this.keypair.secretKey)}static deriveKeypair(t,r){if(r==null&&(r=kp),!Mp(r))throw new Error("Invalid derivation path");let{key:n}=Pp(r,Yv(t));return e.fromSecretKey(n)}static deriveKeypairFromSeed(t,r){if(r==null&&(r=kp),!Mp(r))throw new Error("Invalid derivation path");let{key:n}=Pp(r,t);return e.fromSecretKey(n)}};var tA=()=>({type:"keyPair",sign:async(e,t)=>{let r=As.fromSecretKey(e.privateKey);try{let n;switch(t.signingType){case"personalMessage":{n=await r.signPersonalMessage(t.message);break}case"transaction":{n=await r.signTransaction(t.transaction);break}}return Promise.resolve({status:"success",signature:n.signature})}catch(n){return console.error(n),Promise.resolve(Qe("invalidMessageEncoding"))}}});l();f();var Cu=class{#e;constructor(t){this.#e=t}async signWithKeypair(t,r){if("isJWT"in r)return this.#e.keyPair.JWT.sign(t,r);if("isKMSPKIAuthenticator"in r)return this.#e.keyPair.KMSPKIAuthenticator.sign(t,r);if("isAgentWallet"in r)return this.#e.keyPair.Agent.sign(t,r);if("isCash"in r)return this.#e.keyPair.Cash.sign(t,r);let n=r.chainType;switch(n){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return this.#e.keyPair[n].sign(t,r);case"eip155":return this.#e.keyPair[n].sign(t,r);case"solana":return this.#e.keyPair[n].sign(t,r);case"sui":return this.#e.keyPair[n].sign(t,r)}}async signWithHardware(t,r,n){return this.#e.ledger.sign(t,r,n)}async signWithSolanaSeedVault(t,r,n){return this.#e.seedVault.sign(t,r,n)}async signWithKMS(t,r,n){return this.#e.kms.sign(t,r,n)}};l();f();var rA=e=>od.safeParse(e).success;l();f();var uT=e=>({getSeed:t=>lT(e,t),setSeed:(t,r)=>fT(e,t,r),getClientJWTSigner:(t,r)=>dT(e,t,r),setClientJWTSigner:(t,r,n)=>pT(e,t,r,n),removeSeeds:t=>nA(e,t),removeClientJWTKeypairs:t=>iA(e,t),clear:async()=>{await nA(e,"all"),await iA(e,"all")}}),Oi=`${fr}.cache.secrets`,Cp=e=>`${fr}.cache.seed.${e}`,_p=e=>`${fr}.cache.client-jwt.${e}`,lT=async({isEnabled:e,secretsStorage:t},r)=>{if(!e())return null;let n=Cp(r),i=null;try{i=await t.getSecureValue(n)}catch{}if(!i)return null;let{bytes:a,encoding:u}=i.seed;return new Uint8Array(Buffer.from(a,u))},fT=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i)=>{if(!e())return;let a=Cp(n);await r.setSecureValue(a,{version:1,identifier:n,seed:{bytes:Buffer.from(i).toString("base64"),encoding:"base64"}});let u=await t.get(Oi);if(!u)u={version:1,seedIdentifiers:[n],clientJWTKeypairIdentifiers:[]};else{let d=new Set(u.seedIdentifiers);d.add(n),u.seedIdentifiers=Array.from(d)}await t.set(Oi,u)},nA=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Oi);if(!n)return;let i=r==="all"?n.seedIdentifiers:r,a=new Set(i),u=n.seedIdentifiers.filter(d=>a.has(d));await t.removeSecureValue(u.map(Cp)),await e.set(Oi,{version:1,seedIdentifiers:n.seedIdentifiers.filter(d=>!a.has(d)),clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers??[]})},dT=async({isEnabled:e,secretsStorage:t},r,n)=>{if(!e())return null;let i=_p(r),a=null;try{a=await t.getSecureValue(i)}catch{}if(!a||!a.keyPairs[n])return null;let u=a.keyPairs[n],d=new Uint8Array(Buffer.from(u.p256pubkey.bytes,u.p256pubkey.encoding)),g=new Uint8Array(Buffer.from(u.p256privkey.bytes,u.p256privkey.encoding));return{p256pubkey:d,p256privkey:g}},pT=async({isEnabled:e,generalStorage:t,secretsStorage:r},n,i,a)=>{if(!e())return;let u=_p(n),d=await r.getSecureValue(u)??{version:1,identifier:n,keyPairs:{}};d.keyPairs[i]={p256pubkey:{bytes:lt(Buffer.from(a.p256pubkey)),encoding:"base64"},p256privkey:{bytes:lt(Buffer.from(a.p256privkey)),encoding:"base64"}},await r.setSecureValue(u,d);let g=await t.get(Oi);if(!g)g={version:1,seedIdentifiers:[],clientJWTKeypairIdentifiers:[n]};else{let S=new Set(g.clientJWTKeypairIdentifiers??[]);S.add(n),g.clientJWTKeypairIdentifiers=Array.from(S)}await t.set(Oi,g)},iA=async({generalStorage:e,secretsStorage:t},r)=>{let n=await e.get(Oi);if(!n||!n.clientJWTKeypairIdentifiers||n.clientJWTKeypairIdentifiers.length===0)return;let i=r==="all"?n.clientJWTKeypairIdentifiers:r,a=new Set(i);await t.removeSecureValue(i.map(_p)),await e.set(Oi,{version:1,seedIdentifiers:n.seedIdentifiers,clientJWTKeypairIdentifiers:n.clientJWTKeypairIdentifiers.filter(u=>!a.has(u))})};l();f();l();f();l();f();l();f();l();f();async function Rp(e){let t=new Uint8Array(Array.from("mnemonic"+(e.passphrase??"")).map(r=>r.charCodeAt(0)));return e.pbkdf2(e.mnemonic,t,2048,64,"sha512")}l();f();var oA=ne(Un());var mT=ne(Ln());l();f();var Kp=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"],eF=new Set(Kp);var yT=(e,t,r,n,i)=>{let a;switch(i){case"rmd160":case"md5":case"sha":throw new Error(`${i} is unsupported by noble`);case"ripemd160":case"sha1":case"sha224":case"sha384":throw new Error(`${i} is supported by noble, but we don't need it for bip39`);case"sha256":a=si;break;case"sha512":a=ll;break}return js(a,e,t,{c:r,dkLen:n})},gT=(e,t,r)=>{for(;e.length<r;)e=t+e;return e},aA=e=>e.map(t=>gT(t.toString(2),"0",8)).join(""),vT=e=>parseInt(e,2),AT=e=>{let r=e.length*8/32,n=si(e);return aA(Array.from(n)).slice(0,r)};var Bp=async e=>{let t=Kp;if(e.length<16)throw new Error("LessThanTwelve");if(e.length>32)throw new Error("MoreThanTwentyFour");if(e.length%4!==0)throw new Error("WrongWord");let r,n;try{r=aA(Array.from(e))}catch{throw new Error("InvalidEntropyBits")}try{n=AT(e)}catch{throw new Error("InvalidChecksumBits")}let a=(r+n).match(/(.{1,11})/g);if(!a)throw new Error("InvalidChecksum");let u=a.map(S=>{let E=vT(S);return t[E]}),d=oA.Buffer.from(u.join(" "));return{seed:await Rp({mnemonic:d,pbkdf2:yT}),mnemonic:d}};l();f();var bT=ne(Ln()),mF=new RegExp("^m(\\/[0-9]+')+$");l();f();async function Vi(e,t){let r=await z0(e,t);if(!r)throw new Gn;let n=Ar.from(r.entropy);return r.entropy.fill(0),n}async function _t(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let a=await Vi(e,t),{seed:u}=await a.foldAsync(Bp);r=u,await e.secureCache.setSeed(t,r)}let i=Ar.from(r);return r.fill(0),i}l();f();var Op=ne(Eo());function wo(e){return e.fold(Op.keccak256)}function Di(e,t,r){let n=Fn[r];return Op.keccak256(`${e}:${t}:${n}`)}function Mn(e,t,r,n){let i={};for(let a of n){let{publicKey:u}=e.keypairGenerator.generateKeypairFromSeed(t,r,a),d=Nn.getAddressType(a);switch(a){case"bitcoinTaproot":case"bitcoinNativeSegwit":case"bitcoinNestedSegwit":case"bitcoinLegacy":{i[d]={chainType:d,pathType:a,publicKey:u,addresses:Object.values(Ht).reduce((g,S)=>({...g,[S]:Kt({publicKey:u,addressType:d,networkID:S})}),{})};break}case"bip44RootEthereum":case"bip44Ethereum":case"bip44EthereumSecondary":case"bip44EthereumTertiary":case"bip44Root":case"bip44Change":case"bip44":case"deprecated":{i[d]={chainType:d,pathType:a,publicKey:Kt({publicKey:u,addressType:d})};break}case"bip44Sui":{i[d]={chainType:d,pathType:a,publicKey:u,address:Kt({publicKey:u,addressType:d})};break}default:He(a)}}return i}async function sA(e,t){let r=new Set,n=await st(e);for(let a of n)a.type==="seed"&&a.seedIdentifier===t&&Fn[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let i=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){i=a;break}return cA(e,t,i)}async function cA(e,t,r){try{return await wT(e,t,r)}catch(n){if(n instanceof dn)return await cA(e,t,r+1);throw n}}async function wT(e,t,r){let n=await _t(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,a=br(i),u=await Di(t,r,a[0]),d={version:1,type:"seed",identifier:u,seedIdentifier:t,derivationIndex:r,chains:Mn(e,n,r,a)};return await Ut(e,d,!1),d}l();f();var mA=ne(Xb());var yA=ne(fm()),gA=ne(hA()),vA=ne(Eo());function PT(e,t,r){let n=Fn[r];return vA.keccak256(`${e}:${t}:${n}`)}async function AA(e,t,r){let n=[];for(let i of r){if(i.addresses.length===0&&i.publicKeys.length===0)throw new Error("Must have at least 1 address or public key in account to add Ledger account.");let a=i.addresses[0]?.pathType||i.publicKeys[0]?.pathType,u=PT(t,i.derivationIndex,a);yA.initEccLib(mA);let d=(0,gA.ECPairFactory)(mA),g={...i.addresses.reduce((E,T)=>{let P=Nn.getAddressType(T.pathType);switch(P){case"eip155":case"solana":{E[P]={chainType:P,pathType:T.pathType,publicKey:T.value};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":throw new Error("Bitcoin accounts should be using public key not computed addresses");case"sui":throw new pl("add ledger account");default:He(P)}return E},{}),...i.publicKeys.reduce((E,T)=>{let P=Nn.getAddressType(T.pathType);switch(P){case"eip155":case"solana":throw new Error("EVM or Solana accounts should be using addreses directly, not public keys");case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let C=d.fromPublicKey(Buffer.from(T.value,"hex")),K=new Uint8Array(C.publicKey);E[P]={chainType:P,pathType:T.pathType,publicKey:K,addresses:Object.values(Ht).reduce((_,B)=>({..._,[B]:Kt({publicKey:K,addressType:P,networkID:B})}),{})};break}case"sui":throw new pl("add ledger account");default:He(P)}return E},{})},S={version:1,type:"ledger",identifier:u,ledgerGroupIdentifier:t,derivationIndex:i.derivationIndex,chains:g};n.push(S),await Ut(e,S)}return n}l();f();var bA=ne(Eo());function IT(e){return bA.keccak256(e)}async function wA(e,t,r,n){let i=await e.keypairGenerator.generateKeypairFromPrivateKey(r,t),a=await Gr(e),u=IT(i.publicKey);if((a?.privateKeyIdentifiers??[]).includes(u))throw new Qa;let S={version:1,identifier:u,name:n,chainType:t,privateKey:Buffer.from(i.privateKey)},E=u,T;switch(t){case"eip155":case"solana":{T={version:1,type:"privateKey",identifier:E,privateKeyIdentifier:u,publicKey:Kt({publicKey:i.publicKey,addressType:t}),chainType:t};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{T={version:1,type:"privateKey",identifier:E,privateKeyIdentifier:u,publicKey:i.publicKey,addresses:Object.values(Ht).reduce((P,C)=>({...P,[C]:Kt({publicKey:i.publicKey,addressType:t,networkID:C})}),{}),chainType:t};break}case"sui":{T={version:1,type:"privateKey",identifier:E,privateKeyIdentifier:u,publicKey:i.publicKey,address:Kt({publicKey:i.publicKey,addressType:t}),chainType:t};break}default:He(t)}if(!T)throw new Error("unable to create a private key account based on the address type");return await Ut(e,T),await F0(e,S),T}l();f();var SA=ne(Eo());function kT(e){return SA.keccak256(e)}async function xA(e,t){let r=Object.values(t).find(Boolean);if(!r)throw new Ga;let n=kT(r),i={version:1,type:"readOnly",identifier:n,addresses:t};return await Ut(e,i),i}l();f();async function MA(e,t){let r=new Set,n=await st(e);for(let a of n)a.type==="seedless"&&a.seedIdentifier===t&&Fn[Object.values(a.chains)[0].pathType]===0&&r.add(a.derivationIndex);let i=0;for(let a=0;a<=r.size;a++)if(!r.has(a)){i=a;break}return EA(e,t,i)}async function EA(e,t,r){try{return await CT(e,t,r)}catch(n){if(n instanceof dn)return await EA(e,t,r+1);throw n}}async function CT(e,t,r){let n=await _t(e,t),i=(await e.fetchChainAvailability()).enabledAddressTypes,a=br(i),u=await Di(t,r,a[0]),d={version:1,type:"seedless",identifier:u,seedIdentifier:t,derivationIndex:r,chains:Mn(e,n,r,a)};return await Ut(e,d,!1),d}l();f();l();f();l();f();async function ya(e,t){let r=await Gr(e),n=wo(t),i=r?.seedIdentifiers??[],a=r?.seedlessIdentifiers??[];return i.concat(a).includes(n)}async function Ru(e,t,r,n){if((await Ic(e)).length>0)throw new Sc;if(n.length===0)throw new Ja;if(await ya(e,t))throw new Xi;let u=wo(t),d=t.fold(E=>({version:1,identifier:u,name:r,entropy:new Uint8Array(E)}));await W0(e,d);let g=[],S=await _t(e,u);for(let E of n){let T=Di(u,E.derivationIndex,E.derivationPathTypes[0]),P=Mn(e,S,E.derivationIndex,E.derivationPathTypes),C={version:1,type:"seedless",identifier:T,seedIdentifier:u,derivationIndex:E.derivationIndex,chains:P};await Ut(e,C),g.push(C)}return g}async function TA(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,a=br(n);return(await Ru(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:a}]))[0]}l();f();l();f();async function Ku(e,t,r,n,i=!1){let a=await ya(e,t);if(!i&&a)throw new Xi;let u=wo(t),d=t.fold(E=>({version:1,identifier:u,name:r,entropy:new Uint8Array(E)}));await q0(e,d);let g=[],S=await _t(e,u);for(let E of n){let T=await Di(u,E.derivationIndex,E.derivationPathTypes[0]),P=Mn(e,S,E.derivationIndex,E.derivationPathTypes),C={version:1,type:"seed",identifier:T,seedIdentifier:u,derivationIndex:E.derivationIndex,chains:P};await Ut(e,C),g.push(C)}return g}async function PA(e,t,r){let n=(await e.fetchChainAvailability()).enabledAddressTypes,i=0,a=br(n);return(await Ku(e,t,r,[{name:r,derivationIndex:i,derivationPathTypes:a}]))[0]}l();f();var IA=ne(Eo());function _T(e){return IA.keccak256(e)}async function kA(e,t){let r=[];for(let{publicKey:n,derivationPath:i,authToken:a}of t){let u=_T(n),d={version:1,type:"seedVault",identifier:u,derivationPath:i,authToken:a,publicKey:n,chainType:"solana"};r.push(d),await Ut(e,d)}return r}l();f();l();f();async function Bu(e,t,r){let i=(await st(e)).find(a=>a.identifier===t);if(!i)throw new fn;switch(i.type){case"seed":case"seedless":{let a=i.chains[r]?.pathType;if(!a)throw new gi;let u=await _t(e,i.seedIdentifier),d=e.keypairGenerator.generateKeypairFromSeed(u,i.derivationIndex,a);return Ar.from(d.privateKey)}case"privateKey":{let a=await vi(e,i.privateKeyIdentifier);if(a.chainType!==r)throw new gi;let u=e.keypairGenerator.generateKeypairFromPrivateKey(Ar.from(a.privateKey),r);return Ar.from(u.privateKey)}case"ledger":case"seedVault":throw new Ha;case"readOnly":throw new $a;default:(a=>{throw new Error("invalid account type")})(i)}}l();f();l();f();l();f();var ws=new Error("Unknown error"),Ou=new Error("Invalid entropy length"),bs=new Error("Invalid mn*monic sentence length"),zp=new Error("Invalid checksum"),CA=new RangeError("Invalid mn*monic word"),Lp=new RangeError("Invalid wordlist"),Fp=new RangeError("Invalid wordlist index"),kr=(e,t)=>{if(!e)throw t};function Ni(e){kr(e>=128,Ou),kr(e<=256,Ou),kr(e%32===0,Ou)}function Ss(e){kr(e>=12,bs),kr(e<=24,bs),kr(e%3===0,bs)}function ga(e){kr(e.length===2048,Lp),kr(e.every(t=>typeof t=="string"),Lp)}function qp(e,t){return Ss(e),t(e*4/3)}async function Vu(e,t){let r=e.length*8;Ni(r);let n=r/32,i=await t(e),[a]=i,u=8-n,d=a>>>u<<u>>>0,g=new Uint8Array(e.length+1);return g.set(e,0),g[g.length-1]=d,g}function Du(e){let t=(e.length-1)*8;Ni(t);let r=t/32,n=(t+r)/11,i=new ArrayBuffer(n*4),a=new DataView(i),u=0,d=0,g=0;for(let S of e)if(g+=8,d|=S<<32-g,d>>>=0,g>=11){let E=d>>>21;kr(E>=0&&E<=2047,Fp),a.setUint32(u*4,E,!0),u++,d<<=11,d>>>=0,g-=11}return kr(u===n,bs),new Uint32Array(i)}function _A(e){let t=e.length;Ss(t);let r=11,n=e.length*r,i=new ArrayBuffer(Math.ceil(n/8)),a=new DataView(i),u=new DataView(e.buffer),d=e.length,g=0,S=0,E=0,T=8;for(let P=0;P<d;P++){let C=u.getUint32(P*4,!0);kr(C<2048,Fp);let K=r;for(;K>0;){let _=32-K,B=K>=T?T:K;g|=C>>32-_-B&(1<<B)-1,S+=B,g<<=T-B,g>>>=0,K-=B,T-=B,T<=0&&(T=8),S%8===0&&(a.setUint8(E,g),E++,g=0)}}return d%8!==0&&a.setUint8(E,g),new Uint8Array(i)}function Wp(e){Ss(e.length);let t=_A(e),r=t.slice(0,t.length-1);return t.fill(0),r}async function va(e,t){let r=e.length*8;Ni(r);let n=await Vu(e,t),i=Du(n);return n.fill(0),i}function jp(e,t){ga(t);let r=new Set(t),n=new Uint32Array(24),i=0,a="";for(let d=0;d<e.length;d++){let g=e[d],S=g===32,E=d===e.length-1;if(E&&(a+=String.fromCharCode(g)),S||E){kr(r.has(a),CA);let T=0;for(let P of t){if(a===P)break;T++}n[i++]=T,a=""}else a+=String.fromCharCode(g)}Ss(i);let u=n.slice(0,i);return n.fill(0),u}async function Aa(e,t,r){let n=await va(e,r),i=new Uint8Array(n.reduce((u,d)=>u+t[d].length+1,-1)),a=0;for(let u of n){a>0&&(i[a++]=32);let d=t[u];for(let g of d)i[a++]=g.charCodeAt(0)}return n.fill(0),i}var Np=Uint8Array.of(109,110,101,109,111,110,105,99);async function So(e,t,r,n,i){let a=await Aa(e,r,n),u=new Uint8Array(Np.length+t.length);u.set(Np,0),u.set(t,Np.length);let d=await i(a,u,2048,64,"sha512");return u.fill(0),a.fill(0),d}l();f();var ba=ne(Jb());l();f();var xs=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function Hp(e){switch(e){case"english":return xs}}function $p(e){return t=>new e(t)}function Gp(e,t){return async r=>{let n=null,i=null,a=null,u=null,d=null;try{i=Wp(r),a=await Vu(i,t),u=Du(a);let g=r[r.length-1],S=u[u.length-1];if(g!==S)throw zp;d=e.fromEntropy(i)}catch(g){g instanceof Error?n=g:(console.error(g),n=ws)}finally{if(i?.fill(0),a?.fill(0),u?.fill(0),n)throw n;return d}}}function Jp(e,t){return async r=>{let n=null,i=null,a=null;try{i=jp(r,t),a=await e.fromIndexes(i)}catch(u){u instanceof Error?n=u:(console.error(u),n=ws)}finally{if(i?.fill(0),n)throw n;return a}}}function Qp(e,t){return r=>{let n=null,i=null,a=null;try{i=qp(r,t),a=e.fromEntropy(i)}catch(u){u instanceof Error?n=u:(console.error(u),n=ws)}finally{if(i?.fill(0),n)throw n;return a}}}var Zp=class{static async webCrypto(t){let r=typeof t=="string"?await Hp(t):t;ga(r);let n=u=>self.crypto.getRandomValues(new Uint8Array(u)),i=async u=>new Uint8Array(await self.crypto.subtle.digest("SHA-256",u)),a=async(u,d,g,S,E)=>{let T="SHA-"+E.substring(3),P=await self.crypto.subtle.importKey("raw",u,"PBKDF2",!1,["deriveBits"]),C=await self.crypto.subtle.deriveBits({name:"PBKDF2",salt:d,iterations:g,hash:T},P,S*8);return new Uint8Array(C)};return class Ms{static fromEntropy=$p(Ms);static fromIndexes=Gp(Ms,i);static fromMnemonic=Jp(Ms,r);static fromSentenceLength=Qp(Ms,n);static wordlist=r;#e;constructor(d){Ni(d.length*8),this.#e=d.slice()}deriveSeed=(d=new Uint8Array)=>So(this.#e,d,r,i,a);getEntropy=()=>this.#e.slice();getIndexes=()=>va(this.#e,i);getMnemonic=()=>Aa(this.#e,r,i);getSentenceLength=()=>{let d=this.#e.length*8,g=d/32;return(d+g)/11}}}static async nodeCrypto(t){let r=typeof t=="string"?await Hp(t):t;ga(r);let n=u=>new Uint8Array((0,ba.randomBytes)(u).buffer),i=u=>new Uint8Array((0,ba.createHash)("sha256").update(u).digest().buffer),a=(...u)=>new Promise((d,g)=>{(0,ba.pbkdf2)(...u,(S,E)=>{if(S)return g(S);d(new Uint8Array(E.buffer))})});return class Es{static fromEntropy=$p(Es);static fromIndexes=Gp(Es,i);static fromMnemonic=Jp(Es,r);static fromSentenceLength=Qp(Es,n);static wordlist=r;#e;constructor(d){Ni(d.length*8),this.#e=d.slice()}deriveSeed=(d=new Uint8Array)=>So(this.#e,d,r,i,a);getEntropy=()=>this.#e.slice();getIndexes=()=>va(this.#e,i);getMnemonic=()=>Aa(this.#e,r,i);getSentenceLength=()=>{let d=this.#e.length*8,g=d/32;return(d+g)/11}}}static async customCrypto(t,r){let n=typeof t=="string"?await Hp(t):t;ga(n);let{random:i,sha256:a,pbkdf2:u}=r;return class Ts{static fromEntropy=$p(Ts);static fromIndexes=Gp(Ts,a);static fromMnemonic=Jp(Ts,n);static fromSentenceLength=Qp(Ts,i);static wordlist=n;#e;constructor(g){Ni(g.length*8),this.#e=g.slice()}deriveSeed=(g=new Uint8Array)=>So(this.#e,g,n,a,u);getEntropy=()=>this.#e.slice();getIndexes=()=>va(this.#e,a);getMnemonic=()=>Aa(this.#e,n,a);getSentenceLength=()=>{let g=this.#e.length*8,S=g/32;return(g+S)/11}}}};async function RA(e,t){let r,n=await e.secureCache.getSeed(t);if(n)r=n;else{let a=await Vi(e,t);try{r=await a.foldAsync(async d=>So(d,new Uint8Array,xs,si,(g,S,E,T)=>js(si,g,S,{c:E,dkLen:T})))}catch{throw new Error("InvalidEntropyBip39")}await e.secureCache.setSeed(t,r)}let i=Ar.from(r);return r.fill(0),i}var RT=new Gn,KT=new gi,BT=new eo,ot={unableToLoadAccounts:{status:"unable-to-load-accounts",isOnboarded:!1,reonboardingNeeded:!1},unonboarded:{status:"unonboarded",isOnboarded:!1,reonboardingNeeded:!1},invalidIdentifier:{status:"invalid-identifier",isOnboarded:!0,reonboardingNeeded:!0},fetchIntegrityStorageError:{status:"fetch-integrity-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchEntropyStorageError:{status:"fetch-entropy-storage-error",isOnboarded:!0,reonboardingNeeded:!0},fetchPkStorageError:{status:"fetch-pk-storage-error",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropy:{status:"invalid-entropy",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBip39:{status:"invalid-entropy-bip-39",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksumBits:{status:"invalid-checksum-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyBits:{status:"invalid-entropy-bits",isOnboarded:!0,reonboardingNeeded:!0},invalidChecksum:{status:"invalid-checksum",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthLessThanTwelve:{status:"invalid-entropy-length-less-than-twelve",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthMoreThanTwentyFour:{status:"invalid-entropy-length-more-than-twenty-four",isOnboarded:!0,reonboardingNeeded:!0},invalidEntropyLengthWrongWord:{status:"invalid-entropy-length-wrong-word",isOnboarded:!0,reonboardingNeeded:!0},invalidPkAddressType:{status:"invalid-pk-address-type",isOnboarded:!0,reonboardingNeeded:!0},invalidPkIdentifier:{status:"invalid-pk-identifier",isOnboarded:!0,reonboardingNeeded:!0},invalidPk:{status:"invalid-pk",isOnboarded:!0,reonboardingNeeded:!0},internalError:{status:"internal-error",isOnboarded:!0,reonboardingNeeded:!0},safelyOnboarded:{status:"safely-onboarded",isOnboarded:!0,reonboardingNeeded:!1}};async function OA(e){let t;try{if(t=await st(e),t.length===0)return ot.unonboarded}catch{return ot.unableToLoadAccounts}return OT(e,t)}var OT=async(e,t)=>{let r=await VT(e,t);if(r.status!=="safely-onboarded")return r;try{let u=await _f(e);if(u?.version===3&&u?.isSafelyOnboarded)return ot.safelyOnboarded}catch{return ot.fetchIntegrityStorageError}let n=await BA(e,t,"seed"),i=await BA(e,t,"seedless"),a=await UT(e,t);return n.status!=="safely-onboarded"?n:i.status!=="safely-onboarded"?i:a.status!=="safely-onboarded"?a:(await Cf(e,{version:3,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),ot.safelyOnboarded)},VT=async(e,t)=>{try{if((await _f(e))?.isSafelyOnboarded)return ot.safelyOnboarded}catch{return ot.fetchIntegrityStorageError}let r=await KA(e,t,"seed"),n=await KA(e,t,"seedless");return r.status!=="safely-onboarded"?r:n.status!=="safely-onboarded"?n:(await Cf(e,{version:1,isSafelyOnboarded:!0,lastCheckedTimestamp:Date.now()}),ot.safelyOnboarded)},KA=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await Vi(e,i)}catch(a){if(a instanceof Error){if(a.message===RT.message)return ot.invalidIdentifier;if(a.message.match(/ExpoSecureStorage/))return ot.fetchEntropyStorageError}return ot.internalError}return ot.safelyOnboarded},DT=e=>{if(!(e instanceof Error))return ot.invalidEntropy;let t=[[/ExpoSecureStorage/,ot.fetchEntropyStorageError],[/InvalidEntropyBip39/,ot.invalidEntropyBip39],[/LessThanTwelve/,ot.invalidEntropyLengthLessThanTwelve],[/MoreThanTwentyFour/,ot.invalidEntropyLengthMoreThanTwentyFour],[/WrongWord/,ot.invalidEntropyLengthWrongWord],[/InvalidChecksumBits/,ot.invalidChecksumBits],[/InvalidEntropyBits/,ot.invalidEntropyBits],[/InvalidChecksum/,ot.invalidChecksum]];for(let[r,n]of t)if(e.message.match(r))return n;return ot.invalidEntropy},BA=async(e,t,r)=>{let n=new Set;for(let i of t)i.type===r&&n.add(i.seedIdentifier);for(let i of n)try{await RA(e,i)}catch(a){return DT(a)}return ot.safelyOnboarded},UT=async(e,t)=>{for(let r of t)if(r.type==="privateKey")try{await Bu(e,r.identifier,r.chainType)}catch(n){if(n instanceof Error){if(n.message===KT.message)return ot.invalidPkAddressType;if(n.message===BT.message)return ot.invalidPkIdentifier;if(n.message.match(/ExpoSecureStorage/))return ot.fetchPkStorageError}return ot.invalidPk}return ot.safelyOnboarded};l();f();async function VA(e){let t=(await e.fetchChainAvailability()).enabledAddressTypes,r=!1,n=await st(e);if(n.length===0)return r;let i=new Map;for(let a of n){if(a.type!=="seed"&&a.type!=="seedless")continue;let u=i.get(a.seedIdentifier);u?u.push(a):i.set(a.seedIdentifier,[a])}for(let[a,u]of i){let d;for(let g of u)if(!(g.chains&&!Tf(Object.values(g.chains)[0].pathType)))for(let S of t){if(g.chains[S])continue;d||(d=await _t(e,a));let T=br([S]),P=Mn(e,d,g.derivationIndex,T);g.chains={...g.chains,...P},r=!0}}return r&&await Qn(e,n),r}l();f();l();f();l();f();l();f();var NA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),DA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),NT=BigInt(1),Yp=BigInt(2),UA=(e,t)=>(e+t/Yp)/t;function LT(e){let t=NA,r=BigInt(3),n=BigInt(6),i=BigInt(11),a=BigInt(22),u=BigInt(23),d=BigInt(44),g=BigInt(88),S=e*e*e%t,E=S*S*e%t,T=hr(E,r,t)*E%t,P=hr(T,r,t)*E%t,C=hr(P,Yp,t)*S%t,K=hr(C,i,t)*C%t,_=hr(K,a,t)*K%t,B=hr(_,d,t)*_%t,L=hr(B,g,t)*B%t,H=hr(L,d,t)*_%t,U=hr(H,r,t)*E%t,te=hr(U,u,t)*K%t,J=hr(te,n,t)*S%t,Y=hr(J,Yp,t);if(!Xp.eql(Xp.sqr(Y),e))throw new Error("Cannot find square root");return Y}var Xp=Xc(NA,void 0,void 0,{sqrt:LT}),Uu=tu({a:BigInt(0),b:BigInt(7),Fp:Xp,n:DA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=DA,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-NT*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=r,u=BigInt("0x100000000000000000000000000000000"),d=UA(a*e,t),g=UA(-n*e,t),S=Nt(e-d*r-g*i,t),E=Nt(-d*n-g*a,t),T=S>u,P=E>u;if(T&&(S=t-S),P&&(E=t-E),S>u||E>u)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:T,k1:S,k2neg:P,k2:E}}}},nu),Lj=BigInt(0);var zj=Uu.ProjectivePoint;async function LA(){let e=Uu.utils.randomPrivateKey();return{publicKey:Uu.getPublicKey(e),privateKey:e}}var zA=e=>`${fr}.perps.agent.keypair.${e}`,Nu=async(e,t,r=!1)=>{let n=await zT(e,t);if(n&&!r)return n;let i=await LA();return await FT(e,i,t),i},zT=async(e,t)=>{let r=zA(t),n=null;try{n=await e.secretsStorage.getSecureValue(r)}catch{}if(!n)return null;let i=n.keyPair,a=new Uint8Array(Buffer.from(i.publicKey.bytes,i.publicKey.encoding)),u=new Uint8Array(Buffer.from(i.privateKey.bytes,i.privateKey.encoding));return{publicKey:a,privateKey:u}},FT=async(e,t,r)=>{let n=zA(r),i={publicKey:{bytes:Buffer.from(t.publicKey).toString("base64"),encoding:"base64"},privateKey:{bytes:Buffer.from(t.privateKey).toString("base64"),encoding:"base64"}},a={version:1,identifier:r,keyPair:i};await e.secretsStorage.setSecureValue(n,a)};var FA=async(e,t,r=!1)=>{let{publicKey:n}=await Nu(e,t,r);return Kt({publicKey:n,addressType:"eip155"})};l();f();l();f();var eh="m/23001'/0'";async function wa(e,t){let r;switch(t.type){case"seedless":case"seed":r=t.seedIdentifier;break;case"privateKey":r=t.privateKeyIdentifier;break}let n=await e.secureCache.getClientJWTSigner(r,eh);if(n)return{publicKey:n.p256pubkey,privateKey:n.p256privkey};let i;switch(t.type){case"seedless":case"seed":{i=(await _t(e,t.seedIdentifier)).fold(u=>new Po(u));break}case"privateKey":{let a=await vi(e,t.privateKeyIdentifier);i=new Po(a.privateKey);break}}try{let a=i.derivePath({ellipticCurve:"ed25519",derivationPath:eh,bytesInPrivateKey:64}),u=eu(a.secretKey,yo.CURVE.n),d=yo.getPublicKey(u);return await e.secureCache.setClientJWTSigner(r,eh,{p256pubkey:d,p256privkey:u}),{publicKey:d,privateKey:u}}finally{i.cleanup()}}var qT=e=>e.type==="seed"||e.type==="seedless"||e.type==="privateKey",qA=async(e,t)=>{let r=await st(e);if(r.length===0)throw new Error("No accounts, unable to get authentication public key.");let i=r.filter(qT).find(u=>u.type==="privateKey"?u.privateKeyIdentifier===t:u.seedIdentifier===t);if(!i)throw new Error("Unable to derive authentication public key for given secret identifier.");let a=await wa(e,i);return lt(a.publicKey)};l();f();var WA=ne(Ia());l();f();var WT="m/24001'/0'",Lu=async e=>{let t=await st(e);if(t.length===0)throw new Error("No accounts, unable to derive cash key.");let r=t[0],n;switch(r.type){case"seed":case"seedless":{n=(await _t(e,r.seedIdentifier)).fold(a=>new Po(a));break}case"privateKey":{let i=await vi(e,r.privateKeyIdentifier);n=new Po(i.privateKey);break}default:throw new Error(`Account type ${r.type} is not supported, unable to derive cash key.`)}try{let i=n.derivePath({ellipticCurve:"ed25519",derivationPath:WT,bytesInPrivateKey:64});return{publicKey:i.publicKey,privateKey:i.secretKey}}finally{n.cleanup()}};var jA=async e=>{let{publicKey:t}=await Lu(e);return WA.default.encode(t)};l();f();async function HA(e,t){let r=await st(e);if(r.length===0)throw new fn;let n=r.filter(i=>i.identifier!==t);await Qn(e,n),await kf(e)}l();f();async function $A(e,t,r){let n=await st(e);if(r<0||r>=n.length)throw new fn;let i=n.map(u=>u.identifier).indexOf(t);if(i<0)throw new fn;if(i===r)return;let a=n[i];n.splice(i,1),n.splice(r,0,a),await Qn(e,n)}l();f();l();f();function jT(e){let t;async function r(){if(t)return t;let a=await st(e),u=a.find(d=>d.type==="seedless")??a.find(d=>d.type==="seed")??a.find(d=>d.type==="privateKey");if(!u)throw new Error("No suitable account found to derive authentication key");return t=u,t}async function n(){let a=await r();return wa(e,a)}return{getPublicKey:async()=>lt((await n()).publicKey),signRpcPayload:async a=>{let u=await n(),d=await e.vaultSigner.signWithKeypair(u,{isKMSPKIAuthenticator:!0,payload:a});if("status"in d&&d.status==="error")throw new Error(d.message);return d.signature}}}function zu(e){return qd({authenticator:jT(e)})}async function Fu(e,t,r){let n=t.chains[r]?.pathType;if(!n)return Qe("invalidAddressType",`Seed Account does not contain a chain address for the chain type ${r}.`);let i=await _t(e,t.seedIdentifier);return e.keypairGenerator.generateKeypairFromSeed(i,t.derivationIndex,n)}async function GA(e,t,r){let n=await st(e),i=n.find(a=>a.identifier===t);if(!i)return Qe("invalidAccountId",`Vault (${n.length} account(s) found) does not contain an account for the given identifier: ${t}`);if("isAgentWallet"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let a=await Nu(e,i.identifier);return e.vaultSigner.signWithKeypair(a,r)}default:return Qe("unsupportedOperation","Invalid signingAccount type provided for paramType")}if("isJWT"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let a=await wa(e,i);return e.vaultSigner.signWithKeypair(a,r)}default:return Qe("unsupportedOperation","Invalid signingAccount type provided for paramType")}if("isKMSPKIAuthenticator"in r)return Qe("unsupportedOperation","Signing with the KMS PKI authenticator key is not supported through the external vault interface, as this key is reserved for internal authentication purposes.");if("isCash"in r){if("isCashKMS"in r)switch(i.type){case"seedless":case"seed":case"privateKey":{let u=zu(e),d=await Pf(u);return e.vaultSigner.signWithKMS(u,{organizationId:d.organizationId,walletId:d.walletId,derivationPath:d.account.derivationPath},r)}default:return Qe("unsupportedOperation","Invalid signingAccount type provided for paramType")}let a=await Lu(e);return e.vaultSigner.signWithKeypair(a,r)}switch(i.type){case"seedless":case"seed":{switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{enabledAddressTypes:a}=await e.fetchChainAvailability(),u={},d=Object.keys(i.chains).filter(g=>_a.safeParse(g).success).filter(g=>a.includes(g));for(let g of d){let S=await Fu(e,i,g);if("status"in S&&S.status==="error")return S;u[g]=S}return e.vaultSigner.signWithKeypair(u,r)}case"eip155":{let a=await Fu(e,i,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case"solana":{let a=await Fu(e,i,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}case"sui":{let a=await Fu(e,i,r.chainType);return"status"in a&&a.status==="error"?a:e.vaultSigner.signWithKeypair(a,r)}}break}case"privateKey":{let a=await vi(e,i.privateKeyIdentifier);if(a.chainType!==r.chainType)return Qe("invalidAddressType",`Private Key account from accountID is a different chain type from params. Expected ${a.chainType}, got ${r.chainType}`);let u=e.keypairGenerator.generateKeypairFromPrivateKey(Ar.from(a.privateKey),r.chainType);switch(r.chainType){case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":return e.vaultSigner.signWithKeypair({[r.chainType]:u},r);case"eip155":return e.vaultSigner.signWithKeypair(u,r);case"solana":return e.vaultSigner.signWithKeypair(u,r);case"sui":return e.vaultSigner.signWithKeypair(u,r)}break}case"ledger":{let a=i.chains[r.chainType];if(!a)return Qe("invalidAddressType",`Ledger Account does not contain a chain address for the chain type ${r.chainType}.`);let u=Yh.safeParse({pathType:a.pathType,index:i.derivationIndex});if(!u.success)return Qe("invalidDerivationPath","Unsupported Derivation Path. Ledger account derivation path type is incompatible with ChainType in signing params.");let d=Ca(u.data);return e.vaultSigner.signWithHardware(t,d,r)}case"seedVault":{let{authToken:a,derivationPath:u,chainType:d}=i;return d!==r.chainType?Qe("invalidAddressType",`Solana Seed Vault account from accountID is a different chain type from params. Expected ${d}, got ${r.chainType}`):e.vaultSigner.signWithSolanaSeedVault(a,u,r)}case"readOnly":return Qe("unsupportedOperation","Read Only Accounts cannot sign transactions.");default:(a=>{throw new Error("invalid account type")})(i)}}l();f();function th(e){switch(e.type){case"seed":return Ps(e);case"seedless":return Is(e);case"privateKey":return nh(e);case"ledger":return rh(e);case"seedVault":return ih(e);case"readOnly":return e}}function rh(e){let{chains:t,version:r,...n}=e,i={};for(let a of Object.keys(t)){let u=t[a];if(!u)continue;let d;switch(u.chainType){case"solana":case"eip155":{let{publicKey:g,...S}=u;d={...S,address:g};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:g,...S}=u,E=Object.values(Ht).reduce((T,P)=>{let C=g?g[P]:void 0;if(!C)throw new Yi;return{...T,[P]:C}},{});d={...S,addresses:E};break}case"sui":{d=u;break}}i[a]=d}return{...n,chains:i}}function nh(e){switch(e.chainType){case"solana":case"eip155":{let{publicKey:t,version:r,...n}=e;return{...n,address:t}}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:t,version:r,...n}=e,i=Object.values(Ht).reduce((a,u)=>{let d=t?t[u]:void 0;if(!d)throw new Yi;return{...a,[u]:d}},{});return{...n,addresses:i}}case"sui":return e}}function ih(e){let{publicKey:t,version:r,...n}=e;return{...n,address:t}}function Ps(e){let{chains:t,version:r,...n}=e,i={};for(let a of Object.keys(t)){let u=t[a];if(!u)continue;let d;switch(u.chainType){case"solana":case"eip155":{let{publicKey:g,...S}=u;d={...S,address:g};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:g,...S}=u,E=Object.values(Ht).reduce((T,P)=>{let C=g?g[P]:void 0;if(!C)throw new Yi;return{...T,[P]:C}},{});d={...S,addresses:E};break}case"sui":{d=u;break}}i[a]=d}return{...n,chains:i}}function Is(e){let{chains:t,version:r,...n}=e,i={};for(let a of Object.keys(t)){let u=t[a];if(!u)continue;let d;switch(u.chainType){case"solana":case"eip155":{let{publicKey:g,...S}=u;d={...S,address:g};break}case"bip122_p2tr":case"bip122_p2wpkh":case"bip122_p2sh":case"bip122_p2pkh":{let{addresses:g,...S}=u,E=Object.values(Ht).reduce((T,P)=>{let C=g?g[P]:void 0;if(!C)throw new Yi;return{...T,[P]:C}},{});d={...S,addresses:E};break}case"sui":d=u}i[a]=d}return{...n,chains:i}}function HT(e){return{addSeedWithDefaultAccount:(t,r)=>PA(e,t,r).then(Ps),addAccountForExistingSeed:t=>sA(e,t).then(Ps),addSeedWithMultipleAccounts:(t,r,n,i)=>Ku(e,t,r,n,i).then(a=>a.map(Ps)),addPrivateKeyAccount:(t,r,n)=>wA(e,t,r,n).then(nh),addLedgerAccounts:(t,r)=>AA(e,t,r).then(n=>n.map(rh)),addSolanaSeedVaultAccounts:t=>kA(e,t).then(r=>r.map(ih)),addReadonlyAccount:t=>xA(e,t),deriveAddresses:()=>VA(e),removeAccount:t=>HA(e,t),reorderAccount:(t,r)=>$A(e,t,r),exportEntropy:t=>Vi(e,t),exportPrivateKey:(t,r)=>Bu(e,t,r),fetchAllAccounts:()=>st(e).then(t=>t.map(th)),fetchAllSeedMetas:()=>L0(e),fetchAllSeedlessMetas:()=>Ic(e),sign:(t,r)=>GA(e,t,r),isExistingSeed:t=>ya(e,t),checkVaultIntegrity:()=>OA(e),clearVault:()=>j0(e),addSeedlessWithMultipleAccounts:(t,r,n)=>Ru(e,t,r,n).then(i=>i.map(Is)),addSeedlessWithDefaultAccount:(t,r)=>TA(e,t,r).then(Is),addAccountForExistingSeedless:t=>MA(e,t).then(Is),getAuthenticationPublicKey:t=>qA(e,t),getCashAddress:()=>jA(e),getAgentAddress:(t,r)=>FA(e,t,r),getKMSInstance:()=>zu(e)}}l();f();l();f();var oh=class{#e;#t;#r;constructor(t,r,n){this.#e=t,this.#t=r,this.#r=n}identifyAccount=async(t,r,n)=>{let i=!!r.addresses.find(K=>ie.isSolanaNetworkID(K.networkID)),a=!!r.addresses.find(K=>ie.isEthereumNetworkID(K.networkID)),u=!!r.addresses.find(K=>ie.isBitcoinNetworkID(K.networkID)),d=!!r.addresses.find(K=>ie.isSuiNetworkID(K.networkID)),g={hasSolanaAddress:i,hasEthereumAddress:a,hasBitcoinAddress:u,hasSuiAddress:d},S=n.enabledChainIDs.map(K=>ie[K].name).join(", "),E=new Set;for(let K of t)switch(K.type){case"seed":case"seedless":E.add(K.seedIdentifier);break;case"readOnly":case"privateKey":case"ledger":case"seedVault":break;default:He(K);break}let{id:T,type:P}=await this.getIdentifyID(r),C=await this.getUsername();switch(r.type){case"seed":case"seedless":this.#e.identify(T,{...g,accountType:r.type,rootID:r.seedIdentifier,rootIds:Array.from(E),accountID:r.identifier,isReadOnly:!1,enabledChains:S,idType:P,username:C});break;case"readOnly":this.#e.identify(T,{...g,accountType:r.type,isReadOnly:!0,enabledChains:S,idType:P,username:C});break;case"privateKey":case"ledger":case"seedVault":this.#e.identify(T,{...g,accountType:r.type,rootIds:Array.from(E),accountID:r.identifier,isReadOnly:!1,enabledChains:S,idType:P,username:C});break;default:He(r)}};getIdentifyID=async t=>{let r=await this.#t.getUser().catch(()=>{});return r?{type:"userID",id:r.userID}:{type:"accountID",id:t.identifier}};getUsername=async()=>{let t=await this.#r.getUserProfile().catch(()=>{});if(t)return t.username};onAppSessionStart=t=>{let r=new Map;for(let n of t){if(n.type==="readOnly")continue;let{addresses:i,identifier:a}=n;for(let u of i){let d=ie.getChainName(u.networkID),g={type:n.type,accountId:a,id:u.address};if(!r.get(d))r.set(d,[g]);else{let S=r.get(d)??[];r.set(d,[...S,g])}}}this.#e.capture("appSessionStart",{data:{ids:Object.fromEntries(r)}})}};l();f();l();f();l();f();l();f();var qu=ne(vt());l();f();var on=()=>{let e=le(),{data:[t],isLoading:r}=gm(["enable-arbitrum"]);return et({enabled:!r,queryKey:bm.chainAvailability({isArbitrumEnabled:t}),queryFn:()=>ml(e,t)})};l();f();var ah=()=>{let e=me(),t=le();return pe({mutationFn:async({addressTypes:n})=>{for(let i of n)await Em(i,t);ci(e)}})};l();f();var $T=()=>{let e=le(),t=me();return pe({mutationFn:async({chainIDs:n})=>{for(let i of n)await wm(i,e);ci(t)}})};l();f();var sh=()=>{let e=me(),t=le(),{deriveAddresses:r}=Hs();return pe({mutationFn:async({addressTypes:i})=>{for(let a of i)await Mm(a,t);await r(),await ci(e)}})};l();f();var GT=()=>{let e=le(),t=me(),{deriveAddresses:r}=Hs();return pe({mutationFn:async({chainIDs:i})=>{for(let a of i)await Sm(a,e);await r(),await ci(t)}})};l();f();var JT=()=>{let e=le(),{mutateAsync:t}=ah(),{mutateAsync:r}=sh();return pe({mutationFn:async({addressTypes:i})=>{if(await xm(e))await r({addressTypes:i});else{let u=new Set(ie.bitcoin.addressTypes);for(let d of i)u.delete(d);if(u.size===ie.bitcoin.addressTypes.length&&u.delete("bip122_p2wpkh"),u.size>0){let d=Array.from(u);await t({addressTypes:d})}}}})};var ch=ie.getAllChainIDs().filter(e=>ie.isChainDefaultEnabled(e)),JA=ch.map(e=>ie.getMainnetNetworkID(e)),QT=JA.flatMap(e=>ie.getAddressTypes(e)),QA=()=>on().data?.enabledAddressTypes??QT,Sa=()=>on().data?.enabledChainIDs??ch,PQ=()=>on().data?.supportedChainIDs??ch,IQ=e=>{let t=on().data;return t?e?t.enabledNetworkIDs:t.enabledMainnetOnlyNetworkIDs:JA},kQ=()=>Sa().length===1,CQ=()=>{let e=Sa();return(0,qu.useMemo)(()=>ie.getChainIDs("eip155").some(t=>e.includes(t)),[e])},_Q=()=>{let e=Sa();return(0,qu.useMemo)(()=>e.length===1&&e.includes("solana"),[e])},RQ=e=>{let t=Sa();return(0,qu.useMemo)(()=>e.map(r=>t.includes(r)),[t,e])};l();f();l();f();l();f();l();f();var xa=async e=>{let t=await e.get("networkSetting");if(!t)return Ka();let r=ZT(t);return YT(e,r)};function ZT(e){let t={...e,setting:{...e.setting}};return t.setting.sui||(t.setting.sui=Ka().setting.sui),t}var YT=async(e,t)=>{let r=!1;XT(t)&&(r=!0);let n=t.setting.solana;n&&ie.isMainnetNetworkID(n)&&(t.setting.solana=ko,r=!0);let i=t.setting.eip155;return i&&ie.isMainnetNetworkID(i)&&(t.setting.eip155=Co,r=!0),r&&await e.set("networkSetting",t),t},XT=e=>{let t=!1,r=e.setting.eip155;return r&&(r.toString()==="eip155:5"&&(e.setting.eip155=$r.Ethereum.Sepolia,t=!0),r.toString()==="eip155:80001"&&(e.setting.eip155=$r.Polygon.Amoy,t=!0)),t};var uh=async(e,t,r)=>{let n=await e.fetchAllAccounts();if(n.length===0)return[];let i=t.get("developerMode"),a=xa(t),u=wf(t),[d,g,S]=await Promise.all([i,a,u]);return n.map(E=>{let T=S[E.identifier];T||(T={name:ui.t("onboardingImportAccountsAccountName",{walletIndex:""})});let P={name:T.name,icon:T.icon,identifier:E.identifier,addresses:Za(E,r.enabledMainnetOnlyNetworkIDs,r.enabledAddressTypes,r.enabledChainIDs,g,d?.isDeveloperMode??!1)};return E.type==="seed"?{...P,type:"seed",seedIdentifier:E.seedIdentifier,isReadOnly:!1}:E.type==="seedless"?{...P,type:"seedless",seedIdentifier:E.seedIdentifier,isReadOnly:!1}:E.type==="readOnly"?{...P,type:"readOnly",isReadOnly:!0}:E.type==="privateKey"?{...P,privateKeyIdentifier:E.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...P,type:E.type,isReadOnly:!1}})};function xo(e){let{isSuccess:t,data:r}=on(),n=ft(),i=je.allAccounts(r),a=le();return et({enabled:t,queryKey:i,queryFn:async()=>{if(!r)throw new Error(Ya);let d=await uh(n,a,r);return G.addBreadcrumb("account",`Finished fetching all accounts. Num accounts: ${d.length}`,"info"),d},select:e})}var Wu=()=>{let{isSuccess:e,isFetching:t,data:r=[]}=xo(),n=e&&!t&&!!r.length;return n?{enabled:n,accounts:r}:{enabled:n}};l();f();var at=async e=>{await e.invalidateQueries({queryKey:[ff]}),await e.invalidateQueries({queryKey:[Fo],predicate:t=>t.queryKey[0]===Fo}),await e.invalidateQueries({queryKey:[qa]}),await ju(e)},ju=async e=>{await e.invalidateQueries({predicate:t=>typeof t.queryKey[0]=="string"&&t.queryKey[0]===Wa}),await e.invalidateQueries({queryKey:je.selectedAccountIdentifier()})};Pm(at);l();f();l();f();l();f();var Dt=[];for(let e=0;e<256;++e)Dt.push((e+256).toString(16).slice(1));function ZA(e,t=0){return(Dt[e[t+0]]+Dt[e[t+1]]+Dt[e[t+2]]+Dt[e[t+3]]+"-"+Dt[e[t+4]]+Dt[e[t+5]]+"-"+Dt[e[t+6]]+Dt[e[t+7]]+"-"+Dt[e[t+8]]+Dt[e[t+9]]+"-"+Dt[e[t+10]]+Dt[e[t+11]]+Dt[e[t+12]]+Dt[e[t+13]]+Dt[e[t+14]]+Dt[e[t+15]]).toLowerCase()}l();f();var lh,eP=new Uint8Array(16);function fh(){if(!lh){if(typeof self.crypto>"u"||!self.crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");lh=self.crypto.getRandomValues.bind(self.crypto)}return lh(eP)}l();f();l();f();var tP=typeof self.crypto<"u"&&self.crypto.randomUUID&&self.crypto.randomUUID.bind(self.crypto),dh={randomUUID:tP};function rP(e,t,r){if(dh.randomUUID&&!t&&!e)return dh.randomUUID();e=e||{};let n=e.random??e.rng?.()??fh();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){if(r=r||0,r<0||r+16>t.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)t[r+i]=n[i];return t}return ZA(n)}var ph=rP;l();f();function Hu(){let e=le(),t=me();return pe({mutationFn:async({metadataBatch:a})=>{G.addBreadcrumb("account",`Adding Account Metadata Batch: ${Object.entries(a).length} entries`,"info"),await gf(e,a)},onSuccess:async()=>{await at(t)},onError:a=>{G.captureError(a,"account")}})}function nP(){let{mutateAsync:e}=Hu(),t=le(),r=me(),n=ft(),{t:i}=zn();return pe({mutationFn:async({accounts:g,pairedBLEDevice:S})=>{let E=ph(),T=await n.connectLedgerAccounts(E,g),P=T.reduce((K,_,B)=>{let{name:L,accountIndex:H}=g[B],U;!L||L.length===0?U=i("onboardingImportAccountsLedgerAccountName",{walletIndex:1+H}):U=L;let te;S&&(te=[{...S,version:1,connectionType:"ble",deviceType:"ledger"}]);let J={name:U,icon:void 0,connectedDevices:te};return K[_.identifier]=J,K},{});await e({metadataBatch:P});let C=T[0]?.identifier;return C||(C=(await n.fetchAllAccounts())[0].identifier),await lr(t,C),r.setQueryData(je.selectedAccountIdentifier(),C),T},onSettled:async()=>{await at(r)},onError:g=>G.captureError(g,"account")})}l();f();function nr({select:e}={}){let{isSuccess:t,data:r}=on(),n=Wu(),i=n.enabled&&t,a=le(),u=Hl(),d=je.selectedAccount(r);return et({queryKey:d,queryFn:async()=>{try{if(!r)throw new Error(Ya);if(!n.enabled)throw new Error(qo);let S=await Jn(n.accounts,a);return G.addBreadcrumb("account",`Finished fetching selected account: ${S.identifier}`,"info"),u.identifyAccount(n.accounts,S,r),S}catch(S){throw S instanceof Error&&G.captureError(S,"account"),S}},enabled:i,select:e})}l();f();var Ma=ne(vt()),YA=(0,Ma.createContext)(null);function iP({children:e,userRepository:t}){return Ma.default.createElement(YA.Provider,{value:{userRepository:t}},e)}function oP(){let e=(0,Ma.useContext)(YA);if(!e)throw new Error("useUserContext must be used within a UserProvider");return e}function yr(){return oP().userRepository}l();f();l();f();l();f();var ks=e=>`/user/v1/users/${e}/profile`,$u=e=>`/user/v1/profiles/${e}`,XA=()=>"/user/v1/profiles/creation-check";l();f();l();f();var Cs=(i=>(i.PUBLIC="public",i.PRIVATE="private",i.INVISIBLE="invisible",i.HIDDEN="hidden",i))(Cs||{}),aP=Object.values(Cs),rb=y.string().brand("ProfileId"),Gu=y.object({id:rb,username:y.string(),icon:y.string().nullish(),addresses:y.record(y.string(),y.string()),privacyState:y.nativeEnum(Cs).optional().default("public"),biography:y.string().nullish(),phantomJoinDate:y.string().nullish()}),hh=y.string().url().brand("ActorId"),sP=y.object({id:y.string().optional(),orderedItems:hh.array(),next:y.string().optional()}),eb=y.object({id:y.string().url(),current:sP.optional(),totalItems:y.number().optional()}),tb=y.object({type:y.string(),value:y.string().optional(),name:y.string().optional()}),cP=y.object({id:y.string().url().optional(),name:y.string().optional(),type:y.string()}),uP=y.object({id:hh,name:y.string(),preferredUsername:y.string(),manuallyApprovesFollowers:y.boolean(),followers:y.union([eb,y.string().url()]),following:y.union([eb,y.string().url()]),icon:cP.nullish(),attachment:y.union([tb,y.array(tb)]).optional(),summary:y.string().nullish(),published:y.string().nullish()}).transform(e=>{let{attachment:t,...r}=e,n={},i=!1,a=!1,u=!1,d=!1,g=!1;if(t){let S=Array.isArray(t)?t:[t];for(let E of S)if(!(!E.name||!E.value)){if(E.name.endsWith(":address")){let T=Xh.safeParse(E.name.replace(":address",""));if(T.success){let P=T.data;n[P]=E.value}}E.name==="requesting"&&(i=E.value==="true"),E.name==="requestedBy"&&(a=E.value==="true"),E.name==="blocking"&&(u=E.value==="true"),E.name==="following"&&(d=E.value==="true"),E.name==="followedBy"&&(g=E.value==="true")}}return{...r,addresses:n,isSentFollowRequestPending:i,hasPendingFollowRequest:a,isBlocking:u,isFollowing:d,isFollowedBy:g}}),lP={Image:"image",Emoji:"emoji",ReadOnlyDefault:"read-only-default",Default:"default"},TY=y.object({type:y.nativeEnum(lP),imageUrl:y.string().optional(),unicode:y.string().optional()}),mh=y.object({error:y.object({message:y.string()})});var yh=async e=>{let t=await mt.api().get($u(e)),r=Gu.safeParse(t.data);return r.success?r.data:null};var fP=e=>({getUsernameAvailability:t=>dP(t),getUserProfile:()=>pP(e),getUserProfileByUsername:t=>yh(t),getUserProfileByUsernameOrUserProfileId:t=>yh(t),setUserProfile:({username:t,addresses:r,icon:n,privacyState:i})=>hP(e,{username:t,addresses:r,icon:n,privacyState:i}),patchUserProfile:t=>mP(e,t),deleteUserProfile:()=>yP(e),isEligibleToClaim:t=>gP(t)}),dP=async e=>{switch((await mt.api().get($u(e))).status){case 200:return!1;case 403:return!1;case 404:return!0;default:throw new Error("Failed to check for username availability.")}},pP=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to get user profile.");let{userID:r,accessToken:n}=t,i=await mt.api().bearer(n).get(ks(r)),a=Gu.safeParse(i.data);return a.success?a.data:null},hP=async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:i})=>{let a=await e.getUser();if(!a)throw new Error("User is not logged in, unable to claim username.");let{userID:u,accessToken:d}=a,g=await mt.api().bearer(d).post(ks(u),{username:t,icon:n,addresses:r,privacyState:i});if(g.status===201)return;let S=mh.safeParse(g.data);throw S.success?new Error(S.data.error.message):new Error("Unknown error")},mP=async({authRepository:e},{username:t,addresses:r,icon:n,privacyState:i,biography:a})=>{let u=await e.getUser();if(!u)throw new Error("User is not logged in, unable to claim username.");let{userID:d,accessToken:g}=u,S=await mt.api().bearer(g).patch(ks(d),{username:t,addresses:r,icon:n,privacyState:i,biography:a});if(S.status===200)return;G.captureMessage(`Failed to patch user profile: ${S.status} ${JSON.stringify(S.data)}`,"Auth");let E=mh.safeParse(S.data);throw E.success?new Error(E.data.error.message):new Error("Unknown error")},yP=async({authRepository:e})=>{let t=await e.getUser();if(!t)throw new Error("User is not logged in, unable to sync down accounts.");let{userID:r,accessToken:n}=t,i=await mt.api().bearer(n).delete(ks(r));return 200<=i.status&&i.status<300},gP=async e=>{try{return(await mt.api().post(XA(),{addresses:e})).status===200}catch{return!1}};l();f();var Ju="@phantom/users",ir={checkUsernameAvailability(e){return["user",`${Ju}:check-username-availability`,{username:e}]},userProfile(){return["user",`${Ju}:user-profile`]},userProfileAttributeEffect(e){return["user",`${Ju}:user-profile-attribute-effect`,{username:e}]}};l();f();var vP=new Set([ir.userProfile()[1]]),AP=e=>{let t=e.queryKey[1];return typeof t!="string"||!t?!1:vP.has(t)};l();f();l();f();l();f();function Qu(e,t){let r=new WeakMap;return()=>{let n=e();if(n===void 0)return;let i=r.get(n);return i===void 0&&(i=t(n),r.set(n,i)),i}}var _s=Qu(Gt,e=>new Zu(e)),Zu=class{#e;constructor(t){this.#e=t}onClaimFlowStart(){this.#e.capture("userUsernameClaimFlowStart")}onCheckAvailability(t,r){this.#e.capture("userUsernameCheckAvailability",{data:{username:t,isAvailable:r}})}onAvatarSaved(t){this.#e.capture("userUsernameClaimFlowAvatarSaved",{data:{avatarType:t}})}onAnonymousAuthSaved(t,r){this.#e.capture("userUsernameClaimFlowAnonymousAuthSaved",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkWalletsSaved(t,r){this.#e.capture("userUsernameClaimFlowLinkWalletsSaved",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPublicAddressesSaved(){this.#e.capture("userUsernameClaimFlowPublicAddressesSaved")}onClaimFlowComplete(t,r){this.#e.capture("userUsernameClaimComplete",{data:{username:t,authUserID:r}})}};l();f();var gh=async e=>{await e.removeQueries({queryKey:ir.userProfile()})},vh=async e=>{await e.resetQueries({queryKey:ir.userProfile()})},Mo=async e=>{await e.invalidateQueries({queryKey:ir.userProfile()})};function bP(){let e=_s(),t=wr(),r=yr(),n=me(),i=async({username:a,addresses:u,icon:d})=>{G.addBreadcrumb("Auth",`Claiming Username: ${a}.`,"debug");let g=await t.getUser();if(!g)throw new Error("Unable to claim username. User not authenticated.");G.addBreadcrumb("Auth","Creating user profile to claim username","debug"),await r.setUserProfile({username:a,addresses:u,icon:d,privacyState:"public"}),G.addBreadcrumb("Auth","\u2705 Username Claimed!","debug"),await jl(n),await vh(n),await Ji(n),await Mo(n),await $n(n),e.onClaimFlowComplete(a,g.userID)};return pe({mutationFn:async a=>{try{return await i(a)}catch(u){G.addBreadcrumb("Auth","Could not claim username","error");let d;throw u instanceof Error?d=u:d=new Error("Unable to claim username"),G.captureError(d,"Auth"),d}}})}l();f();function wP(e){let t=_s(),r=yr(),n=ir.checkUsernameAvailability(e);return et({enabled:!!e,queryKey:n,queryFn:async()=>{if(!e)return!1;let u=await r.getUsernameAvailability(e);return t.onCheckAvailability(e,u),u}})}l();f();l();f();var Rs=class extends Error{constructor(t="No user profile."){super(t),this.name="NoUserProfileError"}},Ah=class extends Error{constructor(t="Missing required username claim params."){super(t),this.name="MissingRequiredUsernameClaimParamsError"}};var SP=li({days:1}),xP=li({minutes:1});function bh(){let e=yr(),t=La(),r=ir.userProfile();return et({enabled:t,queryKey:r,queryFn:async()=>{let i=await e.getUserProfile();if(!i)throw new Rs;return i},gcTime:SP,staleTime:xP})}l();f();var MP=()=>{let e=me(),t=wr(),r=yr();return pe({mutationFn:async()=>{await r.deleteUserProfile(),await t.deleteAllAuthFactors(),await t.logOut(),await gh(e),await Wl(e),await Mo(e),await Ji(e),await $n(e)}})};l();f();var wh=()=>{let e=me(),t=yr(),r=async n=>{await t.patchUserProfile(n),await Mo(e)};return pe({mutationFn:async n=>{try{return await r(n)}catch(i){G.addBreadcrumb("Auth",`Could not update user profile: ${JSON.stringify(n)}`,"error");let a;throw i instanceof Error?a=i:a=new Error("Could not update user profile!"),G.captureError(a,"Auth"),a}},onMutate:async n=>{let i=ir.userProfile();await e.cancelQueries({queryKey:i});let a=e.getQueryData(i);return e.setQueryData(i,{...a,...n}),{previousData:a}},onSuccess:(n,i)=>{let a=ir.userProfile(),u=e.getQueryData(a);if(u){let d={...u,...i};e.setQueryData(a,d)}},onError:(n,i,a)=>{a&&e.setQueryData(ir.userProfile(),a.previousData)}})};l();f();var EP=Qu(Gt,e=>new Yu(e)),Yu=class{#e;constructor(t){this.#e=t}onAvatarUpdated(t){this.#e.capture("userManageProfileAvatarUpdated",{data:{avatarType:t}})}onAuthFactorsUpdated(t,r){this.#e.capture("userManageProfileAuthFactorsUpdated",{data:{numAuthFactorsSaved:t,numAuthFactorsShown:r}})}onLinkedWalletsUpdated(t,r){this.#e.capture("userManageProfileLinkedWalletsUpdated",{data:{numWalletsSaved:t,numWalletsShown:r}})}onPrivacyStateUpdated(t){this.#e.capture("userManageProfilePrivacyStateUpdated",{data:{privacyState:t}})}onBiographyUpdated(){this.#e.capture("userManageProfileBiographyUpdated")}onPublicAddressesUpdated(t){this.#e.capture("userManageProfilePublicAddressesUpdated",{data:{networkIdsSaved:t}})}};l();f();var TP=()=>{let{data:e}=nr();return e?e.type==="ledger":void 0};l();f();var nb=ne(vt());var PP=e=>{let t=(0,nb.useMemo)(()=>{if(e){if(IP(e))return n=>n.address===e.address&&n.networkID===e.networkID;if(ie.isNetworkID(e))return n=>n.networkID===e;if(sm(e))return n=>n.addressType===e;throw new Error(`Unrecognized filter type: ${e}`)}else return()=>!1},[e]);return nr({select:n=>{let i=n.addresses.filter(t);if(i.length>1)throw new Error(`Multiple addresses match filter: ${e}`);return i[0]}})};function IP(e){return typeof e=="object"&&"address"in e&&(typeof e.address=="string"||e.address===void 0)&&"networkID"in e}l();f();l();f();l();f();var ib=async(e,t)=>(await vf(e,t))?.balance,ob=async e=>await bf(e);var kP=(e,t=!0)=>{let r=le(),n=t&&!!e,i=je.accountBalance(e||"");return et({queryKey:i,queryFn:async()=>{try{return e&&await ib(r,e)||null}catch(u){throw u instanceof Error&&G.captureError(u,"account"),u}},enabled:n})},CP=(e=!0)=>{let t=le(),r=je.allAccountBalances();return et({queryKey:r,queryFn:async()=>{try{return await ob(t)}catch(i){throw i instanceof Error&&G.captureError(i,"account"),i}},enabled:e})};l();f();function _P(e){let t=Wu(),r=t.enabled&&e.length>0,n=je.accountIdentifier(e);return et({enabled:r,queryKey:n,queryFn:async()=>{try{if(G.addBreadcrumb("account",`Fetching Account: ${e}`,"info"),!t.enabled)throw new Error(qo);let{accounts:a}=t,u=a.find(d=>d.identifier===e);if(!u)throw new Error(R0(a.length,e));return u}catch(a){throw a instanceof Error&&G.captureError(a,"account"),a}}})}l();f();l();f();function RP(){let e=le(),t=me(),r=ft();return pe({mutationFn:async({name:d,addresses:g,icon:S})=>{let E=await r.addReadonlyAccount(g),T={name:d,icon:S};return await yi(e,E.identifier,T),await lr(e,E.identifier),E},onSettled:async()=>{await at(t)},onSuccess:d=>{t.setQueryData(je.selectedAccountIdentifier(),d.identifier)},onError:d=>G.captureError(d,"account")})}l();f();function KP(){let{t:e}=zn(),t=le(),r=me(),{fetchAllAccounts:n,addAccountForSeed:i,addAccountForSeedless:a,fetchAllSeedlessMetas:u}=ft();return pe({mutationFn:async({name:T,icon:P,seedIdentifier:C})=>{G.addBreadcrumb("account",`Adding new account for s**d: ${C}`,"info");let B=(await u()).find(L=>L.identifier===C)?await a(C):await i(C);return await yi(t,B.identifier,{name:T||e("onboardingImportAccountsAccountName",{walletIndex:(await n()).length}),icon:P}),await lr(t,B.identifier),B},onSettled:async()=>{await at(r)},onSuccess:T=>{r.setQueryData(je.selectedAccountIdentifier(),T.identifier)},onError:T=>G.captureError(T,"account")})}l();f();l();f();function Ks(e){let t=ft(),r=je.allSeeds(e);return et({queryKey:r,queryFn:async()=>{try{let i;switch(e){case"all":{let a=await t.fetchAllSeedMetas();i=[...await t.fetchAllSeedlessMetas(),...a];break}case"local-only":{i=[...await t.fetchAllSeedMetas()];break}case"recoverable-only":{i=[...await t.fetchAllSeedlessMetas()];break}}return i}catch(i){throw i instanceof Error&&G.captureError(i,"account"),i}}})}l();f();l();f();function Sh(){let e=le();return et(ab(e))}function ab(e){return{queryKey:je.developerMode(),queryFn:async()=>await e.get("developerMode")||vl}}l();f();function BP(){let e=le(),t=me(),r=ft();return pe({mutationFn:async({chainType:u,privateKey:d,name:g,icon:S})=>{G.addBreadcrumb("account","Importing Private Key Account... \u23F3","info");let E=await r.importPrivateKeyAccount(u,d),T={name:g,icon:S};return await yi(e,E.identifier,T),await lr(e,E.identifier),G.addBreadcrumb("account",`Imported Private Key Account \u2705: ${E.identifier}`,"info"),E},onSettled:async()=>{await at(t)},onSuccess:u=>{t.setQueryData(je.selectedAccountIdentifier(),u.identifier)}})}l();f();l();f();l();f();function OP(){let e=je.selectedNetworkSetting(),t=le();return et({queryKey:e,queryFn:()=>xa(t)})}l();f();function VP(){let e=le(),t=Gt(),r=ft(),n=me();return pe({mutationFn:async({identifier:u})=>{G.addBreadcrumb("account",`Removing Account... \u23F3: ${u}`,"info"),await Promise.all([r.removeAccount(u),ja(e,u)]),await Jn(await r.fetchAllAccounts(),e),t.capture("removeAccount"),G.addBreadcrumb("account",`Removed Account \u2705: ${u}`,"info")},onSuccess:async()=>{await at(n)}})}l();f();function DP(){let e=le(),t=Gt(),r=me(),n=ft();return pe({mutationFn:async({seedIdentifier:d})=>{let g=await n.fetchAllAccounts(),S=[];for(let E of g)switch(E.type){case"privateKey":case"ledger":case"seedVault":case"readOnly":continue;case"seed":case"seedless":E.seedIdentifier===d&&S.push(E.identifier);break;default:He(E)}for(let E of S)await Promise.all([n.removeAccount(E),ja(e,E)]);t.capture("removeSeed",{data:{numOfAccounts:S.length}})},onSuccess:()=>{at(r)},onError:d=>{G.captureError(d,"account")}})}l();f();function UP(){let e=le(),t=me();return pe({mutationFn:async({identifier:a,name:u})=>{G.addBreadcrumb("account","Renaming Multichain Account","info"),await hf(e,a,u)},onSuccess:async()=>{await at(t)},onError:a=>G.captureError(a,"account")})}l();f();function NP(){let e=me(),t=ft();return pe({mutationFn:async({identifier:i,toIndex:a})=>{await t.reorderAccount(i,a)},onSuccess:()=>{at(e)}})}l();f();function LP(){let e=je.selectedAccountIdentifier(),t=le(),r=ft();return et({queryKey:e,queryFn:async()=>{try{let i=await r.fetchAllAccounts(),u=(await Jn(i,t)).identifier;if(!u)throw new Error("Unable to resolve selected account identifier => no available accounts or identifier!");return u}catch(i){throw i instanceof Error&&G.captureError(i,"account"),i}}})}l();f();function zP(){let e=le(),t=me();return pe({mutationFn:async({identifier:i,balance:a})=>(await yf(e,i,a),{identifier:i,balance:a}),onSuccess:({identifier:i,balance:a})=>{i&&t.invalidateQueries({queryKey:je.accountBalance(i)}),a&&t.invalidateQueries({queryKey:je.allAccountBalances()})}})}l();f();function FP(){let e=le(),t=me();return pe({mutationFn:async({developerMode:i})=>{t.setQueryData(je.developerMode(),i),await e.set("developerMode",i)},onSuccess:()=>{at(t)}})}l();f();function qP(){let e=le(),t=me();return pe({mutationFn:async({identifier:i,icon:a})=>{G.addBreadcrumb("account","Setting Multichain Account Icon","info"),await mf(e,i,a)},onSuccess:async()=>{await at(t)}})}l();f();function WP(){let e=le(),t=me();return pe({mutationFn:async({networkSetting:i})=>{t.setQueryData(je.selectedNetworkSetting(),i),await e.set("networkSetting",i)},onSuccess:()=>{at(t)}})}l();f();function jP(){let e=le(),t=Gt(),r=me();return pe({mutationFn:async({identifier:u})=>(await lr(e,u),t.capture("changeAccount",{data:{identifier:u}}),u),onSuccess:u=>{ju(r),r.setQueryData(je.selectedAccountIdentifier(),u)},onError:u=>G.captureError(u,"account")})}l();f();var cb=ne(vt());l();f();var sb=ne(vt());var Bs=()=>{let{data:e}=nr();return(0,sb.useMemo)(()=>{let t=e?.addresses??[];return[...new Set(t.map(r=>r.networkID))]},[e])};var HP=()=>{let{data:e,isFetching:t}=xo(),{data:r,isFetching:n}=nr(),i=Bs();return(0,cb.useMemo)(()=>({data:{"All Accounts":hl(e),"Selected Account":hl(r),"Selected Networks":i.map(a=>ie.getNetworkName(a))},isFetching:t||n}),[e,t,n,r,i])};l();f();var ub=ne(vt()),$P=(e=[])=>{let t=Sa();return(0,ub.useMemo)(()=>e.filter(r=>{let n=ie.getParentChain(r.networkID);return n?t.includes(n):!1}),[e,t])};l();f();var Bb=ne(nw()),sl=ne(vt());l();f();var ht=ne(vt(),1),Us=e=>e.type==="checkbox",Ta=e=>e instanceof Date,or=e=>e==null,bb=e=>typeof e=="object",Rt=e=>!or(e)&&!Array.isArray(e)&&bb(e)&&!Ta(e),wb=e=>Rt(e)&&e.target?Us(e.target)?e.target.checked:e.target.value:e,GP=e=>e.substring(0,e.search(/.\d/))||e,Sb=(e,t)=>[...e].some(r=>GP(t)===r),il=e=>e.filter(Boolean),St=e=>e===void 0,oe=(e,t,r)=>{if(!t||!Rt(e))return r;let n=il(t.split(/[,[\].]+?/)).reduce((i,a)=>or(i)?i:i[a],e);return St(n)||n===e?St(e[t])?r:e[t]:n},Th={BLUR:"blur",CHANGE:"change"},an={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},oi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},kh=(e,t)=>{let r=Object.assign({},e);return delete r[t],r},JP=ht.default.createContext(null),Ch=()=>ht.default.useContext(JP);var xb=(e,t,r,n=!0)=>{function i(u){return()=>{if(u in e)return t[u]!==an.all&&(t[u]=!n||an.all),r&&(r[u]=!0),e[u]}}let a={};for(let u in e)Object.defineProperty(a,u,{get:i(u)});return a},gr=e=>Rt(e)&&!Object.keys(e).length,Mb=(e,t,r)=>{let n=kh(e,"name");return gr(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(i=>t[i]===(!r||an.all))},Xu=e=>Array.isArray(e)?e:[e],Eb=(e,t,r)=>r&&t?e===t:!e||!t||e===t||Xu(e).some(n=>n&&(n.startsWith(t)||t.startsWith(n)));function _h(e){let t=ht.default.useRef(e);t.current=e,ht.default.useEffect(()=>{let r=i=>{i&&i.unsubscribe()},n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>r(n)},[e.disabled])}function QP(e){let t=Ch(),{control:r=t.control,disabled:n,name:i,exact:a}=e||{},[u,d]=ht.default.useState(r._formState),g=ht.default.useRef({isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),S=ht.default.useRef(i),E=ht.default.useRef(!0);S.current=i;let T=ht.default.useCallback(P=>E.current&&Eb(S.current,P.name,a)&&Mb(P,g.current)&&d(Object.assign(Object.assign({},r._formState),P)),[r,a]);return _h({disabled:n,callback:T,subject:r._subjects.state}),ht.default.useEffect(()=>()=>{E.current=!1},[]),xb(u,r._proxyFormState,g.current,!1)}var En=e=>typeof e=="string",Tb=(e,t,r,n)=>{let i=Array.isArray(e);return En(e)?(n&&t.watch.add(e),oe(r,e)):i?e.map(a=>(n&&t.watch.add(a),oe(r,a))):(n&&(t.watchAll=!0),r)},ol=e=>typeof e=="function",Rh=e=>{for(let t in e)if(ol(e[t]))return!0;return!1};function ZP(e){let t=Ch(),{control:r=t.control,name:n,defaultValue:i,disabled:a,exact:u}=e||{},d=ht.default.useRef(n);d.current=n;let g=ht.default.useCallback(T=>{if(Eb(d.current,T.name,u)){let P=Tb(d.current,r._names,T.values||r._formValues);E(St(d.current)||Rt(P)&&!Rh(P)?Object.assign({},P):Array.isArray(P)?[...P]:St(P)?i:P)}},[r,u,i]);_h({disabled:a,subject:r._subjects.watch,callback:g});let[S,E]=ht.default.useState(St(i)?r._getWatch(n):i);return ht.default.useEffect(()=>{r._removeUnmounted()}),S}function YP(e){let t=Ch(),{name:r,control:n=t.control,shouldUnregister:i}=e,a=Sb(n._names.array,r),u=ZP({control:n,name:r,defaultValue:oe(n._formValues,r,oe(n._defaultValues,r,e.defaultValue)),exact:!a}),d=QP({control:n,name:r}),g=ht.default.useRef(n.register(r,Object.assign(Object.assign({},e.rules),{value:u})));return ht.default.useEffect(()=>{let S=(E,T)=>{let P=oe(n._fields,E);P&&(P._f.mount=T)};return S(r,!0),()=>{let E=n._options.shouldUnregister||i;a?E&&n._stateFlags.action:E?n.unregister(r):S(r,!1)}},[r,n,a,i]),{field:{name:r,value:u,onChange:ht.default.useCallback(S=>{g.current.onChange({target:{value:wb(S),name:r},type:Th.CHANGE})},[r]),onBlur:ht.default.useCallback(()=>{g.current.onBlur({target:{value:oe(n._formValues,r),name:r},type:Th.BLUR})},[r,n]),ref:ht.default.useCallback(S=>{let E=oe(n._fields,r);S&&E&&S.focus&&(E._f.ref={focus:()=>S.focus(),setCustomValidity:T=>S.setCustomValidity(T),reportValidity:()=>S.reportValidity()})},[r,n])},formState:d,fieldState:{invalid:!!oe(d.errors,r),isDirty:!!oe(d.dirtyFields,r),isTouched:!!oe(d.touchedFields,r),error:oe(d.errors,r)}}}var Pb=e=>e.render(YP(e)),XP=(e,t,r,n,i)=>t?Object.assign(Object.assign({},r[e]),{types:Object.assign(Object.assign({},r[e]&&r[e].types?r[e].types:{}),{[n]:i||!0})}):{},Kh=e=>/^\w*$/.test(e),Ib=e=>il(e.replace(/["|']|\]/g,"").split(/\.|\[/));function xt(e,t,r){let n=-1,i=Kh(t)?[t]:Ib(t),a=i.length,u=a-1;for(;++n<a;){let d=i[n],g=r;if(n!==u){let S=e[d];g=Rt(S)||Array.isArray(S)?S:isNaN(+i[n+1])?{}:[]}e[d]=g,e=e[d]}return e}var Ph=(e,t,r)=>{for(let n of r||Object.keys(e)){let i=oe(e,n);if(i){let a=i._f,u=kh(i,"_f");if(a&&t(a.name)){if(a.ref.focus&&St(a.ref.focus()))break;if(a.refs){a.refs[0].focus();break}}else Rt(u)&&Ph(u,t)}}};var lb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));function Vs(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(r||Rt(e)){t=r?[]:{};for(let n in e){if(ol(e[n])){t=e;break}t[n]=Vs(e[n])}}else return e;return t}function xh(){let e=[];return{get observers(){return e},next:i=>{for(let a of e)a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}}var tl=e=>or(e)||!bb(e);function Pa(e,t){if(tl(e)||tl(t))return e===t;if(Ta(e)&&Ta(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i of r){let a=e[i];if(!n.includes(i))return!1;if(i!=="ref"){let u=t[i];if(Ta(a)&&Ta(u)||Rt(a)&&Rt(u)||Array.isArray(a)&&Array.isArray(u)?!Pa(a,u):a!==u)return!1}}return!0}var fb=e=>({isOnSubmit:!e||e===an.onSubmit,isOnBlur:e===an.onBlur,isOnChange:e===an.onChange,isOnAll:e===an.all,isOnTouch:e===an.onTouched}),Ds=e=>typeof e=="boolean",Bh=e=>e.type==="file",Ih=e=>e instanceof HTMLElement,kb=e=>e.type==="select-multiple",Oh=e=>e.type==="radio",eI=e=>Oh(e)||Us(e),db=typeof self<"u"&&typeof self.HTMLElement<"u"&&typeof document<"u",Mh=e=>Ih(e)&&e.isConnected;function tI(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=St(e)?n++:e[t[n++]];return e}function Wt(e,t){let r=Kh(t)?[t]:Ib(t),n=r.length==1?e:tI(e,r),i=r[r.length-1],a;n&&delete n[i];for(let u=0;u<r.slice(0,-1).length;u++){let d=-1,g,S=r.slice(0,-(u+1)),E=S.length-1;for(u>0&&(a=e);++d<S.length;){let T=S[d];g=g?g[T]:e[T],E===d&&(Rt(g)&&gr(g)||Array.isArray(g)&&!g.filter(P=>Rt(P)&&!gr(P)||Ds(P)).length)&&(a?delete a[T]:delete e[T]),a=g}}return e}function rl(e,t={}){let r=Array.isArray(e);if(Rt(e)||r)for(let n in e)Array.isArray(e[n])||Rt(e[n])&&!Rh(e[n])?(t[n]=Array.isArray(e[n])?[]:{},rl(e[n],t[n])):or(e[n])||(t[n]=!0);return t}function Cb(e,t,r){let n=Array.isArray(e);if(Rt(e)||n)for(let i in e)Array.isArray(e[i])||Rt(e[i])&&!Rh(e[i])?St(t)||tl(r[i])?r[i]=Array.isArray(e[i])?rl(e[i],[]):Object.assign({},rl(e[i])):Cb(e[i],or(t)?{}:t[i],r[i]):r[i]=!Pa(e[i],t[i]);return r}var pb=(e,t)=>Cb(e,t,rl(t)),hb={value:!1,isValid:!1},mb={value:!0,isValid:!0},_b=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!St(e[0].attributes.value)?St(e[0].value)||e[0].value===""?mb:{value:e[0].value,isValid:!0}:mb:hb}return hb},Rb=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>St(e)?e:t?e===""?NaN:+e:r&&En(e)?new Date(e):n?n(e):e,yb={isValid:!1,value:null},Kb=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,yb):yb;function Eh(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Bh(t)?t.files:Oh(t)?Kb(e.refs).value:kb(t)?[...t.selectedOptions].map(({value:r})=>r):Us(t)?_b(e.refs).value:Rb(St(t.value)?e.ref.value:t.value,e)}var rI=(e,t,r,n)=>{let i={};for(let a of e){let u=oe(t,a);u&&xt(i,a,u._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},nl=e=>e instanceof RegExp,Os=e=>St(e)?void 0:nl(e)?e.source:Rt(e)?nl(e.value)?e.value.source:e.value:e,nI=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function gb(e,t,r){let n=oe(e,r);if(n||Kh(r))return{error:n,name:r};let i=r.split(".");for(;i.length;){let a=i.join("."),u=oe(t,a),d=oe(e,a);if(u&&!Array.isArray(u)&&r!==a)return{name:r};if(d&&d.type)return{name:a,error:d};i.pop()}return{name:r}}var iI=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,oI=(e,t)=>!il(oe(e,t)).length&&Wt(e,t),el=e=>En(e)||ht.default.isValidElement(e);function vb(e,t,r="validate"){if(el(e)||Array.isArray(e)&&e.every(el)||Ds(e)&&!e)return{type:r,message:el(e)?e:"",ref:t}}var Ea=e=>Rt(e)&&!nl(e)?e:{value:e,message:""},Ab=async(e,t,r,n)=>{let{ref:i,refs:a,required:u,maxLength:d,minLength:g,min:S,max:E,pattern:T,validate:P,name:C,valueAsNumber:K,mount:_,disabled:B}=e._f;if(!_||B)return{};let L=a?a[0]:i,H=b=>{n&&L.reportValidity&&(L.setCustomValidity(Ds(b)?"":b||" "),L.reportValidity())},U={},te=Oh(i),J=Us(i),Y=te||J,ee=(K||Bh(i))&&!i.value||t===""||Array.isArray(t)&&!t.length,q=XP.bind(null,C,r,U),ue=(b,o,c,p=oi.maxLength,h=oi.minLength)=>{let m=b?o:c;U[C]=Object.assign({type:b?p:h,message:m,ref:i},q(b?p:h,m))};if(u&&(!Y&&(ee||or(t))||Ds(t)&&!t||J&&!_b(a).isValid||te&&!Kb(a).isValid)){let{value:b,message:o}=el(u)?{value:!!u,message:u}:Ea(u);if(b&&(U[C]=Object.assign({type:oi.required,message:o,ref:L},q(oi.required,o)),!r))return H(o),U}if(!ee&&(!or(S)||!or(E))){let b,o,c=Ea(E),p=Ea(S);if(isNaN(t)){let h=i.valueAsDate||new Date(t);En(c.value)&&(b=h>new Date(c.value)),En(p.value)&&(o=h<new Date(p.value))}else{let h=i.valueAsNumber||parseFloat(t);or(c.value)||(b=h>c.value),or(p.value)||(o=h<p.value)}if((b||o)&&(ue(!!b,c.message,p.message,oi.max,oi.min),!r))return H(U[C].message),U}if((d||g)&&!ee&&En(t)){let b=Ea(d),o=Ea(g),c=!or(b.value)&&t.length>b.value,p=!or(o.value)&&t.length<o.value;if((c||p)&&(ue(c,b.message,o.message),!r))return H(U[C].message),U}if(T&&!ee&&En(t)){let{value:b,message:o}=Ea(T);if(nl(b)&&!t.match(b)&&(U[C]=Object.assign({type:oi.pattern,message:o,ref:i},q(oi.pattern,o)),!r))return H(o),U}if(P){if(ol(P)){let b=await P(t),o=vb(b,L);if(o&&(U[C]=Object.assign(Object.assign({},o),q(oi.validate,o.message)),!r))return H(o.message),U}else if(Rt(P)){let b={};for(let o in P){if(!gr(b)&&!r)break;let c=vb(await P[o](t),L,o);c&&(b=Object.assign(Object.assign({},c),q(o,c.message)),H(c.message),r&&(U[C]=b))}if(!gr(b)&&(U[C]=Object.assign({ref:L},b),!r))return U}}return H(!0),U},aI={mode:an.onSubmit,reValidateMode:an.onChange,shouldFocusError:!0};function sI(e={}){let t=Object.assign(Object.assign({},aI),e),r={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},n={},i=t.defaultValues||{},a=t.shouldUnregister?{}:Vs(i),u={action:!1,mount:!1,watch:!1},d={mount:new Set,unMount:new Set,array:new Set,watch:new Set},g,S=0,E={},T={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},P={watch:xh(),array:xh(),state:xh()},C=fb(t.mode),K=fb(t.reValidateMode),_=t.criteriaMode===an.all,B=(k,O)=>(...R)=>{clearTimeout(S),S=self.setTimeout(()=>k(...R),O)},L=async k=>{let O=!1;return T.isValid&&(O=t.resolver?gr((await ee()).errors):await ue(n,!0),!k&&O!==r.isValid&&(r.isValid=O,P.state.next({isValid:O}))),O},H=(k,O,R,F=[],Q=!0,N=!0)=>{if(u.action=!0,N&&Array.isArray(oe(n,k))){let W=O(oe(n,k),R.argA,R.argB);Q&&xt(n,k,W)}if(T.errors&&N&&Array.isArray(oe(r.errors,k))){let W=O(oe(r.errors,k),R.argA,R.argB);Q&&xt(r.errors,k,W),oI(r.errors,k)}if(T.touchedFields&&Array.isArray(oe(r.touchedFields,k))){let W=O(oe(r.touchedFields,k),R.argA,R.argB);Q&&xt(r.touchedFields,k,W)}T.dirtyFields&&(r.dirtyFields=pb(i,a)),P.state.next({isDirty:o(k,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})},U=(k,O)=>(xt(r.errors,k,O),P.state.next({errors:r.errors})),te=(k,O,R,F)=>{let Q=oe(n,k);if(Q){let N=oe(a,k,St(R)?oe(i,k):R);St(N)||F&&F.defaultChecked||O?xt(a,k,O?N:Eh(Q._f)):h(k,N),u.mount&&L()}},J=(k,O,R,F,Q)=>{let N=!1,W={name:k},Ge=oe(r.touchedFields,k);if(T.isDirty){let fe=r.isDirty;r.isDirty=W.isDirty=o(),N=fe!==W.isDirty}if(T.dirtyFields&&(!R||F)){let fe=oe(r.dirtyFields,k);Pa(oe(i,k),O)?Wt(r.dirtyFields,k):xt(r.dirtyFields,k,!0),W.dirtyFields=r.dirtyFields,N=N||fe!==oe(r.dirtyFields,k)}return R&&!Ge&&(xt(r.touchedFields,k,R),W.touchedFields=r.touchedFields,N=N||T.touchedFields&&Ge!==R),N&&Q&&P.state.next(W),N?W:{}},Y=async(k,O,R,F,Q)=>{let N=oe(r.errors,O),W=T.isValid&&r.isValid!==R;if(e.delayError&&F?(g=g||B(U,e.delayError),g(O,F)):(clearTimeout(S),F?xt(r.errors,O,F):Wt(r.errors,O)),((F?!Pa(N,F):N)||!gr(Q)||W)&&!k){let Ge=Object.assign(Object.assign(Object.assign({},Q),W?{isValid:R}:{}),{errors:r.errors,name:O});r=Object.assign(Object.assign({},r),Ge),P.state.next(Ge)}E[O]--,T.isValidating&&!E[O]&&(P.state.next({isValidating:!1}),E={})},ee=async k=>t.resolver?await t.resolver(Object.assign({},a),t.context,rI(k||d.mount,n,t.criteriaMode,t.shouldUseNativeValidation)):{},q=async k=>{let{errors:O}=await ee();if(k)for(let R of k){let F=oe(O,R);F?xt(r.errors,R,F):Wt(r.errors,R)}else r.errors=O;return O},ue=async(k,O,R={valid:!0})=>{for(let F in k){let Q=k[F];if(Q){let N=Q._f,W=kh(Q,"_f");if(N){let Ge=await Ab(Q,oe(a,N.name),_,t.shouldUseNativeValidation);if(Ge[N.name]&&(R.valid=!1,O))break;O||(Ge[N.name]?xt(r.errors,N.name,Ge[N.name]):Wt(r.errors,N.name))}W&&await ue(W,O,R)}}return R.valid},b=()=>{for(let k of d.unMount){let O=oe(n,k);O&&(O._f.refs?O._f.refs.every(R=>!Mh(R)):!Mh(O._f.ref))&&z(k)}d.unMount=new Set},o=(k,O)=>(k&&O&&xt(a,k,O),!Pa(s(),i)),c=(k,O,R)=>{let F=Object.assign({},u.mount?a:St(O)?i:En(k)?{[k]:O}:O);return Tb(k,d,F,R)},p=k=>il(oe(u.mount?a:i,k,e.shouldUnregister?oe(i,k,[]):[])),h=(k,O,R={})=>{let F=oe(n,k),Q=O;if(F){let N=F._f;N&&(!N.disabled&&xt(a,k,Rb(O,N)),Q=db&&Ih(N.ref)&&or(O)?"":O,kb(N.ref)?[...N.ref.options].forEach(W=>W.selected=Q.includes(W.value)):N.refs?Us(N.ref)?N.refs.length>1?N.refs.forEach(W=>W.checked=Array.isArray(Q)?!!Q.find(Ge=>Ge===W.value):Q===W.value):N.refs[0]&&(N.refs[0].checked=!!Q):N.refs.forEach(W=>W.checked=W.value===Q):Bh(N.ref)||(N.ref.value=Q,N.ref.type||P.watch.next({name:k})))}(R.shouldDirty||R.shouldTouch)&&J(k,Q,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&v(k)},m=(k,O,R)=>{for(let F in O){let Q=O[F],N=`${k}.${F}`,W=oe(n,N);(d.array.has(k)||!tl(Q)||W&&!W._f)&&!Ta(Q)?m(N,Q,R):h(N,Q,R)}},w=(k,O,R={})=>{let F=oe(n,k),Q=d.array.has(k);xt(a,k,O),Q?(P.array.next({name:k,values:a}),(T.isDirty||T.dirtyFields)&&R.shouldDirty&&(r.dirtyFields=pb(i,a),P.state.next({name:k,dirtyFields:r.dirtyFields,isDirty:o(k,O)}))):F&&!F._f&&!or(O)?m(k,O,R):h(k,O,R),lb(k,d)&&P.state.next({}),P.watch.next({name:k})},x=async k=>{let O=k.target,R=O.name,F=oe(n,R);if(F){let Q,N,W=O.type?Eh(F._f):wb(k),Ge=k.type===Th.BLUR,fe=!nI(F._f)&&!t.resolver&&!oe(r.errors,R)&&!F._f.deps||iI(Ge,oe(r.touchedFields,R),r.isSubmitted,K,C),he=lb(R,d,Ge);xt(a,R,W),Ge?F._f.onBlur&&F._f.onBlur(k):F._f.onChange&&F._f.onChange(k);let vr=J(R,W,Ge,!1),Ae=!gr(vr)||he;if(!Ge&&P.watch.next({name:R,type:k.type}),fe)return Ae&&P.state.next(Object.assign({name:R},he?{}:vr));if(!Ge&&he&&P.state.next({}),E[R]=(E[R],1),T.isValidating&&P.state.next({isValidating:!0}),t.resolver){let{errors:ye}=await ee([R]),sn=gb(r.errors,n,R),ge=gb(ye,n,sn.name||R);Q=ge.error,R=ge.name,N=gr(ye)}else Q=(await Ab(F,oe(a,R),_,t.shouldUseNativeValidation))[R],N=await L(!0);F._f.deps&&v(F._f.deps),Y(!1,R,N,Q,vr)}},v=async(k,O={})=>{let R,F,Q=Xu(k);if(P.state.next({isValidating:!0}),t.resolver){let N=await q(St(k)?k:Q);R=gr(N),F=k?!Q.some(W=>oe(N,W)):R}else k?(F=(await Promise.all(Q.map(async N=>{let W=oe(n,N);return await ue(W&&W._f?{[N]:W}:W)}))).every(Boolean),!(!F&&!r.isValid)&&L()):F=R=await ue(n);return P.state.next(Object.assign(Object.assign(Object.assign({},!En(k)||T.isValid&&R!==r.isValid?{}:{name:k}),t.resolver?{isValid:R}:{}),{errors:r.errors,isValidating:!1})),O.shouldFocus&&!F&&Ph(n,N=>oe(r.errors,N),k?Q:d.mount),F},s=k=>{let O=Object.assign(Object.assign({},i),u.mount?a:{});return St(k)?O:En(k)?oe(O,k):k.map(R=>oe(O,R))},A=k=>{k?Xu(k).forEach(O=>Wt(r.errors,O)):r.errors={},P.state.next({errors:r.errors})},V=(k,O,R)=>{let F=(oe(n,k,{_f:{}})._f||{}).ref;xt(r.errors,k,Object.assign(Object.assign({},O),{ref:F})),P.state.next({name:k,errors:r.errors,isValid:!1}),R&&R.shouldFocus&&F&&F.focus&&F.focus()},D=(k,O)=>ol(k)?P.watch.subscribe({next:R=>k(c(void 0,O),R)}):c(k,O,!0),z=(k,O={})=>{for(let R of k?Xu(k):d.mount)d.mount.delete(R),d.array.delete(R),oe(n,R)&&(O.keepValue||(Wt(n,R),Wt(a,R)),!O.keepError&&Wt(r.errors,R),!O.keepDirty&&Wt(r.dirtyFields,R),!O.keepTouched&&Wt(r.touchedFields,R),!t.shouldUnregister&&!O.keepDefaultValue&&Wt(i,R));P.watch.next({}),P.state.next(Object.assign(Object.assign({},r),O.keepDirty?{isDirty:o()}:{})),!O.keepIsValid&&L()},j=(k,O={})=>{let R=oe(n,k),F=Ds(O.disabled);return xt(n,k,{_f:Object.assign(Object.assign(Object.assign({},R&&R._f?R._f:{ref:{name:k}}),{name:k,mount:!0}),O)}),d.mount.add(k),R?F&&xt(a,k,O.disabled?void 0:oe(a,k,Eh(R._f))):te(k,!0,O.value),Object.assign(Object.assign(Object.assign({},F?{disabled:O.disabled}:{}),t.shouldUseNativeValidation?{required:!!O.required,min:Os(O.min),max:Os(O.max),minLength:Os(O.minLength),maxLength:Os(O.maxLength),pattern:Os(O.pattern)}:{}),{name:k,onChange:x,onBlur:x,ref:Q=>{if(Q){j(k,O),R=oe(n,k);let N=St(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,W=eI(N),Ge=R._f.refs||[];if(W?Ge.find(fe=>fe===N):N===R._f.ref)return;xt(n,k,{_f:Object.assign(Object.assign({},R._f),W?{refs:Ge.concat(N).filter(Mh),ref:{type:N.type,name:k}}:{ref:N})}),te(k,!1,void 0,N)}else R=oe(n,k,{}),R._f&&(R._f.mount=!1),(t.shouldUnregister||O.shouldUnregister)&&!(Sb(d.array,k)&&u.action)&&d.unMount.add(k)}})};return{control:{register:j,unregister:z,_executeSchema:ee,_getWatch:c,_getDirty:o,_updateValid:L,_removeUnmounted:b,_updateFieldArray:H,_getFieldArray:p,_subjects:P,_proxyFormState:T,get _fields(){return n},set _fields(k){n=k},get _formValues(){return a},set _formValues(k){a=k},get _stateFlags(){return u},set _stateFlags(k){u=k},get _defaultValues(){return i},set _defaultValues(k){i=k},get _names(){return d},set _names(k){d=k},get _formState(){return r},set _formState(k){r=k},get _options(){return t},set _options(k){t=Object.assign(Object.assign({},t),k)}},trigger:v,register:j,handleSubmit:(k,O)=>async R=>{R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let F=!0,Q=t.shouldUnregister?Vs(a):Object.assign({},a);P.state.next({isSubmitting:!0});try{if(t.resolver){let{errors:N,values:W}=await ee();r.errors=N,Q=W}else await ue(n);gr(r.errors)&&Object.keys(r.errors).every(N=>oe(Q,N))?(P.state.next({errors:{},isSubmitting:!0}),await k(Q,R)):(O&&await O(r.errors,R),t.shouldFocusError&&Ph(n,N=>oe(r.errors,N),d.mount))}catch(N){throw F=!1,N}finally{r.isSubmitted=!0,P.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:gr(r.errors)&&F,submitCount:r.submitCount+1,errors:r.errors})}},watch:D,setValue:w,getValues:s,reset:(k,O={})=>{let R=k||i,F=Vs(R),Q=k&&!gr(k)?F:i;if(O.keepDefaultValues||(i=R),!O.keepValues){if(db&&St(k))for(let N of d.mount){let W=oe(n,N);if(W&&W._f){let Ge=Array.isArray(W._f.refs)?W._f.refs[0]:W._f.ref;try{Ih(Ge)&&Ge.closest("form").reset();break}catch{}}}a=e.shouldUnregister?O.keepDefaultValues?Vs(i):{}:F,n={},P.array.next({values:Q}),P.watch.next({values:Q})}d={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!T.isValid||!!O.keepIsValid,u.watch=!!e.shouldUnregister,P.state.next({submitCount:O.keepSubmitCount?r.submitCount:0,isDirty:O.keepDirty?r.isDirty:O.keepDefaultValues?!Pa(k,i):!1,isSubmitted:O.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:O.keepDirty?r.dirtyFields:O.keepDefaultValues&&k?Object.entries(k).reduce((N,[W,Ge])=>Object.assign(Object.assign({},N),{[W]:Ge!==oe(i,W)}),{}):{},touchedFields:O.keepTouched?r.touchedFields:{},errors:O.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(k,O={})=>{oe(n,k)&&(St(O.defaultValue)?w(k,oe(i,k)):(w(k,O.defaultValue),xt(i,k,O.defaultValue)),O.keepTouched||Wt(r.touchedFields,k),O.keepDirty||(Wt(r.dirtyFields,k),r.isDirty=O.defaultValue?o(k,oe(i,k)):o()),O.keepError||(Wt(r.errors,k),T.isValid&&L()),P.state.next(Object.assign({},r)))},clearErrors:A,unregister:z,setError:V,setFocus:k=>{let O=oe(n,k)._f;(O.ref.focus?O.ref:O.refs[0]).focus()}}}function al(e={}){let t=ht.default.useRef(),[r,n]=ht.default.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Object.assign(Object.assign({},sI(e)),{formState:r});let i=t.current.control,a=ht.default.useCallback(u=>{Mb(u,i._proxyFormState,!0)&&(i._formState=Object.assign(Object.assign({},i._formState),u),n(Object.assign({},i._formState)))},[i]);return _h({subject:i._subjects.state,callback:a}),ht.default.useEffect(()=>{i._stateFlags.mount||(i._proxyFormState.isValid&&i._updateValid(),i._stateFlags.mount=!0),i._stateFlags.watch&&(i._stateFlags.watch=!1,i._subjects.state.next({})),i._removeUnmounted()}),t.current.formState=xb(r,i._proxyFormState),t.current}var cI=({accounts:e,enabledAddressTypes:t,enableAddressTypes:r,editableAccountMetadata:n,addReadOnlyAccount:i,fetchDomainOwner:a})=>{let u=yr(),{t:d}=zn(),g=Gt(),S=n?.networkID||$r.Solana.Mainnet,{formState:{errors:E},control:T,clearErrors:P,getValues:C,setValue:K,register:_,handleSubmit:B,watch:L,trigger:H}=al({mode:"all"}),{networkID:U,name:te,address:J,resolvedAddress:Y}=L(),ee={required:!0},q=(0,sl.useMemo)(()=>({required:{value:!0,message:d("addAccountImportAccountPublicKeyRequired")},validate:(0,Bb.default)(async o=>{if(o==="")return!0;if(!hm(o,U||S))try{let m=(await a(o,U,u,g))?.owner;return m?(K("resolvedAddress",m),e.find(x=>x.addresses.map(v=>v.address).includes(m))?d("addAccountImportAccountDuplicateAddress"):!0):d("addAccountImportAccountIncorrectFormat")}catch{return d("sendFormErrorInvalidDomain")}return K("resolvedAddress",o),e.find(h=>h.addresses.map(m=>m.address).includes(o))?d("addAccountImportAccountDuplicateAddress"):!0},500)}),[d,U,S,K,e,a,u,g]),ue=te&&Y&&!E.name&&!E.address,b=(0,sl.useCallback)(async({networkID:o,name:c,resolvedAddress:p},h)=>{let m=Io(o,p);t.includes(m)||await r({addressTypes:[m]});let w={};w[m]=p,i({name:c,addresses:w,icon:n?.icon}),h(),g.capture("addReadOnlyAccount",{data:{networkID:o,chainType:m}})},[i,n?.icon,r,t,g]);return{Controller:Pb,canSubmit:ue,control:T,errors:E,nameValidations:ee,address:J,addressValidations:q,clearErrors:P,getValues:C,handleSubmit:B,onSubmit:b,register:_,setValue:K,trigger:H}};l();f();function uI(e){let t=QA();return e.map(r=>fi.get(r.networkID).addressTooltipNetworkName?.(r.networkID,r.address,t)??ie.getNetworkName(r.networkID))}l();f();var lI=ne(vt());l();f();var Ob=ne(vt());var fI=()=>{let{data:e}=nr(),t=(0,Ob.useMemo)(()=>{if(!e||!e.addresses.length)return ie.getChainID("solana:101");let r=e.addresses[0];return ie.getChainID(r.networkID)},[e]);return{caip19:pm(mm(t)),tokenName:ie.getChainName(t),tokenSymbol:ie.getTokenSymbol(t)}};l();f();var dI=()=>Ka();l();f();var pI=()=>{let{data:e}=Sh();return!!e?.isDeveloperMode},hI=()=>Bs().some(t=>ie.isLocalNetworkID(t));l();f();var Db=ne(vt());l();f();var Vb=()=>{let{data:e}=on(),{data:t}=xo(),{data:r}=bh();return et({queryKey:je.patchProfileAddresses({chainAvailability:e?.enabledNetworkIDs,accountIdentifiers:t?.map(n=>n.identifier),user:r}),queryFn:e&&t&&r?()=>{let{enabledNetworkIDs:n}=e,i=n?.reduce((E,T)=>{let P=t.find(C=>C.addresses.some(K=>K.networkID===T))?.addresses.find(C=>C.networkID===T)?.address;return P&&(E[T]=P),E},{})??{},a=r?.addresses,u=a?Object.keys(a).filter(ie.isNetworkID):[],d=(n??[]).filter(E=>!u.includes(E)).reduce((E,T)=>{let P=i[T];return P&&(E[T]=P),E},{});return Object.keys(d).length>0?{addresses:{...d,...a},addedAddresses:d}:null}:Am})};var mI=()=>{let{data:e}=Vb(),{mutate:t}=wh(),r=Gt();(0,Db.useEffect)(()=>{if(e){let{addresses:n,addedAddresses:i}=e,a=Object.keys(i);r.capture("autoSyncUsernameAddresses",{data:{addedChains:a}}),t({addresses:n})}},[e,t,r])};l();f();var Ub=ne(vt());var yI=e=>{let t=(0,Ub.useCallback)(r=>r.addresses.find(n=>e===ie.getChainID(n.networkID))?.networkID,[e]);return nr({select:t})};l();f();var Nb=ne(vt()),gI=({accountBalance:e,accountId:t,enabled:r,value:n,setAccountBalance:i})=>{(0,Nb.useEffect)(()=>{if(r&&t&&n!==void 0&&n!==e){let a=Date.now();i({identifier:t,balance:{timestamp:a,value:n}})}},[e,t,r,n,i])};l();f();var Lb=ne(vt());var vI=()=>{let{data:e=[]}=Ks("local-only"),{data:t=[]}=Ks("recoverable-only");return(0,Lb.useMemo)(()=>e.length+t.length>1,[e.length,t.length])};l();f();l();f();l();f();var jt=ne(vt());function AI(e){let t,r=new Set,n=(S,E)=>{let T=typeof S=="function"?S(t):S;if(T!==t){let P=t;t=E?T:Object.assign({},t,T),r.forEach(C=>C(t,P))}},i=()=>t,a=(S,E=i,T=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let P=E(t);function C(){let K=E(t);if(!T(P,K)){let _=P;S(P=K,_)}}return r.add(C),()=>r.delete(C)},g={setState:n,getState:i,subscribe:(S,E,T)=>E||T?a(S,E,T):(r.add(S),()=>r.delete(S)),destroy:()=>r.clear()};return t=e(n,i,g),g}var bI=typeof self>"u"||!self.navigator||/ServerSideRendering|^Deno\//.test(self.navigator.userAgent),zb=bI?jt.useEffect:jt.useLayoutEffect;function cl(e){let t=typeof e=="function"?AI(e):e,r=(n=t.getState,i=Object.is)=>{let[,a]=(0,jt.useReducer)(B=>B+1,0),u=t.getState(),d=(0,jt.useRef)(u),g=(0,jt.useRef)(n),S=(0,jt.useRef)(i),E=(0,jt.useRef)(!1),T=(0,jt.useRef)();T.current===void 0&&(T.current=n(u));let P,C=!1;(d.current!==u||g.current!==n||S.current!==i||E.current)&&(P=n(u),C=!i(T.current,P)),zb(()=>{C&&(T.current=P),d.current=u,g.current=n,S.current=i,E.current=!1});let K=(0,jt.useRef)(u);zb(()=>{let B=()=>{try{let H=t.getState(),U=g.current(H);S.current(T.current,U)||(d.current=H,T.current=U,a())}catch{E.current=!0,a()}},L=t.subscribe(B);return t.getState()!==K.current&&B(),L},[]);let _=C?P:T.current;return(0,jt.useDebugValue)(_),_};return Object.assign(r,t),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");let n=[r,t];return{next(){let i=n.length<=0;return{value:n.shift(),done:i}}}},r}var wI={editableAccountMetadata:void 0,setEditableAccountMetadata:()=>{}},ul=cl(e=>({...wI,setEditableAccountMetadata:t=>{e({editableAccountMetadata:t})}}));l();f();var Fb={username:"",available:null,usernameAvailabilityError:null,icon:null,secretIdentifiers:[],accountIdentifiersToSync:[],addresses:{}},qb=cl((e,t)=>({...Fb,setUsername:r=>e({username:r}),setUsernameAvailabilityError:r=>e({usernameAvailabilityError:r}),setAvailable:r=>e({available:r}),setIcon:r=>e({icon:r}),addSecretIdentifier:r=>{let n=[...t().secretIdentifiers];n.includes(r)||n.push(r),e({secretIdentifiers:n})},removeSecretIdentifier:r=>{e({secretIdentifiers:t().secretIdentifiers.filter(n=>n!==r)})},addAccountIdentifierToSync:r=>{let n=[...t().accountIdentifiersToSync];n.includes(r)||n.push(r),e({accountIdentifiersToSync:n})},removeAccountIdentifierToSync:r=>{e({accountIdentifiersToSync:t().accountIdentifiersToSync.filter(n=>n!==r)})},clearAccountIdentifiersToSync:()=>e({accountIdentifiersToSync:[]}),setAccountIdentifiersToSync:r=>e({accountIdentifiersToSync:r}),addAddress:(r,n)=>{let i={...t().addresses};i[r]=n,e({addresses:i})},removeAddress:(r,n)=>{let i={...t().addresses};i[r]===n&&delete i[r],e({addresses:i})},clearAddresses:()=>{e({addresses:{}})},reset:()=>{e(Fb)}}));l();f();l();f();var SI=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();var xI=ne(vt());l();f();var Wb=ne(Ia()),Tn=ne(vt());var MI=({importPrivateKeyCallback:e,existingAccounts:t,editableAccountMetadata:r,analytics:n})=>{let{t:i}=zn(),{formState:{errors:a},control:u,clearErrors:d,getValues:g,setValue:S,register:E,handleSubmit:T,watch:P,trigger:C}=al({mode:"all",defaultValues:{addressType:r?.addressType||"solana",networkID:r?.networkID||$r.Solana.Mainnet}}),[K,_]=(0,Tn.useState)(null),B=ul(c=>c.setEditableAccountMetadata),{name:L}=P(),H=r?.secrets,U=g("networkID"),te=g("addressType"),J=g("privateKey"),Y=(0,Tn.useMemo)(()=>new am,[]),ee={required:!0},q=(0,Tn.useMemo)(()=>({required:{value:!0,message:i("addAccountImportAccountPrivateKeyRequired")},onChange:c=>{c.target.value||_(null)},validate:c=>{try{let p=g("networkID"),h=g("addressType");if(/\s/.test(c)||!h)return i("addAccountImportAccountIncorrectFormat");let m=ie.getNetworkDefinition(p).value,w=Fs({privateKey:c,addressType:h,networkIDValue:m});B({...r,secrets:w});let x=Y.generateKeypairFromPrivateKey(w,h);return t.find(s=>!s.isReadOnly&&(s.addresses.map(A=>A.address).includes(Kt({publicKey:x.publicKey,addressType:h,networkID:p}))||s.addresses.filter(A=>"publicKey"in A).map(A=>A.publicKey).find(A=>A?Buffer.from(A).equals(Buffer.from(x.publicKey)):!1)))?i("addAccountImportAccountDuplicatePrivateKey"):!0}catch{return i("addAccountImportAccountIncorrectFormat")}}}),[i,Y,t,r,B,g]);(0,Tn.useEffect)(()=>{if(a.privateKey){_(null);return}if(J||H)try{let c=ie.getNetworkDefinition(U).value,p=H||Fs({privateKey:J,addressType:te,networkIDValue:c}),h=Y.generateKeypairFromPrivateKey(p,te);if(!J){let m="";switch(te){case"solana":{m=Wb.default.encode(h.privateKey);break}case"eip155":{m="0x"+Buffer.from(h.privateKey).toString("hex");break}case"sui":{m=cm(h.privateKey);break}}S("privateKey",m)}_(Kt({publicKey:h.publicKey,addressType:te,networkID:U}))}catch{_(null)}},[a.privateKey,te,Y,J,H,S,U]);let ue=(0,Tn.useMemo)(()=>!!(L&&J&&!a.name&&!a.privateKey),[a.name,a.privateKey,L,J]),b=(0,Tn.useCallback)(async({networkID:c,name:p,privateKey:h,addressType:m})=>{let w=ie.getNetworkDefinition(c).value,x=Fs({privateKey:h,addressType:m,networkIDValue:w});await e({chainType:m,name:p,icon:r?.icon,privateKey:x}),n.capture("addPrivateKeyAccount",{data:{networkID:c,chainType:m}})},[e,r?.icon,n]);return{formOnSubmitHandler:T(c=>b(c)),canSubmit:ue,control:u,getValues:g,register:E,setValue:S,trigger:C,errors:a,clearErrors:d,nameValidations:ee,privateKey:J,privateKeyValidations:q,addressPreview:K}};l();f();var EI=async(e,t,r)=>{let{enabledAddressTypes:n,enabledChainIDs:i,enabledMainnetOnlyNetworkIDs:a}=r,[u,d]=await Promise.all([t.get("developerMode"),xa(t)]),g=await e.fetchAllAccounts(),S=await Jn(g,t),E=await Af(t,S.identifier),T={name:E.name,icon:E.icon,identifier:S.identifier,addresses:Za(S,a,n,i,d,u?.isDeveloperMode??!1)};return S.type==="seed"?{...T,type:"seed",seedIdentifier:S.seedIdentifier,isReadOnly:!1}:S.type==="seedless"?{...T,type:"seedless",seedIdentifier:S.seedIdentifier,isReadOnly:!1}:S.type==="readOnly"?{...T,type:"readOnly",isReadOnly:!0}:S.type==="privateKey"?{...T,privateKeyIdentifier:S.privateKeyIdentifier,type:"privateKey",isReadOnly:!1}:{...T,type:S.type,isReadOnly:!1}};l();f();export{uw as a,lw as b,vl as c,br as d,dw as e,pw as f,LK as g,ox as h,cx as i,yw as j,ft as k,Zs as l,fi as m,gw as n,ux as o,Ax as p,Ya as q,Sf as r,Ef as s,Tf as t,bx as u,wx as v,B0 as w,Sx as x,Ba as y,xx as z,Aw as A,bw as B,Mx as C,Ex as D,Tx as E,O0 as F,Px as G,Ix as H,kx as I,If as J,Kx as K,Bx as L,Mc as M,id as N,xr as O,Na as P,MS as Q,jl as R,Ji as S,$n as T,PS as U,VS as V,DS as W,ww as X,wr as Y,qn as Z,US as _,NS as $,La as aa,LS as ba,zS as ca,FS as da,qS as ea,od as fa,Qe as ga,vg as ha,sd as ia,bg as ja,Mg as ka,Pg as la,$g as ma,Gg as na,gv as oa,bv as pa,tA as qa,Cu as ra,rA as sa,uT as ta,hA as ua,Zp as va,HT as wa,oh as xa,WS as ya,on as za,ah as Aa,$T as Ba,sh as Ca,GT as Da,JT as Ea,QA as Fa,Sa as Ga,PQ as Ha,IQ as Ia,kQ as Ja,CQ as Ka,_Q as La,RQ as Ma,kP as Na,CP as Oa,uh as Pa,xo as Qa,_P as Ra,at as Sa,Hu as Ta,RP as Ua,KP as Va,Ks as Wa,nP as Xa,Sh as Ya,ab as Za,BP as _a,nr as $a,OP as ab,VP as bb,DP as cb,UP as db,NP as eb,LP as fb,zP as gb,FP as hb,qP as ib,WP as jb,jP as kb,Bs as lb,HP as mb,$P as nb,rb as ob,uP as pb,lP as qb,fP as rb,AP as sb,Qu as tb,iP as ub,yr as vb,vh as wb,Mo as xb,bP as yb,wP as zb,Rs as Ab,Ah as Bb,bh as Cb,MP as Db,wh as Eb,EP as Fb,YP as Gb,Pb as Hb,al as Ib,cI as Jb,uI as Kb,fI as Lb,dI as Mb,TP as Nb,pI as Ob,hI as Pb,mI as Qb,PP as Rb,yI as Sb,gI as Tb,vI as Ub,cl as Vb,ul as Wb,qb as Xb,SI as Yb,MI as Zb,EI as _b};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-VOCOWPRG.js.map
