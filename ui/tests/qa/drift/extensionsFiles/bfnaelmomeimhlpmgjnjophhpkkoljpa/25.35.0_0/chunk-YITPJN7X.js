import{$ as zr,S as Wr,ga as Yr,ia as $r,ja as Xr}from"./chunk-BHIJKWN7.js";import{$ as Kr,Ba as fo,T as qr,Ta as Nt,V as Vr,Wa as Ct,fb as Qr,gb as B,hb as Gr,ib as sn,ja as Lt,jb as jr,pb as Hr,rb as Jr,sb as de}from"./chunk-QSYOXIBV.js";import{b as be}from"./chunk-4BKJE7YB.js";import{$b as we,N as co,O as At,Xb as rn,bb as uo,dc as Mr,ec as Br,gc as an,hc as Ur,jb as lo,jc as mo,kb as po,kc as Or,mb as ve,rc as Nr,uc as Rr,zc as Dr}from"./chunk-LHPEWMJX.js";import{f as ao,ua as Pe}from"./chunk-HTY647YJ.js";import{Bd as xr,Cb as Ar,Cf as Er,Db as Zt,I as Sr,Ic as nt,Kb as br,Kc as ht,Ke as Lr,Nc as C,O as gr,P as yr,Q as yt,R as ot,S as h,Td as G,Te as Cr,X as kt,_ as Xt,_f as ft,cd as Pr,cg as Fr,de as Ir,ec as Ot,fc as vr,gf as te,i as Xa,ic as io,jf as It,mc as j,nd as Tr,ta as on,ua as xt,uc as wr,wc as H,x as pr,xb as U,yc as Me}from"./chunk-E2A6YDRV.js";import{R as Q,S as V,c as oo,e as $a}from"./chunk-4XTMHWN2.js";import{B as Ae,Ba as so,Ca as rt,D as no,Da as z,E as kr,F as ro,G as hr,S as v,X as J,Zb as nn,c as E,g as en,gb as St,h as _e,i as $t,j as mr,k as fr,kb as _r,l as L,q as he}from"./chunk-BEUYJGED.js";import{c as Ja,f as x,h as s,l as Ya,m as Buffer,n as c}from"./chunk-64CIGK2X.js";var wa=Ja(P=>{"use strict";s();c();var Rc=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(P,"__esModule",{value:!0});P.map=P.array=P.rustEnum=P.str=P.vecU8=P.tagged=P.vec=P.bool=P.option=P.publicKey=P.i256=P.u256=P.i128=P.u128=P.i64=P.u64=P.struct=P.f64=P.f32=P.i32=P.u32=P.i16=P.u16=P.i8=P.u8=void 0;var R=rn(),Dc=pr(),qc=Rc(oo()),Ht=rn();Object.defineProperty(P,"u8",{enumerable:!0,get:function(){return Ht.u8}});Object.defineProperty(P,"i8",{enumerable:!0,get:function(){return Ht.s8}});Object.defineProperty(P,"u16",{enumerable:!0,get:function(){return Ht.u16}});Object.defineProperty(P,"i16",{enumerable:!0,get:function(){return Ht.s16}});Object.defineProperty(P,"u32",{enumerable:!0,get:function(){return Ht.u32}});Object.defineProperty(P,"i32",{enumerable:!0,get:function(){return Ht.s32}});Object.defineProperty(P,"f32",{enumerable:!0,get:function(){return Ht.f32}});Object.defineProperty(P,"f64",{enumerable:!0,get:function(){return Ht.f64}});Object.defineProperty(P,"struct",{enumerable:!0,get:function(){return Ht.struct}});var ae=class extends R.Layout{constructor(t,o,n){super(t,n),this.blob=(0,R.blob)(t),this.signed=o}decode(t,o=0){let n=new qc.default(this.blob.decode(t,o),10,"le");return this.signed?n.fromTwos(this.span*8).clone():n}encode(t,o,n=0){return this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,n)}};function ba(e){return new ae(8,!1,e)}P.u64=ba;function Vc(e){return new ae(8,!0,e)}P.i64=Vc;function Kc(e){return new ae(16,!1,e)}P.u128=Kc;function Wc(e){return new ae(16,!0,e)}P.i128=Wc;function zc(e){return new ae(32,!1,e)}P.u256=zc;function Qc(e){return new ae(32,!0,e)}P.i256=Qc;var Wt=class extends R.Layout{constructor(t,o,n,r){super(t.span,r),this.layout=t,this.decoder=o,this.encoder=n}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,n){return this.layout.encode(this.encoder(t),o,n)}getSpan(t,o){return this.layout.getSpan(t,o)}};function Gc(e){return new Wt((0,R.blob)(32),t=>new Dc.PublicKey(t),t=>t.toBuffer(),e)}P.publicKey=Gc;var er=class extends R.Layout{constructor(t,o){super(-1,o),this.layout=t,this.discriminator=(0,R.u8)()}encode(t,o,n=0){return t==null?this.discriminator.encode(0,o,n):(this.discriminator.encode(1,o,n),this.layout.encode(t,o,n+1)+1)}decode(t,o=0){let n=this.discriminator.decode(t,o);if(n===0)return null;if(n===1)return this.layout.decode(t,o+1);throw new Error("Invalid option "+this.property)}getSpan(t,o=0){let n=this.discriminator.decode(t,o);if(n===0)return 1;if(n===1)return this.layout.getSpan(t,o+1)+1;throw new Error("Invalid option "+this.property)}};function jc(e,t){return new er(e,t)}P.option=jc;function Hc(e){return new Wt((0,R.u8)(),Jc,Yc,e)}P.bool=Hc;function Jc(e){if(e===0)return!1;if(e===1)return!0;throw new Error("Invalid bool: "+e)}function Yc(e){return e?1:0}function $c(e,t){let o=(0,R.u32)("length"),n=(0,R.struct)([o,(0,R.seq)(e,(0,R.offset)(o,-o.span),"values")]);return new Wt(n,({values:r})=>r,r=>({values:r}),t)}P.vec=$c;function Xc(e,t,o){let n=(0,R.struct)([ba("tag"),t.replicate("data")]);function r({tag:i,data:a}){if(!i.eq(e))throw new Error("Invalid tag, expected: "+e.toString("hex")+", got: "+i.toString("hex"));return a}return new Wt(n,r,i=>({tag:e,data:i}),o)}P.tagged=Xc;function va(e){let t=(0,R.u32)("length"),o=(0,R.struct)([t,(0,R.blob)((0,R.offset)(t,-t.span),"data")]);return new Wt(o,({data:n})=>n,n=>({data:n}),e)}P.vecU8=va;function Zc(e){return new Wt(va(),t=>t.toString("utf-8"),t=>Buffer.from(t,"utf-8"),e)}P.str=Zc;function tu(e,t,o){let n=(0,R.union)(o??(0,R.u8)(),t);return e.forEach((r,i)=>n.addVariant(i,r,r.property)),n}P.rustEnum=tu;function eu(e,t,o){let n=(0,R.struct)([(0,R.seq)(e,t,"values")]);return new Wt(n,({values:r})=>r,r=>({values:r}),o)}P.array=eu;var or=class extends R.Layout{constructor(t,o,n){super(t.span+o.span,n),this.keyLayout=t,this.valueLayout=o}decode(t,o){o=o||0;let n=this.keyLayout.decode(t,o),r=this.valueLayout.decode(t,o+this.keyLayout.getSpan(t,o));return[n,r]}encode(t,o,n){n=n||0;let r=this.keyLayout.encode(t[0],o,n),i=this.valueLayout.encode(t[1],o,n+r);return r+i}getSpan(t,o){return this.keyLayout.getSpan(t,o)+this.valueLayout.getSpan(t,o)}};function ou(e,t,o){let n=(0,R.u32)("length"),r=(0,R.struct)([n,(0,R.seq)(new or(e,t),(0,R.offset)(n,-n.span),"values")]);return new Wt(r,({values:i})=>new Map(i),i=>({values:Array.from(i.entries())}),o)}P.map=ou});s();c();s();c();s();c();var Gt="@phantom/interstitials",Te=`${Gt}:action-banners`,Zr=`${Gt}:force-upgrade`,Y={actionBanners:(e,t)=>[Te,{accountIdentifier:e,accessToken:t}],hasSeenInterstitial:e=>[`${Gt}:has-seen-interstitial`,{feature:e}],interstitialViewHistory:e=>[`${Gt}:interstitial-view-history`,{feature:e}],appLaunchTimes:()=>[`${Gt}:app-launch-times`],lastOnboardedAt:()=>[`${Gt}:last-onboarded-at`]};s();c();s();c();var So=(T=>(T.Buy="Buy",T.Collectibles="Collectibles",T.ConnectHardwareWallet="Connect Hardware Wallet",T.ConvertStakeAccount="Convert Stake Account",T.ConvertToJito="Convert to Jito",T.MintPSOL="Mint PSOL",T.Explore="Explore",T.MintCollectible="Mint Collectible",T.SocialLogin="Social Login",T.SettingsClaimUsername="Settings: Claim Username",T.SettingsCurrency="Settings: Currency",T.SettingsImportSeedPhrase="Settings: Import Seed Phrase",T.SettingsNotificationPreferences="Settings: Notification Preferences",T.SettingsSecurityAndPrivacy="Settings: Security & Privacy",T.TokenCategory="Token Category",T.Swapper="Swapper",T.ExternalLink="External Link",T.Token="Token",T.TokenChat="Token Chat",T))(So||{}),Be=class extends Error{message="Failed to set dismissed action banners to storage"};var Za={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,SeedlessPinVerification:1,AdditionalPermissions:1,TermsOfServiceUpdate:1,StakingWelcomeNew:1,SocialFeedNux:1,SocialFeedNuxWelcome:1,PerpsJoinFeedbackGroup:1},ts={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,SuiWelcomeDefaultOn:1,MonadWelcome:1,ArbitrumWelcome:1,StakingWelcomeNew:1,ClaimUsernameNudge:1,QuickClaimUsername:1,AdditionalPermissions:1,SeedlessPinVerification:1,TermsOfServiceUpdate:1,SocialFeedNux:1,SocialFeedNuxWelcome:1,PerpsJoinFeedbackGroup:1},cn=e=>ro?Za[e]:kr?ts[e]:-1;var go=1,Rt=".phantom-labs.settings.interstitials",ee=class{static async getViewHistory(t,o){let n=await o.get(Rt);return n?n.interstitialsViewHistory[t]??[]:[]}static async hasSeen(t,o){let n=await o.get(Rt);if(!n)return!1;let r=cn(t);return(n.interstitialsSeen[t]??0)>=r}static async setHasSeen(t,o){let n=await o.get(Rt),r=cn(t);await o.set(Rt,{version:go,interstitialsSeen:{...!!n&&n.interstitialsSeen,[t]:r},interstitialsViewHistory:{...!!n&&n.interstitialsViewHistory,[t]:[...n?.interstitialsViewHistory?.[t]??[],Date.now()]}})}static async resetHasSeen(t,o){let n=await o.get(Rt);if(n)return o.set(Rt,{version:go,interstitialsSeen:{...n.interstitialsSeen,[t]:void 0},interstitialsViewHistory:{...n.interstitialsViewHistory,[t]:void 0}})}static async resetAllHasSeen(t){if(await t.get(Rt))return t.set(Rt,{version:go,interstitialsSeen:{},interstitialsViewHistory:{}})}},es={...wr(Rt,[`${Gt}:has-seen-interstitial`,`${Gt}:interstitial-view-history`],(e,t)=>({version:go,interstitialsSeen:{...e?.interstitialsSeen,...t?.interstitialsSeen},interstitialsViewHistory:{...e?.interstitialsViewHistory,...t?.interstitialsViewHistory}}))};s();c();var un=class{#t;constructor(t){this.#t=t}onBannerSeen=t=>{this.#t.capture("actionBannerSeenByUser",{data:{banner:t}})};onBannerClick=t=>{this.#t.capture("actionBannerClickedByUser",{data:{banner:t}})};onBannerDismiss=t=>{this.#t.capture("actionBannerDismissedByUser",{data:{banner:t}})};onInterstitialSeen=t=>{this.#t.capture("actionBannerInterstitialSeenByUser",{data:{banner:t}})};onInterstitialPrimaryClick=t=>{this.#t.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:t}})};onInterstitialSecondaryClick=t=>{this.#t.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:t}})};onInterstitialDismiss=t=>{this.#t.capture("actionBannerInterstitialDismissedByUser",{data:{banner:t}})}};s();c();var os=({id:e,humanReadableId:t,description:o,bannerType:n})=>({id:e,humanReadableId:t,description:o,type:n}),ns=({id:e,humanReadableId:t,description:o,bannerType:n,interstitial:r})=>{let{title:i,primaryButtonText:a,secondaryButtonText:u}=r,d;if(n==="Modal")for(let[l,m]of Object.values(r.lineItems).entries())d={...d??{},[`lineItem${l+1}`]:{title:m.title,description:m.description}};return{id:e,humanReadableId:t,description:o,type:n,interstitial:{title:i,body:d,primaryButtonText:a??v.t("commandContinue"),secondaryButtonText:u??v.t("commandDismiss")}}};s();c();s();c();var yo=e=>{let t=[];for(let o in e.errors)Array.isArray(e.errors[o])&&t.push(e.errors[o].join(", "));return t.join(", ")};var ei=async({locale:e})=>{let t;try{let o=JSON.stringify({platform:no,appVersion:Ae,locale:e}),n=await kt.api().headers({"Content-Type":"application/json"}).post(({apiEnv:i})=>`/banners/force_upgrade/${i}/v1`,o);if(n.status===400){let i=await n.data,a=yo(i);throw new Error(a)}else if(n.status<200||n.status>299)throw new Error(`status code: ${n.status}, body: ${n.statusText}`);let r=n.data;return r?{...r}:ti}catch(o){return t===400&&o instanceof Error&&j.captureError(o,"actionBanner"),ti}},ti={forceUpgradeStatus:"noop"};s();c();s();c();var oi=async({locale:e})=>({...await ei({locale:e})});var rs=()=>C({queryKey:[Zr],queryFn:async()=>{let t=ao(v.language)??"en";return oi({locale:t})},enabled:!!Ae,staleTime:G({minutes:5})});s();c();var ln=e=>{let t=Me(),o=Y.hasSeenInterstitial(e);return C({queryKey:o,queryFn:async()=>await ee.hasSeen(e,t)})};s();c();s();c();var ni=async e=>{await e.invalidateQueries({queryKey:[Te]})};Pr(ni);var ri=async(e,t,o)=>{await e.setQueryData(Y.hasSeenInterstitial(t),o)};var bt=e=>{let t=Me(),o=nt();return ht({mutationFn:async()=>{await ee.setHasSeen(e,t),await ri(o,e,!0)},onSuccess:()=>o.invalidateQueries({queryKey:Y.interstitialViewHistory(e)})})};s();c();s();c();s();c();var pn=async e=>await e.get("dismissedActionBanners")??[],ii=async(e,t)=>{try{let o=await pn(e);return o.includes(t)?void 0:e.set("dismissedActionBanners",[...o,t])}catch{throw new Be}};s();c();s();c();var si=async({accountID:e,deviceId:t,locale:o,rootId:n,selectedAccountAddresses:r,accessToken:i})=>{let a;try{let u={accountID:e,deviceId:t,locale:o,platform:no,rootId:n,selectedAccountAddresses:r,version:Ae},d=await kt.api().headers({"Content-Type":"application/json"}).bearer(i).post(({apiEnv:m})=>`/banners/get_banners/${m}/v2`,u);if(d.status===400){let m=await d.data,p=yo(m);throw new Error(p)}else if(d.status<200||d.status>299)throw new Error(`status code: ${d.status}, body: ${await d.statusText}`);let l=d.data;return l?{...l,banners:l.banners??[]}:ai}catch(u){return a===400&&u instanceof Error&&j.captureError(u,"actionBanner"),ai}},ai={id:void 0,banners:[]};s();c();s();c();var mn=e=>e?Object.values(So).includes(e):!1;s();c();var ci=e=>{switch(e){case"Bottom Sheet":return ro;case"Modal":return!0;default:return!1}};var ui=e=>{let{bannerType:t,destinationType:o}=e;switch(t){case"Deep Link":return mn(o);case"Bottom Sheet":case"Modal":return ci(t)&&mn(o);default:return!1}};var di=async({accountID:e,deviceId:t,dismissedBanners:o,locale:n,rootId:r,selectedAccountAddresses:i,accessToken:a})=>{let u=await si({accountID:e,deviceId:t,locale:n,rootId:r,selectedAccountAddresses:i,accessToken:a});return{...u,banners:u.banners.filter(d=>ui(d)&&!o.includes(d.id))}};var is=G({minutes:1}),as=()=>{let e=It(),t=H(),{data:o,isLoading:n}=Ir(),{data:r}=te(),i=async()=>{let a=r?.type!=="readOnly"?r?.addresses.map(br)??[]:[],u=r?.type==="seed"?r.seedIdentifier:null,d=await pn(t),l=ao(v.language)??"en",m=await e.getDeviceId();return di({accountID:r?.identifier??"",deviceId:m,dismissedBanners:d,locale:l,rootId:u,selectedAccountAddresses:a,accessToken:o?.accessToken})};return C({queryKey:Y.actionBanners(r?.identifier,o?.accessToken),queryFn:i,enabled:!n&&!!r?.identifier,staleTime:is})};s();c();var Sn=()=>{let e=H(),{data:t}=C({queryKey:Y.appLaunchTimes(),queryFn:async()=>await e.get("appLaunchTimes")??[]});return t??[]};s();c();var ss=()=>{let e=H(),t=nt();return ht({mutationFn:async({actionBannerId:n})=>{ii(e,n),t.setQueriesData({queryKey:[Te]},r=>{if(!r)return;let i=r.banners.filter(a=>a.id!==n);return{...r,banners:i}})}})};s();c();s();c();var ko=x(E());s();c();s();c();var gn=()=>{let e=H(),{data:t}=C({queryKey:Y.lastOnboardedAt(),queryFn:async()=>await e.get("lastOnboardedAt")??-1});return t};var pi=()=>{let e=gn(),t=Sn();if(t.length<2)return!0;if(e!==void 0){let[o,n]=t;if(e<o&&e<n)return!1}return!0};function me(e,t,o){let{data:n,isSuccess:r}=ln(e),{data:i}=io(t?[t]:[]),a=i?.length===1?i[0]:!0,u=pi(),d=(0,ko.useCallback)(()=>o(),[o]);return(0,ko.useMemo)(()=>a&&r&&!n&&!u&&d(),[a,n,u,d,r])}s();c();var cs=()=>{let e=H(),t=nt();return ht({mutationFn:async()=>{let o=Date.now(),r=[...(await e.get("appLaunchTimes")||[]).slice(-1),o];return e.set("appLaunchTimes",r)},onSuccess:()=>{t.invalidateQueries({queryKey:Y.appLaunchTimes()})}})};s();c();var us=()=>{let e=H(),t=nt();return ht({mutationFn:()=>{let o=Date.now();return e.set("lastOnboardedAt",o)},onSuccess:()=>{t.invalidateQueries({queryKey:Y.lastOnboardedAt()})}})};s();c();var jt=x(E());var ds="Google Pay",ls="Apple Pay",mi={data:{feature:"sui",variant:"default-on"}},ps=({onPrimaryAction:e,image:t,condition:o=()=>!0,platform:n="ios"})=>{let{t:r}=J(),{mutate:i}=bt("SuiWelcomeDefaultOn"),{data:a}=io(["kill-sui-default-on-modal"]),u=a?.length===1?a[0]:!0,d=me("SuiWelcomeDefaultOn",void 0,()=>o()&&!he()&&!u),l=n==="android"?ds:ls,m=(0,jt.useCallback)(async()=>{e(),i()},[e,i]),p=(0,jt.useMemo)(()=>({title:r("interstitialSuiWelcomeTitle"),items:[{key:"suiValueProp1",title:r("interstitialSuiWelcomeItemTitle_1"),icon:jt.default.createElement(St,{icon:"Swap",color:"areaBase",backgroundColor:"spotBase",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_1")},{key:"suiValueProp2",title:r("interstitialSuiWelcomeItemTitle_2"),icon:jt.default.createElement(St,{icon:"Send",color:"areaBase",backgroundColor:"spotBase",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_2",{paymentMethod:l})},{key:"suiValueProp3",title:r("interstitialSuiWelcomeItemTitle_3"),icon:jt.default.createElement(St,{icon:"Compass",color:"areaBase",backgroundColor:"spotBase",shape:"square"}),description:r("interstitialSuiWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialSuiWelcomePrimaryButtonText"),onAction:m,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:mi}},onDismiss:i,image:t,displayEvent:{event:"welcomeInterstitialSeen",payload:mi}}),[r,m,t,i,l]);return(0,jt.useMemo)(()=>({interstitial:p,shouldShow:d}),[p,d])};s();c();var Dt=x(E());var yn={data:{feature:"arbitrum"}},ms=({onPrimaryAction:e,onSecondaryAction:t,image:o,condition:n=()=>!0})=>{let{t:r}=J(),{mutateAsync:i}=Lr(),[a]=Cr(["arbitrum"]),{mutate:u}=bt("ArbitrumWelcome"),d=me("ArbitrumWelcome","enable-arbitrum",()=>n()&&!a&&!he()),l=(0,Dt.useCallback)(async()=>{await i({chainIDs:["arbitrum"]}),e(),u()},[i,e,u]),m=(0,Dt.useCallback)(()=>{t(),u()},[t,u]),p=(0,Dt.useMemo)(()=>({title:r("interstitialArbitrumWelcomeTitle"),items:[{key:"arbitrumValueProp1",title:r("interstitialArbitrumWelcomeItemTitle_1"),icon:Dt.default.createElement(St,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_1")},{key:"arbitrumValueProp2",title:r("interstitialArbitrumWelcomeItemTitle_2"),icon:Dt.default.createElement(St,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_2")},{key:"arbitrumValueProp3",title:r("interstitialArbitrumWelcomeItemTitle_3"),icon:Dt.default.createElement(St,{icon:"InfoCircle",color:"spotBase",backgroundColor:"brandMidnight",shape:"square"}),description:r("interstitialArbitrumWelcomeItemDescription_3")}],primaryButton:{children:r("interstitialArbitrumWelcomePrimaryButtonText"),onAction:l,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:yn}},secondaryButton:{children:r("commandNotNow"),onAction:m,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:yn}},onDismiss:u,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:yn}}),[r,l,m,o,u]);return(0,Dt.useMemo)(()=>({interstitial:p,shouldShow:d}),[p,d])};s();c();var qt=x(E());var hn={data:{feature:"staking"}},fs=({onPrimaryAction:e,onSecondaryAction:t,image:o,condition:n=()=>!0})=>{let{t:r}=J(),{mutate:i}=bt("StakingWelcomeNew"),a=me("StakingWelcomeNew","enable-psol-welcome-modal",()=>n()&&!he()),u=(0,qt.useCallback)(()=>{e(),i()},[e,i]),d=(0,qt.useCallback)(()=>{t(),i()},[t,i]),l=(0,qt.useMemo)(()=>({title:void 0,mobileTitleSheetInset:hr,items:[{key:"stakingValueProp1",title:r("stakingInterstitialWelcomeItemTitle_1"),icon:qt.default.createElement(St,{icon:"InfoCircle",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:r("stakingInterstitialWelcomeItemDescription_1")},{key:"stakingValueProp2",title:r("stakingInterstitialWelcomeItemTitle_2"),icon:qt.default.createElement(St,{icon:"TrendingUp",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:r("stakingInterstitialWelcomeItemDescription_2")},{key:"stakingValueProp3",title:r("stakingInterstitialWelcomeItemTitle_3"),icon:qt.default.createElement(St,{icon:"Shield",color:"spotPositive",backgroundColor:"areaBase",shape:"square"}),description:r("stakingInterstitialWelcomeItemDescription_3")}],primaryButton:{children:r("stakingInterstitialWelcomePrimaryButtonText"),onAction:u,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:hn},background:"spot",theme:"positive"},secondaryButton:{children:r("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:hn}},onDismiss:i,image:o,displayEvent:{event:"welcomeInterstitialSeen",payload:hn},disclaimers:[r("mintStakeInfoPageDisclaimer1"),r("mintStakeInfoPageDisclaimer2_US")]}),[r,u,d,o,i]);return(0,qt.useMemo)(()=>({interstitial:l,shouldShow:a}),[l,a])};s();c();var ct=x(E());var Ss="https://phantom.com/terms",gs="https://phantom.com/privacy",ys="https://phantom.com/terms-and-privacy-update",ks=({onConfirm:e,openUrl:t})=>{let{t:o}=J(),n=It(),{mutate:r}=bt("TermsOfServiceUpdate"),i=(0,ct.useCallback)(async()=>{r(),e()},[r,e]),a=(0,ct.useCallback)(d=>async()=>{await n.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await t(d)},[n,t]),u=(0,ct.useMemo)(()=>({title:o("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:o("commandContinue"),onAction:i,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:ct.default.createElement(hs,{openUrl:a}),dismissGestureDisabled:!0}),[o,i,a]);return(0,ct.useMemo)(()=>({interstitial:u}),[u])},hs=({openUrl:e})=>ct.default.createElement(rt,{marginTop:24},ct.default.createElement(z,{font:"body",align:"center"},ct.default.createElement(be,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle"},"Please review our updated",ct.default.createElement(z,{onPress:e(Ss),color:"spotBase"},"Terms of Service"),"and",ct.default.createElement(z,{onPress:e(gs),color:"spotBase"},"Privacy Policy"),". By continuing, you agree to the updated terms and policies.",ct.default.createElement(z,{onPress:e(ys),color:"spotBase"},"Learn More"),".")));s();c();var An=x(E());s();c();s();c();s();c();function bo(e,t,o,n){function r(i){return i instanceof o?i:new o(function(a){a(i)})}return new(o||(o=Promise))(function(i,a){function u(m){try{l(n.next(m))}catch(p){a(p)}}function d(m){try{l(n.throw(m))}catch(p){a(p)}}function l(m){m.done?i(m.value):r(m.value).then(u,d)}l((n=n.apply(e,t||[])).next())})}var As="ENTRIES",ki="KEYS",hi="VALUES",$="",Ue=class{constructor(t,o){let n=t._tree,r=Array.from(n.keys());this.set=t,this._type=o,this._path=r.length>0?[{node:n,keys:r}]:[]}next(){let t=this.dive();return this.backtrack(),t}dive(){if(this._path.length===0)return{done:!0,value:void 0};let{node:t,keys:o}=xe(this._path);if(xe(o)===$)return{done:!1,value:this.result()};let n=t.get(xe(o));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;let t=xe(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:t})=>xe(t)).filter(t=>t!==$).join("")}value(){return xe(this._path).node.get($)}result(){switch(this._type){case hi:return this.value();case ki:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}},xe=e=>e[e.length-1],bs=(e,t,o)=>{let n=new Map;if(t===void 0)return n;let r=t.length+1,i=r+o,a=new Uint8Array(i*r).fill(o+1);for(let u=0;u<r;++u)a[u]=u;for(let u=1;u<i;++u)a[u*r]=u;return Ai(e,t,o,n,a,1,r,""),n},Ai=(e,t,o,n,r,i,a,u)=>{let d=i*a;t:for(let l of e.keys())if(l===$){let m=r[d-1];m<=o&&n.set(u,[e.get(l),m])}else{let m=i;for(let p=0;p<l.length;++p,++m){let g=l[p],S=a*m,y=S-a,k=r[S],A=Math.max(0,m-o-1),b=Math.min(a-1,m+o);for(let I=A;I<b;++I){let T=g!==t[I],M=r[y+I]+ +T,N=r[y+I+1]+1,D=r[S+I]+1,K=r[S+I+1]=Math.min(M,N,D);K<k&&(k=K)}if(k>o)continue t}Ai(e.get(l),t,o,n,r,m,a,u+l)}},Oe=class e{constructor(t=new Map,o=""){this._size=void 0,this._tree=t,this._prefix=o}atPrefix(t){if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");let[o,n]=vo(this._tree,t.slice(this._prefix.length));if(o===void 0){let[r,i]=Ln(n);for(let a of r.keys())if(a!==$&&a.startsWith(i)){let u=new Map;return u.set(a.slice(i.length),r.get(a)),new e(u,t)}}return new e(o,t)}clear(){this._size=void 0,this._tree.clear()}delete(t){return this._size=void 0,vs(this._tree,t)}entries(){return new Ue(this,As)}forEach(t){for(let[o,n]of this)t(o,n,this)}fuzzyGet(t,o){return bs(this._tree,t,o)}get(t){let o=Tn(this._tree,t);return o!==void 0?o.get($):void 0}has(t){let o=Tn(this._tree,t);return o!==void 0&&o.has($)}keys(){return new Ue(this,ki)}set(t,o){if(typeof t!="string")throw new Error("key must be a string");return this._size=void 0,bn(this._tree,t).set($,o),this}get size(){if(this._size)return this._size;this._size=0;let t=this.entries();for(;!t.next().done;)this._size+=1;return this._size}update(t,o){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;let n=bn(this._tree,t);return n.set($,o(n.get($))),this}fetch(t,o){if(typeof t!="string")throw new Error("key must be a string");this._size=void 0;let n=bn(this._tree,t),r=n.get($);return r===void 0&&n.set($,r=o()),r}values(){return new Ue(this,hi)}[Symbol.iterator](){return this.entries()}static from(t){let o=new e;for(let[n,r]of t)o.set(n,r);return o}static fromObject(t){return e.from(Object.entries(t))}},vo=(e,t,o=[])=>{if(t.length===0||e==null)return[e,o];for(let n of e.keys())if(n!==$&&t.startsWith(n))return o.push([e,n]),vo(e.get(n),t.slice(n.length),o);return o.push([e,t]),vo(void 0,"",o)},Tn=(e,t)=>{if(t.length===0||e==null)return e;for(let o of e.keys())if(o!==$&&t.startsWith(o))return Tn(e.get(o),t.slice(o.length))},bn=(e,t)=>{let o=t.length;t:for(let n=0;e&&n<o;){for(let i of e.keys())if(i!==$&&t[n]===i[0]){let a=Math.min(o-n,i.length),u=1;for(;u<a&&t[n+u]===i[u];)++u;let d=e.get(i);if(u===i.length)e=d;else{let l=new Map;l.set(i.slice(u),d),e.set(t.slice(n,n+u),l),e.delete(i),e=l}n+=u;continue t}let r=new Map;return e.set(t.slice(n),r),r}return e},vs=(e,t)=>{let[o,n]=vo(e,t);if(o!==void 0){if(o.delete($),o.size===0)bi(n);else if(o.size===1){let[r,i]=o.entries().next().value;vi(n,r,i)}}},bi=e=>{if(e.length===0)return;let[t,o]=Ln(e);if(t.delete(o),t.size===0)bi(e.slice(0,-1));else if(t.size===1){let[n,r]=t.entries().next().value;n!==$&&vi(e.slice(0,-1),n,r)}},vi=(e,t,o)=>{if(e.length===0)return;let[n,r]=Ln(e);n.set(r+t,o),n.delete(r)},Ln=e=>e[e.length-1],Cn="or",wi="and",ws="and_not",Ne=class e{constructor(t){if(t?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');let o=t.autoVacuum==null||t.autoVacuum===!0?Pn:t.autoVacuum;this._options=Object.assign(Object.assign(Object.assign({},wn),t),{autoVacuum:o,searchOptions:Object.assign(Object.assign({},fi),t.searchOptions||{}),autoSuggestOptions:Object.assign(Object.assign({},Ls),t.autoSuggestOptions||{})}),this._index=new Oe,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=In,this.addFields(this._options.fields)}add(t){let{extractField:o,tokenize:n,processTerm:r,fields:i,idField:a}=this._options,u=o(t,a);if(u==null)throw new Error(`MiniSearch: document does not have ID field "${a}"`);if(this._idToShortId.has(u))throw new Error(`MiniSearch: duplicate ID ${u}`);let d=this.addDocumentId(u);this.saveStoredFields(d,t);for(let l of i){let m=o(t,l);if(m==null)continue;let p=n(m.toString(),l),g=this._fieldIds[l],S=new Set(p).size;this.addFieldLength(d,g,this._documentCount-1,S);for(let y of p){let k=r(y,l);if(Array.isArray(k))for(let A of k)this.addTerm(g,d,A);else k&&this.addTerm(g,d,k)}}}addAll(t){for(let o of t)this.add(o)}addAllAsync(t,o={}){let{chunkSize:n=10}=o,r={chunk:[],promise:Promise.resolve()},{chunk:i,promise:a}=t.reduce(({chunk:u,promise:d},l,m)=>(u.push(l),(m+1)%n===0?{chunk:[],promise:d.then(()=>new Promise(p=>setTimeout(p,0))).then(()=>this.addAll(u))}:{chunk:u,promise:d}),r);return a.then(()=>this.addAll(i))}remove(t){let{tokenize:o,processTerm:n,extractField:r,fields:i,idField:a}=this._options,u=r(t,a);if(u==null)throw new Error(`MiniSearch: document does not have ID field "${a}"`);let d=this._idToShortId.get(u);if(d==null)throw new Error(`MiniSearch: cannot remove document with ID ${u}: it is not in the index`);for(let l of i){let m=r(t,l);if(m==null)continue;let p=o(m.toString(),l),g=this._fieldIds[l],S=new Set(p).size;this.removeFieldLength(d,g,this._documentCount,S);for(let y of p){let k=n(y,l);if(Array.isArray(k))for(let A of k)this.removeTerm(g,d,A);else k&&this.removeTerm(g,d,k)}}this._storedFields.delete(d),this._documentIds.delete(d),this._idToShortId.delete(u),this._fieldLength.delete(d),this._documentCount-=1}removeAll(t){if(t)for(let o of t)this.remove(o);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new Oe,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(t){let o=this._idToShortId.get(t);if(o==null)throw new Error(`MiniSearch: cannot discard document with ID ${t}: it is not in the index`);this._idToShortId.delete(t),this._documentIds.delete(o),this._storedFields.delete(o),(this._fieldLength.get(o)||[]).forEach((n,r)=>{this.removeFieldLength(o,r,this._documentCount,n)}),this._fieldLength.delete(o),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;let{minDirtFactor:t,minDirtCount:o,batchSize:n,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:r},{minDirtCount:o,minDirtFactor:t})}discardAll(t){let o=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(let n of t)this.discard(n)}finally{this._options.autoVacuum=o}this.maybeAutoVacuum()}replace(t){let{idField:o,extractField:n}=this._options,r=n(t,o);this.discard(r),this.add(t)}vacuum(t={}){return this.conditionalVacuum(t)}conditionalVacuum(t,o){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&o,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{let n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=In,this.performVacuuming(t,n)}),this._enqueuedVacuum)):this.vacuumConditionsMet(o)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(t),this._currentVacuum)}performVacuuming(t,o){return bo(this,void 0,void 0,function*(){let n=this._dirtCount;if(this.vacuumConditionsMet(o)){let r=t.batchSize||xn.batchSize,i=t.batchWait||xn.batchWait,a=1;for(let[u,d]of this._index){for(let[l,m]of d)for(let[p]of m)this._documentIds.has(p)||(m.size<=1?d.delete(l):m.delete(p));this._index.get(u).size===0&&this._index.delete(u),a%r===0&&(yield new Promise(l=>setTimeout(l,i))),a+=1}this._dirtCount-=n}yield null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null})}vacuumConditionsMet(t){if(t==null)return!0;let{minDirtCount:o,minDirtFactor:n}=t;return o=o||Pn.minDirtCount,n=n||Pn.minDirtFactor,this.dirtCount>=o&&this.dirtFactor>=n}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(t){return this._idToShortId.has(t)}getStoredFields(t){let o=this._idToShortId.get(t);if(o!=null)return this._storedFields.get(o)}search(t,o={}){let{searchOptions:n}=this._options,r=Object.assign(Object.assign({},n),o),i=this.executeQuery(t,o),a=[];for(let[u,{score:d,terms:l,match:m}]of i){let p=l.length||1,g={id:this._documentIds.get(u),score:d*p,terms:Object.keys(m),queryTerms:l,match:m};Object.assign(g,this._storedFields.get(u)),(r.filter==null||r.filter(g))&&a.push(g)}return t===e.wildcard&&r.boostDocument==null||a.sort(gi),a}autoSuggest(t,o={}){o=Object.assign(Object.assign({},this._options.autoSuggestOptions),o);let n=new Map;for(let{score:i,terms:a}of this.search(t,o)){let u=a.join(" "),d=n.get(u);d!=null?(d.score+=i,d.count+=1):n.set(u,{score:i,terms:a,count:1})}let r=[];for(let[i,{score:a,terms:u,count:d}]of n)r.push({suggestion:i,terms:u,score:a/d});return r.sort(gi),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(t,o){if(o==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(t),o)}static loadJSONAsync(t,o){return bo(this,void 0,void 0,function*(){if(o==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(t),o)})}static getDefault(t){if(wn.hasOwnProperty(t))return vn(wn,t);throw new Error(`MiniSearch: unknown option "${t}"`)}static loadJS(t,o){let{index:n,documentIds:r,fieldLength:i,storedFields:a,serializationVersion:u}=t,d=this.instantiateMiniSearch(t,o);d._documentIds=ho(r),d._fieldLength=ho(i),d._storedFields=ho(a);for(let[l,m]of d._documentIds)d._idToShortId.set(m,l);for(let[l,m]of n){let p=new Map;for(let g of Object.keys(m)){let S=m[g];u===1&&(S=S.ds),p.set(parseInt(g,10),ho(S))}d._index.set(l,p)}return d}static loadJSAsync(t,o){return bo(this,void 0,void 0,function*(){let{index:n,documentIds:r,fieldLength:i,storedFields:a,serializationVersion:u}=t,d=this.instantiateMiniSearch(t,o);d._documentIds=yield Ao(r),d._fieldLength=yield Ao(i),d._storedFields=yield Ao(a);for(let[m,p]of d._documentIds)d._idToShortId.set(p,m);let l=0;for(let[m,p]of n){let g=new Map;for(let S of Object.keys(p)){let y=p[S];u===1&&(y=y.ds),g.set(parseInt(S,10),yield Ao(y))}++l%1e3===0&&(yield Pi(0)),d._index.set(m,g)}return d})}static instantiateMiniSearch(t,o){let{documentCount:n,nextId:r,fieldIds:i,averageFieldLength:a,dirtCount:u,serializationVersion:d}=t;if(d!==1&&d!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");let l=new e(o);return l._documentCount=n,l._nextId=r,l._idToShortId=new Map,l._fieldIds=i,l._avgFieldLength=a,l._dirtCount=u||0,l._index=new Oe,l}executeQuery(t,o={}){if(t===e.wildcard)return this.executeWildcardQuery(o);if(typeof t!="string"){let g=Object.assign(Object.assign(Object.assign({},o),t),{queries:void 0}),S=t.queries.map(y=>this.executeQuery(y,g));return this.combineResults(S,g.combineWith)}let{tokenize:n,processTerm:r,searchOptions:i}=this._options,a=Object.assign(Object.assign({tokenize:n,processTerm:r},i),o),{tokenize:u,processTerm:d}=a,p=u(t).flatMap(g=>d(g)).filter(g=>!!g).map(Is(a)).map(g=>this.executeQuerySpec(g,a));return this.combineResults(p,a.combineWith)}executeQuerySpec(t,o){let n=Object.assign(Object.assign({},this._options.searchOptions),o),r=(n.fields||this._options.fields).reduce((k,A)=>Object.assign(Object.assign({},k),{[A]:vn(n.boost,A)||1}),{}),{boostDocument:i,weights:a,maxFuzzy:u,bm25:d}=n,{fuzzy:l,prefix:m}=Object.assign(Object.assign({},fi.weights),a),p=this._index.get(t.term),g=this.termResults(t.term,t.term,1,t.termBoost,p,r,i,d),S,y;if(t.prefix&&(S=this._index.atPrefix(t.term)),t.fuzzy){let k=t.fuzzy===!0?.2:t.fuzzy,A=k<1?Math.min(u,Math.round(t.term.length*k)):k;A&&(y=this._index.fuzzyGet(t.term,A))}if(S)for(let[k,A]of S){let b=k.length-t.term.length;if(!b)continue;y?.delete(k);let I=m*k.length/(k.length+.3*b);this.termResults(t.term,k,I,t.termBoost,A,r,i,d,g)}if(y)for(let k of y.keys()){let[A,b]=y.get(k);if(!b)continue;let I=l*k.length/(k.length+b);this.termResults(t.term,k,I,t.termBoost,A,r,i,d,g)}return g}executeWildcardQuery(t){let o=new Map,n=Object.assign(Object.assign({},this._options.searchOptions),t);for(let[r,i]of this._documentIds){let a=n.boostDocument?n.boostDocument(i,"",this._storedFields.get(r)):1;o.set(r,{score:a,terms:[],match:{}})}return o}combineResults(t,o=Cn){if(t.length===0)return new Map;let n=o.toLowerCase(),r=Ps[n];if(!r)throw new Error(`Invalid combination operator: ${o}`);return t.reduce(r)||new Map}toJSON(){let t=[];for(let[o,n]of this._index){let r={};for(let[i,a]of n)r[i]=Object.fromEntries(a);t.push([o,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:t,serializationVersion:2}}termResults(t,o,n,r,i,a,u,d,l=new Map){if(i==null)return l;for(let m of Object.keys(a)){let p=a[m],g=this._fieldIds[m],S=i.get(g);if(S==null)continue;let y=S.size,k=this._avgFieldLength[g];for(let A of S.keys()){if(!this._documentIds.has(A)){this.removeTerm(g,A,o),y-=1;continue}let b=u?u(this._documentIds.get(A),o,this._storedFields.get(A)):1;if(!b)continue;let I=S.get(A),T=this._fieldLength.get(A)[g],M=xs(I,y,this._documentCount,T,k,d),N=n*r*p*b*M,D=l.get(A);if(D){D.score+=N,Cs(D.terms,t);let K=vn(D.match,o);K?K.push(m):D.match[o]=[m]}else l.set(A,{score:N,terms:[t],match:{[o]:[m]}})}}return l}addTerm(t,o,n){let r=this._index.fetch(n,yi),i=r.get(t);if(i==null)i=new Map,i.set(o,1),r.set(t,i);else{let a=i.get(o);i.set(o,(a||0)+1)}}removeTerm(t,o,n){if(!this._index.has(n)){this.warnDocumentChanged(o,t,n);return}let r=this._index.fetch(n,yi),i=r.get(t);i==null||i.get(o)==null?this.warnDocumentChanged(o,t,n):i.get(o)<=1?i.size<=1?r.delete(t):i.delete(o):i.set(o,i.get(o)-1),this._index.get(n).size===0&&this._index.delete(n)}warnDocumentChanged(t,o,n){for(let r of Object.keys(this._fieldIds))if(this._fieldIds[r]===o){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(t)} has changed before removal: term "${n}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(t){let o=this._nextId;return this._idToShortId.set(t,o),this._documentIds.set(o,t),this._documentCount+=1,this._nextId+=1,o}addFields(t){for(let o=0;o<t.length;o++)this._fieldIds[t[o]]=o}addFieldLength(t,o,n,r){let i=this._fieldLength.get(t);i==null&&this._fieldLength.set(t,i=[]),i[o]=r;let u=(this._avgFieldLength[o]||0)*n+r;this._avgFieldLength[o]=u/(n+1)}removeFieldLength(t,o,n,r){if(n===1){this._avgFieldLength[o]=0;return}let i=this._avgFieldLength[o]*n-r;this._avgFieldLength[o]=i/(n-1)}saveStoredFields(t,o){let{storeFields:n,extractField:r}=this._options;if(n==null||n.length===0)return;let i=this._storedFields.get(t);i==null&&this._storedFields.set(t,i={});for(let a of n){let u=r(o,a);u!==void 0&&(i[a]=u)}}};Ne.wildcard=Symbol("*");var vn=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0,Ps={[Cn]:(e,t)=>{for(let o of t.keys()){let n=e.get(o);if(n==null)e.set(o,t.get(o));else{let{score:r,terms:i,match:a}=t.get(o);n.score=n.score+r,n.match=Object.assign(n.match,a),Si(n.terms,i)}}return e},[wi]:(e,t)=>{let o=new Map;for(let n of t.keys()){let r=e.get(n);if(r==null)continue;let{score:i,terms:a,match:u}=t.get(n);Si(r.terms,a),o.set(n,{score:r.score+i,terms:r.terms,match:Object.assign(r.match,u)})}return o},[ws]:(e,t)=>{for(let o of t.keys())e.delete(o);return e}},Ts={k:1.2,b:.7,d:.5},xs=(e,t,o,n,r,i)=>{let{k:a,b:u,d}=i;return Math.log(1+(o-t+.5)/(t+.5))*(d+e*(a+1)/(e+a*(1-u+u*n/r)))},Is=e=>(t,o,n)=>{let r=typeof e.fuzzy=="function"?e.fuzzy(t,o,n):e.fuzzy||!1,i=typeof e.prefix=="function"?e.prefix(t,o,n):e.prefix===!0,a=typeof e.boostTerm=="function"?e.boostTerm(t,o,n):1;return{term:t,fuzzy:r,prefix:i,termBoost:a}},wn={idField:"id",extractField:(e,t)=>e[t],tokenize:e=>e.split(Es),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,t)=>{typeof console?.[e]=="function"&&console[e](t)},autoVacuum:!0},fi={combineWith:Cn,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:Ts},Ls={combineWith:wi,prefix:(e,t,o)=>t===o.length-1},xn={batchSize:1e3,batchWait:10},In={minDirtFactor:.1,minDirtCount:20},Pn=Object.assign(Object.assign({},xn),In),Cs=(e,t)=>{e.includes(t)||e.push(t)},Si=(e,t)=>{for(let o of t)e.includes(o)||e.push(o)},gi=({score:e},{score:t})=>t-e,yi=()=>new Map,ho=e=>{let t=new Map;for(let o of Object.keys(e))t.set(parseInt(o,10),e[o]);return t},Ao=e=>bo(void 0,void 0,void 0,function*(){let t=new Map,o=0;for(let n of Object.keys(e))t.set(parseInt(n,10),e[n]),++o%1e3===0&&(yield Pi(0));return t}),Pi=e=>new Promise(t=>setTimeout(t,e)),Es=/[\n\r\p{Z}\p{P}]+/u;var Re=x(E()),_f=(e,t,o,n=!1)=>{let r=(0,Re.useMemo)(()=>n?null:new Yr(e,o),[e,o,n]);return(0,Re.useMemo)(()=>n||!r?e:t?r.search(t).map(a=>a.item):e,[r,e,t,n])},Mf=(e,t,o,n=!1)=>{let r=(0,Re.useMemo)(()=>{if(n)return null;let a=new Ne(o);return a.addAll(e),a},[e,o,n]);return(0,Re.useMemo)(()=>n||!r?e:t?r.search(t).map(a=>a):e,[r,e,t,n])};s();c();var fe=(e,t)=>{let o=t?.format??"0,0.00%";return`${(t?.includePlusPrefix??!1)&&e>0?"+":""}${(0,Kr.default)(e).format(e===0?"0%":o)}`};s();c();s();c();var wo=x(Xa(),1);var xi=x(pr(),1);var Ti=(0,wo.struct)([(0,wo.u8)("instruction"),Mr("amount")]);function En(e,t,o,n,r=[],i=we){let a=Ur([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1}],o,r),u=Buffer.alloc(Ti.span);return Ti.encode({instruction:Br.Approve,amount:BigInt(n)},u),new xi.TransactionInstruction({keys:a,programId:i,data:u})}var Ii=new h.PublicKey("Config1111111111111111111111111111111111111"),_s="https://docs.solana.com/staking",Ms="https://help.phantom.com/hc/en-us/articles/4406379756307-Why-is-my-stake-still-activating-or-deactivating",ut={type:"SolanaNative",data:{amount:"0",balance:new Q(0),chain:{id:U.solana.mainnetID,imageUrl:U.solana.iconUrl,name:U.solana.name,symbol:U.solana.tokenSymbol},decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"NOT_VERIFIED"}},Li=new Map([[xt.Solana.Mainnet,ut]]);var Fn="https://www.jito.network/staking/?mode=unstake",_n="https://help.phantom.com/hc/en-us/articles/29846774040467",Bs="https://www.jito.network/blog/reward-bearing-vs-rebasing-solana-liquid-staking-tokens/",Mn="https://help.phantom.com/hc/en-us/articles/41210373532307";var Bn="https://app.kamino.finance/lending/reserve/7u3HeHxYDLhnCoErrtycNokbQYbWGzLs6JSDqGAv5PfF/HV9KsS5mB4b9CFhDJVKdfxWBAomYfUk5PeUsdgMQsUrB",oe="solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",Po=4e6,De=2282880;s();c();function Ci(e,t){let o=new V(e/100),n=new V(t/100);return o.minus(o.times(n)).times(100).decimalPlaces(2).toNumber()}s();c();s();c();s();c();var X="staking";var Un=[X,"stakeAccounts"],On=[X,"stakeActivationData"],Nn=[X,"convertStakeAccountList"],Rn=[X,"convertStakeTransaction"],Dn=[X,"mintTokenTransaction"],Us=[X,"withdrawLiquidStakeTransaction"],qn="averageValidatorApy",Os="recommendedValidators",Ns="signatureStatus",Rs="stakeAccountMinBalance",Ds="stakeRewardsHistory",qs="stakeApy",Vs="validatorInfo",Ks="voteAccounts",Ws="keybaseUserAvatar",O={keybaseUserAvatar(e){return[X,Ws,e]},signatureStatus(e){return[X,Ns,e]},stakeAccounts(e,t){return[...Un,e,t]},stakeAccountMinBalance(){return[X,Rs]},stakeActivationData(e){return[...On,e]},stakeRewardsHistory(e){return[X,Ds,e]},stakeApy(){return[X,qs]},averageValidatorApy(){return[X,qn]},recommendedValidators(){return[X,Os]},validatorInfo(){return[X,Vs]},voteAccounts(e){return[X,Ks,e]},convertStakeAccountList(e,t){return[...Nn,e,t]},liquidStakingSupportedTokens(){return[X,"liquidStakingSupportedTokens"]},getConvertStakeTransaction(e){return[...Rn,e]},getMintTokenTransaction(e){return[...Dn,e]},getWithdrawLiquidStakeTransaction(e){return[...Us,e]},featureUsed(){return[X,"featureUsed"]}};var qe=e=>()=>{e.invalidateQueries({predicate:t=>{let o=n=>n.every((r,i)=>t.queryKey[i]===r);return o(Un)||o(On)||o(Nn)||o(Rn)||o(Dn)}})};s();c();function To(e,t=9){return e.match(new RegExp(`^\\d*(\\.\\d{0,${t}})?$`))}s();c();var Ei={type:"fungible",isNativeOfType:"sol",chain:"solana",name:"Solana",symbol:"SOL",iconUrl:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",decimals:9},zs="stake",Fi=e=>new Vn(e,zs),Vn=class extends Pe{createStakeAccountAndDelegateStake=t=>{this.analytics.capture("createStakeAccountAndDelegateStake",{data:{...t,...Ei}})};deactivateStake=()=>{this.analytics.capture("deactivateStake",{data:{...Ei}})}};var Qs=Er(It,e=>Fi(e));s();c();var xo=x(E());s();c();var Mi=(e,t)=>e+t[1];function Bi(e){let t=Gs(e),o={commissionWeight:.6,epochCreditsWeight:.1,activatedStakeWeight:.3},n=Hs(t.maxEpochCredits,t.maxActivatedStake,o);return e.sort(n)}function Gs(e){let t={maxEpochCredits:0,maxActivatedStake:0};for(let o of e){let n=o.epochCredits.reduce(Mi,0);t.maxEpochCredits<n&&(t.maxEpochCredits=n),t.maxActivatedStake<o.activatedStake&&(t.maxActivatedStake=o.activatedStake)}return t}function js(e,t,o,n,r){let i=(100-e)/100,a=t/o,u=Math.log10(n+1)/Math.log10(r+1);return{normalizedCommission:i,normalizedEpochCredits:a,normalizedActivatedStake:u}}function _i(e,t,o,n){let{commission:r,epochCredits:i,activatedStake:a}=e,{commissionWeight:u,epochCreditsWeight:d,activatedStakeWeight:l}=n,{normalizedCommission:m,normalizedEpochCredits:p,normalizedActivatedStake:g}=js(r,i.reduce(Mi,0),t,a,o);return(r>10?.5:1)*(u*m+d*p+l*g)}function Hs(e,t,o){return(n,r)=>{let i=_i(n,e,t,o);return _i(r,e,t,o)-i}}s();c();s();c();var Ve=(r=>(r[r.Always=1/0]="Always",r[r.Short=G({days:1})]="Short",r[r.Medium=G({days:3})]="Medium",r[r.Long=G({days:7})]="Long",r))(Ve||{}),vt=(i=>(i[i.Immediate=0]="Immediate",i[i.Short=G({minutes:1})]="Short",i[i.Medium=G({minutes:2.5})]="Medium",i[i.Long=G({minutes:5})]="Long",i[i.Never=1/0]="Never",i))(vt||{});var Js=e=>async()=>(await e.getParsedProgramAccounts(Ii)).reduce((o,n)=>{if(n.account.data.parsed?.type!=="validatorInfo")return o;let r=n.pubkey.toString(),i=n.account.data.parsed.info.keys,[,a]=i;if(!a.signer)return o;let u=a.pubkey,d=n.account.data.parsed.info.configData;return o.push({identityPubkey:u,infoPubkey:r,info:d}),o},[]);function Kn(e){let t=O.validatorInfo(),o=Js(e);return C({queryKey:t,queryFn:o,placeholderData:[],staleTime:1/0})}s();c();var Ys=async e=>{let t=await e.getVoteAccounts();return[...t.current,...t.delinquent].map(o=>({identityPubkey:o.nodePubkey,voteAccountPubkey:o.votePubkey,commission:o.commission,lastVote:o.lastVote,epochCredits:o.epochCredits,activatedStake:o.activatedStake})).filter(o=>o.commission<99)};function Wn(e){let t=O.voteAccounts(e.rpcEndpoint);return C({queryKey:t,queryFn:async()=>Ys(e),placeholderData:[],staleTime:1/0})}function Ie(e){let{isFetched:t,isFetching:o,isPending:n,isSuccess:r,isError:i,dataUpdatedAt:a,errorUpdatedAt:u,error:d,refetch:l,data:m}=Wn(e),p=Math.max(a,u),{isFetched:g,isFetching:S,isPending:y,isSuccess:k,isError:A,dataUpdatedAt:b,errorUpdatedAt:I,error:T,refetch:M,data:N}=Kn(e),D=Math.max(b,I),K=Math.max(p,D),F=t&&g,Z=o||S,at=r||k,tt=i||A,et=d||T,Tt=n||y,Ut=(0,xo.useCallback)(async()=>{Promise.all([l(),M()])},[M,l]);return{results:(0,xo.useMemo)(()=>{if(!m)return[];if(!N)return[];let Jt=Bi(m),zt=new Map(Jt.map(q=>[q.identityPubkey,q])),Yt=new Map(N.map(q=>[q.identityPubkey,q])),Qt=[];for(let[q,mt]of zt){let W=Yt.get(q);Qt.push({...mt,...W})}return Qt},[N,m]),dataUpdatedAt:K,error:et,isSuccess:at,isError:tt,isFetched:F,isFetching:Z,isPending:Tt,refetch:Ut}}s();c();function zn(e){let t=!!e?.info.meta.lockup,o=new Date((e?.info.meta.lockup?.unixTimestamp??0)*1e3);return t&&o.getTime()>Date.now()}s();c();var Eo=x(E());s();c();var Di=x(E());s();c();var $s="https://keybase.io/_/api/1.0/user/pic_url.json",Io=async e=>{let t=await kt.get(`${$s}?username=${encodeURIComponent(e)}`);if(!Xt(t)||t.data.status?.code!==0)throw new Error("Couldn't fetch keybase user avatar");return t.data.pic_url};s();c();s();c();s();c();function Lo(e,t){for(let o of t)if(o.epoch===e)return o;return null}var Ui=.09;function Xs(e,t,o){if(e.activationEpoch===e.deactivationEpoch)return{effective:BigInt(0),activating:BigInt(0)};if(t===e.activationEpoch)return{effective:BigInt(0),activating:e.stake};if(t<e.activationEpoch)return{effective:BigInt(0),activating:BigInt(0)};let n=e.activationEpoch,r=Lo(n,o);if(r!==null){let i=BigInt(0);for(;r!==null;){n++;let a=e.stake-i,u=Number(a)/Number(r.activating),d=Number(r.effective)*Ui,l=BigInt(Math.max(1,Math.round(u*d)));if(i+=l,i>=e.stake){i=e.stake;break}if(n>=t||n>=e.deactivationEpoch)break;r=Lo(n,o)}return{effective:i,activating:e.stake-i}}else return{effective:e.stake,activating:BigInt(0)}}function Oi(e,t,o){let{effective:n,activating:r}=Xs(e,t,o);if(t<e.deactivationEpoch)return{effective:n,activating:r,deactivating:BigInt(0)};if(t==e.deactivationEpoch)return{effective:n,activating:BigInt(0),deactivating:n};let i=e.deactivationEpoch,a=Lo(i,o);if(a!==null){let u=n;for(;a!==null&&(i++,a.deactivating!==BigInt(0));){let d=Number(u)/Number(a.deactivating),l=Number(a.effective)*Ui,m=BigInt(Math.max(1,Math.round(d*l)));if(u-=m,u<=0){u=BigInt(0);break}if(i>=t)break;a=Lo(i,o)}return{effective:u,deactivating:u,activating:BigInt(0)}}else return{effective:BigInt(0),activating:BigInt(0),deactivating:BigInt(0)}}s();c();var Ni=function(e){if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");let t=[];return e.value.data.parsed.info.forEach(o=>{t.push({epoch:BigInt(o.epoch),effective:BigInt(o.stakeHistory.effective),activating:BigInt(o.stakeHistory.activating),deactivating:BigInt(o.stakeHistory.deactivating)})}),t},Ri=function(e){let t=BigInt(0);if(e.value===null||e.value.data instanceof Buffer)throw new Error("Account not found");return e.value.data.parsed.type==="delegated"&&(t=BigInt(1)),{discriminant:t,meta:{rentExemptReserve:BigInt(e.value.data.parsed.info.meta.rentExemptReserve),authorized:{staker:e.value.data.parsed.info.meta.authorized.staker,withdrawer:e.value.data.parsed.info.meta.authorized.withdrawer},lockup:{unixTimestamp:BigInt(e.value.data.parsed.info.meta.lockup.unixTimestamp),epoch:BigInt(e.value.data.parsed.info.meta.lockup.epoch),custodian:e.value.data.parsed.info.meta.lockup.custodian}},stake:{delegation:{voterPubkey:e.value.data.parsed.info.stake.delegation.voterPubkey,stake:BigInt(e.value.data.parsed.info.stake.delegation.stake),activationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.activationEpoch),deactivationEpoch:BigInt(e.value.data.parsed.info.stake.delegation.deactivationEpoch)},creditsObserved:BigInt(e.value.data.parsed.info.stake.creditsObserved)}}};async function Ke(e,t){let o=new h.PublicKey("SysvarStakeHistory1111111111111111111111111"),n=await e.getParsedAccountInfo(t);if(n===null||n.value===null)throw new Error("Account not found");let r=await e.getParsedAccountInfo(o);if(r===null)throw new Error("StakeHistory not found");let i=Ni(r),a=await e.getEpochInfo(),u=Ri(n),{effective:d,activating:l,deactivating:m}=Oi(u.stake.delegation,BigInt(a.epoch),i),p;m>0?p="deactivating":l>0?p="activating":d>0?p="active":p="inactive";let g=BigInt(n.value.lamports)-d-u.meta.rentExemptReserve;return{state:p,active:Number(d),inactive:Number(g)}}var Zs=e=>{let t=[];return e.ownerPublicKey&&t.push({memcmp:{offset:44,bytes:e.ownerPublicKey}}),e.voteAccountPublicKey&&t.push({dataSize:200},{memcmp:{offset:124,bytes:e.voteAccountPublicKey}}),t},qi=async(e,t,o)=>{let n=Zs(t),r=await e.getParsedProgramAccounts(h.StakeProgram.programId,{filters:n}),a=(await Promise.allSettled(r.map(l=>Ke(e,l.pubkey)))).map(l=>{if(l.status==="fulfilled")return l.value.state}),d=(await Promise.allSettled(r.map(l=>{let m=l.account.data?.parsed?.info?.stake?.delegation?.voter,p=o.get(m),g=p?.info?.keybaseUsername,S=p?.info?.iconUrl;return S?new Promise(y=>y(S)):g?Io(g):new Promise(y=>y(null))}))).map(l=>{if(l.status==="fulfilled"&&l.value!==null)return l.value});return r.map((l,m)=>({pubkey:l.pubkey.toString(),lamports:l.account.lamports,activationState:a[m],imageUri:d[m],...l.account.data.parsed}))},Vi=(e,t)=>O.convertStakeAccountList(e,t),tc=(e,t,o)=>()=>qi(e,{ownerPublicKey:t},o);function Ki(e,t,o,n=!0){let r=Vi(t,e.rpcEndpoint),i=tc(e,t,o);return C({queryKey:r,queryFn:i,enabled:!!t&&n,staleTime:1/0})}var Wi=(e,t,o,n)=>{let r=nt();return(0,Di.useCallback)(async()=>{n&&await r.prefetchQuery({queryKey:Vi(t,e.rpcEndpoint),queryFn:()=>qi(e,{ownerPublicKey:t},o)})},[r,t,e,o,n])};s();c();var wt=x(E()),Co=null,ec=e=>{if(!Co&&e){let t="liquidStake";Co=new Pe(e,t)}if(!Co)throw new Error("liquidStakeAnalytics was not properly configured");return Co},Et=()=>{let e=It(),t=ec(e),o=(0,wt.useCallback)((S,y)=>{e.capture("liquidStakingConvertAccountClicked",{data:{stake:{validatorName:S,stakeAccountBalance:y}}})},[e]),n=(0,wt.useCallback)(S=>{e.capture("liquidStakingConvertAccountListSeen",{data:{stake:{stakeAccounts:S}}})},[e]),r=(0,wt.useCallback)(()=>{e.capture("liquidStakingConvertBannerClicked")},[e]),i=(0,wt.useCallback)(()=>{e.capture("liquidStakingConvertBannerSeen")},[e]),a=(0,wt.useCallback)(()=>{e.capture("liquidStakingConvertModalContinue")},[e]),u=(0,wt.useCallback)(()=>{e.capture("liquidStakingConvertModalNotNow")},[e]),d=(0,wt.useCallback)(({provider:S,convertDetails:y,amount:k,fromAmount:A,toAmount:b,fromAmountUSD:I,toAmountUSD:T})=>{e.capture("liquidStakingConvertApprovedByUser",{data:{stake:{stakePoolAddress:S?.stakePoolAddress,token:S?.stakePoolTokenMetadata.metadata.name,fromAmount:A,toAmount:b,fromAmountUSD:I,toAmountUSD:T,apy:S?.apy,convertRatio:S?.convertRatio,caip19:S?.stakePoolTokenMetadata.caip19,validatorName:y?.validatorName,stakeAccountBalance:k}}})},[e]),l=(0,wt.useCallback)(S=>{t.submittedTransaction(S,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),m=(0,wt.useCallback)(({amount:S,convertDetails:y,provider:k})=>{e.capture("liquidStakingConvertSuccess",{data:{stake:{apy:k?.apy,convertRatio:k?.convertRatio,caip19:k?.stakePoolTokenMetadata.caip19,stakePoolAddress:k?.stakePoolAddress,token:k?.stakePoolTokenMetadata.metadata.name,totalAmount:S,validatorName:y?.validatorName}}})},[e]),p=(0,wt.useCallback)(({amount:S,convertDetails:y})=>{e.capture("liquidStakingConvertFailed",{data:{stake:{validatorName:y?.validatorName,stakeAccountBalance:S}}})},[e]),g=(0,wt.useCallback)(()=>{e.capture("liquidStakingConvertMoreClicked")},[e]);return{trackConvertStakeAccountClicked:o,trackConvertStakeAccountListSeen:n,trackConvertBannerClicked:r,trackConvertBannerSeen:i,trackConvertModalContinue:a,trackConvertModalNotNow:u,trackConvertApprovedByUser:d,trackConvertFailed:p,trackConvertSubmitted:l,trackConvertSuccess:m,trackConvertMoreClicked:g}};var oc=()=>{let{connection:e}=Lt(),{data:t}=ft("solana"),{trackConvertModalContinue:o,trackConvertModalNotNow:n}=Et(),{results:r,isFetched:i}=Ie(e),a=(0,Eo.useMemo)(()=>new Map(r.map(d=>[d.voteAccountPubkey,d])),[r]),u=Wi(e,t?.address??"",a,i);return(0,Eo.useEffect)(()=>{u()},[u]),{trackConvertModalContinue:o,trackConvertModalNotNow:n}};s();c();s();c();var ze=x(E());s();c();s();c();s();c();var We=L.object({apy:L.number()}),nc=L.object({validators:L.array(L.string())}),zi=L.object({epoch:L.number(),effectiveSlot:L.number(),amount:L.number(),postBalance:L.number(),percentChange:L.number(),apr:L.number(),timestamp:L.number()}),rc=L.object({items:L.array(zi)}),ic=L.object({address:L.string(),chainId:on,decimals:L.number(),logoURI:L.string(),name:L.string(),symbol:L.string()}),ac=L.object({caip19:L.string(),metadata:ic}),sc=L.object({vote_account:L.string()}),cc=L.object({apy:L.string(),totalRewardsFeePercentage:L.string().optional(),chainId:on,convertRatio:L.string(),name:L.string(),stakePoolAddress:L.string(),stakePoolTokenMetadata:ac,validators:L.array(sc)}),Qi=L.record(L.string(),L.array(cc)),Xg=L.object({totalStaked:L.string(),rewards:L.string()});var Gi=new Error("Failed to fetch Average Validator APY");async function ji(){let e=await kt.api().get("/staking/v1/avg-validator-apy");if(!Xt(e))throw Gi;let t=We.safeParse(e.data);if(t.success)return t.data.apy;throw Gi}var Hi=()=>{let e=O.averageValidatorApy();return C({enabled:!0,queryKey:e,gcTime:G({hours:1}),staleTime:1/0,async queryFn(){return ji()}})};s();c();s();c();var Ji=new Error("Failed to fetch liquid staking supported tokens"),uc=new Error("Missing supported tokens in response");async function Yi(){try{let e=await kt.api().get("/liquid-staking/v1/supported-tokens");if(!Xt(e))throw Ji;let t=Qi.safeParse(e.data.supportedTokens);if(!t.success)throw uc;return t.data}catch{throw Ji}}var Fo=()=>{let e=O.liquidStakingSupportedTokens();return C({queryKey:e,staleTime:G({minutes:15}),async queryFn(){return await Yi()}})};var $i=e=>{let t=(0,ze.useMemo)(()=>e?Zt(Nt(e)):"",[e]),{data:o,isPending:n}=Hi(),r=o?o/100:null,{data:i={},isPending:a}=Fo(),u=(0,ze.useMemo)(()=>i[t]??[],[t,i]),d=u?u[0]:void 0,l=(0,ze.useCallback)((m,p=!1)=>m?u.find(g=>g.stakePoolTokenMetadata.caip19===m):p?void 0:d,[d,u]);return{isLoading:a||n,isSupported:u.length>0,providers:u,pickedLSTProvider:l,defaultProvider:d,avgValidatorApy:r}};var Ft=e=>{let t=Li.get(e);return $i(t)};s();c();var Xi=x(E());s();c();var Qe=x(E());s();c();var Qn=e=>zn(e)?!1:e.activationState==="inactive";var Ge=e=>{let t=Ot("enable-psol-native-convert"),{connection:o}=Lt(),{data:n}=ft("solana"),{results:r,isFetched:i,isError:a}=Ie(o),u=(0,Qe.useMemo)(()=>new Map(r.map(b=>[b.voteAccountPubkey,b])),[r]),{data:d,isLoading:l,isFetching:m,error:p,refetch:g}=Ki(o,n?.address??"",u,i||a),S=l||m,y=(0,Qe.useMemo)(()=>S||!d?[]:d.map(b=>lc(b,u)).sort((b,I)=>b.lamports>I.lamports?-1:1),[S,d,u]),k=(0,Qe.useMemo)(()=>y.filter(b=>b.eligible),[y]),A=(0,Qe.useMemo)(()=>y.filter(b=>!b.eligible),[y]);return e?.stakePoolTokenMetadata.caip19!==B?{hasConvertibleStakeAccounts:!1,eligibleStakeAccounts:[],inelegibleStakeAccounts:[],isLoadingList:S,error:p,refetch:g}:{hasConvertibleStakeAccounts:t&&k.length>0,eligibleStakeAccounts:k,inelegibleStakeAccounts:A,isLoadingList:S,error:p,refetch:g}},lc=(e,t)=>{let o=Qn(e),n=pc(e,t),r=e.lamports;return{...e,amount:r,eligible:o,title:n,imageUri:e.imageUri}},pc=(e,t)=>{let o="";if(e.type==="delegated"){let{voter:n}=e.info.stake.delegation,r=t.get(n),i=r?.info?.keybaseUsername;o=r?.info?.name??i??xr(n)}else e.type==="initialized"&&(o=e.pubkey);return o};s();c();var Gn=()=>{let e=jn();if(!e)throw new Error("PSOL provider not found");return e},jn=()=>{let{pickedLSTProvider:e}=Ft(U.solana.mainnetID);return e(B,!0)};s();c();s();c();var je={transactionData:void 0,provider:void 0,convert:{validatorVote:"",stakeAccount:"",validatorName:"",eligibleAccountsCount:0,activationState:void 0},amount:"",navigateTo:null},_=Fr(e=>({...je,resetStaking:()=>e(t=>({...t,amount:je.amount,transactionData:je.transactionData,convert:je.convert,navigateTo:je.navigateTo})),setTransactionData:t=>e({transactionData:t}),setProvider:t=>e({provider:t}),setConvertStakeAccount:t=>e({convert:t}),setAmount:t=>e({amount:t}),setNavigateTo:t=>e({navigateTo:t})}));var _o=e=>{let t=_(u=>u.setConvertStakeAccount),o=_(u=>u.setAmount),{trackConvertStakeAccountClicked:n}=Et(),r=Gn(),{eligibleStakeAccounts:i}=Ge(r);return(0,Xi.useCallback)(({stakeAccount:u,validatorName:d,activationState:l})=>{let m=u?.info?.stake?.delegation?.voter??"",p=`${u?.lamports??"0"}`;t({validatorVote:m,stakeAccount:u.pubkey,validatorName:d??"",activationState:l,eligibleAccountsCount:i.length}),o(p),n(d??"",p),e()},[n,e,t,o,i.length])};s();c();var He=x(E());var mc=e=>{let t=ut,{pickedLSTProvider:o}=Ft(U.solana.mainnetID),n=o(B,!0),{trackConvertStakeAccountListSeen:r}=Et(),{error:i,refetch:a,isLoadingList:u,eligibleStakeAccounts:d,inelegibleStakeAccounts:l}=Ge(n);(0,He.useEffect)(()=>{u||r([...d,...l].map(S=>({title:S.title,amount:S.amount,eligible:S.eligible})))},[r,d,l,u]);let m=_o(e),p=(0,He.useCallback)(S=>{m({stakeAccount:S,validatorName:S.title,activationState:S.activationState})},[m]),g=(0,He.useCallback)(()=>{a()},[a]);return{isLoading:u,error:i,eligibleStakeAccounts:d,inelegibleStakeAccounts:l,onReload:g,onSelectStakeAccount:p,tokenSymbol:t?.data.symbol??"",tokenDecimals:t?.data.decimals??0}};s();c();var Zi=x(E());function fc(e){return typeof e=="string"?e:e?Zt(Nt(e)):""}var Kt=e=>{let t=fc(e),o=Ot("enable-psol-staking"),{data:n={}}=Fo(),r=(0,Zi.useMemo)(()=>!!Object.values(n).flat().find(a=>a.stakePoolTokenMetadata.caip19===t),[t,n]);return t===B?o&&r:r};s();c();var ne=()=>{let{data:e}=Xr(),t=e==="GB",o=Ot("enable-uk-staking-disclaimers"),n=Ot("enable-uk-staking-override"),r=Kt(B);return n?!0:o&&t&&r};s();c();var it=x(E());s();c();var ta=x(E());var Mo=({txReceipt:e,isTxError:t,poolTokenFungible:o,invalidateQueries:n,dismissLiquidStaking:r})=>{let i=_(u=>u.resetStaking),a=_(u=>u.setNavigateTo);return(0,ta.useCallback)(()=>{if(i(),!e||t)return r();n(),a(o?{screen:"FungibleDetail",caip19:Zt(Nt(o))}:{screen:"Activity"}),r()},[e,t,o,n,r,a,i])};s();c();var Bo=x(E());s();c();var Xk=new Error("Missing sender address for staking fungibles."),ea=new Error("Missing signature from waiting for staking transaction confirmation."),oa=new Error("PublicKey is required");var Se=class extends Error{constructor(t){super(t)}};s();c();var na=({connection:e})=>{let t=H(),o=Tr();return ht({mutationFn:async({accountIdentifier:r,ownerAddress:i,pendingActivityRow:a,activityType:u,transactionData:{networkID:d,transaction:l,signers:m}})=>{if(U.isSolanaNetworkID(d)){await Sr(l,e);let p={ownerAddress:i,networkID:d,data:{signature:""},type:u,display:{summary:a}};return{id:await Rr({accountIdentifier:r,feePayer:new h.PublicKey(i),connection:e,accountSigner:o,transaction:l,pendingTransactionInput:p,storage:t,opts:{additionalSignerAccounts:m}}),networkID:d}}throw new Error(`Unsupported network for liquid staking: ${d}`)}})};function Uo({isLoadingPoolToken:e,pendingActivityRow:t,onTransactionSubmitted:o,onTransactionFailed:n,activityType:r}){let{connection:i}=Lt(),a=_(A=>A.transactionData),u=ut,{data:d,isLoading:l}=te(),{mutateAsync:m}=na({connection:i}),g=(0,Bo.useMemo)(()=>(d?.addresses??[]).find(A=>A.networkID===u?.data.chain.id),[u?.data.chain.id,d?.addresses])?.address??"",S=d?.identifier??"";return{executeLiquidStake:(0,Bo.useCallback)(async()=>{try{if(!a)throw new Se("MissingTransactionData");let A=await m({accountIdentifier:S,ownerAddress:g,pendingActivityRow:t,activityType:r,transactionData:a});o(A)}catch(A){n(A)}},[S,g,t,a,m,o,n,r]),isReadyToExecute:!l&&!e}}s();c();var ra=x(E());var Oo=()=>{let e=nt();return(0,ra.useCallback)(()=>qe(e)(),[e])},gc=(e,t,o)=>Nr({connection:e,signature:t,commitment:"finalized"}).then(()=>{qe(o)()});s();c();var No=x(E());s();c();function ia({key:e,queryKey:t,defaultValue:o=null}){let n=H();return C({enabled:!0,queryKey:t,gcTime:Ve.Long,staleTime:1/0,async queryFn(){try{return await n.get(e)}catch(r){return r instanceof Error&&j.captureError(r,"staking"),o}}})}function aa({key:e,queryKey:t}){let o=H(),n=nt();return ht({async mutationFn(r){try{return await o.set(e,r)}catch(i){i instanceof Error&&j.captureError(i,"staking");return}},async onMutate(r){await n.cancelQueries({queryKey:t});let i=n.getQueryData(t);return n.setQueryData(t,r),{previousValue:i}},onError(r,i,a){n.setQueryData(t,a?.previousValue)}})}var yc=L.object({convert:L.boolean(),mint:L.boolean()}),Hn={convert:!1,mint:!1},kc=JSON.stringify(Hn),Le=()=>{let{data:e}=ia({key:"featureUsed",queryKey:O.featureUsed(),defaultValue:kc}),t=(0,No.useMemo)(()=>{if(!e)return Hn;let r=yc.safeParse(JSON.parse(e));return r.success?r.data:Hn},[e]),{mutateAsync:o}=aa({key:"featureUsed",queryKey:O.featureUsed()}),n=(0,No.useCallback)(async r=>{let i={...t,...r};await o(JSON.stringify(i))},[o,t]);return{usageState:t,setUsageState:n}};s();c();function Ro(e){return e instanceof Se?e:new Se("UnknownError")}function Ac({stakedTokenSymbol:e,poolTokenSymbol:t,txHash:o,txError:n,confirmationStatus:r,eligibleAccountsCount:i,onDismiss:a,onConvertMore:u}){let d={title:v.t("commandClose"),onPress:a},l={title:v.t("convertStakeStatusConvertMore"),onPress:u},m={txHash:o,txHashTitle:v.t("commandViewTransaction")};return n?{type:"error",title:v.t("convertStakeStatusErrorTitle"),message:v.t("convertStakeStatusErrorMessage",{poolTokenSymbol:t}),...m,primaryButton:d,showUKDisclaimer:!1,openExternalLink:void 0}:r==="confirmed"?{type:"success",title:v.t("convertStakeStatusSuccessTitle",{poolTokenSymbol:t}),message:"",...m,...i>1?{primaryButton:l,secondaryButton:d}:{primaryButton:d},showUKDisclaimer:!1,openExternalLink:void 0}:{type:"loading",title:v.t("convertStakeStatusLoadingTitle",{poolTokenSymbol:t}),message:v.t("convertStakeStatusLoadingMessage",{stakedTokenSymbol:e,poolTokenSymbol:t}),...m,primaryButton:d,showUKDisclaimer:!1,openExternalLink:void 0}}var bc=({dismissConvertFlow:e,goToConvertAccountList:t})=>{let o=Oo(),[n,r]=(0,it.useState)("loading"),[i,a]=(0,it.useState)(),[u,d]=(0,it.useState)(),{trackConvertSubmitted:l,trackConvertSuccess:m,trackConvertFailed:p,trackConvertMoreClicked:g}=Et(),{usageState:S,setUsageState:y}=Le(),k=jn(),A=_(st=>st.convert),b=_(st=>st.amount),[I]=(0,it.useState)(A?.eligibleAccountsCount??0),T=_(st=>st.setConvertStakeAccount),M=_(st=>st.setTransactionData),N=ut,D=N?.data.symbol??"",K=k?.stakePoolTokenMetadata.metadata.symbol??"",F=k?.stakePoolTokenMetadata.metadata.address??"",{data:Z}=te(),at=Z?.type==="ledger",et=(0,it.useMemo)(()=>(Z?.addresses??[]).find(st=>st.networkID===N?.data.chain.id),[N?.data.chain.id,Z?.addresses])?.addressType??"solana",{fungible:Tt,isLoadingTokens:Ut}=Ct({key:F}),ke=(0,it.useCallback)(st=>{l(st.id),a(st),S.convert||y({convert:!0})},[y,l,S.convert]),Jt=(0,it.useCallback)(st=>{p({amount:b,convertDetails:A});let Ha=Ro(st);d(Ha)},[p,b,A]),zt=(0,it.useMemo)(()=>({topLeft:{text:v.t("convertStakePendingTitle",{symbol:K})}}),[K]),{executeLiquidStake:Yt,isReadyToExecute:Qt}=Uo({isLoadingPoolToken:Ut,pendingActivityRow:zt,onTransactionSubmitted:ke,onTransactionFailed:Jt,activityType:"convertStake"}),q=(0,it.useCallback)(()=>{m({amount:b,convertDetails:A,provider:k}),T(void 0),M(void 0),o()},[b,m,T,M,o,k,A]),{isSuccess:mt,isError:W,error:ue}=fo(q,i);(0,it.useEffect)(()=>{mt?r("confirmed"):W&&(r("error"),d(ue),p({amount:b,convertDetails:A}))},[b,A,mt,W,p,ue,i]);let to=Mo({txReceipt:i,isTxError:W,poolTokenFungible:Tt,invalidateQueries:o,dismissLiquidStaking:e}),eo=(0,it.useCallback)(()=>{g(),t()},[g,t]),tn=(0,it.useMemo)(()=>Ac({stakedTokenSymbol:D,poolTokenSymbol:K,txHash:i?.id,txError:u,confirmationStatus:n,eligibleAccountsCount:I,onDismiss:to,onConvertMore:eo}),[D,K,i?.id,u,n,I,to,eo]);return{addressType:et,isLedger:at,isReadyToExecute:Qt,statusPageProps:tn,txError:u,executeLiquidStake:Yt,learnMoreLink:Mn,isJitoSOL:!1,isPSOL:!0}};s();c();s();c();var Ba=x(E());s();c();var Sa=x(E());s();c();var sa=(e,t)=>{let o=[],n=e?Nt(e):void 0,r=Ar(t?.stakePoolTokenMetadata.caip19??"");return n&&r&&(o.push(n),o.push(r)),{query:{data:o}}};s();c();var ge=x(E());s();c();function Do(e){return e?e.stakePoolTokenMetadata.caip19===oe:!1}s();c();s();c();var AA={name:"Jito",stakePoolAddress:"Jito4APyf642JPZPx3hGc6WWJ8zPKtRbRs4P815Awbb",apy:"0.0760131222374123",convertRatio:"1.1067926864808721",stakePoolTokenMetadata:{metadata:{address:"J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn",name:"Jito Staked SOL",symbol:"JitoSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/JitoSOL-256.png",chainId:"solana:101"},caip19:"solana:101/address:J1toso1uCk3RLmjorhTtrVwY9HJ7X8V9yYac6Y7kGCPn"},chainId:"solana:101",validators:[{vote_account:"validator"}]},ca={name:"Phantom Staked SOL",stakePoolAddress:"pSPcvR8GmG9aKDUbn9nbKYjkxt9hxMS7kF1qqKJaPqJ",apy:"0.0950000000000000",convertRatio:"1.0500000000000000",stakePoolTokenMetadata:{metadata:{address:Qr,name:"Phantom Staked SOL",symbol:"PSOL",decimals:9,logoURI:"https://storage.googleapis.com/token-metadata/PSOL-256.png",chainId:"solana:101"},caip19:"solana:101/address:pSo1f9nQXWgXibFtKf7NWYxb5enAM4qfP6UJSiXRQfL"},chainId:"solana:101",validators:[{vote_account:"validator"}]};function Je(e){return e?e.stakePoolTokenMetadata.caip19===ca.stakePoolTokenMetadata.caip19:!1}var wc=(e,t)=>{if(t===void 0)return;let o=Nt(e),n=Zt(o);return t[n]},Pc=(e,t,o)=>{if(!t)return V(0);let n=new V(t.convertRatio),r=At(e,t.stakePoolTokenMetadata.metadata.decimals);return o?r.multipliedBy(n):r.div(n)};function ua(e,t,o){return t?{network:{id:t.stakePoolTokenMetadata.metadata.chainId??"solana:101",name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},priceData:o?o[t.stakePoolTokenMetadata.caip19]:void 0,decimals:t.stakePoolTokenMetadata.metadata.decimals,logoUri:t.stakePoolTokenMetadata.metadata.logoURI??null,symbol:t.stakePoolTokenMetadata.metadata.symbol,tokenAddress:t.stakePoolTokenMetadata.metadata.address,tokenType:"SPL"}:{network:{id:e.data.chain.id,name:e.data.chain.name,symbol:e.data.chain.symbol,imageUrl:e.data.chain.imageUrl},priceData:wc(e,o),decimals:e.data.decimals,logoUri:e.data.logoUri??null,symbol:e.data.symbol,tokenAddress:e.data.tokenAddress,tokenType:e.type??"SolanaNative"}}var da=(e,t,o,n,r=!1)=>{if(!e)return null;let{priceData:i,decimals:a,...u}=ua(e,r?t:void 0,n),d=At(o,a),l=i?.usd?d.multipliedBy(i.usd):null;return{amount:de(d),amountUsd:l?l.toNumber():null,border:!1,title:v.t("liquidStakeReviewYouPay"),...u}},la=(e,t,o,n,r=!1)=>{if(!t||!e)return null;let{priceData:i,...a}=ua(e,r?void 0:t,n),u=Pc(o,t,r),d=i?.usd?u.multipliedBy(i.usd):null;return{amount:de(u),amountUsd:d?d.toNumber():null,border:!1,title:r?v.t("liquidStakeUnstakeReviewYouReceive"):v.t("liquidStakeReviewYouReceive"),...a}},pa=({process:e,fungibleToStake:t,amount:o,provider:n,selectedChainAddress:r,transactionFees:i,isLoading:a,canSubmit:u,transactionData:d,priceMap:l,networkFeeErrorMsg:m,showUKDisclaimer:p})=>{let g=(0,ge.useMemo)(()=>da(t,n,o,l),[t,n,o,l]),S=(0,ge.useMemo)(()=>la(t,n,o,l),[t,n,o,l]),y=n?.name??"",k=r?.address??"",A=n?.apy!==void 0?fe(Number.parseFloat(n.apy)):"",b=`${de(At(i,t?.data.decimals??0))} ${t?.data.symbol}`,I=Do(n),T=Je(n),M=n?.totalRewardsFeePercentage??"8",N=d?.solWithdrawalFee??d?.stakeWithdrawalFee,D=(0,ge.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),providerLabelText:v.t("liquidStakeReviewProvider"),apyLabelText:v.t("stakeReviewAPY"),apyLabelTextTooltip:v.t("stakeReviewAPYTooltip"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t(e==="convert"?"commandConvert":"commandStake"),feeFootnoteText:v.t("liquidStakeReviewPhantomFeeFootnote",{totalRewardsFeePercentage:M}),feeFootnoteDescriptionText:v.t("liquidStakeReviewPhantomFeeFootnoteDescription",{withdrawalFeePercentage:N}),feeFootnoteTooltipText:v.t("liquidStakeReviewPhantomFeeFootnoteTooltip",{totalRewardsFeePercentage:M})}),[e,M,N]);return{process:e,payAsset:g,receiveAsset:S,account:k,providerName:y,apy:A,networkFee:b,strings:D,isLoading:a,canSubmit:u,networkFeeErrorMsg:m,isJitoSOL:I,isPSOL:T,showUKDisclaimer:p,totalRewardsFeePercentage:M}},NA=({stakedFungible:e,amount:t,provider:o,selectedChainAddress:n,transactionFees:r,isLoading:i,canSubmit:a,priceMap:u,networkFeeErrorMsg:d,transactionData:l})=>{let m=(0,ge.useMemo)(()=>da(e,o,t,u,!0),[e,o,t,u]),p=(0,ge.useMemo)(()=>la(e,o,t,u,!0),[e,o,t,u]),g=n?.address??"",S=`${de(At(r,e?.data.decimals??0))} ${e?.data.symbol}`,y=l?.isWithdrawSol??!0,k=y?l?.solWithdrawalFee??.1:l?.stakeWithdrawalFee??.1,A=(0,ge.useMemo)(()=>({accountLabelText:v.t("stakeReviewAccount"),networkFeeLabelText:v.t("liquidStakeReviewNetworkFee"),primaryButtonText:v.t("commandUnstake"),feeLabelText:v.t("unstakeLiquidStakeFee"),feeLabelTextTooltip:v.t("unstakeLiquidStakeFeeTooltip"),unstakeDelayDisclaimerText:v.t("unstakeLiquidStakeDelayDisclaimer"),feePercentageText:`${k}%`}),[k]),b=ne();return{payAsset:m,receiveAsset:p,account:g,networkFee:S,strings:A,isLoading:i,canSubmit:a,networkFeeErrorMsg:d,isWithdrawSol:y,showUKDisclaimer:b}};s();c();var ma=x(E());var Tc=G({seconds:10}),fa=({hasPoolTokenAccount:e,chainAddress:t,transactionData:o})=>{let{data:n,isPending:r,isFetched:i,isSuccess:a}=qr({networkID:o?.networkID??U.solana.mainnetID,multichainTransaction:Ic(o),queryOptions:{refetchInterval:Tc}}),{data:u=0}=jr(t),d=Q(Po).plus(De),l=e?Q(d):Q(u).plus(d),{hasSufficientFunds:m,isLoading:p,nativeTokenSymbol:g}=zr({networkID:o?.networkID??U.solana.mainnetID,addressType:t?.addressType,gasEstimation:n,transactionValue:l}),S=Lc({hasSufficientFunds:m,hasGasEstimationFailed:i&&!a,nativeTokenSymbol:g}),y=xc(n),k=l.plus(y),A=r||p;return(0,ma.useMemo)(()=>({isLoading:A,hasSufficientFunds:m,transactionFees:k,networkFeeErrorMsg:S,nativeTokenSymbol:g}),[A,m,k,S,g])},xc=e=>e?U.isSolanaNetworkID(e.networkID)?new Q(e.value):new Q(0):new Q(0),Ic=e=>{if(e&&U.isSolanaNetworkID(e.networkID)){let{networkID:t,transaction:o}=e;return{networkID:t,transaction:[o]}}},Lc=({hasSufficientFunds:e,hasGasEstimationFailed:t,nativeTokenSymbol:o})=>t?v.t("transactionGasEstimationError"):e==="insufficient"?v.t("transactionNotEnoughNative",{nativeTokenSymbol:o}):void 0;var qo=({process:e,provider:t,transactionData:o,isLoadingTransactionData:n})=>{let r=ut,i=_(M=>M.amount),{data:a}=ft("solana"),{fungible:u,isLoadingTokens:d}=Ct({key:t?.stakePoolTokenMetadata.metadata.address||""}),{isLoading:l,hasSufficientFunds:m,transactionFees:p,networkFeeErrorMsg:g}=fa({hasPoolTokenAccount:!!u,chainAddress:a,transactionData:o}),S=(0,Sa.useMemo)(()=>sa(r,t),[r,t]),{data:y}=Vr(S),k=n||l||d,A=!k&&!!o&&m!=="insufficient"&&!g,b=ne();return pa({process:e,fungibleToStake:r,amount:i,provider:t,selectedChainAddress:a,transactionFees:p,transactionData:o,isLoading:k,canSubmit:A,priceMap:y,networkFeeErrorMsg:g,showUKDisclaimer:e==="mint"&&b})};s();c();s();c();s();c();s();c();s();c();s();c();s();c();function Cc(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function Jn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ga(e,t){Cc(e);let o=t.outputLen;if(e.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}s();c();var Ec=e=>e instanceof Uint8Array;var Ko=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),_t=(e,t)=>e<<32-t|e>>>t,Fc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Fc)throw new Error("Non little-endian hardware is not supported");function _c(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Yn(e){if(typeof e=="string"&&(e=_c(e)),!Ec(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var Vo=class{clone(){return this._cloneInto()}},fb={}.toString;function ya(e){let t=n=>e().update(Yn(n)).digest(),o=e();return t.outputLen=o.outputLen,t.blockLen=o.blockLen,t.create=()=>e(),t}function Mc(e,t,o,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,o,n);let r=BigInt(32),i=BigInt(4294967295),a=Number(o>>r&i),u=Number(o&i),d=n?4:0,l=n?0:4;e.setUint32(t+d,a,n),e.setUint32(t+l,u,n)}var Wo=class extends Vo{constructor(t,o,n,r){super(),this.blockLen=t,this.outputLen=o,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ko(this.buffer)}update(t){Jn(this);let{view:o,buffer:n,blockLen:r}=this;t=Yn(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(r-this.pos,i-a);if(u===r){let d=Ko(t);for(;r<=i-a;a+=r)this.process(d,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===r&&(this.process(o,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Jn(this),ga(t,this),this.finished=!0;let{buffer:o,view:n,blockLen:r,isLE:i}=this,{pos:a}=this;o[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let p=a;p<r;p++)o[p]=0;Mc(n,r-8,BigInt(this.length*8),i),this.process(n,0);let u=Ko(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=d/4,m=this.get();if(l>m.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<l;p++)u.setUint32(4*p,m[p],i)}digest(){let{buffer:t,outputLen:o}=this;this.digestInto(t);let n=t.slice(0,o);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:o,buffer:n,length:r,finished:i,destroyed:a,pos:u}=this;return t.length=r,t.pos=u,t.finished=i,t.destroyed=a,r%o&&t.buffer.set(n),t}};var Bc=(e,t,o)=>e&t^~e&o,Uc=(e,t,o)=>e&t^e&o^t&o,Oc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),re=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ie=new Uint32Array(64),$n=class extends Wo{constructor(){super(64,32,8,!1),this.A=re[0]|0,this.B=re[1]|0,this.C=re[2]|0,this.D=re[3]|0,this.E=re[4]|0,this.F=re[5]|0,this.G=re[6]|0,this.H=re[7]|0}get(){let{A:t,B:o,C:n,D:r,E:i,F:a,G:u,H:d}=this;return[t,o,n,r,i,a,u,d]}set(t,o,n,r,i,a,u,d){this.A=t|0,this.B=o|0,this.C=n|0,this.D=r|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,o){for(let p=0;p<16;p++,o+=4)ie[p]=t.getUint32(o,!1);for(let p=16;p<64;p++){let g=ie[p-15],S=ie[p-2],y=_t(g,7)^_t(g,18)^g>>>3,k=_t(S,17)^_t(S,19)^S>>>10;ie[p]=k+ie[p-7]+y+ie[p-16]|0}let{A:n,B:r,C:i,D:a,E:u,F:d,G:l,H:m}=this;for(let p=0;p<64;p++){let g=_t(u,6)^_t(u,11)^_t(u,25),S=m+g+Bc(u,d,l)+Oc[p]+ie[p]|0,k=(_t(n,2)^_t(n,13)^_t(n,22))+Uc(n,r,i)|0;m=l,l=d,d=u,u=a+S|0,a=i,i=r,r=n,n=S+k|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,l=l+this.G|0,m=m+this.H|0,this.set(n,r,i,a,u,d,l,m)}roundClean(){ie.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ka=ya(()=>new $n);var ha=x($a()),Nc=[69,107,109,106,121,122,120,100,105,53,52,51,110,99,76,56,54,116,99,97,67,65,100,117,108,79,119,121,110,86,53,68,118,54,86,67,109,73,84,117,118,48,51,118,53,101,98,76,80,98,48,88,101,57,111,108,82,71,75,72,85,71,119,68,117,116,111,117,68,117,77,55,49,88,65,106,55,97,111,74,102,77,78,106,56,119,61,61],zo=e=>{let t=`${String.fromCharCode(...Nc)}||${e}`,o=ka(Buffer.from(t));return ha.default.encode(o)};s();c();var Ee=x(oo());s();c();var Xn=x(Ya());var Mb=new h.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");var gt=new h.PublicKey("SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy");var Bb=Xn.Buffer.from("ephemeral"),Aa=Xn.Buffer.from("transient"),Ye=h.LAMPORTS_PER_SOL;s();c();var Zn=Object.freeze({DepositStake:{index:9,layout:yt.struct([yt.u8("instruction")])},DepositSol:{index:14,layout:yt.struct([yt.u8("instruction"),yt.ns64("lamports")])},WithdrawStake:{index:10,layout:yt.struct([yt.u8("instruction"),yt.ns64("poolTokens")])},WithdrawSol:{index:16,layout:yt.struct([yt.u8("instruction"),yt.ns64("poolTokens")])}});function tr(e,t){let o=e.layout.span,n=Buffer.alloc(o),r=Object.assign({instruction:e.index},t);return e.layout.encode(r,n),n}var Ce=class{static depositSol(t){let{stakePool:o,withdrawAuthority:n,depositAuthority:r,reserveStake:i,fundingAccount:a,destinationPoolAccount:u,managerFeeAccount:d,referralPoolAccount:l,poolMint:m,lamports:p,referralAccount:g}=t,S=Zn.DepositSol,y=tr(S,{lamports:p}),k=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:we,isSigner:!1,isWritable:!1}];return r&&k.push({pubkey:r,isSigner:!0,isWritable:!1}),g&&k.push({pubkey:g,isSigner:!1,isWritable:!1}),new ot.TransactionInstruction({programId:gt,keys:k,data:y})}static withdrawStake(t){let{stakePool:o,validatorList:n,withdrawAuthority:r,validatorStake:i,destinationStake:a,destinationStakeAuthority:u,sourceTransferAuthority:d,sourcePoolAccount:l,managerFeeAccount:m,poolMint:p,poolTokens:g}=t,S=Zn.WithdrawStake,y=tr(S,{poolTokens:g}),k=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:h.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:we,isSigner:!1,isWritable:!1},{pubkey:h.StakeProgram.programId,isSigner:!1,isWritable:!1}];return new ot.TransactionInstruction({programId:gt,keys:k,data:y})}static withdrawSol(t){let{stakePool:o,withdrawAuthority:n,sourceTransferAuthority:r,sourcePoolAccount:i,reserveStake:a,destinationSystemAccount:u,managerFeeAccount:d,solWithdrawAuthority:l,poolMint:m,poolTokens:p}=t,g=Zn.WithdrawSol,S=tr(g,{poolTokens:p}),y=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:h.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:h.SYSVAR_STAKE_HISTORY_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:h.StakeProgram.programId,isSigner:!1,isWritable:!1},{pubkey:we,isSigner:!1,isWritable:!1}];return l&&y.push({pubkey:l,isSigner:!0,isWritable:!1}),new ot.TransactionInstruction({programId:gt,keys:y,data:S})}};s();c();var w=x(wa());var Pa=x(oo()),Ta=x(rn());var se=[(0,w.u64)("denominator"),(0,w.u64)("numerator")];var Qo=en().transform(e=>new Pa.default(e,10)),Go=en().transform(e=>new h.PublicKey(e)),nu=mr(["uninitialized","initialized","delegated","rewardsPool"]),ru=$t({rentExemptReserve:Qo,authorized:$t({staker:Go,withdrawer:Go}),lockup:$t({unixTimestamp:_e(),epoch:_e(),custodian:Go})}),iu=$t({meta:ru,stake:$t({delegation:$t({voter:Go,stake:Qo,activationEpoch:Qo,deactivationEpoch:Qo,warmupCooldownRate:_e()}),creditsObserved:_e()}).nullish().default(null)}),xa=$t({type:nu,info:fr(iu)}),rr=class extends Ta.Layout{layout;discriminator;constructor(t,o){super(-1,o),this.layout=t,this.discriminator=(0,w.u8)()}encode(t,o,n=0){return t==null?this.discriminator.encode(0,o,n):(this.discriminator.encode(2,o,n),this.layout.encode(t,o,n+1)+1)}decode(t,o=0){let n=this.discriminator.decode(t,o);if(n===0)return null;if(n===1||n===2)return this.layout.decode(t,o+1);throw new Error("Invalid future epoch "+this.property)}getSpan(t,o=0){let n=this.discriminator.decode(t,o);if(n===0)return 1;if(n===1||n===2)return this.layout.getSpan(t,o+1)+1;throw new Error("Invalid future epoch "+this.property)}};function nr(e,t){return new rr(e,t)}var Ia=(0,w.struct)([(0,w.u8)("accountType"),(0,w.publicKey)("manager"),(0,w.publicKey)("staker"),(0,w.publicKey)("stakeDepositAuthority"),(0,w.u8)("stakeWithdrawBumpSeed"),(0,w.publicKey)("validatorList"),(0,w.publicKey)("reserveStake"),(0,w.publicKey)("poolMint"),(0,w.publicKey)("managerFeeAccount"),(0,w.publicKey)("tokenProgramId"),(0,w.u64)("totalLamports"),(0,w.u64)("poolTokenSupply"),(0,w.u64)("lastUpdateEpoch"),(0,w.struct)([(0,w.u64)("unixTimestamp"),(0,w.u64)("epoch"),(0,w.publicKey)("custodian")],"lockup"),(0,w.struct)(se,"epochFee"),nr((0,w.struct)(se),"nextEpochFee"),(0,w.option)((0,w.publicKey)(),"preferredDepositValidatorVoteAddress"),(0,w.option)((0,w.publicKey)(),"preferredWithdrawValidatorVoteAddress"),(0,w.struct)(se,"stakeDepositFee"),(0,w.struct)(se,"stakeWithdrawalFee"),nr((0,w.struct)(se),"nextStakeWithdrawalFee"),(0,w.u8)("stakeReferralFee"),(0,w.option)((0,w.publicKey)(),"solDepositAuthority"),(0,w.struct)(se,"solDepositFee"),(0,w.u8)("solReferralFee"),(0,w.option)((0,w.publicKey)(),"solWithdrawAuthority"),(0,w.struct)(se,"solWithdrawalFee"),nr((0,w.struct)(se),"nextSolWithdrawalFee"),(0,w.u64)("lastEpochPoolTokenSupply"),(0,w.u64)("lastEpochTotalLamports")]);var au=(0,w.struct)([(0,w.u64)("activeStakeLamports"),(0,w.u64)("transientStakeLamports"),(0,w.u64)("lastUpdateEpoch"),(0,w.u64)("transientSeedSuffixStart"),(0,w.u64)("transientSeedSuffixEnd"),(0,w.u8)("status"),(0,w.publicKey)("voteAccountAddress")]),jo=(0,w.struct)([(0,w.u8)("accountType"),(0,w.u32)("maxValidators"),(0,w.vec)(au,"validators")]);s();c();var Mt=x(oo());function ir(e){return isNaN(e)?0:Number(e*h.LAMPORTS_PER_SOL)}function Ho(e,t){let o=t.mul(e.totalLamports),n=e.poolTokenSupply;return o.lt(n)?new Mt.default(0):o.div(n)}async function Jo(e,t){let[o]=await h.PublicKey.findProgramAddress([t.toBuffer(),Buffer.from("withdraw")],e);return o}async function Yo(e,t,o,n){let[r]=await h.PublicKey.findProgramAddress([t.toBuffer(),o.toBuffer(),n?new Mt.default(n).toArrayLike(Buffer,"le",4):Buffer.alloc(0)],e);return r}function ye(e){if(typeof e=="number")return Math.abs(e)/h.LAMPORTS_PER_SOL;if(typeof e=="bigint")return Math.abs(Number(e))/h.LAMPORTS_PER_SOL;let t=1;e.isNeg()&&(t=-1);let n=e.abs().toString(10).padStart(10,"0"),r=n.length-9,i=n.slice(0,r)+"."+n.slice(r);return t*parseFloat(i)}async function su(e,t,o,n){let[r]=await h.PublicKey.findProgramAddress([Aa,t.toBuffer(),o.toBuffer(),n.toArrayLike(Buffer,"le",8)],e);return r}function cu(e,t){return e.poolTokenSupply.isZero()||e.totalLamports.isZero()?t:t.mul(e.poolTokenSupply).div(e.totalLamports)}async function La(e,t,o,n,r,i){let a=await e.getAccountInfo(t.validatorList),u=jo.decode(a?.data);if(!u?.validators||u?.validators.length==0)throw new Error("No accounts found");let d=await e.getMinimumBalanceForRentExemption(h.StakeProgram.space),l=new Mt.default(d+Ye),m=[];for(let b of u.validators){if(b.status!==0)continue;let I=await Yo(gt,b.voteAccountAddress,o);if(!b.activeStakeLamports.isZero()){let M=t?.preferredWithdrawValidatorVoteAddress?.equals(b.voteAccountAddress);m.push({type:M?"preferred":"active",voteAddress:b.voteAccountAddress,stakeAddress:I,lamports:b.activeStakeLamports})}let T=b.transientStakeLamports.sub(l);if(T.gt(new Mt.default(0))){let M=await su(gt,b.voteAccountAddress,o,b.transientSeedSuffixStart);m.push({type:"transient",voteAddress:b.voteAccountAddress,stakeAddress:M,lamports:T})}}m=m.sort(r||((b,I)=>I.lamports.sub(b.lamports).toNumber()));let p=await e.getAccountInfo(t.reserveStake),g=new Mt.default((p?.lamports??0)-d);g.gt(new Mt.default(0))&&m.push({type:"reserve",stakeAddress:t.reserveStake,lamports:g});let S=[],y=new Mt.default(n),k=t.stakeWithdrawalFee,A={numerator:k.denominator.sub(k.numerator),denominator:k.denominator};for(let b of["preferred","active","transient","reserve"]){let I=m.filter(T=>T.type==b);for(let{stakeAddress:T,voteAddress:M,lamports:N}of I){if(N.lte(l)&&b=="transient")continue;let D=cu(t,N);!i&&!A.numerator.isZero()&&(D=D.mul(A.denominator).div(A.numerator));let K=Mt.default.min(D,y);if(!K.lte(new Mt.default(0))&&(S.push({stakeAddress:T,voteAddress:M,poolAmount:K}),y=y.sub(K),y.isZero()))break}if(y.isZero())break}if(y.gt(new Mt.default(0)))throw new Error(`No stake accounts found in this pool with enough balance to withdraw ${ye(n)} pool tokens.`);return S}function Ca(e,t,o){let n=h.Keypair.generate();return t.push(h.SystemProgram.createAccount({fromPubkey:e,newAccountPubkey:n.publicKey,lamports:o,space:h.StakeProgram.space,programId:h.StakeProgram.programId})),n}function $o(e){let t,o;return e.solWithdrawalFee&&(t=e.solWithdrawalFee.numerator.toNumber()*100/e.solWithdrawalFee.denominator.toNumber()),e.stakeWithdrawalFee&&(o=e.stakeWithdrawalFee.numerator.toNumber()*100/e.stakeWithdrawalFee.denominator.toNumber()),{solWithdrawalFee:t,stakeWithdrawalFee:o}}async function ar(e,t){let o=await e.getAccountInfo(t);if(!o)throw new Error("Invalid stake pool account");return{pubkey:t,account:{data:Ia.decode(o.data),executable:o.executable,lamports:o.lamports,owner:o.owner}}}async function uu(e,t){let o=(await e.getParsedAccountInfo(t)).value;if(!o||!("parsed"in o.data))throw new Error("Invalid stake account");if(o.data.program!="stake")throw new Error("Not a stake account");return xa.parse(o.data.parsed)}async function Xo(e,t,o,n,r,i,a,u,d=!0){if(d){let b=await e.getBalance(o,"confirmed");if(b<n)throw new Error(`Not enough SOL to deposit into pool. Maximum deposit amount is ${ye(b)} SOL.`)}let m=(await ar(e,t)).account.data,p=new h.Keypair,g=[p],S=[];if(S.push(h.SystemProgram.transfer({fromPubkey:o,toPubkey:p.publicKey,lamports:n})),!r){let b=mo(m.poolMint,o);S.push(Or(o,b,o,m.poolMint)),r=b}let y=await Jo(gt,t);S.push(Ce.depositSol({stakePool:t,reserveStake:m.reserveStake,fundingAccount:p.publicKey,destinationPoolAccount:r,managerFeeAccount:m.managerFeeAccount,referralPoolAccount:a??r,poolMint:m.poolMint,lamports:n,withdrawAuthority:y,depositAuthority:u,referralAccount:i}));let{solWithdrawalFee:k,stakeWithdrawalFee:A}=$o(m);return{instructions:S,signers:g,solWithdrawalFee:k,stakeWithdrawalFee:A}}async function Ea(e,t,o,n,r=!1,i,a,u,d){let l=await ar(e,t),m=new Ee.default(ir(n));u||(u=mo(l.account.data.poolMint,o));let p=await an(e,u);if(p.amount<m.toNumber())throw new Error(`Not enough token balance to withdraw ${ye(m)} pool tokens.
          Maximum withdraw amount is ${ye(p.amount)} pool tokens.`);let g=await e.getMinimumBalanceForRentExemption(h.StakeProgram.space),S=await Jo(gt,t),y=null;a&&(y=await uu(e,a));let k=[];if(r)k.push({stakeAddress:l.account.data.reserveStake,voteAddress:void 0,poolAmount:m});else if(y&&y?.type=="delegated"){let F=y.info?.stake?.delegation.voter;if(!F)throw new Error(`Invalid stake reciever ${a} delegation`);let Z=await e.getAccountInfo(l.account.data.validatorList),tt=jo.decode(Z?.data).validators.find(et=>et.voteAccountAddress.equals(F));if(i&&i!==F)throw new Error(`Provided withdrawal vote account ${i} does not match delegation on stake receiver account ${F},
        remove this flag or provide a different stake account delegated to ${i}`);if(tt){let et=await Yo(gt,F,t),Tt=await e.getAccountInfo(et);if(!Tt)throw new Error("Preferred withdraw valdator's stake account is invalid");let Ut=Ho(l.account.data,new Ee.default(Tt.lamports-Ye-g));if(Ut.lt(m))throw new Error(`Not enough lamports available for withdrawal from ${et},
              ${m} asked, ${Ut} available.`);k.push({stakeAddress:et,voteAddress:F,poolAmount:m})}else throw new Error(`Provided stake account is delegated to a vote account ${F} which does not exist in the stake pool`)}else if(i){let F=await Yo(gt,i,t),Z=await e.getAccountInfo(F);if(!Z)throw new Error("Invalid Stake Account");let at=new Ee.default(Z.lamports-Ye-g);if(at.lt(new Ee.default(0)))throw new Error("Invalid Stake Account");let tt=Ho(l.account.data,at);if(tt.lt(m))throw new Error(`Not enough lamports available for withdrawal from ${F},
            ${m} asked, ${tt} available.`);k.push({stakeAddress:F,voteAddress:i,poolAmount:m})}else{let F=await La(e,l.account.data,t,m,d,u.equals(l.account.data.managerFeeAccount));k.push(...F)}let A=[],b=h.Keypair.generate(),I=[b];A.push(En(u,b.publicKey,o,m.toNumber()));let T=0,M=5,N=0;for(let F of k){if(N>M)break;let at=`Withdrawing \u25CE${Ho(l.account.data,F.poolAmount)},
        from stake account ${F.stakeAddress?.toBase58()}`;F.voteAddress&&(at=`${at}, delegated to ${F.voteAddress?.toBase58()}`);let tt;if(!a||y&&y.type==="delegated"){let et=Ca(o,A,g);I.push(et),T+=g,tt=et.publicKey}else tt=a;A.push(Ce.withdrawStake({stakePool:t,validatorList:l.account.data.validatorList,validatorStake:F.stakeAddress,destinationStake:tt,destinationStakeAuthority:o,sourceTransferAuthority:b.publicKey,sourcePoolAccount:u,managerFeeAccount:l.account.data.managerFeeAccount,poolMint:l.account.data.poolMint,poolTokens:F.poolAmount.toNumber(),withdrawAuthority:S})),N++}a&&y&&y.type==="delegated"&&I.forEach(F=>{A.concat(h.StakeProgram.merge({stakePubkey:a,sourceStakePubKey:F.publicKey,authorizedPubkey:o}).instructions)});let{solWithdrawalFee:D,stakeWithdrawalFee:K}=$o(l.account.data);return{instructions:A,signers:I,stakeReceiver:a,totalRentFreeBalances:T,solWithdrawalFee:D,stakeWithdrawalFee:K}}async function Fa(e,t,o,n,r,i){let a=await ar(e,t),u=new Ee.default(ir(r)),d=mo(a.account.data.poolMint,o),l=await an(e,d);if(l.amount<u.toNumber())throw new Error(`Not enough token balance to withdraw ${ye(u)} pool tokens.
            Maximum withdraw amount is ${ye(l.amount)} pool tokens.`);let m=[],p=h.Keypair.generate(),g=[p];m.push(En(d,p.publicKey,o,u.toNumber()));let S=await Jo(gt,t);if(i){let b=a.account.data.solWithdrawAuthority;if(!b)throw new Error("SOL withdraw authority specified in arguments but stake pool has none");if(i.toBase58()!=b.toBase58())throw new Error(`Invalid deposit withdraw specified, expected ${b.toBase58()}, received ${i.toBase58()}`)}let y=Ce.withdrawSol({stakePool:t,withdrawAuthority:S,reserveStake:a.account.data.reserveStake,sourcePoolAccount:d,sourceTransferAuthority:p.publicKey,destinationSystemAccount:n,managerFeeAccount:a.account.data.managerFeeAccount,poolMint:a.account.data.poolMint,poolTokens:u.toNumber(),solWithdrawAuthority:i});m.push(y);let{solWithdrawalFee:k,stakeWithdrawalFee:A}=$o(a.account.data);return{instructions:m,signers:g,solWithdrawalFee:k,stakeWithdrawalFee:A}}var sr=async({connection:e,stakePoolAddress:t,ownerAddress:o,amount:n,poolTokenAccountAddress:r})=>{let i=new h.PublicKey(t),a=new h.PublicKey(o),u=r?new h.PublicKey(r):void 0,d=new h.PublicKey(zo(o)),{instructions:l,signers:m,solWithdrawalFee:p,stakeWithdrawalFee:g}=await Xo(e,i,a,n,u,d),S=(await e.getLatestBlockhash("confirmed")).blockhash,y=new ot.VersionedTransaction(new ot.TransactionMessage({instructions:l,payerKey:a,recentBlockhash:S}).compileToV0Message());return{transaction:await ve(y,{connection:uo(xt.Solana.Mainnet),calculators:{cost:po,budget:new lo(2e5,2e5)}}),signers:m,solWithdrawalFee:p,stakeWithdrawalFee:g}};s();c();async function _a({connection:e,stakePoolAddress:t,amount:o,senderAddress:n,useWithdrawSol:r}){let i=new h.PublicKey(n),a,u,d,l;if(r){let S=await Fa(e,new h.PublicKey(t),i,i,o).catch(y=>{throw j.captureError(y,"staking"),y});a=S.instructions,u=S.signers,d=S.solWithdrawalFee,l=S.stakeWithdrawalFee}else{let S=await Ea(e,new h.PublicKey(t),i,o).catch(y=>{throw j.captureError(y,"staking"),y});a=S.instructions,u=S.signers,d=S.solWithdrawalFee,l=S.stakeWithdrawalFee}let m=(await e.getLatestBlockhash("confirmed")).blockhash,p=new ot.VersionedTransaction(new ot.TransactionMessage({instructions:a,payerKey:i,recentBlockhash:m}).compileToV0Message());return{transaction:await ve(p,{connection:e}),signers:u,solWithdrawalFee:d,stakeWithdrawalFee:l}}async function du({connection:e,stakePoolAddress:t,amount:o,senderAddress:n,useWithdrawSol:r}){try{let i=await _a({connection:e,stakePoolAddress:t,amount:o,senderAddress:n,useWithdrawSol:r}),a=await e.simulateTransaction(i.transaction,{sigVerify:!1});if(a.value.err)throw new Error(`Simulation failed with useWithdrawSol: true - ${JSON.stringify(a.value.err)}`);return{...i,isWithdrawSol:r}}catch(i){j.captureError(i instanceof Error?i:new Error(String(i)),"staking");try{return{...await _a({connection:e,stakePoolAddress:t,amount:o,senderAddress:n,useWithdrawSol:!1}),isWithdrawSol:!1}}catch(a){throw j.captureError(a instanceof Error?a:new Error(String(a)),"staking"),a}}}s();c();var cr=async({connection:e,stakePoolAddress:t,stakePubkey:o,ownerAddress:n,amount:r})=>{let i=new h.PublicKey(t),a=new h.PublicKey(n),u=new h.PublicKey(o),d=new h.PublicKey(zo(n)),l=h.StakeProgram.withdraw({stakePubkey:u,authorizedPubkey:a,toPubkey:a,lamports:r}),[m]=l.instructions,{instructions:p,signers:g,solWithdrawalFee:S,stakeWithdrawalFee:y}=await Xo(e,i,a,r,void 0,d,void 0,void 0,!1),k=[m,...p],A=(await e.getLatestBlockhash("confirmed")).blockhash,b=new ot.TransactionMessage({instructions:k,payerKey:a,recentBlockhash:A}).compileToV0Message(),I=new ot.VersionedTransaction(b);return{transaction:await ve(I,{connection:uo(xt.Solana.Mainnet),calculators:{cost:po,budget:new lo(2e5,2e5)}}),signers:g,solWithdrawalFee:S,stakeWithdrawalFee:y}};var Ma=e=>{let t=O.getConvertStakeTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,validatorVoteAddress:"",stakeAccountAddress:e.stakePubkey}),o=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.stakePubkey&&!!e.amount;return C({enabled:o,queryKey:t,staleTime:G({seconds:30}),async queryFn(){if(U.isSolanaNetworkID(e.networkId))try{let{transaction:n,signers:r,solWithdrawalFee:i,stakeWithdrawalFee:a}=await cr({connection:e.connection,stakePoolAddress:e.stakePoolAddress,stakePubkey:e.stakePubkey,ownerAddress:e.ownerAddress,amount:e.amount});return{networkID:e.networkId,transaction:n,signers:r,solWithdrawalFee:i,stakeWithdrawalFee:a}}catch(n){throw j.captureError(n,"staking"),n}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};var lu=(e,t)=>{let{data:o}=ft("solana"),{trackConvertApprovedByUser:n}=Et(),r=_(g=>g.convert),i=_(g=>g.amount),a=_(g=>g.setTransactionData),{connection:u}=Lt(),{data:d,isLoading:l}=Ma({connection:u,networkId:e?.chainId??U.solana.mainnetID,stakePoolAddress:e?.stakePoolAddress??"",ownerAddress:o?.address??"",stakePubkey:r?.stakeAccount??"",amount:parseInt(i)}),m=qo({process:r?.activationState==="active"?"convertDelayed":"convert",provider:e,transactionData:d,isLoadingTransactionData:l}),p=(0,Ba.useCallback)(()=>{n({provider:e,convertDetails:r,amount:i,fromAmount:m.payAsset?.amount,toAmount:m.receiveAsset?.amount,fromAmountUSD:m.payAsset?.amountUsd,toAmountUSD:m.receiveAsset?.amountUsd}),a(d),t()},[t,a,d,n,r,e,m,i]);return{...m,onPrimaryButtonPress:p}};s();c();s();c();var Ua=({numSignatures:e,lamportsPerSignature:t,lamportBalance:o,rentExemptionMinimum:n})=>{let r=Q(t).multipliedBy(e),i=o.minus(r);return Q.max(i.minus(n),0)};var pu=({balance:e,rentExemptionMinimum:t})=>{let o=Ua({numSignatures:11,lamportsPerSignature:Dr,lamportBalance:Q(e),rentExemptionMinimum:yr(t)});return parseFloat(gr(o).toFixed(9))};s();c();var mu=e=>{let t=O.keybaseUserAvatar(e);return C({enabled:!!e,queryKey:t,async queryFn(){if(!e)throw new Error("Keybase username is required");return Io(e)},placeholderData:"",staleTime:1/0})};s();c();var fu=async(e,t)=>await e.getSignatureStatuses([t],{searchTransactionHistory:!0});function Su(e,t,o){let n=nt(),r=O.signatureStatus(o),i=async()=>{if(!o)throw ea;let l=await fu(e,o);return{...l,value:l.value[0]}},u=n.getQueryData(r)?.value?.confirmationStatus;return C({queryKey:r,queryFn:i,enabled:!!o&&u!=="finalized",refetchInterval:t,staleTime:1/0})}s();c();var gu=e=>async()=>await e.getMinimumBalanceForRentExemption(h.StakeProgram.space);function yu(e){let t=O.stakeAccountMinBalance(),o=gu(e);return C({queryKey:t,queryFn:o,placeholderData:0,staleTime:1/0})}s();c();var ku=async(e,t,o,n="confirmed")=>await e.getInflationReward(t,o,n),hu=async(e,t)=>{let o=[];t.ownerPublicKey&&o.push({memcmp:{offset:44,bytes:t.ownerPublicKey}}),t.voteAccountPublicKey&&o.push({dataSize:200},{memcmp:{offset:124,bytes:t.voteAccountPublicKey}});let n=await e.getParsedProgramAccounts(h.StakeProgram.programId,{filters:o}),r=[];if(t.fetchInflationRewards)try{r=await ku(e,n.map(({pubkey:i})=>i))}catch(i){let a=i;!a.message.includes("RPC request timed out")&&j.captureError(a,"staking")}return n.map((i,a)=>({pubkey:i.pubkey.toString(),lamports:i.account.lamports,inflationReward:r[a]?.amount,...i.account.data.parsed}))},Au=(e,t)=>O.stakeAccounts(e,t),bu=(e,t)=>()=>hu(e,{ownerPublicKey:t,fetchInflationRewards:!0});function vu(e,t){let o=Au(t,e.rpcEndpoint),n=bu(e,t);return C({queryKey:o,queryFn:n,placeholderData:[],staleTime:G({minutes:5})})}s();c();function wu(e,t){let o=O.stakeActivationData(t);return C({queryKey:o,queryFn:async()=>{if(!t)throw oa;return await Ke(e,new h.PublicKey(t))},enabled:!!t,staleTime:1/0})}s();c();s();c();var Oa=new Error("Failed to fetch staking APY");async function Na(){try{let e=await kt.api().get("/staking/v1/apy");if(!Xt(e))throw Oa;let t=e.data;return We.parse(t).apy}catch{throw Oa}}var Pu=()=>{let e=O.stakeApy();return C({enabled:!0,queryKey:e,gcTime:Ve.Short,staleTime:1/0,async queryFn(){return Na()}})};s();c();var Ra=x(E());var Tu=({onLiquidStake:e,onNativeStake:t})=>{let{t:o}=J(),n=_n,{avgValidatorApy:r,pickedLSTProvider:i}=Ft(xt.Solana.Mainnet),a=Kt(B),u=i(a?B:sn);return{options:(0,Ra.useMemo)(()=>[{type:"liquid",isRecommended:!0,title:o("stakeMethodSelectionLiquidStakingTitle"),description:o("stakeMethodSelectionLiquidStakingDescription",{poolTokenSymbol:u?.stakePoolTokenMetadata?.metadata?.symbol}),apy:u?o("stakeMethodEstApy",{apy:fe(parseFloat(u.apy))}):null,disabled:!u,onClick:e??(()=>{})},{type:"native",isRecommended:!1,title:o("stakeMethodSelectionNativeStakingTitle"),description:o("stakeMethodSelectionNativeStakingDescription"),apy:r?o("stakeMethodEstApy",{apy:fe(r)}):null,onClick:t,disabled:!1}],[r,u,e,t,o]),learnMoreLink:n}};s();c();function Da({hideOnLowBalance:e}){let{pickedLSTProvider:t}=Ft(xt.Solana.Mainnet),o=Kt(B),n=t(B),{data:r}=Wr();if(!r||!n)return{shouldHide:!0,apy:0,formattedApy:"0%"};let i=At(r.totalQuantityString,r.decimals),a=!1;e&&(a=!i.isGreaterThan(0)),o||(a=!0);let u=parseFloat(n.apy),d=`${(u*100).toFixed(2)}%`;return{shouldHide:a,apy:u,formattedApy:d}}s();c();s();c();var qa=x(E());var ur=({method:e,goToInfoPage:t,goToInitFlowPage:o})=>{let{usageState:n}=Le();return(0,qa.useCallback)(()=>{n[e]?o():t()},[t,o,e,n])};s();c();s();c();s();c();s();c();var Va=(e,t)=>new Q(e).div(co(t)).toString();s();c();var Ka=e=>e.replace(/,|\.{2,}/g,".").replace(/^[0]+/g,"0").replace(/^\./g,"0.").replace(/[^\d.]/g,"");s();c();var Wa=(e,t)=>t===0?new Q(e):new Q(e).multipliedBy(co(t));var Bt=x(E());s();c();var xu=2,za=({networkID:e,poolTokenMintAddress:t})=>{let o=U.getAddressType(e),{fungible:n}=Ct({key:t}),r=Hr(e,o),{fungible:i}=Ct({key:r}),a=V(i?.data.amount??""),u=V(Po),d=V(De),l=V(De),m=V(xu).plus(u),p=n?V(m).plus(d):V(l).plus(m).plus(d),g=V(a).minus(p),S=V.max(g,0);return{minAmount:p,maxAmount:S,balance:a}};var Iu=e=>{if(e.isLessThan(.01))return e.toString();let t=e.dp();return e.isLessThan(1)&&t&&t>1?e.toFixed(2,V.ROUND_FLOOR):parseFloat(e.toFixed(1,V.ROUND_FLOOR)).toString()},Lu=({goBack:e,goToReviewPage:t,showInfoPage:o,lstCaip19:n})=>{let r=ut,i=_(q=>q.amount),a=_(q=>q.setAmount),u=_(q=>q.setProvider),d=r?.data.symbol??"",l=r?.data.chain.id??U.solana.mainnetID,m=r?.data.decimals??ut.data.decimals,{data:p}=ft("solana"),{pickedLSTProvider:g}=Ft(U.solana.mainnetID),S=g(n),y=S?.stakePoolTokenMetadata.metadata.address??"";$r(p,"STAKE_FUNGIBLE");let{minAmount:k,maxAmount:A,balance:b}=za({networkID:l,poolTokenMintAddress:y}),I=(0,Bt.useMemo)(()=>{if(i)return Va(i,m);let q=b.multipliedBy(.95),mt=V.max(V.min(q,A),k);return Iu(At(mt,m))},[i,b,m,A,k]),[T,M]=(0,Bt.useState)(I),N=At(A,m),D=At(k,m),K=At(b,m),F=Wa(T,m).toString(),Z=V(F),at=b.isLessThan(k),tt=Z.isGreaterThan(A),et=Z.isFinite(),Tt=(0,Bt.useMemo)(()=>{if(!S)return v.t("mintLiquidStakeAmountNoProviders");if(F&&at)return v.t("mintLiquidStakeAmountMinRequired",{symbol:d,amount:D});if(F&&tt)return v.t("mintLiquidStakeAmountInsufficientBalance")},[S,F,at,tt,D,d]),Ut=et&&!Tt,ke=(0,Bt.useMemo)(()=>{if(!S)return;let q=fe(Number.parseFloat(S.apy)),{address:mt,name:W,symbol:ue,logoURI:to}=S.stakePoolTokenMetadata.metadata,eo=V(1).dividedBy(V(S.convertRatio)),tn=`1 ${d} \u2248 ${de(eo)} ${ue}`;return{identifier:mt,apy:q,name:W,symbol:ue,rate:tn,logoURI:to}},[S,d]),Jt=(0,Bt.useCallback)(()=>{M(String(N))},[N]),zt=(0,Bt.useCallback)(q=>{let mt=Ka(q);To(mt,m??9)&&M(mt)},[m]),Yt=(0,Bt.useCallback)(()=>{u(S),a(F),t()},[S,F,t,a,u]),Qt=(0,Bt.useCallback)(()=>{a(""),e()},[a,e]);return{amount:T,amountError:Tt,balance:K,symbol:d,poolToken:ke,canSubmit:Ut,onBack:Qt,onContinue:Yt,onChangeAmount:zt,onSetMax:Jt,onInfoPress:o}};s();c();var ce=x(E());var Zo=null,Cu=e=>{if(!Zo&&e){let t="liquidStake";Zo=new Pe(e,t)}if(!Zo)throw new Error("liquidStakeAnalytics was not properly configured");return Zo},Pt=()=>{let e=It(),t=Cu(e),o=p=>{switch(p){case B:return"Phantom Staked SOL";case oe:return"Jito Staked SOL";default:return}},n=p=>{switch(p){case B:return"PSOL";case oe:return"JITOSOL";default:return}},r=(0,ce.useCallback)(({provider:p,entryPoint:g,testVariant:S})=>{e.capture("liquidStakingMarketingPageSeen",{data:{lstCaip19:p,lstSymbol:n(p),entryPoint:g,testVariant:S??""}})},[e]),i=(0,ce.useCallback)(({lstCaip19:p,testVariant:g,entryPoint:S})=>{e.capture("liquidStakingMarketingPagePrimaryButtonClicked",{data:{stake:{caip19:p,lstSymbol:n(p),testVariant:g,entryPoint:S}}})},[e]),a=(0,ce.useCallback)(p=>{let g=p?o(p):void 0,S=p?n(p):void 0;e.capture("liquidStakingMintModalContinueClicked",{data:{stake:{caip19:p,token:g,tokenSymbol:S}}})},[e]),u=(0,ce.useCallback)(({provider:p,payAmount:g,receiveAmount:S,payAmountUSD:y,receiveAmountUSD:k,payAssetTitle:A,providerName:b,receiveAssetTitle:I})=>{e.capture("liquidStakingMintApprovedByUser",{data:{stake:{stakePoolAddress:p?.stakePoolAddress,token:p?.stakePoolTokenMetadata.metadata.name,apy:p?.apy,convertRatio:p?.convertRatio,caip19:p?.stakePoolTokenMetadata.caip19,payAmount:g,receiveAmount:S,payAmountUSD:y,receiveAmountUSD:k,payAssetTitle:A,receiveAssetTitle:I,providerName:b}}})},[e]),d=(0,ce.useCallback)(p=>{t.submittedTransaction(p,{chainType:"solana",chainName:"solana",networkId:"mainnet",method:"signAndSendTransaction"})},[t]),l=(0,ce.useCallback)(({provider:p,amount:g})=>{e.capture("liquidStakingMintSuccess",{data:{stake:{apy:p?.apy,convertRatio:p?.convertRatio,caip19:p?.stakePoolTokenMetadata.caip19,stakePoolAddress:p?.stakePoolAddress,token:p?.stakePoolTokenMetadata.metadata.name,totalAmount:g}}})},[e]),m=(0,ce.useCallback)(p=>{e.capture("liquidStakingMintFailed",{data:{stake:{amount:p}}})},[e]);return{trackMintModalContinue:a,trackMarketingModalSeen:r,trackMarketingModalContinue:i,trackMintSubmitted:d,trackMintSuccess:l,trackMintFailed:m,trackMintApprovedByUser:u}};s();c();var dt=x(E());var Eu="https://www.jito.network/defi/";function Fu({poolTokenSymbol:e,txHash:t,txError:o,confirmationStatus:n,showUKDisclaimer:r,onDismiss:i,openExternalLink:a}){let u={title:v.t("commandClose"),onPress:i},d={txHash:t,txHashTitle:v.t("commandViewTransaction")};return o?{type:"error",title:v.t("mintStakeStatusErrorTitle"),message:v.t("mintStakeStatusErrorMessage",{poolTokenSymbol:e}),...d,primaryButton:u,showUKDisclaimer:r,openExternalLink:a}:n==="confirmed"?{type:"success",title:v.t("mintStakeStatusSuccessTitle"),message:"",...d,primaryButton:u,showUKDisclaimer:r,openExternalLink:a}:{type:"loading",title:v.t("mintStakeStatusLoadingTitle"),message:v.t("mintStakeStatusLoadingMessage"),...d,primaryButton:u,showUKDisclaimer:r,openExternalLink:a}}var _u=(e,t)=>{let o=Oo(),[n,r]=(0,dt.useState)("loading"),[i,a]=(0,dt.useState)(),[u,d]=(0,dt.useState)(),{trackMintSubmitted:l,trackMintSuccess:m,trackMintFailed:p}=Pt(),{usageState:g,setUsageState:S}=Le(),y=_(W=>W.provider),k=_(W=>W.setTransactionData),A=_(W=>W.amount),b=ut,I=y?.stakePoolTokenMetadata.metadata.symbol??"",T=y?.stakePoolTokenMetadata.metadata.address??"",{data:M}=te(),N=M?.type==="ledger",K=(0,dt.useMemo)(()=>(M?.addresses??[]).find(W=>W.networkID===b?.data.chain.id),[b?.data.chain.id,M?.addresses])?.addressType??"solana",{fungible:F,isLoadingTokens:Z}=Ct({key:T}),at=(0,dt.useCallback)(W=>{l(W.id),a(W),g.mint||S({mint:!0})},[S,l,g.mint]),tt=(0,dt.useCallback)(W=>{p(A);let ue=Ro(W);d(ue)},[p,A]),et=(0,dt.useMemo)(()=>({topLeft:{text:v.t("mintLiquidStakePendingTitle")}}),[]),{executeLiquidStake:Tt,isReadyToExecute:Ut}=Uo({isLoadingPoolToken:Z,pendingActivityRow:et,onTransactionSubmitted:at,onTransactionFailed:tt,activityType:"delegateStake"}),ke=(0,dt.useCallback)(()=>{m({amount:A,provider:y}),k(void 0),o()},[m,A,y,k,o]),{isSuccess:Jt,isError:zt,error:Yt}=fo(ke,i);(0,dt.useEffect)(()=>{Jt?r("confirmed"):zt&&(r("error"),d(Yt),p(A))},[Jt,p,A,zt,Yt,i]);let Qt=Mo({txReceipt:i,isTxError:zt,poolTokenFungible:F,invalidateQueries:o,dismissLiquidStaking:e}),q=ne(),mt=(0,dt.useMemo)(()=>Fu({poolTokenSymbol:I,txHash:i?.id,txError:u,confirmationStatus:n,showUKDisclaimer:q,onDismiss:Qt,openExternalLink:t}),[I,i?.id,u,n,Qt,t,q]);return{addressType:K,isLedger:N,isReadyToExecute:Ut,statusPageProps:mt,learnMoreLink:Eu,txError:u,executeLiquidStake:Tt,isJitoSOL:Do(y),isPSOL:Je(y)}};s();c();var Xe=x(E());function Mu({navigateToMintLiquidStakeAmountPage:e,navigateBack:t,entryPoint:o}){let{trackMarketingModalContinue:n}=Pt(),{mutate:r}=bt("StakingWelcomeNew"),i=vr("psol-popup-copy-test"),a=(0,Xe.useCallback)(()=>{n({lstCaip19:B,testVariant:i,entryPoint:o}),e(B),r()},[e,n,r,i,o]),u=(0,Xe.useCallback)(()=>{t(),r()},[t,r]),{t:d}=J(),l={title:d("liquidStakingInfoPageStillEarningZero"),description:d("liquidStakingInfoPageConvertYourSOL"),primaryButtonText:d("liquidStakingInfoPageConvertYourSOLButton")},m={title:d("liquidStakingInfoPageEarnUpTo9APY"),description:d("liquidStakingInfoPageConvertYourSOL2"),primaryButtonText:d("liquidStakingInfoPageStartEarning")},p=i==="test1"?l:i==="test2"?m:l;return(0,Xe.useLayoutEffect)(()=>()=>r(),[r]),{onPrimaryButtonPress:a,onClose:u,viewState:p}}s();c();s();c();var Ga=x(E());s();c();var Qa=e=>{let t=O.getMintTokenTransaction({stakePoolAddress:e.stakePoolAddress,ownerAddress:e.ownerAddress,amount:e.amount,poolTokenAccountAddress:e.poolTokenAccountAddress}),o=!!e.stakePoolAddress&&!!e.ownerAddress&&!!e.amount;return C({enabled:o,queryKey:t,staleTime:1/0,async queryFn(){if(U.isSolanaNetworkID(e.networkId))try{let{transaction:n,signers:r,solWithdrawalFee:i,stakeWithdrawalFee:a}=await sr(e);return{networkID:e.networkId,transaction:n,signers:r,solWithdrawalFee:i,stakeWithdrawalFee:a}}catch(n){throw j.captureError(n,"staking"),n}throw new Error(`Unsupported networkId: ${e.networkId}`)}})};var Bu=(e,t)=>{let o=_(S=>S.amount),n=_(S=>S.setTransactionData),{data:r}=ft("solana"),{connection:i}=Lt(),{fungible:a}=Ct({key:e?.stakePoolTokenMetadata.metadata.address||""}),u=a?Jr(a):void 0,{trackMintApprovedByUser:d}=Pt(),{data:l,isPending:m}=Qa({amount:Q(o).toNumber(),connection:i,networkId:e?.chainId??U.solana.mainnetID,stakePoolAddress:e?.stakePoolAddress??"",ownerAddress:r?.address??"",poolTokenAccountAddress:u}),p=qo({provider:e,process:"mint",transactionData:l,isLoadingTransactionData:m}),g=(0,Ga.useCallback)(()=>{d({provider:e,payAmount:p.payAsset?.amount,receiveAmount:p.receiveAsset?.amount,payAmountUSD:p.payAsset?.amountUsd,receiveAmountUSD:p.receiveAsset?.amountUsd,payAssetTitle:p.payAsset?.title,receiveAssetTitle:p.receiveAsset?.title,providerName:p.providerName}),n(l),t()},[d,e,p.payAsset?.amount,p.payAsset?.amountUsd,p.payAsset?.title,p.receiveAsset?.amount,p.receiveAsset?.amountUsd,p.receiveAsset?.title,p.providerName,n,l,t]);return{...p,onPrimaryButtonPress:g}};s();c();var Uu=x(E());s();c();s();c();var Ze=x(E());var Ou=(e,t)=>{let{navigateToStake:o,navigateToUnstake:n,navigateToExternalLink:r}=e,{trackMintModalContinue:i}=Pt(),a=Kt(B),u=Ot("enable-psol-staking"),d=Ot("enable-deposit-psol-with-kamino-link"),p=!t||t===Gr?u&&a?B:oe:t,g=(0,Ze.useCallback)(()=>{o(p)},[o,p]),S=(0,Ze.useCallback)(()=>{i(p),o(p)},[o,i,p]),y=(0,Ze.useCallback)(()=>{p===B?n():r(Fn)},[n,r,p]),k=(0,Ze.useCallback)(()=>{r(Bn)},[r]),A=ur({method:"mint",goToInfoPage:g,goToInitFlowPage:S});return Kt(p)?{isSupported:!0,onStake:A,onUnstake:y,onDepositWithKamino:d?k:void 0}:{isSupported:!1,onStake:void 0,onUnstake:void 0,onDepositWithKamino:void 0}};s();c();var Fe=x(E()),Nu="https://phantom.com/en-GB/uk-risk-summary";function dr({navigateToExternalLink:e,paddingTop:t,marginX:o,paddingX:n}){let{t:r}=J();return Fe.default.createElement(rt,{backgroundColor:"brandMidnight",paddingX:n??"screen",marginX:o,paddingBottom:12,style:{paddingTop:(t??0)+4},gap:8},Fe.default.createElement(z,null,Fe.default.createElement(be,null,Fe.default.createElement(z,{font:"captionSemibold",color:"textBase"},r("stakingUKDisclaimerPart1"))," ",Fe.default.createElement(z,{font:"captionSemibold",color:"textBase",onPress:()=>e(Nu),style:{textDecorationLine:"underline"}},r("stakingUKDisclaimerTake2Mins")))))}s();c();var lr=x(E());function Ru({navigateToMintLiquidStakeAmountPage:e,navigateBack:t}){let{trackMintModalContinue:o}=Pt(),n=(0,lr.useCallback)(()=>{o(B),e(B)},[e,o]),r=(0,lr.useCallback)(()=>{t()},[t]),i={imageUrl:"https://assets.phantom.app/assets/metadata/PSOL.png",title:v.t("mintPSOLInfoPageTitle"),features:[{icon:"InfoCircle",title:v.t("mintPSOLFeature1Title"),description:v.t("mintPSOLFeature1Description")},{icon:"TrendingUp",title:v.t("mintPSOLFeature2Title"),description:v.t("mintPSOLFeature2Description")},{icon:"ShieldVerified",title:v.t("mintPSOLFeature3Title"),description:v.t("mintPSOLFeature3Description")}],primaryButtonText:v.t("gotIt")};return{onPrimaryButtonPress:n,onClose:r,viewState:i}}s();c();var pt=x(E());s();c();var lt=x(E());function ja({marginTop:e}){let{t}=J();return lt.default.createElement(rt,{marginTop:e},lt.default.createElement(nn,{content:lt.default.createElement(rt,{padding:16},lt.default.createElement(z,null,t("stakingUKDisclaimerPastPerformanceBody")))},lt.default.createElement(z,{font:"caption",color:"brandYellowMoon"},t("stakingUKDisclaimerPastPerformance"))),lt.default.createElement(z,null,lt.default.createElement(be,null,lt.default.createElement(z,{font:"caption",color:"textDiminished"},t("stakingUKDisclaimerExchangeRates"))," ")),lt.default.createElement(nn,{content:lt.default.createElement(rt,{padding:16},lt.default.createElement(z,null,t("stakingUKDisclosuresMarketDataBody")))},lt.default.createElement(z,{font:"caption",color:"brandPrimary"},t("stakingUKDisclaimerDisclosures"))),lt.default.createElement(z,{font:"caption",color:"textDiminished",marginTop:24},t("stakingUKDisclaimerApproval")))}var Du={InfoCircle:so.InfoCircle,TrendingUp:so.TrendingUp,ShieldVerified:so.ShieldVerified};function qu(e){return pt.default.createElement(Du[e],{size:24})}function Vu({viewState:e,openLink:t,onPastPerformancePress:o,onDisclosuresPress:n}){let{features:r,title:i,imageUrl:a}=e;return pt.default.createElement(rt,{flex:1,backgroundColor:"areaBase",borderRadius:"row",width:"100%",maxWidth:400},pt.default.createElement(dr,{marginX:"-16",paddingX:12,paddingTop:8,navigateToExternalLink:t}),pt.default.createElement(rt,{alignItems:"center",padding:24,marginY:16},pt.default.createElement(_r,{src:a,size:100})),pt.default.createElement(z,{color:"white",font:"title1Bold",marginBottom:16,align:"center"},i),pt.default.createElement(rt,{gap:"list",marginBottom:"screen"},r.map(u=>pt.default.createElement(rt,{key:u.title,direction:"row",alignItems:"flex-start",marginBottom:16},pt.default.createElement(rt,{width:24,height:24,marginRight:"screen",alignItems:"center",justifyContent:"center"},qu(u.icon)),pt.default.createElement(rt,{flex:1},pt.default.createElement(z,{color:"white",font:"bodySemibold",marginBottom:2},u.title),pt.default.createElement(z,{color:"textDiminished",font:"caption"},u.description))))),pt.default.createElement(ja,{marginTop:0,showPastPerformanceInline:!0,onPastPerformancePress:o,onDisclosuresPress:n}))}s();c();s();c();var Ku=["liquidStakingSupportedTokens","featureUsed",qn],Wu=e=>{let t=String(e.queryKey[1]);return Ku.includes(t)};s();c();export{Te as a,Rt as b,es as c,un as d,os as e,ns as f,as as g,ss as h,rs as i,ln as j,me as k,cs as l,ni as m,bt as n,us as o,ps as p,ms as q,fs as r,ks as s,_f as t,Mf as u,fe as v,Va as w,Ka as x,Wa as y,_s as z,Ms as A,ut as B,Bs as C,Mn as D,oe as E,Po as F,De as G,nc as H,Xg as I,Ci as J,O as K,To as L,Qs as M,_ as N,Wu as O,Ve as P,Ie as Q,zn as R,Et as S,oc as T,Ge as U,Ft as V,Gn as W,_o as X,mc as Y,Kt as Z,ne as _,sa as $,ca as aa,NA as ba,fa as ca,du as da,lu as ea,Xk as fa,Uo as ga,gc as ha,bc as ia,pu as ja,mu as ka,Su as la,yu as ma,vu as na,wu as oa,Pu as pa,ur as qa,Tu as ra,Da as sa,Lu as ta,Pt as ua,Bu as va,_u as wa,Mu as xa,Ou as ya,dr as za,Ru as Aa,ja as Ba,Vu as Ca};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-YITPJN7X.js.map
