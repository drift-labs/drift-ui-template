import{a as ot}from"./chunk-3QXXMOWQ.js";import{b as J,e as z,g as Z,h as tt}from"./chunk-E6KYSGDB.js";import{e as X,f as q}from"./chunk-BSK64RRL.js";import{a as p}from"./chunk-YDS6O2TZ.js";import{a as D,jc as H}from"./chunk-ZYPI3ESJ.js";import{b as N,c as P}from"./chunk-YITPJN7X.js";import{J as M,K as U,L as $,N as c,P as B,Y as j,b as m,g as V}from"./chunk-BHIJKWN7.js";import{b as d}from"./chunk-6N4GZCP2.js";import{z as K}from"./chunk-QSYOXIBV.js";import{d as Y}from"./chunk-KY4L2TTE.js";import{a as W,g as Q}from"./chunk-W47K3OCY.js";import{a as F,c as x}from"./chunk-25TPEQ2Q.js";import{X as v,e as C,la as G}from"./chunk-HTY647YJ.js";import{Pc as L,Qd as w,Xc as O,kc as y,kd as R,ld as h,tc as b,vf as I}from"./chunk-E2A6YDRV.js";import{S as k,c as lt,v as _}from"./chunk-BEUYJGED.js";import{f as gt,h as a,n as s}from"./chunk-64CIGK2X.js";a();s();var ut={...h,...O,...P,...Y,...K},et=b.getInstance({storage:ot,keyRegistry:ut,authRepository:p,queryClient:H,isOnboardingDone:q});p.subscribe("user",async()=>{et.hydrateIfNeeded()});p.subscribe("loggedOut",async()=>{et.clear()});a();s();a();s();a();s();var ft=m(e=>{let t=Object.fromEntries(Object.entries(e(c).data?.updates??{}).map(([o,r])=>[o,{name:r.name,quantity:r.totalQuantity/10**r.decimals,timestamp:r.timestamp}]));return{errors:e(Z),walletCaip19:e(M),totalValue:e(z),portfolioValueStatus:e(J).status,balanceUpdatesStatus:e(c).status,balancesStatus:e(U).status,balancesFromUnixTimestamp:Math.floor(e($)/1e3),updatesFromUnixTimestamp:(e(c).data?.lastTimestamp??0)/1e6,updates:t,hasNextPage:e(B),fungibleTokens:e(j).map(o=>o.encodedCaip19)}}),rt=ft;var at=m(e=>({...e(rt),visibleTokens:e(tt).map(t=>t.encodedCaip19)}));var n=gt(lt());a();s();var l=class{async get(t){let o=null;try{if(o=self.localStorage.getItem(t),typeof o!="string")return null;try{return JSON.parse(o)}catch{return console.warn(`[DeprecatedLocalStorage.get] Error parsing JSON for key "${t}"`),o}}catch(r){let i=`[DeprecatedLocalStorage.get] Error getting key (${t}): ${r}`;throw new Error(i)}}async getAll(t){try{let o={};t=t||Object.keys(self.localStorage);for(let r of t)o[r]=await this.get(r);return o}catch(o){let r=`[DeprecatedLocalStorage.getAll] Error getting key(s) (${t}): ${o}`;throw new Error(r)}}async remove(t){let o=`[DeprecatedLocalStorage.remove] Error removing key(s) (${t}): Method not implemented`;throw new Error(o)}async set(t,o){let r=`[DeprecatedLocalStorage.set] Error setting key (${t}): Method not implemented`;throw new Error(r)}async setAll(t){let r=`[DeprecatedLocalStorage.setAll] Error setting key (${Object.keys(t)}): Method not implemented`;throw new Error(r)}subscribe(t){return console.warn("[DeprecatedLocalStorage.subscribe] Method not implemented"),()=>{}}async update(t){let o=`[DeprecatedLocalStorage.update] Error updating key(s) (${t}): Method not implemented`;throw new Error(o)}};var St=new F,dt=new l,Et=[...R,...D,N,w,"i18nextLng"],_o=()=>{let{data:e,isFetching:t}=I(),{data:o,isFetching:r}=G(),{data:i,isFetching:st}=L([{key:"Local Storage",storage:St},{key:"Deprecated Local Storage",storage:dt}],Et),{data:E}=v(),T=X(),[A]=V(at),u=(0,n.useCallback)(async()=>{let{version:f}=chrome.runtime.getManifest(),S=await x.getDeviceId(),pt=await T();return{"App Version":f,"Platform Information":W,"Display Language":C(k.language),"Phantom Auth":pt,"Device Id":S,Portfolio:A,"Auto Lock Timer(ms)":E,...e,...o,...i}},[A,e,o,i,T,E]),nt=t||r||st,it=(0,n.useCallback)(async f=>{f?.preventDefault();let S=await u();await y.downloadLog(S)},[u]),mt=(0,n.useCallback)(()=>{d({url:Q})},[]),ct=(0,n.useCallback)(()=>{d({url:_})},[]);return{appState:u,isFetching:nt,goCreateTicket:mt,goSupportDesk:ct,downloadLogs:it}};export{_o as a,et as b};
//# sourceMappingURL=chunk-DIE5362K.js.map
