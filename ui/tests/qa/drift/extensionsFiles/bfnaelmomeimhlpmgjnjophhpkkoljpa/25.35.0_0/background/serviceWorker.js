import{a as Ks,b as K,c as bp,d as i,e as $s,f as Gs,g as He,h as Ys,i as sn,j as xe,k as Yt,l as vp,m as mr,n as hr,o as Ap,p as _p,q as zn,s as Rp,u as on,w as Ep}from"../chunk-PTMEWGFX.js";import{a as kp}from"../chunk-7VRV5TI4.js";import{a as Mr}from"../chunk-25S7ECPH.js";import{a as Kn}from"../chunk-VM67K2FR.js";import"../chunk-NZB3I37Z.js";import{a as Vn}from"../chunk-E5PF7MT2.js";import{d as Tp}from"../chunk-JVIFB5NQ.js";import{a as Wn}from"../chunk-KGWRBMZX.js";import{a as Cp}from"../chunk-ZSGCTX7Q.js";import{a as Ip}from"../chunk-YDS6O2TZ.js";import"../chunk-2XJQPJ5M.js";import{$ as ae,jc as Gt}from"../chunk-ZYPI3ESJ.js";import"../chunk-6EZHAYJL.js";import"../chunk-BRQKCECY.js";import"../chunk-YOO3KN23.js";import"../chunk-YITPJN7X.js";import"../chunk-CQIC5IDD.js";import"../chunk-BHIJKWN7.js";import{a as jn,b as lp,c as zs,d as up,e as mp,g as hp,k as fp}from"../chunk-6N4GZCP2.js";import"../chunk-5OF7XKWY.js";import{a as Sp}from"../chunk-5AA7BGLC.js";import"../chunk-QSYOXIBV.js";import"../chunk-O7KQ5SYD.js";import{a as hh,c as gp,e as yp,f as xp}from"../chunk-724O52SZ.js";import{g as jc,l as wp}from"../chunk-HUS6FTFG.js";import{a as Ct,b as Vt,d as uc}from"../chunk-NCSBB2TA.js";import"../chunk-4BKJE7YB.js";import"../chunk-KY4L2TTE.js";import{b as an,c as Zs}from"../chunk-W47K3OCY.js";import{a as _e,c as Te}from"../chunk-25TPEQ2Q.js";import{a as dp}from"../chunk-E7B2SEGG.js";import{a as St}from"../chunk-XD32MQ4W.js";import{Aa as tn,Lb as np,O as $c,Pb as sp,Qb as op,Tb as ip,Wa as Hn,Wb as Fn,bb as $t,ea as at,fa as lt,g as Vc,ga as Gc,ha as ze,ia as Ln,ja as Mn,jb as ep,ka as Yc,kb as tp,la as Bt,ma as Zc,mb as rp,na as Xc,oa as Lr,pa as Jc,qa as Pn,qc as ap,ra as ut,sa as Un,sc as cp,ta as Qc,tb as mt,tc as pp,u as zc,ua as Nn,va as Ws,wa as Dn,x as Kc,xa as qn,ya as On,za as be}from"../chunk-LHPEWMJX.js";import{A as Fs,C as Oc,J as Hc,K as ur,N as Fc,a as Os,ea as Wc,f as zt,n as Dc,r as qc,sa as js,ta as Vs,va as rn,wa as nn,x as Kt,y as Br}from"../chunk-HTY647YJ.js";import{Ad as Ce,B as Tr,Cb as Sc,Db as qs,Dd as Lc,Ee as Uc,Lb as Ir,M as dc,N as lc,Ob as et,Pb as vc,Pd as Mc,R as jt,Rb as Ac,S as Ae,Tb as Cr,Ub as _c,Vb as In,Wc as Tc,We as Hs,X as gc,Yb as Rc,bb as wc,bd as Bn,cb as bc,ea as yc,fc as kc,hb as Qe,hg as Nc,ib as Er,jc as Cn,kc as en,la as De,mc as le,rd as Ec,sa as En,ud as Ic,va as xc,vd as Cc,x as mh,xb as Ye,zd as Bc,ze as Pc}from"../chunk-E2A6YDRV.js";import{A as ac,E as Us,F as Ns,G as Et,H as It,I as Jr,J as he,K as Qr,L as Be,M as kn,N as bt,O as cc,P as pc,Q as _r,R as Rr,T as Ds,U as kr,V as lr,e as Tt,u as oc,v as ic,z as Rn}from"../chunk-4XTMHWN2.js";import{B as fc,Qb as gh,S as tt,b as Xr,c as ke,d as ve,l as dr,p as mc,q as Tn,t as hc,va as fh}from"../chunk-BEUYJGED.js";import"../chunk-3C334UTS.js";import"../chunk-3JLWNHUO.js";import"../chunk-KHOMEOLW.js";import{a as Zr,c as sc,d as Ie,f as re,h as c,m as Buffer,n as p}from"../chunk-64CIGK2X.js";var Od=sc((uS,qd)=>{"use strict";c();p();function Hf(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=n}var a=e.length,d=e.charAt(0),u=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function x(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var S=0,v=0,f=0,_=A.length;f!==_&&A[f]===0;)f++,S++;for(var I=(_-f)*h+1>>>0,E=new Uint8Array(I);f!==_;){for(var C=A[f],N=0,M=I-1;(C!==0||N<v)&&M!==-1;M--,N++)C+=256*E[M]>>>0,E[M]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");v=N,f++}for(var J=I-v;J!==I&&E[J]===0;)J++;for(var $=d.repeat(S);J<I;++J)$+=e.charAt(E[J]);return $}function g(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;for(var S=0,v=0,f=0;A[S]===d;)v++,S++;for(var _=(A.length-S)*u+1>>>0,I=new Uint8Array(_);A[S];){var E=t[A.charCodeAt(S)];if(E===255)return;for(var C=0,N=_-1;(E!==0||C<f)&&N!==-1;N--,C++)E+=a*I[N]>>>0,I[N]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");f=C,S++}for(var M=_-f;M!==_&&I[M]===0;)M++;for(var J=new Uint8Array(v+(_-M)),$=v;M!==_;)J[$++]=I[M++];return J}function y(A){var S=g(A);if(S)return S;throw new Error("Non-base"+a+" character")}return{encode:x,decodeUnsafe:g,decode:y}}qd.exports=Hf});var Ur=sc((fS,Hd)=>{c();p();var Ff=Od(),Wf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Hd.exports=Ff(Wf)});c();p();c();p();c();p();c();p();c();p();c();p();var Bp=re(mh(),1),$n=re(ke(),1),Th=re(ve(),1),Js=re(ke(),1),Lp=re(ke(),1),Qs=re(ke(),1),eo=re(ke(),1),Ze={SOLANA_MAINNET:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",SOLANA_DEVNET:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",SOLANA_TESTNET:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3",ETHEREUM_MAINNET:"eip155:1",ETHEREUM_SEPOLIA:"eip155:11155111",MONAD_DEVNET:"eip155:20143"},c1={[Ze.SOLANA_MAINNET]:"Solana Mainnet",[Ze.SOLANA_DEVNET]:"Solana Devnet",[Ze.SOLANA_TESTNET]:"Solana Testnet",[Ze.ETHEREUM_MAINNET]:"Ethereum Mainnet",[Ze.ETHEREUM_SEPOLIA]:"Ethereum Sepolia",[Ze.MONAD_DEVNET]:"Monad Devnet"};var p1=Object.freeze({});var yh={name:"@dialectlabs/blinks-core",version:"0.18.1",license:"Apache-2.0",private:!1,sideEffects:!0,type:"module",repository:{type:"git",url:"https://github.com/dialectlabs/blinks"},scripts:{build:"tsup-node",dev:"tsup-node --watch"},main:"dist/index.cjs",module:"dist/index.js",types:"dist/index.d.ts",exports:{".":{import:"./dist/index.js",require:"./dist/index.cjs",types:"./dist/index.d.ts"}},files:["dist"],devDependencies:{"@solana/actions-spec":"~2.4.2","@types/react":"^18.3.3","@types/react-dom":"^18.3.0","@typescript-eslint/eslint-plugin":"^7.16.1","@typescript-eslint/parser":"^7.16.1",autoprefixer:"^10.4.19",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-react":"^7.34.4","eslint-plugin-react-hooks":"^4.6.2",postcss:"^8.4.39","postcss-prefix-selector":"^1.16.1",prettier:"^3.3.3","prettier-plugin-organize-imports":"^4.0.0","prettier-plugin-tailwindcss":"^0.6.5",tailwindcss:"^3.4.3",tsup:"^8.2.0",typescript:"^5.5.3"},peerDependencies:{react:">=18","@solana/web3.js":"^1.95.3"},dependencies:{nanoid:"^5.0.7"},peerDependenciesMeta:{"@solana/web3.js":{optional:!0}}},xh=yh,d1=xh.devDependencies["@solana/actions-spec"].replace(/[^\d.]/g,"");var wh=[Ze.SOLANA_MAINNET,Ze.SOLANA_DEVNET];var l1=[Ze.SOLANA_MAINNET];var bh="(?<domain>[^\\n]+?) wants you to sign a message with your account:\\n",Sh="(?<address>[^\\n]+)(?:\\n|$)",vh="(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))",Ah="(?:\\nChain ID: (?<chainId>[^\\n]+))?",_h="\\nNonce: (?<nonce>[^\\n]+)",Rh="\\nIssued At: (?<issuedAt>[^\\n]+)",kh=`${Ah}${_h}${Rh}`,u1=new RegExp(`^${bh}${Sh}${vh}${kh}\\n*$`);var m1=class Xs{constructor(t,r){if(this.adapter=r,!t)throw new Error("rpcUrl or connection is required");this.connection=typeof t=="string"?new Bp.Connection(t,"confirmed"):t}static CONFIRM_TIMEOUT_MS=6e4*1.2;static DEFAULT_METADATA={supportedBlockchainIds:wh};connection;get metadata(){return this.adapter.metadata??Xs.DEFAULT_METADATA}signTransaction(t,r){return this.adapter.signTransaction(t,r)}confirmTransaction(t){return new Promise((r,n)=>{let s=Date.now(),o=async()=>{if(Date.now()-s>=Xs.CONFIRM_TIMEOUT_MS){n(new Error("Unable to confirm transaction: timeout reached"));return}try{let a=await this.connection.getSignatureStatus(t);if(a.value?.err){n(new Error("Transaction execution failed, check wallet for details"));return}if(a.value&&a.value.confirmations!==null){r();return}}catch(a){console.error("[@dialectlabs/blinks] Error confirming transaction",a)}setTimeout(o,3e3)};o()})}async signMessage(t,r){return this.adapter.signMessage(t,r)}async connect(t){try{return await this.adapter.connect(t)}catch{return null}}},h1=10*60*1e3;var Ph=re(ke(),1);c();p();var Uh=re(ke(),1);var Pp=re(ve(),1);var Nh=re(ke(),1),Dh=re(ve(),1);var qh=re(ve(),1),Oh=re(ve(),1),Up=re(ve(),1),Np=re(ve(),1),Dp=re(ve(),1),T1=re(ke(),1),Hh=re(ve(),1),E1=re(ke(),1),Fh=re(ve(),1),I1=re(ke(),1),qp=re(ve(),1),Wh=re(ke(),1),to=re(ve(),1);var Op=re(ve(),1),Hp=re(ve(),1);var ro=re(ke(),1);var jh=re(ke(),1),Vh=re(ve(),1),Fp=re(ve(),1),Wp=re(ve(),1),cn=re(ke(),1),jp=re(ve(),1);var zh=re(ke(),1),Vp=re(ve(),1),Kh=re(ve(),1),Gn=re(ke(),1),$h=re(ve(),1),Gh=re(ve(),1),Yn=re(ke(),1),Yh=re(ve(),1),Zh=re(ve(),1);var Zn=re(ke(),1);var Xh=re(ke(),1),zp=re(ve(),1),Kp=re(ve(),1),Xn=re(ke(),1),$p=re(ve(),1),no=re(ke(),1),Jh=re(ve(),1),so=re(ke(),1),Qh=re(ve(),1),Jn=re(ke(),1),ef=re(ve(),1),oo=re(ve(),1);var tf=re(ke(),1);var Gp=re(ve(),1),rf=re(ve(),1);var nf=re(ke(),1),sf=re(ve(),1);var of=re(ke(),1);var Yp=re(ke(),1);var af=re(ke(),1),Zp=re(ve(),1),cf=re(ve(),1);var df=re(hh(),1),lf=re(ve(),1);c();p();c();p();c();p();c();p();c();p();c();p();var uf=re(Tt());c();p();function io(e,t){if(!e)return{hideProvidersArray:!1,dontOverrideWindowEthereum:!1};let r=t.find(n=>n.hostname.toLowerCase().trim()===e.toLowerCase().trim());return r?{hideProvidersArray:r.hideProvidersArray,dontOverrideWindowEthereum:r.dontOverrideWindowEthereum}:{hideProvidersArray:!1,dontOverrideWindowEthereum:!1}}c();p();c();p();c();p();function Xp(e){return new Promise(t=>setTimeout(t,e))}function mf(e,t){let r=typeof t.interval=="function"?t.interval:()=>t.interval;if(typeof e!="function")throw new Error("Invalid arguments for retryInternal");let n=1;async function s(){try{return await e()}catch(o){if(n++<t.times&&t.errorFilter(o))return await Xp(r(n-1)),s();throw o}}return s()}async function Jp(e,t,r=3,n=2e3,s){return mf(e,{times:r,interval:s?()=>n:o=>n*Math.pow(2,o-1),errorFilter:t})}var hf="https://sanity-proxy-v2.phantom.app",ff="production",gf=dr.object({hostname:dr.string(),hideProvidersArray:dr.boolean(),dontOverrideWindowEthereum:dr.boolean()}),yf=dr.object({dApps:dr.array(gf).optional()}).optional(),xf=`
*[_type == 'dAppsList' && _id == 'dAppsList-singleton']{
 dApps
}[0]`,ao=()=>Jp(async()=>{let e=await gc.get(`${hf}/v1/data/query/${ff}?query=${encodeURIComponent(xf)}`);if(e.status>=300)throw new Error(`status code: ${e.status}, body: ${e.data}`);let t=e.data;return yf.parse(t.result)?.dApps??[]},()=>!0,3,50);function co(e){try{let t=new URL(e).hostname;if(!t||t==="localhost")return null;let r="www.";return t.startsWith(r)?t.slice(r.length):t}catch{return null}}c();p();var vf=re(Tt()),Af=re(Xr());var X0=new Error("Unsupported path.");c();p();c();p();var Rf=re(Xr());c();p();c();p();var Tf=re(Xr());c();p();var Ef=re(Xr());c();p();var If=re(Xr());var Mf=re(Tt());c();p();var Bf=re(St());c();p();c();p();c();p();var Lf=re(St());c();p();c();p();var Pf=re(St());c();p();c();p();var Uf=re(St());c();p();var Rw=[It.sol_blink_connect.method,It.sol_blink_signAndSendAllTransactions.method,It.sol_blink_signMessage.method,Et.eth_blink_requestAccounts.method,Et.eth_blink_sendTransaction.method,Et.eth_blink_sign.method];c();p();var rs=class{storage;ttlMs;asyncFunction;cacheKey;cacheExpirationKey;constructor(t,r,n,s){this.storage=t,this.ttlMs=r,this.asyncFunction=n,this.cacheKey=`${s}-data`,this.cacheExpirationKey=`${s}-expiration`,this.updateCache()}async updateCache(){try{let t=await this.asyncFunction();await this.storage.set(this.cacheKey,t),await this.storage.set(this.cacheExpirationKey,Date.now()+this.ttlMs)}catch(t){throw new Error("error updating cache: "+t?.message,{cause:t})}}async get(){let t=await this.storage.get(this.cacheKey);try{return t||(await this.updateCache(),await this.storage.get(this.cacheKey))}finally{let r=await this.storage.get(this.cacheExpirationKey);(typeof r!="number"||r<Date.now())&&await this.updateCache()}}};var oh=re(gh()),Je=re(St());c();p();var ns=re(Tt());async function rd(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(!Object.values(De).includes(r))return i.invalidInput(e.id,"Invalid or missing chain.");let n=t[1];if(typeof n!="string")return i.invalidInput(e.id,"Missing private key.");let s=t[2];if(typeof n!="string")return i.invalidInput(e.id,"Missing account name.");if(!He())return i.result(e.id,null);let a=await xe.addPrivateKeyAccount(r,Qe.from(Buffer.from(n,"base64")),s);return i.result(e.id,JSON.stringify(a))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function nd(e){try{let t=e.params;if(Object.values(t).length===0)return i.invalidInput(e.id);let r=Object.keys(t);if(!Object.values(De).includes(...r))return i.invalidInput(e.id);if(Object.values(t).map(o=>typeof o!="string").reduce((o,a)=>o||a,!1))return i.invalidInput(e.id);let s=await xe.addReadonlyAccount(t);return i.result(e.id,JSON.stringify(s))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function sd(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(typeof r!="string")return i.invalidInput(e.id);let n=t[1];if(!Array.isArray(n)||n.length===0)return i.invalidInput(e.id);let s=t[2];if(typeof s!="string")return i.invalidInput(e.id,"Missing account name.");if(!He())return i.result(e.id,null);let d=(await Vn()).fromEntropy(ns.default.decode(r)),u=await xe.addSeedWithMultipleAccounts(Qe.from(d.getEntropy()),s,n);return i.result(e.id,JSON.stringify(u))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function od(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(typeof r!="string")return i.invalidInput(e.id);let n=t[1];if(!Array.isArray(n)||n.length===0)return i.invalidInput(e.id);let s=t[2];if(typeof s!="string")return i.invalidInput(e.id,"Missing account name.");if(!He())return i.result(e.id,null);let d=(await Vn()).fromEntropy(ns.default.decode(r)),u=await xe.addSeedlessWithMultipleAccounts(Qe.from(d.getEntropy()),s,n);return i.result(e.id,JSON.stringify(u))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function id(e){try{let t=e.params;if(typeof t!="string")return i.invalidInput(e.id);if(!He())return i.result(e.id,null);let s=(await Vn()).fromEntropy(ns.default.decode(t)),o=await xe.isExistingSeed(Qe.from(s.getEntropy()));return i.result(e.id,o)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function ad(e){try{let r=e.params[0];if(!r)return i.invalidInput(e.id,"Missing se*d identifier.");if(!He())return i.result(e.id,null);let s=await xe.fetchAllSeedMetas();if(!s||s.length===0)return i.invalidInput(e.id,"No available se*d.");if(!s.find(d=>d.identifier===r))return i.invalidInput(e.id,"Invalid se*d identifier.");let a=await xe.addAccountForExistingSeed(r);return i.result(e.id,JSON.stringify(a))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function cd(e){try{let r=e.params[0];if(!r)return i.invalidInput(e.id,"Missing se*d identifier.");if(!He())return i.result(e.id,null);let s=await xe.fetchAllSeedlessMetas();if(!s||s.length===0)return i.invalidInput(e.id,"No available se*d.");if(!s.find(d=>d.identifier===r))return i.invalidInput(e.id,"Invalid se*d identifier.");let a=await xe.addAccountForExistingSeedless(r);return i.result(e.id,JSON.stringify(a))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function pd(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(typeof r!="string")return i.invalidInput(e.id);let n=t[1];if(!Array.isArray(n)||n.some(a=>!Ec.safeParse(a).success))return i.invalidInput(e.id);if(!He())return i.result(e.id,null);let o=await xe.addLedgerAccounts(r,n);return i.result(e.id,JSON.stringify(o))}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function dd(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(typeof r!="string")return i.invalidInput(e.id);let n=t[1];if(typeof n!="string")return i.invalidInput(e.id,"Missing account identifier.");let s=t[2];if(!Object.values(De).includes(s))return i.invalidInput(e.id,"Invalid or missing chain.");if(!await hr(Qe.from(Buffer.from(r))))return i.invalidInput(e.id,"Invalid passw*rd.");let a=await xe.exportPrivateKey(n,s);if(!a)return i.result(e.id,null);let d=a.fold(u=>Buffer.from(u.buffer).toString("hex"));return i.result(e.id,d)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function ld(e){try{let t=e.params,r=t[0];if(typeof r!="string")return i.invalidInput(e.id);if(!await hr(Qe.from(Buffer.from(r))))return i.invalidInput(e.id,"Invalid passw*rd.");let s=t[1];if(!s)return i.invalidInput(e.id,"Missing se*d identifier.");let o=await xe.fetchAllSeedMetas(),a=await xe.fetchAllSeedlessMetas(),d=o.concat(...a);if(!d||d.length===0)return i.result(e.id,null);let u=d.find(g=>g.identifier===s);if(!u)return i.result(e.id,null);let h=await xe.exportEntropy(u.identifier);if(!h)return i.result(e.id,null);let x=h.fold(g=>Buffer.from(g.buffer).toString("hex"));return i.result(e.id,x)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function ud(e){try{let t=e.params;return Array.isArray(t)?typeof t[0]!="string"?i.invalidInput(e.id):typeof t[1]!="string"?i.invalidInput(e.id):He()?i.result(e.id,!0):i.result(e.id,null):i.invalidInput(e.id)}catch(t){return i.internalError(e.id,t.message)}}async function md(e){try{if(!He())return i.result(e.id,null);let r=await xe.deriveAddresses();return i.result(e.id,r)}catch(t){return le.captureError(Error(`Failed to derive addresses for enabled chains in account.ts due to ${t.message}`),"account"),i.internalError(e.id,t.message)}}async function hd(e){try{let t=e.params;return typeof t!="string"?i.invalidInput(e.id):He()?(await xe.removeAccount(t),i.result(e.id,!0)):i.result(e.id,null)}catch(t){return le.captureError(Error(`Failed to remove account in account.ts due to ${t.message}`),"account"),i.internalError(e.id,t.message)}}async function fd(e){try{let{identifier:t,toIndex:r}=e.params;return typeof t!="string"||typeof r!="number"?i.invalidInput(e.id):He()?(await xe.reorderAccount(t,r),i.result(e.id,!0)):i.result(e.id,null)}catch(t){return le.captureMessage("Failed to reorder account in account.ts","account"),i.internalError(e.id,t.message)}}async function gd(e){try{if(!He())return i.result(e.id,null);let r=await xe.fetchAllAccounts();if(!r)return i.result(e.id,null);let n=Mc({accounts:r}).accounts;return i.result(e.id,JSON.stringify(n))}catch(t){return i.internalError(e.id,t.message)}}async function yd(e){try{if(!He())return i.result(e.id,null);let r=await xe.fetchAllSeedMetas();return r?(Te.capture("walletSeeds",{data:{numOfSeeds:r.length}}),i.result(e.id,JSON.stringify(r))):i.result(e.id,null)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function xd(e){try{if(!He())return i.result(e.id,null);let r=await xe.fetchAllSeedlessMetas();return r?i.result(e.id,JSON.stringify(r)):i.result(e.id,null)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function wd(e){try{let t=e.params;if(typeof t.accountIdentifier!="string")return i.invalidInput(e.id,"Account Identifier needs to be of type string.");if(!Pc(t.params))return i.invalidInput(e.id,"Invalid vault signer params.");if(!He())return i.result(e.id,null);let n=await xe.sign(t.accountIdentifier,t.params);return i.result(e.id,Ct(n))}catch(t){return le.captureError(t,"transaction"),i.internalError(e.id,t.message)}}async function bd(e){try{let t=e.params;if("secretIdentifier"in t&&typeof t.secretIdentifier!="string")return i.invalidInput(e.id,"Secret Identifier needs to be present and of type string.");if(!He())return i.result(e.id,null);let n=await xe.getAuthenticationPublicKey(t.secretIdentifier);return i.result(e.id,Ct(n))}catch(t){return le.captureError(t,"transaction"),i.internalError(e.id,t.message)}}async function Sd(e){try{if(!He())return i.result(e.id,null);let r=await xe.checkVaultIntegrity();return i.result(e.id,r)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}c();p();var vd=1e4,lo=class{queue=[];isLocked=!1;currentTag=null;timeoutId=null;currentReject=null;constructor(){Tn()&&(globalThis.__PHANTOM_TEST_MUTEX__={cancelAllRequests:()=>this.cancelAllRequests()})}_processNextRequest(){if(this.queue.length===0){this.isLocked=!1;return}let t=this.queue.shift();t&&(this.isLocked=!0,this.currentTag=t.tag,this.currentReject=t.reject,t.resolve())}async acquire(t){return this.isLocked?new Promise((r,n)=>{this.queue.push({tag:t,resolve:r,reject:n})}):(this.isLocked=!0,this.currentTag=t,this.timeoutId=setTimeout(()=>{this.currentTag===t&&this.currentReject&&(this.currentReject(new Error(`Mutex request timed out after ${vd}ms for tag: ${t}`)),this.currentTag=null,this.isLocked=!1,this.currentReject=null,this._processNextRequest())},vd),new Promise((r,n)=>{this.currentReject=n,r()}))}release(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.currentTag=null,this.currentReject=null,this._processNextRequest()}cancelTaggedRequests(t){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.currentTag===t&&(this.currentTag=null,this.isLocked=!1);let r=this.queue.filter(n=>n.tag===t);if(this.queue=this.queue.filter(n=>n.tag!==t),r.forEach(n=>{n.reject(new Error(`Mutex request cancelled for tag: ${t}`))}),!this.isLocked&&this.queue.length>0){let n=this.queue.shift();n&&(this.isLocked=!0,this.currentTag=n.tag,n.resolve())}}async runExclusive(t,r){await this.acquire(t);try{return await r()}finally{this.release()}}cancelAllRequests(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.currentReject&&this.currentReject(new Error("Mutex request cancelled")),this.queue.forEach(t=>{t.reject(new Error("Mutex request cancelled"))}),this.currentTag=null,this.currentReject=null,this.isLocked=!1,this.queue=[]}},uo=new lo;async function Ad(e,t){return await uo.acquire(t),i.result(e.id,!0)}async function _d(e){return uo.release(),i.result(e.id,!0)}function mo(e){uo.cancelTaggedRequests(e)}c();p();async function Rd(e){try{let t=await mr.hasPersistedDeviceEncryptionKey();return i.result(e.id,t)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}async function kd(e){try{return await mr.deletePersistedDeviceEncryptionKey(),i.result(e.id,!0)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}var fo=!1;function Td(e){fo=e}function go(){return fo}async function Ed(e){try{let t=e.params;if(typeof t!="string")return i.invalidInput(e.id);let r=Qe.from(Buffer.from(t));return await hr(r)?(fo=!1,await _p(),await Ap(),i.result(e.id,{isUnlocked:!0,migrationResult:"no-migration"})):i.result(e.id,{isUnlocked:!1,migrationResult:"no-migration"})}catch(t){return i.internalError(e.id,t.message)}}function Id(e){try{let t=!!He();return i.result(e.id,t)}catch(t){return le.captureError(t,"account"),i.internalError(e.id,t.message)}}function Cd(e){try{return sn(),i.result(e.id,!0)}catch(t){return le.captureError(Error(`Failed to lock extension due to ${t.message}`),"account"),i.internalError(e.id,t.message)}}async function Bd(e){try{let t=e.params;return typeof t!="string"?i.invalidInput(e.id):(await xe.clearVault(),await mr.deletePersistedDeviceEncryptionKey(),Ys(Qe.from(Buffer.from(t))),await mr.persistDeviceEncryptionKey(),i.result(e.id,!0))}catch(t){return le.captureMessage(`\u{1F6AB} Failed to Set Passw*rd in BackgroundScript: ${t.message}`,"account"),i.internalError(e.id,t.message)}}async function Ld(e){try{let t=e.params;if(typeof t!="string")return i.invalidInput(e.id);let r=await hr(Qe.from(Buffer.from(t)));return i.result(e.id,r)}catch(t){return le.captureMessage(`\u{1F6AB} Failed to Verify Passw*rd in BackgroundScript: ${t.message}`,"account"),i.internalError(e.id,t.message)}}async function Md(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(typeof r!="string")return i.invalidInput(e.id,"Missing current password.");let n=t[1];if(typeof n!="string")return i.invalidInput(e.id,"Missing new password.");if(!await hr(Qe.from(Buffer.from(r))))return i.result(e.id,null);if(!He())return i.result(e.id,null);let a=Qe.from(Buffer.from(n)),d=await vp.rotateEncryptionKey(a);return d&&(le.addBreadcrumb("account","new passw*rd set in memory!","info"),Ys(a)),le.addBreadcrumb("account",`storage key rotation success: ${d}`,"info"),i.result(e.id,d)}catch(t){return le.captureMessage(`\u{1F6AB} Failed to Update Passw*rd in BackgroundScript: ${t.message}`,"account"),i.internalError(e.id,t.message)}}c();p();async function Pd(e){try{let t=e.params;if(!Array.isArray(t))return i.invalidInput(e.id);let r=t[0];if(typeof r!="string")return i.invalidInput(e.id);let n=t[1];return n.featureTag?(en.write(r,n.featureTag,n.severity,n.data),i.result(e.id,!0)):i.invalidInput(e.id)}catch(t){return le.captureError(t,"bugReporter"),i.internalError(e.id,t.message)}}function Ud(e){try{return en.downloadLog({noop:!0}),i.result(e.id,!0)}catch(t){return le.captureError(t,"bugReporter"),i.internalError(e.id,t.message)}}c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();c();p();var Nd=e=>{try{return new URL(e)}catch{return}};function F(e){let t=ue(e);if(t)return t.protocol!=="http:"&&t.protocol!=="https:"?`${t.protocol}//${t.hostname}`:t.origin}var Df="8bfda36a-d292-4aa3-b30f-53ef91ab6380",qf="b4285baa-c852-490f-9af2-8459680b1264";function ue(e){if(e.type==="BrowserTabRpcRequestSource"||e.type==="InternalRpcRequestSource")return e.url;if(e.type==="DeepLinkRpcRequestSource"){if(e.sdkKey===Df)return new URL("https://app.drift.trade");if(e.sdkKey===qf)return new URL("https://app.lulo.fi");let t=Nd(e.deepLinkUrl)?.searchParams?.get("redirect_uri");if(t){let r=Nd(t);if(r)return r.protocol!=="http:"&&r.protocol!=="https:"?new URL(`${r.protocol}//${r.hostname}`):r}return}}function ye(e){if(e.type==="BrowserTabRpcRequestSource"||e.type==="InternalRpcRequestSource")return e.icon?.href||null;if(e.type==="DeepLinkRpcRequestSource"){let t=ue(e);return t?zn(t.hostname):null}return null}var Of=new Set(hc),ie=async({source:e,request:t})=>{if(!e)return i.unauthorized(t.id);if(e.type!=="BrowserTabRpcRequestSource"&&e.type!=="InternalRpcRequestSource"&&e.type!=="DeepLinkRpcRequestSource")return i.unauthorized(t.id);let r=ue(e);if(!r)return i.unauthorized(t.id);if(e.type!=="DeepLinkRpcRequestSource"&&r.protocol!=="https:")return Of.has(r.hostname)?void 0:i.unauthorized(t.id)};c();p();var oe=e=>async({source:t,request:r},{i18n:n})=>{if(!t)return i.unauthorized(r.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!==e)return i.unauthorized(r.id,n.t("rpcErrorUnauthorizedUnknownSource"))};c();p();var Zt=async(e,{wallet:t})=>{let{request:r}=e,n="transactions"in r.params?r.params.transactions:[r.params.transaction],s=await Promise.all(n.map(o=>t.sol.addPriorityFee(o)));"transactions"in r.params?r.params.transactions=s:r.params.transaction=s[0]};c();p();c();p();function Xt(e){return/\blocalhost\b|(\d{1,3}\.){3}\d{1,3}/.test(e)}var ln=async({request:e,source:t},{analytics:r})=>t?t.type!=="BrowserTabRpcRequestSource"?i.internalError(e.id,"missing source"):async n=>{let{method:s}=e,o=t.url.hostname;if(Xt(o))return;let a={method:s,chainType:"bip122",chainId:"000000000019d6689c085ae165831e93",origin:o};if(s==="btc_requestAccounts"){let d={...a};"error"in n?r.declineConnection({...d,errorCode:n.error.code}):r.approveConnection({...d,eager:!1})}if(s==="btc_signPSBT"){let d={...a};"error"in n?r.declineTransaction({...d,errorCode:n.error.code}):r.approveTransaction(d)}if(s==="btc_signMessage"){let d={...a};"error"in n?r.declineSignMessage({...d,errorCode:n.error.code}):r.approveSignMessage(d)}}:i.internalError(e.id,"missing source");c();p();var je=async({request:e,source:t},{analytics:r,wallet:n,utils:s})=>{if(!t)return i.internalError(e.id,"missing source");let o=ue(t);return o?async a=>{if("error"in a)return;let d=o.toString();switch(e.method){case"eth_blink_sendTransaction":{let u=a.result,h=s.getOrigin(e.params[1].context.blinkUrl);return h?r.eth.submittedTransaction({origin:h,request:{...e,method:"eth_sendTransaction",params:[e.params[0]]},signatures:[u]}):void 0}case"eth_sendTransaction":{let u=a.result;return r.eth.submittedTransaction({origin:d,request:e,signatures:[u]})}case"eth_blink_sign":{let u=s.getOrigin(e.params[2].context.blinkUrl);return u?r.eth.signedMessage({origin:u,request:{...e,method:"eth_sign",params:[e.params[0],e.params[1]]},chainId:await n.eth.getNetworkId(u)}):void 0}case"eth_sign":case"personal_sign":case"eth_signTypedData":case"eth_signTypedData_v3":case"eth_signTypedData_v4":return r.eth.signedMessage({origin:d,request:e,chainId:await n.eth.getNetworkId(d)});case"sol_signAllTransactions":{let u=a.result.map(({signature:h})=>h);return r.sol.submittedTransaction({origin:d,request:e,chainId:await n.sol.getNetworkId(),signatures:u})}case"sol_signAndSendTransaction":{let u=a.result.signature;return r.sol.submittedTransaction({origin:d,request:e,chainId:await n.sol.getNetworkId(),signatures:[u]})}case"sol_blink_signAndSendAllTransactions":{let u=a.result.signatures.filter(Boolean);return r.sol.submittedTransaction({origin:d,request:{...e,method:"sol_signAllTransactions",params:{transactions:e.params.transactions}},chainId:await n.sol.getNetworkId(),signatures:u})}case"sol_signAndSendAllTransactions":{let u=a.result.signatures.filter(Boolean);return r.sol.submittedTransaction({origin:d,request:e,chainId:await n.sol.getNetworkId(),signatures:u})}case"sol_signTransaction":{let u=a.result.signature;return r.sol.submittedTransaction({origin:d,request:e,chainId:await n.sol.getNetworkId(),signatures:[u]})}case"sol_signIn":case"sol_signMessage":return r.sol.signedMessage({origin:d,request:e,chainId:await n.sol.getNetworkId()});case"sol_blink_signMessage":{let u=s.getOrigin(e.params.context.blinkUrl);return u?r.sol.signedMessage({origin:u,request:{...e,method:"sol_signMessage",params:{message:e.params.message,display:e.params.display}},chainId:await n.sol.getNetworkId()}):void 0}}}:i.internalError(e.id,"missing source")};c();p();var un=async(e,{wallet:t,rpc:r,utils:n})=>{let{request:s,source:o}=e;if(!o)return i.internalError(s.id,"missing source");let a=F(o);if(!a)return i.unauthorized(s.id);let d=await t.eth.getSelectedAccount(),[u]=s.params,h=u.chainId?u.chainId:await t.eth.getNetworkId(a),x=await t.eth.getRpcURL(h);if(u.type="0x2",u.chainId||(u.chainId=h),u.nonce||(u.nonce=await t.eth.getAccountNonce(h,d)),!u.gas){let g=await r.eth.eth_estimateGas(x,[u]);if("error"in g)return i.error(s.id,g.error);u.gas=n.eth.getBufferedGasLimit(g.result)}delete u.gasPrice};c();p();var V=async(e,{config:t,logger:r})=>{if(t.env==="production")return;let n=Date.now();return s=>{if(e.source?.type!=="BrowserTabRpcRequestSource"&&e.source?.type!=="InternalRpcRequestSource"&&e.source?.type!=="DeepLinkRpcRequestSource"||!("error"in s&&t.logRequestsOnError||(typeof t.logRequestMethods=="boolean"?t.logRequestMethods:t.logRequestMethods.has(e.request.method))))return;let d=Date.now(),u=ue(e.source),h=ye(e.source);r.debug(`
*-------------------------------------------------------------------------------
| method   | ${e.request.method}
| id       | ${e.request.id}
| params   | ${JSON.stringify(e.request.params).substring(0,67)}
*----------+--------------------------------------------------------------------
| result   | ${JSON.stringify(s.result)}
| error    | ${JSON.stringify(s.error)}
*----------+--------------------------------------------------------------------
| url      | ${JSON.stringify(u)}
| icon     | ${JSON.stringify(h)}
*----------+--------------------------------------------------------------------
| duration | ${d-n}ms
*-------------------------------------------------------------------------------
`)}};c();p();var me=async({request:e,source:t},{analytics:r,wallet:n,utils:s})=>{if(!t)return i.internalError(e.id,"missing source");let o=ue(t),a=F(t);return!o||!a?i.internalError(e.id):async d=>{let{method:u}=e;if(Xt(o.hostname))return;let h=await n.eth.getNetworkId(a),x=s.eth.hexToCAIP2(h),y={method:u,chainType:"eip155",chainId:x,origin:o.hostname};if(u==="eth_requestAccounts"){let A={...y};"error"in d?r.declineConnection({...A,errorCode:d.error.code}):r.approveConnection({...A,eager:!1})}if(u==="eth_sendTransaction"){let[A]=e.params,S={...y,gas:A.gas,maxFeePerGas:A.maxFeePerGas,maxPriorityFeePerGas:A.maxPriorityFeePerGas};"error"in d?r.declineTransaction({...S,errorCode:d.error.code}):r.approveTransaction(S)}if(u==="eth_sign"||u==="personal_sign"||u==="eth_signTypedData"||u==="eth_signTypedData_v3"||u==="eth_signTypedData_v4"){let A={...y};"error"in d?r.declineSignMessage({...A,errorCode:d.error.code}):r.approveSignMessage(A)}if(u==="wallet_selectEthereumProvider"&&!("error"in d)){let A=d.result,S={...y,selection:A};r.metamaskOverrideSelection(S)}}};c();p();var qe=e=>async({source:t,request:r},{wallet:n,logger:s})=>{if(!t)return i.unauthorized(r.id);if(t.type==="InternalRpcRequestSource")return;if(t.type!==e)return i.unauthorized(r.id);let o=F(t);if(!o)return i.unauthorized(r.id);if(!await n.isTrustedApp(o))return s.debug("> Dapp not trusted",o),i.unauthorized(r.id)};c();p();var Jt=async({source:e,request:t},{wallet:r,analytics:n})=>{if(!e)return i.unauthorized(t.id);let s=ue(e),o=F(e),a=ye(e);if(!s||!o)return i.unauthorized(t.id);let d;switch(t.method){case"eth_sendTransaction":{let[A]=t.params;if(!A.chainId)return i.transactionRejected(t.id);d=A.chainId;break}case"eth_signTypedData":{let[A]=t.params,S="";for(let v of A)if(v.name==="chainId"){S=v.value;break}if(!S)return;d="0x"+parseInt(S,10).toString(16);break}case"eth_signTypedData_v3":{let[A,S]=t.params;if(!S.domain.chainId)return;d="0x"+S.domain.chainId.toString(16);break}case"eth_signTypedData_v4":{let[A,S]=t.params;if(typeof S.domain.chainId=="number")d="0x"+S.domain.chainId.toString(16);else return;break}case"wallet_switchEthereumChain":case"wallet_addEthereumChain":{let[A]=t.params;d=A.chainId;break}}let u={url:s.toString(),icon:a};if(!new Set(r.eth.getSupportedNetworks()).has(d))return n.eth.unsupportedChain({origin:o,data:{method:t.method,hexChainId:d}}),await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmUnsupportedNetwork",id:0,params:[u,d]}),i.chainDisconnected(t.id);let x=new Set(await r.eth.getEnabledChains(!0)),g=new Set(await r.eth.getEnabledChains());if(!x.has(d))return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmDisabledNetwork",id:0,params:[u,d]}),i.chainDisconnected(t.id);if(!g.has(d))return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmIncorrectMode",id:0,params:[u,g.has("0x1")?"mainnet":"testnet"]}),i.chainDisconnected(t.id);if(["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(t.method)){let A=await r.eth.getNetworkId(o);if(A!==d)return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmEIP712IncorrectChainId",id:0,params:[u,{connectedChainId:A,messageChainId:d}]}),i.chainDisconnected(t.id)}};c();p();var yo=async({source:e,request:t},{wallet:r,analytics:n,utils:s})=>{if(!e)return i.unauthorized(t.id);if(e.type!=="BrowserTabRpcRequestSource")return i.unauthorized(t.id);let o="";if(t.method==="eth_blink_sendTransaction"){let[v]=t.params;if(!v.chainId)return i.transactionRejected(t.id);o=v.chainId}let[a,{context:d}]=t.params,u=s.getOrigin(d.blinkUrl);if(!d.blinkUrl||!u)return i.userRejectedRequest(t.id);let h=s.getHostname(d.blinkUrl),x={url:d.blinkUrl,icon:h?s.getFaviconURL(h):null};if(!new Set(r.eth.getSupportedNetworks()).has(o))return n.eth.unsupportedChain({origin:e.url.origin,data:{method:t.method,hexChainId:o}}),await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmUnsupportedNetwork",id:0,params:[x,o]}),i.chainDisconnected(t.id);let y=new Set(await r.eth.getEnabledChains(!0)),A=new Set(await r.eth.getEnabledChains());if(!y.has(o))return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmDisabledNetwork",id:0,params:[x,o]}),i.chainDisconnected(t.id);if(!A.has(o))return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmIncorrectMode",id:0,params:[x,A.has("0x1")?"mainnet":"testnet"]}),i.chainDisconnected(t.id);if(["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4"].includes(t.method)){let v=await r.eth.getNetworkId(e.url.origin);if(v!==o)return await r.requestUserApproval({jsonrpc:"2.0",method:"user_confirmEIP712IncorrectChainId",id:0,params:[x,{connectedChainId:v,messageChainId:o}]}),i.chainDisconnected(t.id)}};c();p();var xo=async(e,{wallet:t,i18n:r})=>{let{request:n,source:s}=e;if(!s)return i.unauthorized(n.id,r.t("rpcErrorUnauthorizedUnknownSource"));if(s.type!=="BrowserTabRpcRequestSource")return i.unauthorized(n.id,r.t("rpcErrorUnauthorizedUnknownSource"));let o={url:s.url.toString(),icon:s.icon?.href??null};if(!await t.eth.doesSupportEth())return await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmUnsupportedAccount",params:[o,"ethereum"],id:ae()}),i.resourceUnavailable(n.id)};c();p();var wo=async(e,{wallet:t,i18n:r,utils:n})=>{let{request:s,source:o}=e;if(!o)return i.unauthorized(s.id,r.t("rpcErrorUnauthorizedUnknownSource"));if(o.type!=="BrowserTabRpcRequestSource")return i.unauthorized(s.id,r.t("rpcErrorUnauthorizedUnknownSource"));let a=s.params.context,d=n.getOrigin(a.blinkUrl);if(!a.blinkUrl||!d)return i.userRejectedRequest(s.id);let u=n.getHostname(a.blinkUrl),h={url:a.blinkUrl,icon:u?n.getFaviconURL(u):null};if(!await t.eth.doesSupportEth())return await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmUnsupportedAccount",params:[h,"ethereum"],id:ae()}),i.resourceUnavailable(s.id)};c();p();var Fd=re(Ur()),bo=async({request:e})=>{let t=Fd.default.decode(e.params.message);if(!lc(t))return i.invalidInput(e.id,"You cannot sign solana transactions using sign message")};c();p();var So=async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return i.userRejectedRequest(r.id);if(n.type!=="BrowserTabRpcRequestSource")return i.userRejectedRequest(r.id);if(await t.isTrustedApp(n.url.origin))return;let o=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveBtcRequestAccounts",id:ae(),params:[{url:n.url.toString(),icon:n.icon?.href??null}]});if("error"in o)return i.error(r.id,o.error)};c();p();var vo=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveBtcSignMessage",id:ae(),params:[{url:t.url.toString(),icon:t.icon?.href??null},{message:e.params.message}]});if("error"in s)return i.error(e.id,s.error);switch(s.result.type){case"send":return i.result(e.id,{signature:s.result.signature,signedMessage:s.result.signedMessage});case"signAndSend":return}};c();p();var Ao=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveBtcSignPSBT",id:ae(),params:[{url:t.url.toString(),icon:t.icon?.href??null},{psbt:e.params[0],inputsToSign:e.params[1].inputsToSign,finalize:e.params[1].finalize}]});if("error"in s)return i.error(e.id,s.error);switch(s.result.type){case"send":return i.result(e.id,s.result.signature);case"signAndSend":return}};c();p();var _o=async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return i.userRejectedRequest(r.id);if(n.type!=="BrowserTabRpcRequestSource")return i.userRejectedRequest(r.id);if(await t.isTrustedApp(n.url.origin))return;let o=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthRequestAccounts",id:ae(),params:[{url:n.url.toString(),icon:n.icon?.href??null}]});if("error"in o)return i.error(r.id,o.error)};c();p();var Ro=async(e,{wallet:t,utils:r})=>{let{request:n,source:s}=e;if(!s)return i.userRejectedRequest(n.id);if(s.type!=="BrowserTabRpcRequestSource")return i.userRejectedRequest(n.id);let o=n.params.context,a=r.getOrigin(o.blinkUrl);if(!o.blinkUrl||!a)return i.userRejectedRequest(n.id);if(await t.isTrustedApp(a))return;let u=r.getHostname(o.blinkUrl),h=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthRequestAccounts",id:ae(),params:[{url:o.blinkUrl,icon:u?r.getFaviconURL(u):null}]});if("error"in h)return i.error(n.id,h.error)};c();p();var ko=async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return i.userRejectedRequest(r.id);let s=F(n),o=ue(n),a=ye(n);if(!s||!o)return i.unauthorized(r.id);if(await t.isTrustedApp(s))return;let u=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveWalletRequestPermissions",id:ae(),params:[{url:o.toString(),icon:a}]});if("error"in u)return i.error(r.id,u.error)};c();p();c();p();var Xe=e=>["OK","RATE_LIMIT_EXCEEDED","SESSION_EXPIRED","SIMULATION_FAILED","UNKNOWN","UNSUPPORTED_NETWORK_ID","UNSUPPORTED_METHOD"].includes(e);var To=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let[u]=e.params;if(await r.eth.getSelectedAccount()!==u.from.toLowerCase())return i.transactionRejected(e.id);let x=await r.eth.autoConfirmValidateTransaction(a,[u]),g=x.status==="OK";if(Xe(x.status)&&await s.eth.autoConfirmedTransaction({request:e,chainId:await r.eth.getNetworkId(o),origin:o,data:{sessionStartTime:x.sessionStartTime,sessionMaxDuration:x.sessionMaxDuration,lastStatusCode:x.status,dollarValue:x.dollarValue,auditTrail:x.auditTrail}}),g)return;let y={url:a.toString(),icon:d},A=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSendTransaction",id:ae(),params:[y,{transaction:u,autoConfirmStatusCode:x.status}]});if("error"in A)return i.error(e.id,A.error);switch(A.result.maxFeePerGas&&(u.maxFeePerGas=A.result.maxFeePerGas),A.result.maxPriorityFeePerGas&&(u.maxPriorityFeePerGas=A.result.maxPriorityFeePerGas),A.result.type){case"send":{let S=await r.eth.sendTransaction(u,A.result.signature);return i.any(e.id,{result:S})}case"signAndSend":return}};c();p();var Eo=async({request:e,source:t},{wallet:r,i18n:n,utils:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let[o,{context:a}]=e.params;if(await r.eth.getSelectedAccount()!==o.from.toLowerCase())return i.transactionRejected(e.id);let u=s.getOrigin(a.blinkUrl);if(!a.blinkUrl||!u)return i.userRejectedRequest(e.id);let h=s.getHostname(a.blinkUrl),x={url:a.blinkUrl,icon:h?s.getFaviconURL(h):null},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSendTransaction",id:ae(),params:[x,{transaction:o,autoConfirmStatusCode:"UNSUPPORTED_METHOD"}]});if("error"in g)return i.error(e.id,g.error);switch(g.result.maxFeePerGas&&(o.maxFeePerGas=g.result.maxFeePerGas),g.result.maxPriorityFeePerGas&&(o.maxPriorityFeePerGas=g.result.maxPriorityFeePerGas),g.result.type){case"send":{let y=await r.eth.sendTransaction(o,g.result.signature);return i.any(e.id,{result:y})}case"signAndSend":return}};c();p();var Io=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t),o=ue(t),a=ye(t);if(!s||!o)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let d=await r.eth.getSelectedAccount(),u=await r.eth.getNetworkId(s),[h,x]=e.params;if(d!==h.toLowerCase())return i.unauthorized(e.id);let g={url:o.toString(),icon:a},y=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:ae(),params:[g,{signer:h,message:x,originalMethod:"eth_sign",chainId:u,autoConfirmStatusCode:"UNSUPPORTED_METHOD"}]});if("error"in y)return i.error(e.id,y.error);switch(y.result.approvalType){case"hardware":return i.result(e.id,y.result.signature);case"user":return}};c();p();var Co=async({request:e,source:t},{wallet:r,i18n:n,utils:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=await r.eth.getSelectedAccount(),a=await r.eth.getNetworkId(t.url.origin),[d,u,{context:h}]=e.params;if(o!==d.toLowerCase())return i.unauthorized(e.id);let x=s.getOrigin(h.blinkUrl);if(!h.blinkUrl||!x)return i.userRejectedRequest(e.id);let g=s.getHostname(h.blinkUrl),y={url:h.blinkUrl,icon:g?s.getFaviconURL(g):null},A=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:ae(),params:[y,{signer:d,message:u,originalMethod:"eth_sign",chainId:a,autoConfirmStatusCode:"UNSUPPORTED_METHOD"}]});if("error"in A)return i.error(e.id,A.error);switch(A.result.approvalType){case"hardware":return i.result(e.id,A.result.signature);case"user":return}};c();p();var Bo=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t),o=ue(t),a=ye(t);if(!s||!o)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let d=await r.eth.getSelectedAccount(),u=await r.eth.getNetworkId(s),[h,x]=e.params;if(d!==x.toLowerCase())return i.unauthorized(e.id);let g="0x"+Buffer.from(JSON.stringify(h)).toString("hex"),y={url:o.toString(),icon:a},A=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:ae(),params:[y,{signer:x,message:g,originalMethod:"eth_signTypedData",chainId:u,autoConfirmStatusCode:"UNSUPPORTED_METHOD"}]});if("error"in A)return i.error(e.id,A.error)};c();p();var Lo=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let u=await r.eth.getSelectedAccount(),h=await r.eth.getNetworkId(o),[x,g]=e.params;if(u!==x.toLowerCase())return i.unauthorized(e.id);let y=await r.eth.autoConfirmValidateMessage(a,g),A=y.status==="OK";if(Xe(y.status)&&await s.eth.autoConfirmedMessage({request:e,chainId:await r.eth.getNetworkId(o),origin:o,data:{sessionStartTime:y.sessionStartTime,sessionMaxDuration:y.sessionMaxDuration,lastStatusCode:y.status,auditTrail:y.auditTrail}}),A)return;let S={url:a.toString(),icon:d},v=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:ae(),params:[S,{signer:x,message:"0x"+Buffer.from(JSON.stringify(g)).toString("hex"),originalMethod:"eth_signTypedData_v3",chainId:h,autoConfirmStatusCode:y.status}]});if("error"in v)return i.error(e.id,v.error)};c();p();var Mo=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let u=await r.eth.getSelectedAccount(),h=await r.eth.getNetworkId(o),[x,g]=e.params;if(u!==x.toLowerCase())return i.unauthorized(e.id);let y=await r.eth.autoConfirmValidateMessage(a,g),A=y.status==="OK";if(Xe(y.status)&&await s.eth.autoConfirmedMessage({request:e,chainId:await r.eth.getNetworkId(o),origin:o,data:{sessionStartTime:y.sessionStartTime,sessionMaxDuration:y.sessionMaxDuration,lastStatusCode:y.status,auditTrail:y.auditTrail}}),A)return;let S={url:a.toString(),icon:d},v=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:ae(),params:[S,{signer:x,message:"0x"+Buffer.from(JSON.stringify(g)).toString("hex"),originalMethod:"eth_signTypedData_v4",chainId:h,autoConfirmStatusCode:y.status}]});if("error"in v)return i.error(e.id,v.error)};c();p();var Po=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t),o=ue(t),a=ye(t);if(!s||!o)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let d=await r.eth.getSelectedAccount(),u=await r.eth.getNetworkId(s),[h,x]=e.params;if(d!==x.toLowerCase())return i.unauthorized(e.id);let g={url:o.toString(),icon:a},y=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEthSignMessage",id:ae(),params:[g,{signer:x,message:h,originalMethod:"personal_sign",chainId:u,autoConfirmStatusCode:"UNSUPPORTED_METHOD"}]});if("error"in y)return i.error(e.id,y.error);switch(y.result.approvalType){case"hardware":return i.result(e.id,y.result.signature);case"user":return}};c();p();var Uo=async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return i.userRejectedRequest(r.id);let s=F(n),o=ue(n),a=ye(n);if(!s||!o)return i.unauthorized(r.id);if(await t.isTrustedApp(s))return;if(r.params?.onlyIfTrusted===!0)return i.userRejectedRequest(r.id);let u=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:ae(),params:[{url:o.toString(),icon:a}]});if("error"in u)return i.error(r.id,u.error)};c();p();var No=async({request:e,source:t},{wallet:r,utils:n})=>{if(!t)return i.unauthorized(e.id);if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id);let s=e.params.context,o=n.getOrigin(s.blinkUrl);if(!s.blinkUrl||!o)return i.userRejectedRequest(e.id);if(await r.isTrustedApp(o))return;let d=n.getHostname(s.blinkUrl),u=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:ae(),params:[{url:s.blinkUrl,icon:d?n.getFaviconURL(d):null}]});if("error"in u)return i.error(e.id,u.error)};c();p();var Do=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let u=await r.sol.autoConfirmValidateTransaction(a,e.params.transactions),h=u.status==="OK";if(Xe(u.status)&&await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:o,data:{sessionStartTime:u.sessionStartTime,sessionMaxDuration:u.sessionMaxDuration,lastStatusCode:u.status,dollarValue:u.dollarValue,auditTrail:u.auditTrail}}),h)return;let x={url:a.toString(),icon:d},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAllTransactions",id:ae(),params:[x,{transactions:e.params.transactions,autoConfirmStatusCode:u.status}]});if("error"in g)return i.error(e.id,g.error);switch(g.result.type){case"send":return i.result(e.id,g.result.result.map(y=>({transaction:y.signedTransaction,signature:y.signature,version:y.version})));case"signAndSend":{let y=g.result.overwriteTransactions;y&&(e.params.transactions=y);return}}};c();p();var qo=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let u=await r.sol.autoConfirmValidateTransaction(a,e.params.transactions),h=u.status==="OK";if(Xe(u.status)&&await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:o,data:{sessionStartTime:u.sessionStartTime,sessionMaxDuration:u.sessionMaxDuration,lastStatusCode:u.status,dollarValue:u.dollarValue,auditTrail:u.auditTrail}}),h)return;let x={url:a.toString(),icon:d},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendAllTransactions",id:ae(),params:[x,{transactions:e.params.transactions,autoConfirmStatusCode:u.status}]});if("error"in g)return i.error(e.id,g.error);switch(g.result.type){case"send":{let y=await r.sol.getSelectedAccount();for(let[S,v]of g.result.result.entries())e.params.transactions[S]=v.signedTransaction;let A=await r.sol.sendAllTransactions(e.params.transactions);return i.result(e.id,{publicKey:y,signatures:A})}case"signAndSend":{let y=g.result.overwriteTransactions;y&&(e.params.transactions=y);return}}};c();p();var Oo=async({request:e,source:t,id:r},{wallet:n,utils:s})=>{if(!t)return i.unauthorized(e.id);if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id);let o=s.getHostname(e.params.context.blinkUrl),a={url:e.params.context.blinkUrl,icon:o?s.getFaviconURL(o):null},d=await n.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendAllTransactions",id:ae(),params:[a,{transactions:e.params.transactions,autoConfirmStatusCode:"UNSUPPORTED_METHOD",sequenceId:r}]});if("error"in d)return i.error(e.id,d.error);switch(d.result.type){case"send":{let u=await n.sol.getSelectedAccount();for(let[x,g]of d.result.result.entries())e.params.transactions[x]=g.signedTransaction;let h=await n.sol.sendAllTransactions(e.params.transactions);return i.result(e.id,{publicKey:u,signatures:h})}case"signAndSend":return}};c();p();var Ho=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let u=await r.sol.autoConfirmValidateTransaction(a,[e.params.transaction]),h=u.status==="OK";if(Xe(u.status)&&await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:o,data:{sessionStartTime:u.sessionStartTime,sessionMaxDuration:u.sessionMaxDuration,lastStatusCode:u.status,dollarValue:u.dollarValue,auditTrail:u.auditTrail}}),h)return;let x={url:a.toString(),icon:d},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendTransaction",id:ae(),params:[x,{transaction:e.params.transaction,autoConfirmStatusCode:u.status}]});if("error"in g)return i.error(e.id,g.error);switch(g.result.type){case"send":{let y=await r.sol.getSelectedAccount();return await r.sol.sendTransaction(g.result.signedTransaction,e.params.options),i.result(e.id,{publicKey:y,signature:g.result.signature})}case"signAndSend":{let y=g.result.overwriteTransactions;y&&(e.params.transaction=y[0]),g.result.isSharingEligible&&(e.params.isSharingEligible=!0);return}}};c();p();var Fo=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t);if(!o||!a)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let d=await r.sol.autoConfirmValidateMessage(a,e.params.message),u=d.status==="OK";if(Xe(d.status)&&await s.sol.autoConfirmedMessage({request:e,chainId:await r.sol.getNetworkId(),origin:o,data:{sessionStartTime:d.sessionStartTime,sessionMaxDuration:d.sessionMaxDuration,lastStatusCode:d.status,auditTrail:d.auditTrail}}),u)return;let h=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:ae(),params:[{url:a.toString(),icon:ye(t)},{...e.params,autoConfirmStatusCode:d.status}]});if("error"in h)return i.error(e.id,h.error);let x=await r.sol.getSelectedAccount();switch(h.result.type){case"send":return i.result(e.id,{signature:h.result.signature,publicKey:x});case"signAndSend":return}};c();p();var Wo=async({request:e,source:t},{wallet:r,i18n:n,utils:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(t.type!=="BrowserTabRpcRequestSource")return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=s.getHostname(e.params.context.blinkUrl),a={url:e.params.context.blinkUrl,icon:o?s.getFaviconURL(o):null},d=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:ae(),params:[a,{...e.params,autoConfirmStatusCode:"UNSUPPORTED_METHOD"}]});if("error"in d)return i.error(e.id,d.error)};c();p();var jo=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.unauthorized(e.id);let u=await r.sol.autoConfirmValidateTransaction(a,[e.params.transaction]),h=u.status==="OK";if(Xe(u.status)&&await s.sol.autoConfirmedTransaction({request:e,chainId:await r.sol.getNetworkId(),origin:o,data:{sessionStartTime:u.sessionStartTime,sessionMaxDuration:u.sessionMaxDuration,lastStatusCode:u.status,dollarValue:u.dollarValue,auditTrail:u.auditTrail}}),h)return;let x={url:a.toString(),icon:d},g=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignTransaction",id:ae(),params:[x,{transaction:e.params.transaction,autoConfirmStatusCode:u.status}]});if("error"in g)return i.error(e.id,g.error);switch(g.result.type){case"send":return i.result(e.id,{transaction:g.result.signedTransaction,signature:g.result.signature,version:g.result.version});case"signAndSend":{let y=g.result.overwriteTransactions;y&&(e.params.transaction=y[0]),g.result.isSharingEligible&&(e.params.isSharingEligible=!0),g.result.transactionSharingDelayMs&&(e.params.transactionSharingDelayMs=g.result.transactionSharingDelayMs);return}}};c();p();var rt=async({request:e,source:t},{analytics:r,wallet:n,utils:s})=>{if(!t)return i.internalError(e.id,"missing source");let o=ue(t);if(!o)return i.internalError(e.id,"missing source");let a=o.hostname;return async d=>{let{method:u}=e;if(Xt(a))return;let h=await n.sol.getNetworkId();if(h==="localnet")return;let x=s.sol.chainIdToCAIP2(h),y={method:u,chainType:"solana",chainId:x,origin:a};if("error"in d&&(y.errorCode=d.error.code),u==="sol_connect"){if(e.params?.eager){"errorCode"in y||r.approveConnection({...y,eager:!0});return}jf(y,r)}(u==="sol_signTransaction"||u==="sol_signAndSendTransaction"||u==="sol_signAndSendAllTransactions"||u==="sol_signAllTransactions")&&Vf(y,r),(u==="sol_signMessage"||u==="sol_signIn")&&zf(y,r)}},jf=(e,t)=>{"errorCode"in e?t.declineConnection(e):t.approveConnection({...e,eager:!1})},Vf=(e,t)=>{"errorCode"in e?t.declineTransaction(e):t.approveTransaction(e)},zf=(e,t)=>{"errorCode"in e?t.declineSignMessage(e):t.approveSignMessage(e)};c();p();var nt=async({request:e},{analytics:t,wallet:r,utils:n})=>async s=>{let{method:o}=e,a=e.params&&typeof e.params=="object"&&"redirect_link"in e.params&&typeof e.params.redirect_link=="string"?e.params.redirect_link:"missing redirect_link from deep link";t.deepLinkDetected({method:o,params:JSON.stringify(e.params)});let d=await r.sol.getNetworkId();if(d==="localnet")return;let u=n.sol.chainIdToCAIP2(d),x={method:o,chainType:"solana",chainId:u,origin:a};if(o==="phantom_deep_link_connect"){let g={...x};"error"in s?t.declineConnection({...g,errorCode:s.error.code}):t.approveConnection({...g,eager:!1})}if(o==="phantom_deep_link_signTransaction"||o==="phantom_deep_link_signAllTransactions"||o==="phantom_deep_link_signAndSendTransaction"){let g={...x};"error"in s?t.declineTransaction({...g,errorCode:s.error.code}):t.approveTransaction(g)}if(o==="phantom_deep_link_signMessage"){let g={...x};"error"in s?t.declineSignMessage({...g,errorCode:s.error.code}):t.approveSignMessage(g)}};c();p();function Vo(e){return!!("result"in e&&typeof e.result=="object"&&e.result&&"type"in e.result&&e.result?.type&&typeof e.result.type=="string"&&e.result.type.toUpperCase().endsWith("_DECLINE"))}var Nr=async({request:e},{analytics:t,wallet:r,utils:n})=>async s=>{let{method:o}=e,a="no identity or verifiable identity found on solana mobile wallet adapter request";if(e.params&&typeof e.params=="object"&&"identity"in e.params){let g=cc.safeParse(e.params.identity);g.success&&(a=g.data.identityUri??a)}else if(e.params&&typeof e.params=="object"&&"signPayloads"in e.params){let g=pc.safeParse(e.params.signPayloads);g.success&&(a=g.data.verifiableIdentity.identity.identityUri??a)}let d=await r.sol.getNetworkId();if(d==="localnet")return;let u=n.sol.chainIdToCAIP2(d),x={method:o,chainType:"solana",chainId:u,origin:a};if(o==="sol_mwa_authorize"){let g={...x};"error"in s?t.declineConnection({...g,errorCode:s.error.code}):Vo(s)?t.declineConnection({...g,errorCode:s.result.type}):t.approveConnection({...g,eager:!1})}if(o==="sol_mwa_sign_transactions"||o==="sol_mwa_sign_and_send_transactions"){let g={...x};"error"in s?t.declineTransaction({...g,errorCode:s.error.code}):Vo(s)?t.declineTransaction({...g,errorCode:s.result.type}):t.approveTransaction(g)}if(o==="sol_mwa_sign_messages"){let g={...x};"error"in s?t.declineSignMessage({...g,errorCode:s.error.code}):Vo(s)?t.declineSignMessage({...g,errorCode:s.result.type}):t.approveSignMessage(g)}};c();p();var Pt=async({source:e,request:t},r)=>{if(!e||e.type!=="BrowserTabRpcRequestSource"||!["x.com","twitter.com","pro.x.com","sandbox.phantom.dev","localhost","phantom.com"].includes(e.url.hostname))return i.unauthorized(t.id)};c();p();var fr=async({request:e},{wallet:t,logger:r,utils:n})=>{let s=null;switch(e.method){case"sol_blink_signAndSendAllTransactions":case"sol_blink_signMessage":s=e.params.context;break;case"eth_blink_sendTransaction":s=e.params[1].context;break;case"eth_blink_sign":s=e.params[2].context;break}let o=n.getOrigin(s.blinkUrl);if(!o)return i.unauthorized(e.id);if(!await t.isTrustedApp(o))return r.debug("> Dapp not trusted",o),i.unauthorized(e.id)};c();p();var ss=[],Le=e=>async({source:t,request:r})=>{let n=Date.now(),o=`${t?.type==="DeepLinkRpcRequestSource"?t.deepLinkUrl:t?.url.href}:${r.method}:${JSON.stringify(r.params)}`;if(ss=ss.filter(d=>d.timestamp>n-1e3),ss.filter(d=>d.key===o).length>=e)return i.rateLimited(r.id);ss.push({timestamp:n,key:o})};c();p();var Ve=async({request:e},{wallet:t})=>{if(!await t.isUserOnboarded()){if(e.method==="sol_connect"&&e.params.onlyIfTrusted)return i.userRejectedRequest(e.id);try{await t.requestUserOnboard()}catch{return i.userRejectedRequest(e.id)}}};c();p();function Kf({params:e,response:t,analytics:r,data:n}){if(e?.eager){"error"in t||r.approveConnection({...n,eager:!0});return}"error"in t?r.declineConnection({...n,errorCode:t.error.code}):r.approveConnection({...n,eager:!1})}function $f({response:e,analytics:t,data:r}){"error"in e?t.declineTransaction({...r,errorCode:e.error.code}):t.approveTransaction(r)}function Gf({response:e,analytics:t,data:r}){"error"in e?t.declineSignMessage({...r,errorCode:e.error.code}):t.approveSignMessage(r)}var Dr=async({request:e,source:t},{analytics:r})=>{if(!t)return i.internalError(e.id,"missing source");let n=ue(t);if(!n)return i.internalError(e.id);let s=n.hostname;return Xt(s)?async()=>{}:async o=>{let{method:a,params:d}=e,u={method:a,chainType:"sui",chainId:"mainnet",origin:s};switch(a){case"sui_requestAccounts":Kf({params:d,response:o,analytics:r,data:u});break;case"sui_signTransaction":case"sui_signAndExecuteTransaction":$f({response:o,analytics:r,data:u});break;case"sui_signMessage":Gf({response:o,analytics:r,data:u});break;default:break}}};c();p();var zo=async(e,{wallet:t})=>{let{request:r,source:n}=e;if(!n)return i.userRejectedRequest(r.id);let s=F(n),o=ue(n),a=ye(n);if(!s||!o)return i.unauthorized(r.id);if(await t.isTrustedApp(s))return;if(r.params?.onlyIfTrusted===!0)return i.userRejectedRequest(r.id);let u=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSuiRequestAccounts",id:ae(),params:[{url:o.toString(),icon:a}]});if("error"in u)return i.error(r.id,u.error)};c();p();var os=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=ue(t),o=ye(t);if(!s)return i.unauthorized(e.id);let a=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSuiSignTransaction",id:ae(),params:[{url:s.toString(),icon:o},{transaction:e.params.transaction}]});if("error"in a)return i.error(e.id,a.error)};c();p();var Ko=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=ue(t),o=ye(t);if(!s)return i.unauthorized(e.id);let a=await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSuiSignMessage",id:ae(),params:[{url:s.toString(),icon:o},{message:e.params.message}]});if("error"in a)return i.error(e.id,a.error)};c();p();c();p();c();p();var $o=async({request:e,source:t},{wallet:r})=>{if(!t)return i.result(e.id,[]);let n=F(t);if(!n)return i.internalError(e.id,"missing source");if(!await r.isTrustedApp(n))return i.result(e.id,[]);let o=await r.eth.getAccounts();return i.result(e.id,o)};c();p();var Go=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_blockNumber(a,e.params);return i.any(e.id,d)};c();p();var Yo=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_call(a,e.params);return i.any(e.id,d)};c();p();var Zo=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_cancelPrivateTransaction(a,e.params);return i.any(e.id,d)};c();p();var Xo=async({request:e,source:t},{wallet:r})=>{if(!t)return i.internalError(e.id,"missing source");let n=F(t);if(!n)return i.internalError(e.id,"missing source");let s=await r.eth.getNetworkId(n);return i.result(e.id,s)};c();p();var Jo=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_estimateGas(a,e.params);return i.any(e.id,d)};c();p();var Qo=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_feeHistory(a,e.params);return i.any(e.id,d)};c();p();var ei=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_gasPrice(a,e.params);return i.any(e.id,d)};c();p();var ti=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getBalance(a,e.params);return i.any(e.id,d)};c();p();var ri=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getBlockByHash(a,e.params);return i.any(e.id,d)};c();p();var ni=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getBlockByNumber(a,e.params);return i.any(e.id,d)};c();p();var si=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getBlockReceipts(a,e.params);return i.any(e.id,d)};c();p();var oi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getBlockTransactionCountByHash(a,e.params);return i.any(e.id,d)};c();p();var ii=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getBlockTransactionCountByNumber(a,e.params);return i.any(e.id,d)};c();p();var ai=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getCode(a,e.params);return i.any(e.id,d)};c();p();var ci=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getFilterChanges(a,e.params);return i.any(e.id,d)};c();p();var pi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getFilterLogs(a,e.params);return i.any(e.id,d)};c();p();var di=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getLogs(a,e.params);return i.any(e.id,d)};c();p();var li=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getProof(a,e.params);return i.any(e.id,d)};c();p();var ui=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getStorageAt(a,e.params);return i.any(e.id,d)};c();p();var mi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getTransactionByBlockHashAndIndex(a,e.params);return i.any(e.id,d)};c();p();var hi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getTransactionByBlockNumberAndIndex(a,e.params);return i.any(e.id,d)};c();p();var fi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getTransactionByHash(a,e.params);return i.any(e.id,d)};c();p();var gi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getTransactionCount(a,e.params);return i.any(e.id,d)};c();p();var yi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getTransactionReceipt(a,e.params);return i.any(e.id,d)};c();p();var xi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getUncleByBlockHashAndIndex(a,e.params);return i.any(e.id,d)};c();p();var wi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getUncleByBlockNumberAndIndex(a,e.params);return i.any(e.id,d)};c();p();var bi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getUncleCountByBlockHash(a,e.params);return i.any(e.id,d)};c();p();var Si=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_getUncleCountByBlockNumber(a,e.params);return i.any(e.id,d)};c();p();var vi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_maxPriorityFeePerGas(a,e.params);return i.any(e.id,d)};c();p();var Ai=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_newBlockFilter(a,e.params);return i.any(e.id,d)};c();p();var _i=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_newFilter(a,e.params);return i.any(e.id,d)};c();p();var Ri=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_newPendingTransactionFilter(a,e.params);return i.any(e.id,d)};c();p();var ki=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_protocolVersion(a,e.params);return i.any(e.id,d)};c();p();var Ti=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=F(t),s=ye(t),o=ue(t);if(!n||!o)return i.unauthorized(e.id);let a={url:o,icon:s?new URL(s):void 0};await r.addTrustedApp(n,a);let d=await r.eth.getSelectedAccount();return i.result(e.id,[d])};c();p();var Ei=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_sendRawTransaction(a,e.params);return i.any(e.id,d)};c();p();var Ii=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_sendPrivateTransaction(a,e.params);return i.any(e.id,d)};c();p();var Ci=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t);if(!s)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(!await r.isTrustedApp(s))return i.unauthorized(e.id);let[a]=e.params,d=await r.eth.getSelectedAccount();if(a.from.toLowerCase()!==d.toLowerCase())return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedWrongAccount"));if(a.type!=="0x2")return i.transactionRejected(e.id);if(!a.chainId)return i.transactionRejected(e.id);if(!a.nonce)return i.transactionRejected(e.id);let u=await r.eth.signAndSendTransaction(a);return i.any(e.id,{result:u})};c();p();var Bi=async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,o=await t.eth.getSelectedAccount();if(n.toLowerCase()!==o)return i.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signMessage(s);return i.result(e.id,a)};c();p();var Li=async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,o=await t.eth.getSelectedAccount();if(s.toLowerCase()!==o)return i.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signTypedData({version:1,data:n});return i.result(e.id,a)};c();p();var Mi=async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,o=await t.eth.getSelectedAccount();if(n.toLowerCase()!==o)return i.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signTypedData({version:3,data:s});return i.result(e.id,a)};c();p();var Pi=async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,o=await t.eth.getSelectedAccount();if(n.toLowerCase()!==o)return i.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signTypedData({version:4,data:s});return i.result(e.id,a)};c();p();var Ui=async({request:e},t)=>i.unsupportedMethod(e.id);c();p();var Ni=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id);let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_syncing(a,e.params);return i.any(e.id,d)};c();p();var Di=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.eth_uninstallFilter(a,e.params);return i.any(e.id,d)};c();p();var qi=async({request:e},t)=>i.unsupportedMethod(e.id);c();p();var Oi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.net_listening(a,e.params);return i.any(e.id,d)};c();p();var Hi=async({request:e,source:t},{wallet:r})=>{if(!t)return i.internalError(e.id,"missing source");let n=F(t);if(!n)return i.internalError(e.id,"missing source");let s=await r.eth.getNetworkId(n);return i.result(e.id,parseInt(s,16).toString())};c();p();var Fi=async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,o=await t.eth.getSelectedAccount();if(s.toLowerCase()!==o)return i.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signMessage(n);return i.result(e.id,a)};c();p();var Wi=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{let[o]=e.params;if(!await r.eth.addChain(o))return i.userRejectedRequest(e.id,n.t("Could not add the requested chain. It is not yet supported."));if(!t)return i.internalError(e.id,"missing source");let d=F(t);return d?await r.eth.switchChain(o.chainId,d)?i.result(e.id,null):(s.eth.unsupportedChain({origin:d,data:{method:e.method,hexChainId:o.chainId,chainName:o.chainName}}),i.internalError(e.id,n.t("Could not switch to the requested chain."))):i.internalError(e.id,"missing source")};c();p();var ji=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=F(t),s=ue(t),o=ye(t);if(!n||!s)return i.unauthorized(e.id);if(await r.isTrustedApp(n))return i.result(e.id,ic.enum.CONTINUE_WITH_PHANTOM);let d=await r.requestUserApproval({jsonrpc:"2.0",method:"user_selectEthWallet",id:0,params:[{url:s.toString(),icon:o}]});if("error"in d)return i.error(e.id,d.error);switch(d.result){case lr.user_selectEthWallet.result.enum.CONTINUE_WITH_METAMASK:return i.result(e.id,d.result);case lr.user_selectEthWallet.result.enum.CONTINUE_WITH_PHANTOM:return i.result(e.id,d.result);case lr.user_selectEthWallet.result.enum.ALWAYS_USE_PHANTOM:return await r.setMetaMaskOverrideSetting("USE_PHANTOM"),i.result(e.id,d.result);case lr.user_selectEthWallet.result.enum.ALWAYS_USE_METAMASK:return await r.setMetaMaskOverrideSetting("USE_METAMASK"),i.result(e.id,d.result)}};c();p();var Vi=async({request:e,source:t},{wallet:r,i18n:n,analytics:s})=>{if(!t)return i.internalError(e.id,"missing source");let o=F(t);if(!o)return i.internalError(e.id,"missing source");let[{chainId:a}]=e.params;return await r.eth.switchChain(a,o)?i.result(e.id,null):(s.eth.unsupportedChain({origin:o,data:{method:e.method,hexChainId:a}}),i.chainDisconnected(e.id,n.t("Could not switch to the requested chain. It is not yet supported.")))};c();p();var zi=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.web3_clientVersion(a,e.params);return i.any(e.id,d)};c();p();var Ki=async({request:e,source:t},{wallet:r,rpc:n})=>{if(!t)return i.internalError(e.id,"missing source");let s=F(t);if(!s)return i.internalError(e.id,"missing source");let o=await r.eth.getNetworkId(s),a=await r.eth.getRpcURL(o),d=await n.eth.web3_sha3(a,e.params);return i.any(e.id,d)};c();p();var $i=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=F(t),s=ue(t),o=ye(t);if(!n||!s)return i.unauthorized(e.id);let a=e.params[0];if(!Object.keys(a).includes("eth_accounts"))return i.result(e.id,[]);let u={url:s,icon:o?new URL(o):void 0};return await r.addTrustedApp(n,u),i.result(e.id,[{parentCapability:"eth_accounts",date:Date.now()}])};c();p();var Gi=async({request:e,source:t},{wallet:r})=>{if(!t)return i.result(e.id,[]);let n=F(t);return n?await r.isTrustedApp(n)?i.result(e.id,[{invoker:n,parentCapability:"eth_accounts",caveats:[]}]):i.result(e.id,[]):i.result(e.id,[])};var ht={};Ie(ht,{sol_connect:()=>jd,sol_disconnect:()=>Vd,sol_signAllTransactions:()=>zd,sol_signAndSendAllTransactions:()=>$d,sol_signAndSendTransaction:()=>Kd,sol_signIn:()=>Yd,sol_signMessage:()=>Gd,sol_signTransaction:()=>Zd});c();p();c();p();var jd=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=F(t),s=ue(t),o=ye(t);if(!n||!s)return i.unauthorized(e.id);let a={url:s,icon:o?new URL(o):void 0};await r.addTrustedApp(n,a);let d=await r.sol.getSelectedAccount();return i.result(e.id,{publicKey:d})};c();p();var Vd=async({request:e,source:t})=>t?i.result(e.id,null):i.unauthorized(e.id);c();p();var zd=async({request:e},{wallet:t})=>{let r=await t.sol.signAllTransactions(e.params.transactions);return i.result(e.id,r)};c();p();var Kd=async({source:e,request:t},{wallet:r,i18n:n})=>{if(!e)return i.unauthorized(t.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=ye(e),o=ue(e);if(!o)return i.unauthorized(t.id);let a=await r.sol.getSelectedAccount(),d=await r.sol.signTransaction(t.params.transaction);t.params.showConfirmation&&r.requestUserApproval({jsonrpc:"2.0",method:"user_solTransactionConfirmation",id:ae(),params:[{url:o.toString(),icon:s},{signature:d.signature,postAction:t.params.postAction}]});let u=t.params.isSharingEligible?"signAndSendTransaction":void 0;return await r.sol.sendTransaction(d.transaction,{...t.params.options,method:u}),i.result(t.id,{publicKey:a,signature:d.signature})};c();p();var $d=async({request:e},{wallet:t})=>{let r=await t.sol.getSelectedAccount(),n=await Promise.all(e.params.transactions.map(o=>t.sol.signTransaction(o))),s=await t.sol.sendAllTransactions(n.map(o=>o.transaction));return i.result(e.id,{publicKey:r,signatures:s})};c();p();var Gd=async({request:e},{wallet:t})=>{let r=await t.sol.getSelectedAccount(),n=await t.sol.signMessage(e.params.message);return i.result(e.id,{publicKey:r,signature:n})};c();p();var Yd=async({request:e,source:t},{wallet:r,utils:n,i18n:s})=>{if(!t)return i.userRejectedRequest(e.id);let o=F(t),a=ue(t),d=ye(t);if(!o||!a)return i.userRejectedRequest(e.id);let u=await r.isTrustedApp(o),h=await r.sol.getNetworkId(),x=await r.sol.getSelectedAccount(),g=new URL(a.toString()),y=n.sol.serializeSolanaSignInMessage(e.params.signInData,{expectedChainId:h,expectedAddress:x,expectedURL:g});if(y.type==="fail"){if(y.error[0].label==="PARSE_ERROR")return i.invalidInput(e.id,s.t("The app's signature request cannot be shown due to invalid formatting."));if(y.error.some(v=>v.label==="chain"))return i.invalidInput(e.id,s.t("The app's signature request cannot be shown as the chain ID does not match the provided chain ID for verification."));if(y.error.some(v=>v.label==="address"))return i.invalidInput(e.id,s.t("The app's signature request cannot be shown as the address does not match the provided address for verification."))}if(e.params.signInData.domain||(e.params.signInData.domain=g.host),e.params.signInData.address||(e.params.signInData.address=x),"error"in await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignIn",params:[{url:a.toString(),icon:d},{connect:!u,signInData:e.params.signInData,message:y.data,errorDetails:y.type==="fail"?y.error:void 0}],id:ae()}))return y.type==="fail"?i.invalidInput(e.id,s.t("This sign-in request is invalid. This either means the site is unsafe, or its developer made an error when sending the request.")):i.userRejectedRequest(e.id);u||await r.isTrustedApp(o)||await r.addTrustedApp(o,{url:a,icon:d?new URL(d):void 0});let S=await r.sol.signMessage(y.data);return i.result(e.id,{address:x,signedMessage:y.data,signature:S})};c();p();var Yf=500,Zd=async({request:e},{wallet:t})=>{let r=await t.sol.signTransaction(e.params.transaction);if(e.params.isSharingEligible){let n=Date.now(),s=e.params.transactionSharingDelayMs??Yf;try{await Promise.race([t.sol.sendTransaction(r.transaction,{method:"signTransaction"}),Os(s)]);let o=Date.now()-n,a=Math.max(0,s-o);a>0&&await Os(a)}catch{}}return i.result(e.id,r)};var qr={};Ie(qr,{btc_requestAccounts:()=>Xd,btc_signMessage:()=>Jd,btc_signPSBT:()=>Qd});c();p();c();p();var Xd=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=F(t),s=ue(t),o=ye(t);if(!n||!s)return i.unauthorized(e.id);let a={url:s,icon:o?new URL(o):void 0};await r.addTrustedApp(n,a);let d=await r.btc.getSelectedAccount();return i.result(e.id,d)};c();p();var Jd=async({request:e},{wallet:t})=>{let r=await t.btc.signMessage(e.params.address,e.params.message);return i.result(e.id,{...r})};c();p();var Qd=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=await r.btc.signPSBT(...e.params);return i.result(e.id,n)};var Ee={};Ie(Ee,{phantom_deep_link_browse:()=>el,phantom_deep_link_cash:()=>Al,phantom_deep_link_connect:()=>cl,phantom_deep_link_convert_stake_account:()=>kl,phantom_deep_link_disconnect:()=>pl,phantom_deep_link_explore:()=>sl,phantom_deep_link_feature_flags:()=>ol,phantom_deep_link_feedback_perps:()=>Rl,phantom_deep_link_fungible:()=>rl,phantom_deep_link_mint_psol_marketing:()=>al,phantom_deep_link_navigate:()=>bl,phantom_deep_link_notification_center:()=>il,phantom_deep_link_onboard:()=>xl,phantom_deep_link_onramp:()=>wl,phantom_deep_link_perps:()=>vl,phantom_deep_link_signAllTransactions:()=>hl,phantom_deep_link_signAndSendAllTransactions:()=>gl,phantom_deep_link_signAndSendTransaction:()=>fl,phantom_deep_link_signIn:()=>ul,phantom_deep_link_signMessage:()=>dl,phantom_deep_link_signTransaction:()=>ml,phantom_deep_link_social:()=>Sl,phantom_deep_link_swap:()=>tl,phantom_deep_link_token_chat:()=>_l,phantom_deep_link_tokens:()=>yl,phantom_deep_link_user:()=>nl});c();p();c();p();var el=async({request:e},{wallet:t})=>{let{url:r,ref:n}=e.params;return t.navigate("DetachedBrowser",{url:r,ref:n}),i.result(e.id,null)};c();p();var tl=async({request:e},{wallet:t})=>(t.navigate("SwapTab",{screen:"Swap",params:{buyFungible:e.params.buy,sellFungible:e.params.sell,sellAmount:e.params.amount,navRef:e.id}}),i.result(e.id,null));c();p();var rl=async({request:e},{wallet:t})=>(Sc(e.params.token),t.navigate("FungibleStack",{screen:"FungibleDetail",params:{caip19:e.params.token,entryPoint:"deepLink"}}),i.result(e.id,null));c();p();var nl=async({request:e},{wallet:t,analytics:r})=>{let{username:n,action:s}=e.params;return r.userDeepLink({username:n,action:s}),t.openUserProfile(n,s),i.result(e.id,null)};c();p();var sl=async({request:e},{wallet:t})=>(t.navigate("ExploreTab",{screen:"Explore"}),e.params.route&&(e.params.route==="ExplorePerps"?t.navigate("ExploreTab",{screen:"PerpsStack",params:{screen:"ExplorePerps"}}):t.navigate("ExploreTab",{screen:e.params.route})),i.result(e.id,null));c();p();var ol=async({request:e},{wallet:t})=>{let{action:r,key:n,type:s,value:o}=e.params;return t.navigate("SettingsStack",{screen:"MockFeatureFlags",params:{action:r,key:n,type:s,value:o}}),i.result(e.id,null)};c();p();var il=async({request:e},{wallet:t})=>(await t.openNotificationCenter({action:e.params.action,id:e.params.id}),i.result(e.id,null));c();p();var al=async({request:e},{wallet:t,remoteConfig:r})=>{let n=await r.getValue("psol-popup-copy-test");return!n||n==="control"?t.navigate("MintLiquidStake",{screen:"MintPSOLInfoPage",params:{entryPoint:"deepLink",presentNext:!0}}):t.navigate("MintLiquidStake",{screen:"MintPSOLMarketingPage",params:{entryPoint:"deepLink",copyVariant:n}}),i.result(e.id,null)};c();p();var cl=async({request:e},{wallet:t,secrets:r,utils:n})=>{let s=Kn(e.params.redirect_link,{restrictProtocols:!1}),o=s?.href;if(!o)return i.error(e.id,{code:400,message:"Invalid redirect URL provided."});try{s.username="",s.password="";let a=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:ae(),params:[{url:`phantom.app.deep-link-${o}`,icon:n.getFaviconURL(s.href)}]});if("error"in a)return i.error(e.id,a.error);let d=Mr(o)?.origin??"";await t.isTrustedApp(d)&&await t.deleteTrustedApp(d),await t.addTrustedApp(d,{url:new URL(d),icon:new URL(n.getFaviconURL(o))});let u=await t.sol.getSelectedAccount(),{sharedSecret:h,phantomKeySecret:x,phantomKeyPublicKey:g}=r.generateSharedSecret(e.params.dapp_encryption_public_key);await r.setSharedSecret(new Ae.PublicKey(u).toBase58(),e.params.dapp_encryption_public_key,h,x,g);let y=await r.generateSession(new Ae.PublicKey(u).toBase58(),e.params?.cluster??"mainnet-beta",e.params.app_url),{nonce:A,encryptedPayload:S}=await r.encryptDeepLinkDappPayload(y,new Ae.PublicKey(u).toBase58(),e.params.dapp_encryption_public_key);return i.result(e.id,{phantom_encryption_public_key:g,nonce:A,data:S})}catch(a){return i.error(e.id,{code:500,message:a?.message||"An unexpected error occurred during connect."})}};c();p();var pl=async({request:e},{wallet:t,secrets:r,utils:n})=>{let s=Mr(e.params.redirect_link).origin??"";await t.isTrustedApp(s)&&await t.deleteTrustedApp(s);let o=await t.sol.getSelectedAccount(),a=n.sol.chainIdToCluster(await t.sol.getNetworkId());return typeof(await r.decryptDeepLinkDappPayload(e.params,e.params.dapp_encryption_public_key,new Ae.PublicKey(o),a)).session!="string"?i.error(e.id,{code:-32e3,message:"Missing or invalid parameters."}):(r.deleteSharedSecret(o,e.params.dapp_encryption_public_key),i.result(e.id,null))};c();p();var dl=async({request:e},{wallet:t,secrets:r,utils:n})=>{let s=await t.sol.getSelectedAccount(),o=n.sol.chainIdToCluster(await t.sol.getNetworkId()),a=e.params,d=await r.decryptDeepLinkDappPayload(a,e.params.dapp_encryption_public_key,new Ae.PublicKey(s),o);if(typeof d.session!="string"||typeof d.message!="string"||!(!d.display||["utf8","hex"].includes(d.display)))return i.error(e.id,{code:-32e3,message:"Missing or invalid parameters."});let u={message:d.message,display:d.display??"utf8"},h=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:ae(),params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{...u,autoConfirmStatusCode:"DISABLED"}]});if("error"in h)return i.error(e.id,h.error);let g={signature:await t.sol.signMessage(d.message),publicKey:s},{nonce:y,encryptedPayload:A}=await r.encryptDeepLinkDappPayload(g,new Ae.PublicKey(s).toBase58(),e.params.dapp_encryption_public_key);return i.result(e.id,{nonce:y,data:A})};c();p();var ll=re(Ur());var ul=async({request:e},{wallet:t,secrets:r,utils:n,i18n:s})=>{let o;try{o=JSON.parse(Buffer.from(ll.default.decode(e.params.payload)).toString())}catch{return i.invalidInput(e.id,s.t("The app's signature request cannot be shown due to invalid formatting. Please contact the app developer for assistance."))}let a=new URL(e.params.app_url).origin??"",d=new URL(e.params.redirect_link).origin;d=d==="null"?a:d;let u=await t.isTrustedApp(d),h=await t.sol.getNetworkId(),x=await t.sol.getSelectedAccount(),g=new URL(e.params.redirect_link),y=n.sol.serializeSolanaSignInMessage(o,{expectedChainId:h,expectedAddress:x,expectedURL:g});if(y.type==="fail"){if(y.error[0].label==="PARSE_ERROR")return i.invalidInput(e.id,s.t("The app's signature request cannot be shown due to invalid formatting."));if(y.error.some(M=>M.label==="chain"))return i.invalidInput(e.id,s.t("The app's signature request cannot be shown as the chain ID does not match the provided chain ID for verification."));if(y.error.some(M=>M.label==="address"))return i.invalidInput(e.id,s.t("The app's signature request cannot be shown as the address does not match the provided address for verification."))}if(o.domain||(o.domain=g.host),o.address||(o.address=x),"error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignIn",params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{connect:!u,signInData:o,message:y.data,errorDetails:y.type==="fail"?y.error:void 0}],id:ae()}))return y.type==="fail"?i.invalidInput(e.id,s.t("This sign-in request is invalid. This either means the site is unsafe, or its developer made an error when sending the request.")):i.userRejectedRequest(e.id);u||await t.isTrustedApp(d)||await t.addTrustedApp(d,{url:new URL(d),icon:new URL(n.getFaviconURL(d))});let{sharedSecret:S,phantomKeySecret:v,phantomKeyPublicKey:f}=r.generateSharedSecret(e.params.dapp_encryption_public_key);await r.setSharedSecret(new Ae.PublicKey(x).toBase58(),e.params.dapp_encryption_public_key,S,v,f);let _=await r.generateSession(new Ae.PublicKey(x).toBase58(),e.params?.cluster??"mainnet-beta",e.params.app_url),I=await t.sol.signMessage(y.data),E={address:_.public_key,signature:I,signedMessage:y.data,session:_.session},{nonce:C,encryptedPayload:N}=await r.encryptDeepLinkDappPayload(E,new Ae.PublicKey(x).toBase58(),e.params.dapp_encryption_public_key);return i.result(e.id,{phantom_encryption_public_key:f,nonce:C,data:N})};c();p();var ml=async({request:e},{wallet:t,secrets:r,utils:n})=>{let s=await t.sol.getSelectedAccount(),o=n.sol.chainIdToCluster(await t.sol.getNetworkId()),a=await r.decryptDeepLinkDappPayload(e.params,e.params.dapp_encryption_public_key,new Ae.PublicKey(s),o);if(typeof a.session!="string"||typeof a.transaction!="string")return i.error(e.id,{code:-32e3,message:"Missing or invalid parameters."});let d=await t.sol.addPriorityFee(a.transaction),u=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignTransaction",id:ae(),params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{transaction:d,autoConfirmStatusCode:"DISABLED"}]});if("error"in u)return i.error(e.id,u.error);let{transaction:h}=await t.sol.signTransaction(d),x={transaction:h},{nonce:g,encryptedPayload:y}=await r.encryptDeepLinkDappPayload(x,new Ae.PublicKey(s).toBase58(),e.params.dapp_encryption_public_key);return i.result(e.id,{nonce:g,data:y})};c();p();var hl=async({request:e},{wallet:t,secrets:r,utils:n})=>{let s=await t.sol.getSelectedAccount(),o=n.sol.chainIdToCluster(await t.sol.getNetworkId()),a=await r.decryptDeepLinkDappPayload(e.params,e.params.dapp_encryption_public_key,new Ae.PublicKey(s),o);if(typeof a.session!="string"||!Array.isArray(a.transactions)||!a.transactions.every(A=>typeof A=="string"))return i.error(e.id,{code:-32e3,message:"Missing or invalid parameters."});let d=await Promise.all(a.transactions.map(A=>t.sol.addPriorityFee(A))),u=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAllTransactions",id:ae(),params:[{url:`phantom.app.deep-link-${e.params.redirect_link}`,icon:n.getFaviconURL(e.params.redirect_link)},{transactions:d,autoConfirmStatusCode:"DISABLED"}]});if("error"in u)return i.error(e.id,u.error);let x={transactions:(await t.sol.signAllTransactions(d)).map(A=>A.transaction)},{nonce:g,encryptedPayload:y}=await r.encryptDeepLinkDappPayload(x,new Ae.PublicKey(s).toBase58(),e.params.dapp_encryption_public_key);return i.result(e.id,{nonce:g,data:y})};c();p();var fl=async({request:e})=>i.error(e.id,{code:-32601,message:"This method is not supported"});c();p();var gl=async({request:e})=>i.error(e.id,{code:-32601,message:"This method is not supported"});c();p();var Zf=Ye.getAllChainIDs(),Xf=(e,t)=>{let r=e?Zf.find(o=>e===o):void 0;if(!r)throw new Error(`Chain ${e} not supported`);let n=Ye[r],s=n.mainnetID;return typeof t!="string"?qs({chainId:s,resourceType:"nativeToken",slip44:n.slip44}):qs({chainId:s,address:t,resourceType:"address"})},yl=async({request:e},{wallet:t,analytics:r})=>{let{chain:n,address:s}=e.params,o=Xf(n,s);return r.tokenDeepLink({caip19:o,...e.params}),t.navigate("FungibleStack",{screen:"FungibleDetail",params:{caip19:o,entryPoint:"deepLink"}}),i.result(e.id,null)};c();p();var xl=async({request:e},{wallet:t})=>{if(!Tn())return i.methodNotFound(e.id);let r=null,n=null,{value:s,accounts:o}=e.params;s&&(r=new Uint8Array(Buffer.from(s,"utf-8")),n=Qe.from(r),r.fill(0));let a=o?parseInt(o):1;if(a<1)throw new Error("accounts must be greater than 0");return await t.onboardQuickly(n,a),i.result(e.id,null)};c();p();var wl=async({request:e},{wallet:t})=>{let r=e.params.buy,n=e.params.amount,s=e.params.redirectURL,o=r?"FiatRampAmount":"FiatRampSelectFungible";return t.navigate("FiatRampStack",{screen:o,params:{buy:r,amount:n,redirectURL:s}}),i.result(e.id,null)};c();p();var bl=async({request:e},{wallet:t})=>(t.navigate(e.params.route,e.params.params),i.result(e.id,null));c();p();var Sl=async({request:e},{wallet:t})=>(t.navigate("SocialFeedTab",{screen:"SocialFeed"}),i.result(e.id,null));c();p();var vl=async({request:e,source:t},{wallet:r})=>{let{marketId:n}=e.params;r.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"Perps"}});let s=n;if(!s&&t?.type==="DeepLinkRpcRequestSource")try{let a=new URL(t.deepLinkUrl).pathname.split("/").filter(Boolean),d=a.indexOf("perps");if(d!==-1&&a[d+1]){let h=a[d+1].split("-")[0]?.toUpperCase();h&&(s=`hypercore:mainnet/address:${h}`)}}catch(o){console.error("Failed to parse deeplink URL:",o)}return s&&r.navigate("HomeTab",{screen:"PerpsStack",params:{screen:"PerpMarketDetails",params:{marketId:s}}}),i.result(e.id,null)};c();p();var Al=async({request:e},{wallet:t})=>(t.openCashTab&&await t.openCashTab(e.params),i.result(e.id,null));c();p();var _l=async({request:e},{wallet:t})=>(await t.openTokenChat({caip19:e.params.caip19}),i.result(e.id,null));c();p();var Rl=async({request:e},{wallet:t})=>(t.navigate("Tab",{screen:"HomeTab",params:{screen:"Home",params:{showPerpsFeedbackInterstitial:Date.now()}}}),i.result(e.id,null));c();p();var kl=async({request:e},{wallet:t})=>(t.navigate("ConvertToLiquidStake",{screen:"ConvertStakeAccountDeepLinkPage",params:{stakeAddress:e.params.stakeAddress}}),i.result(e.id,null));var Or={};Ie(Or,{sol_blink_connect:()=>Tl,sol_blink_signAndSendAllTransactions:()=>El,sol_blink_signMessage:()=>Il});c();p();c();p();var Tl=async({request:e,source:t},{wallet:r,utils:n})=>{let s=e.params.context,{origin:o,hostname:a}=n.getOriginAndHostname(s.blinkUrl);if(!t||!o||!a)return i.unauthorized(e.id);await r.addTrustedApp(o,{icon:new URL(n.getFaviconURL(a)),url:new URL(o)});let d=await r.sol.getSelectedAccount();return i.result(e.id,{publicKey:d})};c();p();var El=async({request:e},{wallet:t})=>{let r=await t.sol.getSelectedAccount(),n=await Promise.all(e.params.transactions.map(o=>t.sol.signTransaction(o))),s=await t.sol.sendAllTransactions(n.map(o=>o.transaction));return i.result(e.id,{publicKey:r,signatures:s})};c();p();var Il=async({request:e},{wallet:t})=>{let r=await t.sol.getSelectedAccount(),n=await t.sol.signMessage(e.params.message);return i.result(e.id,{publicKey:r,signature:n})};var Hr={};Ie(Hr,{eth_blink_requestAccounts:()=>Ll,eth_blink_sendTransaction:()=>Cl,eth_blink_sign:()=>Bl});c();p();c();p();var Cl=async({request:e,source:t},{wallet:r,i18n:n,utils:s})=>{let[o,{context:a}]=e.params,d=s.getOrigin(a.blinkUrl);if(!a.blinkUrl||!d)return i.userRejectedRequest(e.id);if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));if(!await r.isTrustedApp(d))return i.unauthorized(e.id);let h=await r.eth.getSelectedAccount();if(o.from.toLowerCase()!==h.toLowerCase())return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedWrongAccount"));if(o.type!=="0x2")return i.transactionRejected(e.id);if(!o.chainId)return i.transactionRejected(e.id);if(!o.nonce)return i.transactionRejected(e.id);let x=await r.eth.signAndSendTransaction(o);return i.any(e.id,{result:x})};c();p();var Bl=async({request:e},{wallet:t,i18n:r})=>{let[n,s]=e.params,o=await t.eth.getSelectedAccount();if(n.toLowerCase()!==o)return i.unauthorized(e.id,r.t("Message signer address does not match the selected account address."));let a=await t.eth.signMessage(s);return i.result(e.id,a)};c();p();var Ll=async({request:e,source:t},{wallet:r,utils:n})=>{if(!t)return i.unauthorized(e.id);let{context:s}=e.params,{origin:o,hostname:a}=n.getOriginAndHostname(s.blinkUrl);if(!t||!o||!a)return i.unauthorized(e.id);await r.addTrustedApp(o,{icon:new URL(n.getFaviconURL(a)),url:new URL(o)});let d=await r.eth.getSelectedAccount();return i.result(e.id,[d])};var Qt={};Ie(Qt,{sol_mwa_authorize:()=>Pl,sol_mwa_reauthorize:()=>Ml,sol_mwa_sign_and_send_transactions:()=>Ul,sol_mwa_sign_messages:()=>Dl,sol_mwa_sign_transactions:()=>Nl});c();p();c();p();var Ml=async({request:e},t)=>i.result(e.id,{type:"REAUTHORIZE_SUCCESS"});c();p();var Pl=async({request:e},{wallet:t,logger:r,utils:n})=>{let{cluster:s="mainnet-beta",identity:o}=e.params,{identityUri:a,iconRelativeUri:d}=o;if(!a)return r.error("identityUri is not defined in sol_mwa_authorize rpc request payload"),i.result(e.id,{type:"AUTHORIZE_DECLINE"});let u=s==="mainnet-beta"?"mainnet":"testnet",h=await t.sol.getNetworkId()===ac.value?"mainnet":"testnet";if(u!==h)return await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmIncorrectMode",id:ae(),params:[{url:`phantom.app.mwa-${a}`,icon:d?`${a}/${d}`:n.getFaviconURL(a)},h]}),i.result(e.id,{type:"AUTHORIZE_DECLINE"});if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolConnect",id:ae(),params:[{url:a,icon:d?`${a}/${d}`:n.getFaviconURL(a)}]}))return i.result(e.id,{type:"AUTHORIZE_DECLINE"});let g=await t.sol.getSelectedAccount();return i.result(e.id,{type:"AUTHORIZE_SUCCESS",publicKey:g,accountLabel:"phantom-wallet"})};c();p();var Yi=re(Ur());var Ul=async({request:e},{wallet:t,logger:r,utils:n})=>{let{publicKey:s,payloads:o,verifiableIdentity:a}=e.params.signPayloads,{identityUri:d,iconRelativeUri:u}=a.identity,h=await t.sol.getSelectedAccount();if(s!==h)return i.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_ERROR_AUTHORIZATION_NOT_VALID"});if(!d)return r.error("identityUri is not defined in sol_mwa_sign_and_send_transactions rpc request payload"),i.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_DECLINE"});let x=o.map(A=>Yi.default.encode(Buffer.from(A,"base64"))),g=await Promise.all(x.map(A=>t.sol.addPriorityFee(A)));if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAndSendAllTransactions",id:ae(),params:[{url:`phantom.app.mwa-${d}`,icon:u?`${d}/${u}`:n.getFaviconURL(d)},{transactions:g,autoConfirmStatusCode:"DISABLED"}]}))return i.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_DECLINE"});try{let A=await t.sol.signAllTransactions(g);await t.sol.sendAllTransactions(A.map(v=>v.transaction));let S=A.map(v=>Buffer.from(Yi.default.decode(v.signature)).toString("base64"));return i.result(e.id,{type:"SIGN_AND_SEND_TRANSACTIONS_SUCCESS",signedPayloads:S})}catch{return i.error(e.id,{code:-32603,message:"Internal error"})}};c();p();var Zi=re(Ur());var Nl=async({request:e},{wallet:t,logger:r,utils:n})=>{let{publicKey:s,payloads:o,verifiableIdentity:a}=e.params.signPayloads,{identityUri:d,iconRelativeUri:u}=a.identity,h=await t.sol.getSelectedAccount();if(s!==h)return i.result(e.id,{type:"SIGN_PAYLOADS_ERROR_AUTHORIZATION_NOT_VALID"});if(!d)return r.error("identityUri is not defined in sol_mwa_sign_transactions rpc request payload"),i.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});let x=o.map(A=>Zi.default.encode(Buffer.from(A,"base64"))),g=await Promise.all(x.map(A=>t.sol.addPriorityFee(A)));if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignAllTransactions",id:ae(),params:[{url:`phantom.app.mwa-${d}`,icon:u?`${d}/${u}`:n.getFaviconURL(d)},{transactions:g,autoConfirmStatusCode:"DISABLED"}]}))return i.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});try{let S=(await t.sol.signAllTransactions(g)).map(v=>Buffer.from(Zi.default.decode(v.transaction)).toString("base64"));return i.result(e.id,{type:"SIGN_PAYLOADS_SUCCESS",signedPayloads:S})}catch{return i.error(e.id,{code:-32603,message:"Internal error"})}};c();p();var Xi=re(Ur());var Dl=async({request:e},{wallet:t,logger:r,utils:n})=>{let{publicKey:s,payloads:o,verifiableIdentity:a}=e.params.signPayloads,{identityUri:d,iconRelativeUri:u}=a.identity,h=await t.sol.getSelectedAccount();if(s!==h)return i.result(e.id,{type:"SIGN_PAYLOADS_ERROR_AUTHORIZATION_NOT_VALID"});if(!d)return r.error("identityUri is not defined in sol_mwa_sign_messages rpc request payload"),i.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});let x=Xi.default.encode(Buffer.from(o[0],"base64")),g={message:x,display:"utf8"};if("error"in await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolSignMessage",id:ae(),params:[{url:`phantom.app.mwa-${d}`,icon:u?`${d}/${u}`:n.getFaviconURL(d)},{...g,autoConfirmStatusCode:"DISABLED"}]}))return i.result(e.id,{type:"SIGN_PAYLOADS_DECLINE"});try{let A=await t.sol.signMessage(x),S=Buffer.from(Xi.default.decode(A)).toString("base64");return i.result(e.id,{type:"SIGN_PAYLOADS_SUCCESS",signedPayloads:[S]})}catch{return i.error(e.id,{code:-32603,message:"Internal error"})}};var mn={};Ie(mn,{sol_pay_transaction:()=>Ol,sol_pay_transfer:()=>ql});c();p();c();p();var ql=async({request:e},{wallet:t})=>await t.sol.handleSolanaPayTransfer(e.params)?i.result(e.id,null):i.error(e.id,{code:-32e3,message:"Missing or invalid parameters."});c();p();var Ol=async({request:e},{wallet:t})=>{let r=await t.sol.handleSolanaPayTransaction(e.params);if(!r){let d=await t.requestUserApproval({jsonrpc:"2.0",method:"user_confirmSolPayError",id:ae(),params:[{url:e.params.link,icon:null}]});return"error"in d?i.error(e.id,d.error):i.invalidInput(e.id)}let{icon:n,label:s,transaction:o}=r,a=await t.requestUserApproval({jsonrpc:"2.0",method:"user_approveSolPayTransaction",id:ae(),params:[{url:e.params.link,icon:n},{label:s,transaction:o}]});if("error"in a)return i.error(e.id,a.error);if(!o)return i.error(e.id,{code:-32e3,message:"Missing or invalid parameters."});switch(a.result.type){case"send":{await t.sol.sendTransaction(o);break}case"signAndSend":{let d=await t.sol.signTransaction(o);await t.sol.sendTransaction(d.transaction);break}}return i.result(e.id,null)};var gr={};Ie(gr,{sui_requestAccounts:()=>Hl,sui_signAndExecuteTransaction:()=>jl,sui_signMessage:()=>Wl,sui_signTransaction:()=>Fl});c();p();c();p();var Hl=async({request:e,source:t},{wallet:r})=>{if(!t)return i.unauthorized(e.id);let n=F(t),s=ye(t),o=ue(t);if(!n||!o)return i.unauthorized(e.id);let a={url:o,icon:s?new URL(s):void 0};await r.addTrustedApp(n,a);let d=await r.sui.getSelectedAccount();return i.result(e.id,d)};c();p();var Fl=async({request:e},{wallet:t})=>{let r=await t.sui.signTransaction(e.params.address,e.params.transaction,e.params.networkID);return i.result(e.id,r)};c();p();var Wl=async({request:e},{wallet:t})=>{let r=await t.sui.signMessage(e.params.address,e.params.message);return i.result(e.id,r)};c();p();var jl=async({request:e},{wallet:t})=>{let r=await t.sui.signAndExecuteTransaction(e.params.address,e.params.transaction,e.params.networkID);return i.result(e.id,r)};var Fr={};Ie(Fr,{phantom_getUser:()=>Vl,phantom_login:()=>zl,phantom_logout:()=>Kl});c();p();c();p();var Vl=async({request:e},{wallet:t})=>{let r=await t.getUser();return i.result(e.id,r)};c();p();var zl=async({request:e},{wallet:t})=>{try{return await t.login(),i.result(e.id,null)}catch{return i.userRejectedRequest(e.id)}};c();p();var Kl=async({request:e},{wallet:t})=>{try{return await t.logout(),i.result(e.id,null)}catch{return i.internalError(e.id)}};var yr={};Ie(yr,{phantom_auto_confirm_disable:()=>Yl,phantom_auto_confirm_enable:()=>$l,phantom_auto_confirm_status:()=>Gl,phantom_auto_confirm_supported_chains:()=>Zl});c();p();c();p();var $l=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t),o=ue(t);if(!s||!o)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let{enabled:a,networks:d}=await r.getAutoConfirmStatus(s);if(a)return i.result(e.id,{enabled:!0,chains:d});let u=await r.fetchAutoConfirmSupportedNetworks(s);if(!u||u.length===0)return i.unsupportedMethod(e.id,"No supported networks found for this domain.");let h=e.params.chains||[],x=ye(t);if("error"in await r.requestUserApproval({jsonrpc:"2.0",method:"user_approveEnableAutoconfirm",id:ae(),params:[{url:o.toString(),icon:x},{origin:s,requestedChains:h}]}))return i.userRejectedRequest(e.id,"User rejected auto confirm");try{await r.enableAutoConfirm(s,h);let{enabled:y,networks:A}=await r.getAutoConfirmStatus(s);return i.result(e.id,{enabled:y,chains:A})}catch{return i.error(e.id,{code:-32603,message:"Failed to enable auto confirm"})}};c();p();var Gl=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t);if(!s)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));try{let{enabled:o,networks:a}=await r.getAutoConfirmStatus(s);return i.result(e.id,{enabled:o,chains:a})}catch{return i.error(e.id,{code:-32603,message:"Failed to get auto confirm status"})}};c();p();var Yl=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t);if(!s)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));try{await r.disableAutoConfirm(s);let{enabled:o,networks:a}=await r.getAutoConfirmStatus(s);return i.result(e.id,{enabled:o,chains:a})}catch{return i.error(e.id,{code:-32603,message:"Failed to disable auto confirm"})}};c();p();var Zl=async({request:e,source:t},{wallet:r,i18n:n})=>{if(!t)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));let s=F(t);if(!s)return i.unauthorized(e.id,n.t("rpcErrorUnauthorizedUnknownSource"));try{let o=await r.fetchAutoConfirmSupportedNetworks(s);return i.result(e.id,{chains:o})}catch{return i.error(e.id,{code:-32603,message:"Failed to get supported chains for auto confirm"})}};var At={};Ie(At,{btc:()=>ea,eth:()=>Ji,eth_blink:()=>na,phantom_auto_confirm:()=>ca,phantom_deep_link:()=>ta,phantom_embedded:()=>aa,sol:()=>Qi,sol_blink:()=>ra,sol_mwa:()=>sa,sol_pay:()=>oa,sui:()=>ia});c();p();var Ji={};Ie(Ji,{initialize:()=>Jf});c();p();var Jf=(e,t="BrowserTabRpcRequestSource")=>({eth_accounts:K().parse(he.eth_accounts).context(e).use([Le(100),oe(t),V,me,ie],$o),eth_blockNumber:K().parse(he.eth_blockNumber).context(e).use([V,oe(t),me,ie],Go),eth_call:K().parse(he.eth_call).context(e).use([V,oe(t),me,ie],Yo),eth_cancelPrivateTransaction:K().parse(he.eth_cancelPrivateTransaction).context(e).use([V,oe(t),me,ie],Zo),eth_chainId:K().parse(he.eth_chainId).context(e).use([V,oe(t),me,ie],Xo),eth_estimateGas:K().parse(he.eth_estimateGas).context(e).use([V,oe(t),me,ie],Jo),eth_feeHistory:K().parse(he.eth_feeHistory).context(e).use([V,oe(t),me,ie],Qo),eth_gasPrice:K().parse(he.eth_gasPrice).context(e).use([V,oe(t),me,ie],ei),eth_getBalance:K().parse(he.eth_getBalance).context(e).use([V,oe(t),me,ie],ti),eth_getBlockByHash:K().parse(he.eth_getBlockByHash).context(e).use([V,oe(t),me,ie],ri),eth_getBlockByNumber:K().parse(he.eth_getBlockByNumber).context(e).use([V,oe(t),me,ie],ni),eth_getBlockReceipts:K().parse(he.eth_getBlockReceipts).context(e).use([V,oe(t),me,ie],si),eth_getBlockTransactionCountByHash:K().parse(he.eth_getBlockTransactionCountByHash).context(e).use([V,oe(t),me,ie],oi),eth_getBlockTransactionCountByNumber:K().parse(he.eth_getBlockTransactionCountByNumber).context(e).use([V,oe(t),me,ie],ii),eth_getCode:K().parse(he.eth_getCode).context(e).use([V,oe(t),me,ie],ai),eth_getFilterChanges:K().parse(he.eth_getFilterChanges).context(e).use([V,oe(t),me,ie],ci),eth_getFilterLogs:K().parse(he.eth_getFilterLogs).context(e).use([V,oe(t),me,ie],pi),eth_getLogs:K().parse(he.eth_getLogs).context(e).use([V,oe(t),me,ie],di),eth_getProof:K().parse(he.eth_getProof).context(e).use([V,oe(t),me,ie],li),eth_getStorageAt:K().parse(he.eth_getStorageAt).context(e).use([V,oe(t),me,ie],ui),eth_getTransactionByBlockHashAndIndex:K().parse(he.eth_getTransactionByBlockHashAndIndex).context(e).use([V,oe(t),me,ie],mi),eth_getTransactionByBlockNumberAndIndex:K().parse(he.eth_getTransactionByBlockNumberAndIndex).context(e).use([V,oe(t),me,ie],hi),eth_getTransactionByHash:K().parse(he.eth_getTransactionByHash).context(e).use([V,oe(t),me,ie],fi),eth_getTransactionCount:K().parse(he.eth_getTransactionCount).context(e).use([V,oe(t),me,ie],gi),eth_getTransactionReceipt:K().parse(he.eth_getTransactionReceipt).context(e).use([V,oe(t),me,ie],yi),eth_getUncleByBlockHashAndIndex:K().parse(he.eth_getUncleByBlockHashAndIndex).context(e).use([V,oe(t),me,ie],xi),eth_getUncleByBlockNumberAndIndex:K().parse(he.eth_getUncleByBlockNumberAndIndex).context(e).use([V,oe(t),me,ie],wi),eth_getUncleCountByBlockHash:K().parse(he.eth_getUncleCountByBlockHash).context(e).use([V,oe(t),me,ie],bi),eth_getUncleCountByBlockNumber:K().parse(he.eth_getUncleCountByBlockNumber).context(e).use([V,oe(t),me,ie],Si),eth_maxPriorityFeePerGas:K().parse(he.eth_maxPriorityFeePerGas).context(e).use([V,oe(t),me,ie],vi),eth_newBlockFilter:K().parse(he.eth_newBlockFilter).context(e).use([V,oe(t),me,ie],Ai),eth_newFilter:K().parse(he.eth_newFilter).context(e).use([V,oe(t),me,ie],_i),eth_newPendingTransactionFilter:K().parse(he.eth_newPendingTransactionFilter).context(e).use([V,oe(t),me,ie],Ri),eth_protocolVersion:K().parse(he.eth_protocolVersion).context(e).use([V,oe(t),me,ie],ki),eth_requestAccounts:K().parse(he.eth_requestAccounts).context(e).use([Le(100),oe(t),V,me,ie,xo,_o],Ti),eth_sendRawTransaction:K().parse(he.eth_sendRawTransaction).context(e).use([V,oe(t),me,ie],Ei),eth_sendPrivateTransaction:K().parse(he.eth_sendPrivateTransaction).context(e).use([V,oe(t),me,ie],Ii),eth_sendTransaction:K().parse(he.eth_sendTransaction).context(e).use([V,oe(t),je,me,ie,qe(t),un,Jt,To],Ci),eth_sign:K().parse(he.eth_sign).context(e).use([V,oe(t),je,me,ie,qe(t),Io],Bi),eth_signTypedData:K().parse(he.eth_signTypedData).context(e).use([V,oe(t),je,me,ie,qe(t),Jt,Bo],Li),eth_signTypedData_v3:K().parse(he.eth_signTypedData_v3).context(e).use([V,oe(t),je,me,ie,qe(t),Jt,Lo],Mi),eth_signTypedData_v4:K().parse(he.eth_signTypedData_v4).context(e).use([V,oe(t),je,me,ie,qe(t),Jt,Mo],Pi),eth_subscribe:K().parse(he.eth_subscribe).context(e).use([V,oe(t),me,ie],Ui),eth_syncing:K().parse(he.eth_syncing).context(e).use([V,oe(t),me,ie],Ni),eth_uninstallFilter:K().parse(he.eth_uninstallFilter).context(e).use([V,oe(t),me,ie],Di),eth_unsubscribe:K().parse(he.eth_unsubscribe).context(e).use([V,oe(t),me,ie],qi),net_listening:K().parse(he.net_listening).context(e).use([V,oe(t),me,ie],Oi),net_version:K().parse(he.net_version).context(e).use([V,oe(t),me,ie],Hi),personal_sign:K().parse(he.personal_sign).context(e).use([V,oe(t),je,me,ie,qe(t),Po],Fi),wallet_addEthereumChain:K().parse(he.wallet_addEthereumChain).context(e).use([V,oe(t),me,ie,Jt],Wi),wallet_selectEthereumProvider:K().parse(he.wallet_selectEthereumProvider).context(e).use([V,oe(t),me,ie],ji),wallet_switchEthereumChain:K().parse(he.wallet_switchEthereumChain).context(e).use([V,oe(t),me,ie,qe(t),Jt],Vi),wallet_requestPermissions:K().parse(he.wallet_requestPermissions).context(e).use([V,oe(t),me,ie,ko],$i),wallet_getPermissions:K().parse(he.wallet_getPermissions).context(e).use([V,oe(t),me,ie],Gi),web3_clientVersion:K().parse(he.web3_clientVersion).context(e).use([V,oe(t),me,ie],zi),web3_sha3:K().parse(he.web3_sha3).context(e).use([V,oe(t),me,ie],Ki)});var Qi={};Ie(Qi,{initialize:()=>Qf});c();p();var Qf=(e,t="BrowserTabRpcRequestSource")=>({sol_connect:K().parse(bt.sol_connect).context(e).use([Le(10),oe(t),V,Ve,rt,ie,Uo],ht.sol_connect),sol_disconnect:K().parse(bt.sol_disconnect).context(e).use([V,oe(t),rt,ie],ht.sol_disconnect),sol_signAllTransactions:K().parse(bt.sol_signAllTransactions).context(e).use([V,oe(t),je,rt,ie,qe(t),Zt,Do],ht.sol_signAllTransactions),sol_signAndSendTransaction:K().parse(bt.sol_signAndSendTransaction).context(e).use([V,oe(t),je,rt,ie,qe(t),Zt,Ho],ht.sol_signAndSendTransaction),sol_signAndSendAllTransactions:K().parse(bt.sol_signAndSendAllTransactions).context(e).use([V,oe(t),je,rt,ie,qe(t),Zt,qo],ht.sol_signAndSendAllTransactions),sol_signMessage:K().parse(bt.sol_signMessage).context(e).use([V,oe(t),je,rt,ie,qe(t),bo,Fo],ht.sol_signMessage),sol_signTransaction:K().parse(bt.sol_signTransaction).context(e).use([V,oe(t),je,rt,ie,qe(t),Zt,jo],ht.sol_signTransaction),sol_signIn:K().parse(bt.sol_signIn).context(e).use([V,oe(t),Ve,rt,ie],ht.sol_signIn)});var ea={};Ie(ea,{initialize:()=>eg});c();p();var eg=(e,t="BrowserTabRpcRequestSource")=>({btc_requestAccounts:K().parse(Jr.btc_requestAccounts).context(e).use([Le(10),oe(t),V,ln,So],qr.btc_requestAccounts),btc_signPSBT:K().parse(Jr.btc_signPSBT).context(e).use([V,oe(t),ln,Ao],qr.btc_signPSBT),btc_signMessage:K().parse(Jr.btc_signMessage).context(e).use([V,oe(t),ln,vo],qr.btc_signMessage)});var ta={};Ie(ta,{initialize:()=>tg});c();p();var tg=e=>({phantom_deep_link_browse:K().parse(Be.phantom_deep_link_browse).context(e).use([Le(10),V,nt],Ee.phantom_deep_link_browse),phantom_deep_link_tokens:K().parse(Be.phantom_deep_link_tokens).context(e).use([V,nt],Ee.phantom_deep_link_tokens),phantom_deep_link_swap:K().parse(Be.phantom_deep_link_swap).context(e).use([V,Ve],Ee.phantom_deep_link_swap),phantom_deep_link_navigate:K().parse(Be.phantom_deep_link_navigate).context(e).use([V,Ve],Ee.phantom_deep_link_navigate),phantom_deep_link_explore:K().parse(Be.phantom_deep_link_explore).context(e).use([V],Ee.phantom_deep_link_explore),phantom_deep_link_feature_flags:K().parse(Be.phantom_deep_link_feature_flags).context(e).use([V,Ve],Ee.phantom_deep_link_feature_flags),phantom_deep_link_onramp:K().parse(Be.phantom_deep_link_onramp).context(e).use([V,Ve],Ee.phantom_deep_link_onramp),phantom_deep_link_fungible:K().parse(Be.phantom_deep_link_fungible).context(e).use([V],Ee.phantom_deep_link_fungible),phantom_deep_link_user:K().parse(Be.phantom_deep_link_user).context(e).use([V,nt],Ee.phantom_deep_link_user),phantom_deep_link_social:K().parse(Be.phantom_deep_link_social).context(e).use([V,Ve],Ee.phantom_deep_link_social),phantom_deep_link_notification_center:K().parse(Be.phantom_deep_link_notification_center).context(e).use([V,Ve],Ee.phantom_deep_link_notification_center),phantom_deep_link_token_chat:K().parse(Be.phantom_deep_link_token_chat).context(e).use([V,Ve],Ee.phantom_deep_link_token_chat),phantom_deep_link_mint_psol_marketing:K().parse(Be.phantom_deep_link_mint_psol_marketing).context(e).use([V,Ve],Ee.phantom_deep_link_mint_psol_marketing),phantom_deep_link_onboard:K().parse(Be.phantom_deep_link_onboard).context(e).use([V],Ee.phantom_deep_link_onboard),phantom_deep_link_connect:K().parse(Be.phantom_deep_link_connect).context(e).use([V,nt],Ee.phantom_deep_link_connect),phantom_deep_link_disconnect:K().parse(Be.phantom_deep_link_disconnect).context(e).use([V,nt],Ee.phantom_deep_link_disconnect),phantom_deep_link_signMessage:K().parse(Be.phantom_deep_link_signMessage).context(e).use([V,nt],Ee.phantom_deep_link_signMessage),phantom_deep_link_signIn:K().parse(Be.phantom_deep_link_signIn).context(e).use([V,nt],Ee.phantom_deep_link_signIn),phantom_deep_link_signTransaction:K().parse(Be.phantom_deep_link_signTransaction).context(e).use([V,nt],Ee.phantom_deep_link_signTransaction),phantom_deep_link_signAllTransactions:K().parse(Be.phantom_deep_link_signAllTransactions).context(e).use([V,nt],Ee.phantom_deep_link_signAllTransactions),phantom_deep_link_signAndSendTransaction:K().parse(Be.phantom_deep_link_signAndSendTransaction).context(e).use([V,nt],Ee.phantom_deep_link_signAndSendTransaction),phantom_deep_link_signAndSendAllTransactions:K().parse(Be.phantom_deep_link_signAndSendAllTransactions).context(e).use([V,nt],Ee.phantom_deep_link_signAndSendAllTransactions),phantom_deep_link_perps:K().parse(Be.phantom_deep_link_perps).context(e).use([V,Ve],Ee.phantom_deep_link_perps),phantom_deep_link_cash:K().parse(Be.phantom_deep_link_cash).context(e).use([V,nt],Ee.phantom_deep_link_cash),phantom_deep_link_feedback_perps:K().parse(Be.phantom_deep_link_feedback_perps).context(e).use([V,Ve],Ee.phantom_deep_link_feedback_perps),phantom_deep_link_convert_stake_account:K().parse(Be.phantom_deep_link_convert_stake_account).context(e).use([V,Ve],Ee.phantom_deep_link_convert_stake_account)});var ra={};Ie(ra,{initialize:()=>rg});c();p();var rg=(e,t="BrowserTabRpcRequestSource")=>({sol_blink_connect:K().parse(It.sol_blink_connect).context(e).use([Le(10),oe(t),V,rt,ie,Pt,No],Or.sol_blink_connect),sol_blink_signMessage:K().parse(It.sol_blink_signMessage).context(e).use([V,oe(t),je,rt,ie,Pt,fr,Wo],Or.sol_blink_signMessage),sol_blink_signAndSendAllTransactions:K().parse(It.sol_blink_signAndSendAllTransactions).context(e).use([V,oe(t),je,rt,ie,Pt,fr,Zt,Oo],Or.sol_blink_signAndSendAllTransactions)});var na={};Ie(na,{initialize:()=>ng});c();p();var ng=(e,t="BrowserTabRpcRequestSource")=>({eth_blink_requestAccounts:K().parse(Et.eth_blink_requestAccounts).context(e).use([Le(100),oe(t),V,me,ie,Pt,wo,Ro],Hr.eth_blink_requestAccounts),eth_blink_sendTransaction:K().parse(Et.eth_blink_sendTransaction).context(e).use([oe(t),V,je,ie,Pt,fr,un,yo,Eo],Hr.eth_blink_sendTransaction),eth_blink_sign:K().parse(Et.eth_blink_sign).context(e).use([oe(t),V,je,ie,Pt,fr,Co],Hr.eth_blink_sign)});var sa={};Ie(sa,{initialize:()=>sg});c();p();var sg=e=>({sol_mwa_authorize:K().parse(_r.sol_mwa_authorize).context(e).use([Le(10),V,Nr],Qt.sol_mwa_authorize),sol_mwa_reauthorize:K().parse(_r.sol_mwa_reauthorize).context(e).use([V],Qt.sol_mwa_reauthorize),sol_mwa_sign_messages:K().parse(_r.sol_mwa_sign_messages).context(e).use([V,Nr],Qt.sol_mwa_sign_messages),sol_mwa_sign_transactions:K().parse(_r.sol_mwa_sign_transactions).context(e).use([V,Nr],Qt.sol_mwa_sign_transactions),sol_mwa_sign_and_send_transactions:K().parse(_r.sol_mwa_sign_and_send_transactions).context(e).use([V,Nr],Qt.sol_mwa_sign_and_send_transactions)});var oa={};Ie(oa,{initialize:()=>og});c();p();var og=e=>({sol_pay_transfer:K().parse(Ds.sol_pay_transfer).context(e).use([V],mn.sol_pay_transfer),sol_pay_transaction:K().parse(Ds.sol_pay_transaction).context(e).use([V],mn.sol_pay_transaction)});var ia={};Ie(ia,{initialize:()=>ig});c();p();var ig=(e,t="BrowserTabRpcRequestSource")=>({sui_requestAccounts:K().parse(kr.sui_requestAccounts).context(e).use([Le(100),oe(t),V,Ve,Dr,ie,zo],gr.sui_requestAccounts),sui_signMessage:K().parse(kr.sui_signMessage).context(e).use([V,oe(t),Dr,ie,qe(t),Ko],gr.sui_signMessage),sui_signTransaction:K().parse(kr.sui_signTransaction).context(e).use([V,oe(t),Dr,ie,qe(t),os],gr.sui_signTransaction),sui_signAndExecuteTransaction:K().parse(kr.sui_signAndExecuteTransaction).context(e).use([V,oe(t),Dr,ie,qe(t),os],gr.sui_signAndExecuteTransaction)});var aa={};Ie(aa,{initialize:()=>ag});c();p();var ag=e=>({phantom_getUser:K().parse(kn.phantom_getUser).context(e).use([Le(10),V],Fr.phantom_getUser),phantom_login:K().parse(kn.phantom_login).context(e).use([Le(10),V,Ve],Fr.phantom_login),phantom_logout:K().parse(kn.phantom_logout).context(e).use([Le(10),V],Fr.phantom_logout)});var ca={};Ie(ca,{initialize:()=>cg});c();p();var cg=(e,t="BrowserTabRpcRequestSource")=>({phantom_auto_confirm_enable:K().parse(Qr.phantom_auto_confirm_enable).context(e).use([Le(10),V,oe(t),ie,qe(t)],yr.phantom_auto_confirm_enable),phantom_auto_confirm_status:K().parse(Qr.phantom_auto_confirm_status).context(e).use([Le(10),V,oe(t),ie,qe(t)],yr.phantom_auto_confirm_status),phantom_auto_confirm_disable:K().parse(Qr.phantom_auto_confirm_disable).context(e).use([Le(10),V,oe(t),ie,qe(t)],yr.phantom_auto_confirm_disable),phantom_auto_confirm_supported_chains:K().parse(Qr.phantom_auto_confirm_supported_chains).context(e).use([Le(10),V,oe(t),ie,qe(t)],yr.phantom_auto_confirm_supported_chains)});c();p();c();p();var Xl={isEnabled:async e=>Cn.isFeatureEnabledAsync(e)};c();p();var Jl={getValue:async e=>Rc(()=>kc(e))};c();p();var _t=e=>t=>{Te.capture(e,{data:t})},Ql={deepLinkDetected:_t("deepLinkDetected"),tokenDeepLink:_t("deepLinkTokens"),userDeepLink:_t("deepLinkUser"),metamaskOverrideSelection:_t("notificationMetamaskOverrideSelection"),approveConnection:_t("connectionConfirm"),declineConnection:_t("connectionDeny"),approveSignMessage:_t("signMessageConfirm"),declineSignMessage:_t("signMessageDeny"),approveTransaction:_t("transactionConfirm"),declineTransaction:_t("transactionDeny"),eth:{submittedTransaction:async({origin:e,request:t,signatures:r})=>{try{let n=await rn(t,{origin:e},r);if(!n.success)throw new Error(`Failed to capture signature event analytics: ${n.error}`);await js(Te,{data:{...n.data,ids:n.data.ids??r},action:"dapp"})}catch(n){le.captureError(n,"provider")}},signedMessage:async({origin:e,request:t,chainId:r})=>{try{let n=await nn(t,{origin:e,chainId:Us(r)});if(!n.success)throw new Error(`Failed to capture signature event analytics: ${n.error}`);await Vs(Te,n.data)}catch(n){le.captureError(n,"provider")}},autoConfirmedTransaction:async({origin:e,request:t,data:r})=>{try{let n=new on(Te),s=await rn(t,{origin:e});if(!s.success)throw new Error(`Failed to capture signature event analytics: ${s.error}`);await n.transactionAutoConfirmed({...s.data,autoConfirm:r})}catch(n){le.captureError(n,"provider")}},autoConfirmedMessage:async({origin:e,request:t,chainId:r,data:n})=>{try{let s=new on(Te),o=await nn(t,{origin:e,chainId:Us(r)});if(!o.success)throw new Error(`Failed to capture signature event analytics: ${o.error}`);await s.messageAutoConfirmed({...o.data,autoConfirm:n})}catch(s){le.captureError(s,"provider")}},unsupportedChain:async({origin:e,data:t})=>{try{await Te.capture("unsupportedChainId",{data:{origin:e,chainType:"eip155",chainId:Ir(t.hexChainId),chainName:t.chainName,method:t.method}})}catch(r){le.captureError(r,"provider")}}},sol:{submittedTransaction:async({origin:e,request:t,chainId:r,signatures:n})=>{try{let s=await rn(t,{origin:e,chainId:r},n);if(!s.success)throw new Error(`Failed to capture signature event analytics: ${s.error}`);await js(Te,{data:{...s.data,ids:s.data.ids??n},action:"dapp"})}catch(s){le.captureError(s,"provider")}},signedMessage:async({origin:e,request:t,chainId:r})=>{try{let n=await nn(t,{origin:e,chainId:r});if(!n.success)throw new Error(`Failed to capture signature event analytics: ${n.error}`);await Vs(Te,n.data)}catch(n){le.captureError(n,"provider")}},autoConfirmedTransaction:async({origin:e,request:t,data:r,chainId:n})=>{try{let s=new on(Te),o=await rn(t,{origin:e,chainId:n});if(!o.success)throw new Error(`Failed to capture signature event analytics: ${o.error}`);await s.transactionAutoConfirmed({...o.data,autoConfirm:r})}catch(s){le.captureError(s,"provider")}},autoConfirmedMessage:async({origin:e,request:t,chainId:r,data:n})=>{try{let s=new on(Te),o=await nn(t,{origin:e,chainId:r});if(!o.success)throw new Error(`Failed to capture signature event analytics: ${o.error}`);await s.messageAutoConfirmed({...o.data,autoConfirm:n})}catch(s){le.captureError(s,"provider")}}}};c();p();var eu={env:mc()?"production":"development",logRequestMethods:new Set(["eth_requestAccounts","eth_accounts","eth_sendTransaction","eth_sign","personal_sign"]),logRequestsOnError:!0};c();p();var tu={t(e){return e}};c();p();var ru={debug(...e){console.debug(...e)},warn(...e){console.warn(...e)},error(...e){le.addBreadcrumb("provider",e.join(", "),"error")}};c();p();var nu={eth:Vc};c();p();c();p();c();p();c();p();c();p();function as(e,t){let{expectedAddress:r,expectedURL:n,expectedChainId:s,issuedAtThreshold:o}=t,a=[],d=Date.now();if(e.address!==r&&a.push("ADDRESS_MISMATCH"),e.domain!==n.host&&a.push("DOMAIN_MISMATCH"),e.uri&&e.uri.origin!==n.origin&&a.push("URI_MISMATCH"),e.chainId&&(e.type!=="sign-in-with-solana"&&e.chainId!==s||e.type==="sign-in-with-solana"&&e.chainId.replace(/solana:/g,"")!==s)&&a.push("CHAIN_ID_MISMATCH"),e.issuedAt){let u=e.issuedAt.getTime();Math.abs(u-d)>o&&(u<d?a.push("ISSUED_TOO_FAR_IN_THE_PAST"):a.push("ISSUED_TOO_FAR_IN_THE_FUTURE"))}if(e.expirationTime){let u=e.expirationTime.getTime();u<=d&&a.push("EXPIRED"),e.issuedAt&&u<e.issuedAt.getTime()&&a.push("EXPIRES_BEFORE_ISSUANCE"),e.notBefore&&e.notBefore.getTime()>u&&a.push("VALID_AFTER_EXPIRATION")}return a}c();p();c();p();(function e(t,r,n){function s(d,u){if(!r[d]){if(!t[d]){var h=typeof Zr=="function"&&Zr;if(!u&&h)return h(d,!0);if(o)return o(d,!0);var x=new Error("Cannot find module '"+d+"'");throw x.code="MODULE_NOT_FOUND",x}var g=r[d]={exports:{}};t[d][0].call(g.exports,function(y){return s(t[d][1][y]||y)},g,g.exports,e,t,r,n)}return r[d].exports}for(var o=typeof Zr=="function"&&Zr,a=0;a<n.length;a++)s(n[a]);return s})({1:[function(e,t,r){"use strict";r.byteLength=function(g){var y=h(g),A=y[0],S=y[1];return 3*(A+S)/4-S},r.toByteArray=function(g){var y,A,S=h(g),v=S[0],f=S[1],_=new o(function(C,N,M){return 3*(N+M)/4-M}(0,v,f)),I=0,E=f>0?v-4:v;for(A=0;A<E;A+=4)y=s[g.charCodeAt(A)]<<18|s[g.charCodeAt(A+1)]<<12|s[g.charCodeAt(A+2)]<<6|s[g.charCodeAt(A+3)],_[I++]=y>>16&255,_[I++]=y>>8&255,_[I++]=255&y;return f===2&&(y=s[g.charCodeAt(A)]<<2|s[g.charCodeAt(A+1)]>>4,_[I++]=255&y),f===1&&(y=s[g.charCodeAt(A)]<<10|s[g.charCodeAt(A+1)]<<4|s[g.charCodeAt(A+2)]>>2,_[I++]=y>>8&255,_[I++]=255&y),_},r.fromByteArray=function(g){for(var y,A=g.length,S=A%3,v=[],f=16383,_=0,I=A-S;_<I;_+=f)v.push(x(g,_,_+f>I?I:_+f));return S===1?(y=g[A-1],v.push(n[y>>2]+n[y<<4&63]+"==")):S===2&&(y=(g[A-2]<<8)+g[A-1],v.push(n[y>>10]+n[y>>4&63]+n[y<<2&63]+"=")),v.join("")};for(var n=[],s=[],o=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,u=a.length;d<u;++d)n[d]=a[d],s[a.charCodeAt(d)]=d;function h(g){var y=g.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=g.indexOf("=");return A===-1&&(A=y),[A,A===y?0:4-A%4]}function x(g,y,A){for(var S,v,f=[],_=y;_<A;_+=3)S=(g[_]<<16&16711680)+(g[_+1]<<8&65280)+(255&g[_+2]),f.push(n[(v=S)>>18&63]+n[v>>12&63]+n[v>>6&63]+n[63&v]);return f.join("")}s[45]=62,s[95]=63},{}],2:[function(e,t,r){(function(n){(function(){"use strict";var s=e("base64-js"),o=e("ieee754");r.Buffer=u,r.SlowBuffer=function(l){return+l!=l&&(l=0),u.alloc(+l)},r.INSPECT_MAX_BYTES=50;var a=2147483647;function d(l){if(l>a)throw new RangeError('The value "'+l+'" is invalid for option "size"');var m=new Uint8Array(l);return m.__proto__=u.prototype,m}function u(l,m,w){if(typeof l=="number"){if(typeof m=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g(l)}return h(l,m,w)}function h(l,m,w){if(typeof l=="string")return function(T,R){if(typeof R=="string"&&R!==""||(R="utf8"),!u.isEncoding(R))throw new TypeError("Unknown encoding: "+R);var O=0|S(T,R),G=d(O),z=G.write(T,R);return z!==O&&(G=G.slice(0,z)),G}(l,m);if(ArrayBuffer.isView(l))return y(l);if(l==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(pe(l,ArrayBuffer)||l&&pe(l.buffer,ArrayBuffer))return function(T,R,O){if(R<0||T.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<R+(O||0))throw new RangeError('"length" is outside of buffer bounds');var G;return G=R===void 0&&O===void 0?new Uint8Array(T):O===void 0?new Uint8Array(T,R):new Uint8Array(T,R,O),G.__proto__=u.prototype,G}(l,m,w);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var k=l.valueOf&&l.valueOf();if(k!=null&&k!==l)return u.from(k,m,w);var B=function(T){if(u.isBuffer(T)){var R=0|A(T.length),O=d(R);return O.length===0||T.copy(O,0,0,R),O}if(T.length!==void 0)return typeof T.length!="number"||H(T.length)?d(0):y(T);if(T.type==="Buffer"&&Array.isArray(T.data))return y(T.data)}(l);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return u.from(l[Symbol.toPrimitive]("string"),m,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function x(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function g(l){return x(l),d(l<0?0:0|A(l))}function y(l){for(var m=l.length<0?0:0|A(l.length),w=d(m),k=0;k<m;k+=1)w[k]=255&l[k];return w}function A(l){if(l>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|l}function S(l,m){if(u.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||pe(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);var w=l.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&w===0)return 0;for(var B=!1;;)switch(m){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return ce(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*w;case"hex":return w>>>1;case"base64":return Q(l).length;default:if(B)return k?-1:ce(l).length;m=(""+m).toLowerCase(),B=!0}}function v(l,m,w){var k=!1;if((m===void 0||m<0)&&(m=0),m>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0)<=(m>>>=0))return"";for(l||(l="utf8");;)switch(l){case"hex":return q(this,m,w);case"utf8":case"utf-8":return ge(this,m,w);case"ascii":return ne(this,m,w);case"latin1":case"binary":return W(this,m,w);case"base64":return Z(this,m,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,m,w);default:if(k)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),k=!0}}function f(l,m,w){var k=l[m];l[m]=l[w],l[w]=k}function _(l,m,w,k,B){if(l.length===0)return-1;if(typeof w=="string"?(k=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),H(w=+w)&&(w=B?0:l.length-1),w<0&&(w=l.length+w),w>=l.length){if(B)return-1;w=l.length-1}else if(w<0){if(!B)return-1;w=0}if(typeof m=="string"&&(m=u.from(m,k)),u.isBuffer(m))return m.length===0?-1:I(l,m,w,k,B);if(typeof m=="number")return m&=255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(l,m,w):Uint8Array.prototype.lastIndexOf.call(l,m,w):I(l,[m],w,k,B);throw new TypeError("val must be string, number or Buffer")}function I(l,m,w,k,B){var T,R=1,O=l.length,G=m.length;if(k!==void 0&&((k=String(k).toLowerCase())==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(l.length<2||m.length<2)return-1;R=2,O/=2,G/=2,w/=2}function z(Re,Me){return R===1?Re[Me]:Re.readUInt16BE(Me*R)}if(B){var ee=-1;for(T=w;T<O;T++)if(z(l,T)===z(m,ee===-1?0:T-ee)){if(ee===-1&&(ee=T),T-ee+1===G)return ee*R}else ee!==-1&&(T-=T-ee),ee=-1}else for(w+G>O&&(w=O-G),T=w;T>=0;T--){for(var we=!0,Se=0;Se<G;Se++)if(z(l,T+Se)!==z(m,Se)){we=!1;break}if(we)return T}return-1}function E(l,m,w,k){w=Number(w)||0;var B=l.length-w;k?(k=Number(k))>B&&(k=B):k=B;var T=m.length;k>T/2&&(k=T/2);for(var R=0;R<k;++R){var O=parseInt(m.substr(2*R,2),16);if(H(O))return R;l[w+R]=O}return R}function C(l,m,w,k){return se(ce(m,l.length-w),l,w,k)}function N(l,m,w,k){return se(function(B){for(var T=[],R=0;R<B.length;++R)T.push(255&B.charCodeAt(R));return T}(m),l,w,k)}function M(l,m,w,k){return N(l,m,w,k)}function J(l,m,w,k){return se(Q(m),l,w,k)}function $(l,m,w,k){return se(function(B,T){for(var R,O,G,z=[],ee=0;ee<B.length&&!((T-=2)<0);++ee)O=(R=B.charCodeAt(ee))>>8,G=R%256,z.push(G),z.push(O);return z}(m,l.length-w),l,w,k)}function Z(l,m,w){return m===0&&w===l.length?s.fromByteArray(l):s.fromByteArray(l.slice(m,w))}function ge(l,m,w){w=Math.min(l.length,w);for(var k=[],B=m;B<w;){var T,R,O,G,z=l[B],ee=null,we=z>239?4:z>223?3:z>191?2:1;if(B+we<=w)switch(we){case 1:z<128&&(ee=z);break;case 2:(192&(T=l[B+1]))==128&&(G=(31&z)<<6|63&T)>127&&(ee=G);break;case 3:T=l[B+1],R=l[B+2],(192&T)==128&&(192&R)==128&&(G=(15&z)<<12|(63&T)<<6|63&R)>2047&&(G<55296||G>57343)&&(ee=G);break;case 4:T=l[B+1],R=l[B+2],O=l[B+3],(192&T)==128&&(192&R)==128&&(192&O)==128&&(G=(15&z)<<18|(63&T)<<12|(63&R)<<6|63&O)>65535&&G<1114112&&(ee=G)}ee===null?(ee=65533,we=1):ee>65535&&(ee-=65536,k.push(ee>>>10&1023|55296),ee=56320|1023&ee),k.push(ee),B+=we}return function(Se){var Re=Se.length;if(Re<=te)return String.fromCharCode.apply(String,Se);for(var Me="",Ne=0;Ne<Re;)Me+=String.fromCharCode.apply(String,Se.slice(Ne,Ne+=te));return Me}(k)}r.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{var l=new Uint8Array(1);return l.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},l.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(l,m,w){return h(l,m,w)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(l,m,w){return function(k,B,T){return x(k),k<=0?d(k):B!==void 0?typeof T=="string"?d(k).fill(B,T):d(k).fill(B):d(k)}(l,m,w)},u.allocUnsafe=function(l){return g(l)},u.allocUnsafeSlow=function(l){return g(l)},u.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==u.prototype},u.compare=function(l,m){if(pe(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),pe(m,Uint8Array)&&(m=u.from(m,m.offset,m.byteLength)),!u.isBuffer(l)||!u.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===m)return 0;for(var w=l.length,k=m.length,B=0,T=Math.min(w,k);B<T;++B)if(l[B]!==m[B]){w=l[B],k=m[B];break}return w<k?-1:k<w?1:0},u.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(l,m){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return u.alloc(0);var w;if(m===void 0)for(m=0,w=0;w<l.length;++w)m+=l[w].length;var k=u.allocUnsafe(m),B=0;for(w=0;w<l.length;++w){var T=l[w];if(pe(T,Uint8Array)&&(T=u.from(T)),!u.isBuffer(T))throw new TypeError('"list" argument must be an Array of Buffers');T.copy(k,B),B+=T.length}return k},u.byteLength=S,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var m=0;m<l;m+=2)f(this,m,m+1);return this},u.prototype.swap32=function(){var l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var m=0;m<l;m+=4)f(this,m,m+3),f(this,m+1,m+2);return this},u.prototype.swap64=function(){var l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var m=0;m<l;m+=8)f(this,m,m+7),f(this,m+1,m+6),f(this,m+2,m+5),f(this,m+3,m+4);return this},u.prototype.toString=function(){var l=this.length;return l===0?"":arguments.length===0?ge(this,0,l):v.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(l){if(!u.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||u.compare(this,l)===0},u.prototype.inspect=function(){var l="",m=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(l+=" ... "),"<Buffer "+l+">"},u.prototype.compare=function(l,m,w,k,B){if(pe(l,Uint8Array)&&(l=u.from(l,l.offset,l.byteLength)),!u.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(m===void 0&&(m=0),w===void 0&&(w=l?l.length:0),k===void 0&&(k=0),B===void 0&&(B=this.length),m<0||w>l.length||k<0||B>this.length)throw new RangeError("out of range index");if(k>=B&&m>=w)return 0;if(k>=B)return-1;if(m>=w)return 1;if(this===l)return 0;for(var T=(B>>>=0)-(k>>>=0),R=(w>>>=0)-(m>>>=0),O=Math.min(T,R),G=this.slice(k,B),z=l.slice(m,w),ee=0;ee<O;++ee)if(G[ee]!==z[ee]){T=G[ee],R=z[ee];break}return T<R?-1:R<T?1:0},u.prototype.includes=function(l,m,w){return this.indexOf(l,m,w)!==-1},u.prototype.indexOf=function(l,m,w){return _(this,l,m,w,!0)},u.prototype.lastIndexOf=function(l,m,w){return _(this,l,m,w,!1)},u.prototype.write=function(l,m,w,k){if(m===void 0)k="utf8",w=this.length,m=0;else if(w===void 0&&typeof m=="string")k=m,w=this.length,m=0;else{if(!isFinite(m))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");m>>>=0,isFinite(w)?(w>>>=0,k===void 0&&(k="utf8")):(k=w,w=void 0)}var B=this.length-m;if((w===void 0||w>B)&&(w=B),l.length>0&&(w<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");k||(k="utf8");for(var T=!1;;)switch(k){case"hex":return E(this,l,m,w);case"utf8":case"utf-8":return C(this,l,m,w);case"ascii":return N(this,l,m,w);case"latin1":case"binary":return M(this,l,m,w);case"base64":return J(this,l,m,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,l,m,w);default:if(T)throw new TypeError("Unknown encoding: "+k);k=(""+k).toLowerCase(),T=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;function ne(l,m,w){var k="";w=Math.min(l.length,w);for(var B=m;B<w;++B)k+=String.fromCharCode(127&l[B]);return k}function W(l,m,w){var k="";w=Math.min(l.length,w);for(var B=m;B<w;++B)k+=String.fromCharCode(l[B]);return k}function q(l,m,w){var k=l.length;(!m||m<0)&&(m=0),(!w||w<0||w>k)&&(w=k);for(var B="",T=m;T<w;++T)B+=X(l[T]);return B}function D(l,m,w){for(var k=l.slice(m,w),B="",T=0;T<k.length;T+=2)B+=String.fromCharCode(k[T]+256*k[T+1]);return B}function P(l,m,w){if(l%1!=0||l<0)throw new RangeError("offset is not uint");if(l+m>w)throw new RangeError("Trying to access beyond buffer length")}function L(l,m,w,k,B,T){if(!u.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(m>B||m<T)throw new RangeError('"value" argument is out of bounds');if(w+k>l.length)throw new RangeError("Index out of range")}function U(l,m,w,k,B,T){if(w+k>l.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function Y(l,m,w,k,B){return m=+m,w>>>=0,B||U(l,0,w,4),o.write(l,m,w,k,23,4),w+4}function j(l,m,w,k,B){return m=+m,w>>>=0,B||U(l,0,w,8),o.write(l,m,w,k,52,8),w+8}u.prototype.slice=function(l,m){var w=this.length;(l=~~l)<0?(l+=w)<0&&(l=0):l>w&&(l=w),(m=m===void 0?w:~~m)<0?(m+=w)<0&&(m=0):m>w&&(m=w),m<l&&(m=l);var k=this.subarray(l,m);return k.__proto__=u.prototype,k},u.prototype.readUIntLE=function(l,m,w){l>>>=0,m>>>=0,w||P(l,m,this.length);for(var k=this[l],B=1,T=0;++T<m&&(B*=256);)k+=this[l+T]*B;return k},u.prototype.readUIntBE=function(l,m,w){l>>>=0,m>>>=0,w||P(l,m,this.length);for(var k=this[l+--m],B=1;m>0&&(B*=256);)k+=this[l+--m]*B;return k},u.prototype.readUInt8=function(l,m){return l>>>=0,m||P(l,1,this.length),this[l]},u.prototype.readUInt16LE=function(l,m){return l>>>=0,m||P(l,2,this.length),this[l]|this[l+1]<<8},u.prototype.readUInt16BE=function(l,m){return l>>>=0,m||P(l,2,this.length),this[l]<<8|this[l+1]},u.prototype.readUInt32LE=function(l,m){return l>>>=0,m||P(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},u.prototype.readUInt32BE=function(l,m){return l>>>=0,m||P(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},u.prototype.readIntLE=function(l,m,w){l>>>=0,m>>>=0,w||P(l,m,this.length);for(var k=this[l],B=1,T=0;++T<m&&(B*=256);)k+=this[l+T]*B;return k>=(B*=128)&&(k-=Math.pow(2,8*m)),k},u.prototype.readIntBE=function(l,m,w){l>>>=0,m>>>=0,w||P(l,m,this.length);for(var k=m,B=1,T=this[l+--k];k>0&&(B*=256);)T+=this[l+--k]*B;return T>=(B*=128)&&(T-=Math.pow(2,8*m)),T},u.prototype.readInt8=function(l,m){return l>>>=0,m||P(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},u.prototype.readInt16LE=function(l,m){l>>>=0,m||P(l,2,this.length);var w=this[l]|this[l+1]<<8;return 32768&w?4294901760|w:w},u.prototype.readInt16BE=function(l,m){l>>>=0,m||P(l,2,this.length);var w=this[l+1]|this[l]<<8;return 32768&w?4294901760|w:w},u.prototype.readInt32LE=function(l,m){return l>>>=0,m||P(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},u.prototype.readInt32BE=function(l,m){return l>>>=0,m||P(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},u.prototype.readFloatLE=function(l,m){return l>>>=0,m||P(l,4,this.length),o.read(this,l,!0,23,4)},u.prototype.readFloatBE=function(l,m){return l>>>=0,m||P(l,4,this.length),o.read(this,l,!1,23,4)},u.prototype.readDoubleLE=function(l,m){return l>>>=0,m||P(l,8,this.length),o.read(this,l,!0,52,8)},u.prototype.readDoubleBE=function(l,m){return l>>>=0,m||P(l,8,this.length),o.read(this,l,!1,52,8)},u.prototype.writeUIntLE=function(l,m,w,k){l=+l,m>>>=0,w>>>=0,k||L(this,l,m,w,Math.pow(2,8*w)-1,0);var B=1,T=0;for(this[m]=255&l;++T<w&&(B*=256);)this[m+T]=l/B&255;return m+w},u.prototype.writeUIntBE=function(l,m,w,k){l=+l,m>>>=0,w>>>=0,k||L(this,l,m,w,Math.pow(2,8*w)-1,0);var B=w-1,T=1;for(this[m+B]=255&l;--B>=0&&(T*=256);)this[m+B]=l/T&255;return m+w},u.prototype.writeUInt8=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,1,255,0),this[m]=255&l,m+1},u.prototype.writeUInt16LE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,2,65535,0),this[m]=255&l,this[m+1]=l>>>8,m+2},u.prototype.writeUInt16BE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,2,65535,0),this[m]=l>>>8,this[m+1]=255&l,m+2},u.prototype.writeUInt32LE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,4,4294967295,0),this[m+3]=l>>>24,this[m+2]=l>>>16,this[m+1]=l>>>8,this[m]=255&l,m+4},u.prototype.writeUInt32BE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,4,4294967295,0),this[m]=l>>>24,this[m+1]=l>>>16,this[m+2]=l>>>8,this[m+3]=255&l,m+4},u.prototype.writeIntLE=function(l,m,w,k){if(l=+l,m>>>=0,!k){var B=Math.pow(2,8*w-1);L(this,l,m,w,B-1,-B)}var T=0,R=1,O=0;for(this[m]=255&l;++T<w&&(R*=256);)l<0&&O===0&&this[m+T-1]!==0&&(O=1),this[m+T]=(l/R>>0)-O&255;return m+w},u.prototype.writeIntBE=function(l,m,w,k){if(l=+l,m>>>=0,!k){var B=Math.pow(2,8*w-1);L(this,l,m,w,B-1,-B)}var T=w-1,R=1,O=0;for(this[m+T]=255&l;--T>=0&&(R*=256);)l<0&&O===0&&this[m+T+1]!==0&&(O=1),this[m+T]=(l/R>>0)-O&255;return m+w},u.prototype.writeInt8=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,1,127,-128),l<0&&(l=255+l+1),this[m]=255&l,m+1},u.prototype.writeInt16LE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,2,32767,-32768),this[m]=255&l,this[m+1]=l>>>8,m+2},u.prototype.writeInt16BE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,2,32767,-32768),this[m]=l>>>8,this[m+1]=255&l,m+2},u.prototype.writeInt32LE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,4,2147483647,-2147483648),this[m]=255&l,this[m+1]=l>>>8,this[m+2]=l>>>16,this[m+3]=l>>>24,m+4},u.prototype.writeInt32BE=function(l,m,w){return l=+l,m>>>=0,w||L(this,l,m,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[m]=l>>>24,this[m+1]=l>>>16,this[m+2]=l>>>8,this[m+3]=255&l,m+4},u.prototype.writeFloatLE=function(l,m,w){return Y(this,l,m,!0,w)},u.prototype.writeFloatBE=function(l,m,w){return Y(this,l,m,!1,w)},u.prototype.writeDoubleLE=function(l,m,w){return j(this,l,m,!0,w)},u.prototype.writeDoubleBE=function(l,m,w){return j(this,l,m,!1,w)},u.prototype.copy=function(l,m,w,k){if(!u.isBuffer(l))throw new TypeError("argument should be a Buffer");if(w||(w=0),k||k===0||(k=this.length),m>=l.length&&(m=l.length),m||(m=0),k>0&&k<w&&(k=w),k===w||l.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(w<0||w>=this.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("sourceEnd out of bounds");k>this.length&&(k=this.length),l.length-m<k-w&&(k=l.length-m+w);var B=k-w;if(this===l&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(m,w,k);else if(this===l&&w<m&&m<k)for(var T=B-1;T>=0;--T)l[T+m]=this[T+w];else Uint8Array.prototype.set.call(l,this.subarray(w,k),m);return B},u.prototype.fill=function(l,m,w,k){if(typeof l=="string"){if(typeof m=="string"?(k=m,m=0,w=this.length):typeof w=="string"&&(k=w,w=this.length),k!==void 0&&typeof k!="string")throw new TypeError("encoding must be a string");if(typeof k=="string"&&!u.isEncoding(k))throw new TypeError("Unknown encoding: "+k);if(l.length===1){var B=l.charCodeAt(0);(k==="utf8"&&B<128||k==="latin1")&&(l=B)}}else typeof l=="number"&&(l&=255);if(m<0||this.length<m||this.length<w)throw new RangeError("Out of range index");if(w<=m)return this;var T;if(m>>>=0,w=w===void 0?this.length:w>>>0,l||(l=0),typeof l=="number")for(T=m;T<w;++T)this[T]=l;else{var R=u.isBuffer(l)?l:u.from(l,k),O=R.length;if(O===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(T=0;T<w-m;++T)this[T+m]=R[T%O]}return this};var de=/[^+/0-9A-Za-z-_]/g;function X(l){return l<16?"0"+l.toString(16):l.toString(16)}function ce(l,m){var w;m=m||1/0;for(var k=l.length,B=null,T=[],R=0;R<k;++R){if((w=l.charCodeAt(R))>55295&&w<57344){if(!B){if(w>56319){(m-=3)>-1&&T.push(239,191,189);continue}if(R+1===k){(m-=3)>-1&&T.push(239,191,189);continue}B=w;continue}if(w<56320){(m-=3)>-1&&T.push(239,191,189),B=w;continue}w=65536+(B-55296<<10|w-56320)}else B&&(m-=3)>-1&&T.push(239,191,189);if(B=null,w<128){if((m-=1)<0)break;T.push(w)}else if(w<2048){if((m-=2)<0)break;T.push(w>>6|192,63&w|128)}else if(w<65536){if((m-=3)<0)break;T.push(w>>12|224,w>>6&63|128,63&w|128)}else{if(!(w<1114112))throw new Error("Invalid code point");if((m-=4)<0)break;T.push(w>>18|240,w>>12&63|128,w>>6&63|128,63&w|128)}}return T}function Q(l){return s.toByteArray(function(m){if((m=(m=m.split("=")[0]).trim().replace(de,"")).length<2)return"";for(;m.length%4!=0;)m+="=";return m}(l))}function se(l,m,w,k){for(var B=0;B<k&&!(B+w>=m.length||B>=l.length);++B)m[B+w]=l[B];return B}function pe(l,m){return l instanceof m||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===m.name}function H(l){return l!=l}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:2,ieee754:3}],3:[function(e,t,r){r.read=function(n,s,o,a,d){var u,h,x=8*d-a-1,g=(1<<x)-1,y=g>>1,A=-7,S=o?d-1:0,v=o?-1:1,f=n[s+S];for(S+=v,u=f&(1<<-A)-1,f>>=-A,A+=x;A>0;u=256*u+n[s+S],S+=v,A-=8);for(h=u&(1<<-A)-1,u>>=-A,A+=a;A>0;h=256*h+n[s+S],S+=v,A-=8);if(u===0)u=1-y;else{if(u===g)return h?NaN:1/0*(f?-1:1);h+=Math.pow(2,a),u-=y}return(f?-1:1)*h*Math.pow(2,u-a)},r.write=function(n,s,o,a,d,u){var h,x,g,y=8*u-d-1,A=(1<<y)-1,S=A>>1,v=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=a?0:u-1,_=a?1:-1,I=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(x=isNaN(s)?1:0,h=A):(h=Math.floor(Math.log(s)/Math.LN2),s*(g=Math.pow(2,-h))<1&&(h--,g*=2),(s+=h+S>=1?v/g:v*Math.pow(2,1-S))*g>=2&&(h++,g/=2),h+S>=A?(x=0,h=A):h+S>=1?(x=(s*g-1)*Math.pow(2,d),h+=S):(x=s*Math.pow(2,S-1)*Math.pow(2,d),h=0));d>=8;n[o+f]=255&x,f+=_,x/=256,d-=8);for(h=h<<d|x,y+=d;y>0;n[o+f]=255&h,f+=_,h/=256,y-=8);n[o+f-_]|=128*I}},{}],4:[function(e,t,r){(function(n){(function(){let s=this,o=e("./transformers"),a="UTF8",d="UTF16",u="UTF16BE",h="UTF16LE",x="UTF32",g="UTF32BE",y="UTF32LE",A="UINT7",S="ASCII",v="BINARY",f="UINT8",_="UINT16",I="UINT16LE",E="UINT16BE",C="UINT32",N="UINT32LE",M="UINT32BE",J="ESCAPED",$="STRING",Z=function(te,ne){if(typeof te!="string"||te==="")throw new TypeError(`type: "${te}" not recognized`);let W=function(q){let D={type:"",base64:!1},P=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(q);return P&&(P[2]&&(D.type=P[2].toUpperCase()),P[1]&&(D.base64=!0)),D}(te.toUpperCase());if(W.base64){if(W.type===$)throw new TypeError(`type: "${te} "BASE64:" prefix not allowed with type STRING`);if(n.isBuffer(ne))W.data=o.base64.decode(ne);else{if(typeof ne!="string")throw new TypeError(`type: "${te} unrecognized data type: typeof(data): ${typeof ne}`);{let q=n.from(ne,"ascii");W.data=o.base64.decode(q)}}}else W.data=ne;switch(W.type){case a:(function(q){q.type=a;let D=q.data;q.bom=0,D.length>=3&&D[0]===239&&D[1]===187&&D[2]===191&&(q.bom=3)})(W);break;case d:case u:case h:(function(q){let D=q.data;switch(q.bom=0,q.type){case d:q.type=u,D.length>=2&&(D[0]===254&&D[1]===255?q.bom=2:D[0]===255&&D[1]===254&&(q.type=h,q.bom=2));break;case u:if(q.type=u,D.length>=2){if(D[0]===254&&D[1]===255)q.bom=2;else if(D[0]===255&&D[1]===254)throw new TypeError('src type: "UTF16BE" specified but BOM is for "UTF16LE"')}break;case h:if(q.type=h,D.length>=0){if(D[0]===254&&D[1]===255)throw new TypeError('src type: "UTF16LE" specified but BOM is for "UTF16BE"');D[0]===255&&D[1]===254&&(q.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${q.type}" unrecognized`)}})(W);break;case x:case g:case y:(function(q){let D=q.data;switch(q.bom=0,q.type){case x:q.type=g,D.length>=4&&(D[0]===0&&D[1]===0&&D[2]===254&&D[3]===255&&(q.bom=4),D[0]===255&&D[1]===254&&D[2]===0&&D[3]===0&&(q.type=y,q.bom=4));break;case g:if(q.type=g,D.length>=4&&(D[0]===0&&D[1]===0&&D[2]===254&&D[3]===255&&(q.bom=4),D[0]===255&&D[1]===254&&D[2]===0&&D[3]===0))throw new TypeError('src type: UTF32BE specified but BOM is for UTF32LE"');break;case y:if(q.type=y,D.length>=4){if(D[0]===0&&D[1]===0&&D[2]===254&&D[3]===255)throw new TypeError('src type: "UTF32LE" specified but BOM is for "UTF32BE"');D[0]===255&&D[1]===254&&D[2]===0&&D[3]===0&&(q.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${q.type}" unrecognized`)}})(W);break;case _:W.type=E;break;case C:W.type=M;break;case S:W.type=A;break;case v:W.type=f;break;case A:case f:case I:case E:case N:case M:case $:case J:break;default:throw new TypeError(`type: "${te}" not recognized`)}if(W.type===$){if(typeof W.data!="string")throw new TypeError(`type: "${te}" but data is not a string`)}else if(!n.isBuffer(W.data))throw new TypeError(`type: "${te}" but data is not a Buffer`);return W},ge=function(te,ne){switch(te){case a:return o.utf8.encode(ne);case u:return o.utf16be.encode(ne);case h:return o.utf16le.encode(ne);case g:return o.utf32be.encode(ne);case y:return o.utf32le.encode(ne);case A:return o.uint7.encode(ne);case f:return o.uint8.encode(ne);case E:return o.uint16be.encode(ne);case I:return o.uint16le.encode(ne);case M:return o.uint32be.encode(ne);case N:return o.uint32le.encode(ne);case $:return o.string.encode(ne);case J:return o.escaped.encode(ne);default:throw new TypeError(`encode type "${te}" not recognized`)}};r.decode=function(te,ne){return function(W){switch(W.type){case a:return o.utf8.decode(W.data,W.bom);case h:return o.utf16le.decode(W.data,W.bom);case u:return o.utf16be.decode(W.data,W.bom);case g:return o.utf32be.decode(W.data,W.bom);case y:return o.utf32le.decode(W.data,W.bom);case A:return o.uint7.decode(W.data);case f:return o.uint8.decode(W.data);case E:return o.uint16be.decode(W.data);case I:return o.uint16le.decode(W.data);case M:return o.uint32be.decode(W.data);case N:return o.uint32le.decode(W.data);case $:return o.string.decode(W.data);case J:return o.escaped.decode(W.data);default:throw new TypeError(`decode type "${W.type}" not recognized`)}}(Z(te,ne))},r.encode=function(te,ne){let W,q,D=function(P,L){if(!Array.isArray(L))throw new TypeError('dst chars: not array: "'+typeof L);if(typeof P!="string")throw new TypeError('dst type: not string: "'+typeof P);let U=function(Y){let j,de,X={crlf:!1,lf:!1,base64:!1,type:""};for(;;){if(de=Y,j=Y.slice(0,5),j==="CRLF:"){X.crlf=!0,de=Y.slice(5);break}if(j=Y.slice(0,3),j==="LF:"){X.lf=!0,de=Y.slice(3);break}break}return j=de.split(":"),j.length===1?X.type=j[0]:j.length===2&&j[1]==="BASE64"&&(X.base64=!0,X.type=j[0]),X}(P.toUpperCase());switch(U.type){case a:case u:case h:case g:case y:case A:case f:case I:case E:case N:case M:case J:break;case $:if(U.base64)throw new TypeError('":BASE64" suffix not allowed with type STRING');break;case S:U.type=A;break;case v:U.type=f;break;case d:U.type=u;break;case x:U.type=g;break;case _:U.type=E;break;case C:U.type=M;break;default:throw new TypeError(`dst type unrecognized: "${P}" : must have form [crlf:|lf:]type[:base64]`)}return U}(te,ne);return D.crlf?(W=o.lineEnds.crlf(ne),q=ge(D.type,W)):D.lf?(W=o.lineEnds.lf(ne),q=ge(D.type,W)):q=ge(D.type,ne),D.base64&&(q=o.base64.encode(q)),q},r.convert=function(te,ne,W){return s.encode(W,s.decode(te,ne))}}).call(this)}).call(this,e("buffer").Buffer)},{"./transformers":6,buffer:2}],5:[function(e,t,r){t.exports={converter:e("./converter"),transformers:e("./transformers")}},{"./converter":4,"./transformers":6}],6:[function(e,t,r){(function(n){(function(){let s=this,o=4294967292,a=4294967293,d=4294967294,u=4294967295,h=[0,1,3,7,15,31,63,127,255,511,1023],x=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),y=[];g.forEach(S=>{y.push(S.charCodeAt(0))}),r.utf8={encode(S){let v=[];return S.forEach(f=>{if(f>=0&&f<=127)v.push(f);else if(f<=2047)v.push(192+(f>>6&h[5])),v.push(128+(f&h[6]));else if(f<55296||f>57343&&f<=65535)v.push(224+(f>>12&h[4])),v.push(128+(f>>6&h[6])),v.push(128+(f&h[6]));else{if(!(f>=65536&&f<=1114111))throw new RangeError(`utf8.encode: character out of range: char: ${f}`);{let _=f>>16&h[5];v.push(240+(_>>2)),v.push(128+((_&h[2])<<4)+(f>>12&h[4])),v.push(128+(f>>6&h[6])),v.push(128+(f&h[6]))}}}),n.from(v)},decode(S,v){function f(ne,W){if((192&W)!=128)return a;let q=((ne&h[5])<<6)+(W&h[6]);return q<128?o:q}function _(ne,W,q){if((192&q)!=128||(192&W)!=128)return a;let D=((ne&h[4])<<12)+((W&h[6])<<6)+(q&h[6]);return D<2048?o:D>=55296&&D<=57343?d:D}function I(ne,W,q,D){if((192&D)!=128||(192&q)!=128||(192&W)!=128)return a;let P=(((ne&h[3])<<2)+(W>>4&h[2])<<16)+((W&h[4])<<12)+((q&h[6])<<6)+(D&h[6]);return P<65536?o:P>1114111?d:P}let E,C,N,M,J,$,Z=S.length,ge=v?3:0,te=[];for(;ge<Z;){C=S[ge],E=u;let ne=!0;for(;ne;){if(C>=0&&C<=127){E=C,$=1;break}if(N=ge+1,N<Z&&C>=194&&C<=223){E=f(C,S[N]),$=2;break}if(M=ge+2,M<Z&&C>=224&&C<=239){E=_(C,S[N],S[M]),$=3;break}if(J=ge+3,J<Z&&C>=240&&C<=244){E=I(C,S[N],S[M],S[J]),$=4;break}break}if(E>1114111){let W=`byte[${ge}]`;throw E===u?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${W}`):E===a?new RangeError(`utf8.decode: illegal trailing byte found at: ${W}`):E===d?new RangeError(`utf8.decode: code point out of range found at: ${W}`):E===o?new RangeError(`utf8.decode: non-shortest form found at: ${W}`):new RangeError(`utf8.decode: unrecognized error found at: ${W}`)}te.push(E),ge+=$}return te}},r.utf16be={encode(S){let v=[],f,_,I;for(let E=0;E<S.length;E+=1)if(f=S[E],f>=0&&f<=55295||f>=57344&&f<=65535)v.push(f>>8&h[8]),v.push(f&h[8]);else{if(!(f>=65536&&f<=1114111))throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${E}]: ${f}`);I=f-65536,_=55296+(I>>10),I=56320+(I&h[10]),v.push(_>>8&h[8]),v.push(_&h[8]),v.push(I>>8&h[8]),v.push(I&h[8])}return n.from(v)},decode(S,v){if(S.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${S.length}`);let f=[],_=S.length,I,E,C,N,M,J,$=v?2:0,Z=0;for(;$<_;){for(;;){if(C=$+1,C<_){if(M=(S[$]<<8)+S[C],M<55296||M>57343){I=M,E=2;break}if(N=$+3,N<_&&(J=(S[$+2]<<8)+S[N],M<=56319&&J>=56320&&J<=57343)){I=65536+(M-55296<<10)+(J-56320),E=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${$}]`)}f[Z++]=I,$+=E}return f}},r.utf16le={encode(S){let v=[],f,_,I;for(let E=0;E<S.length;E+=1)if(f=S[E],f>=0&&f<=55295||f>=57344&&f<=65535)v.push(f&h[8]),v.push(f>>8&h[8]);else{if(!(f>=65536&&f<=1114111))throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${E}]: ${f}`);I=f-65536,_=55296+(I>>10),I=56320+(I&h[10]),v.push(_&h[8]),v.push(_>>8&h[8]),v.push(I&h[8]),v.push(I>>8&h[8])}return n.from(v)},decode(S,v){if(S.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${S.length}`);let f=[],_=S.length,I,E,C,N,M,J,$=v?2:0,Z=0;for(;$<_;){for(;;){if(C=$+1,C<_){if(M=(S[C]<<8)+S[$],M<55296||M>57343){I=M,E=2;break}if(N=$+3,N<_&&(J=(S[N]<<8)+S[$+2],M<=56319&&J>=56320&&J<=57343)){I=65536+(M-55296<<10)+(J-56320),E=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${$}]`)}f[Z++]=I,$+=E}return f}},r.utf32be={encode(S){let v=n.alloc(4*S.length),f=0;return S.forEach(_=>{if(_>=55296&&_<=57343||_>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${f/4}]: ${_}`);v[f++]=_>>24&h[8],v[f++]=_>>16&h[8],v[f++]=_>>8&h[8],v[f++]=_&h[8]}),v},decode(S,v){if(S.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${S.length}`);let f=[],_=v?4:0;for(;_<S.length;_+=4){let I=(S[_]<<24)+(S[_+1]<<16)+(S[_+2]<<8)+S[_+3];if(I>=55296&&I<=57343||I>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${_/4}]: ${I}`);f.push(I)}return f}},r.utf32le={encode(S){let v=n.alloc(4*S.length),f=0;return S.forEach(_=>{if(_>=55296&&_<=57343||_>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${f/4}]: ${_}`);v[f++]=_&h[8],v[f++]=_>>8&h[8],v[f++]=_>>16&h[8],v[f++]=_>>24&h[8]}),v},decode(S,v){if(S.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${S.length}`);let f=[],_=v?4:0;for(;_<S.length;_+=4){let I=(S[_+3]<<24)+(S[_+2]<<16)+(S[_+1]<<8)+S[_];if(I>=55296&&I<=57343||I>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${_/4}]: ${I}`);f.push(I)}return f}},r.uint7={encode(S){let v=n.alloc(S.length);for(let f=0;f<S.length;f+=1){if(S[f]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${f}]: ${S[f]}`);v[f]=S[f]}return v},decode(S){let v=[];for(let f=0;f<S.length;f+=1){if(S[f]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${f}]: ${S[f]}`);v[f]=S[f]}return v}},r.uint8={encode(S){let v=n.alloc(S.length);for(let f=0;f<S.length;f+=1){if(S[f]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${f}]: ${S[f]}`);v[f]=S[f]}return v},decode(S){let v=[];for(let f=0;f<S.length;f+=1)v[f]=S[f];return v}},r.uint16be={encode(S){let v=n.alloc(2*S.length),f=0;return S.forEach(_=>{if(_>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${f/2}]: ${_}`);v[f++]=_>>8&h[8],v[f++]=_&h[8]}),v},decode(S){if(S.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${S.length}`);let v=[];for(let f=0;f<S.length;f+=2)v.push((S[f]<<8)+S[f+1]);return v}},r.uint16le={encode(S){let v=n.alloc(2*S.length),f=0;return S.forEach(_=>{if(_>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${f/2}]: ${_}`);v[f++]=_&h[8],v[f++]=_>>8&h[8]}),v},decode(S){if(S.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${S.length}`);let v=[];for(let f=0;f<S.length;f+=2)v.push((S[f+1]<<8)+S[f]);return v}},r.uint32be={encode(S){let v=n.alloc(4*S.length),f=0;return S.forEach(_=>{v[f++]=_>>24&h[8],v[f++]=_>>16&h[8],v[f++]=_>>8&h[8],v[f++]=_&h[8]}),v},decode(S){if(S.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${S.length}`);let v=[];for(let f=0;f<S.length;f+=4)v.push((S[f]<<24)+(S[f+1]<<16)+(S[f+2]<<8)+S[f+3]);return v}},r.uint32le={encode(S){let v=n.alloc(4*S.length),f=0;return S.forEach(_=>{v[f++]=_&h[8],v[f++]=_>>8&h[8],v[f++]=_>>16&h[8],v[f++]=_>>24&h[8]}),v},decode(S){if(S.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${S.length}`);let v=[];for(let f=0;f<S.length;f+=4)v.push((S[f+3]<<24)+(S[f+2]<<16)+(S[f+1]<<8)+S[f]);return v}},r.string={encode:S=>s.utf16le.encode(S).toString("utf16le"),decode:S=>s.utf16le.decode(n.from(S,"utf16le"),0)},r.escaped={encode(S){let v=[];for(let f=0;f<S.length;f+=1){let _=S[f];if(_===96)v.push(_),v.push(_);else if(_===10)v.push(_);else if(_>=32&&_<=126)v.push(_);else{let I="";if(_>=0&&_<=31)I+=`\`x${x[_]}`;else if(_>=127&&_<=255)I+=`\`x${x[_]}`;else if(_>=256&&_<=65535)I+=`\`u${x[_>>8&h[8]]}${x[_&h[8]]}`;else{if(!(_>=65536&&_<=4294967295))throw new Error("escape.encode(char): char > 0xffffffff not allowed");{I+="`u{";let E=_>>24&h[8];E>0&&(I+=x[E]),I+=`${x[_>>16&h[8]]+x[_>>8&h[8]]+x[_&h[8]]}}`}}n.from(I).forEach(E=>{v.push(E)})}}return n.from(v)},decode(S){function v(Z){return Z>=48&&Z<=57||Z>=65&&Z<=70||Z>=97&&Z<=102}function f(Z,ge,te){let ne={char:null,nexti:Z+2,error:!0};if(Z+1<ge&&v(te[Z])&&v(te[Z+1])){let W=String.fromCodePoint(te[Z],te[Z+1]);ne.char=parseInt(W,16),Number.isNaN(ne.char)||(ne.error=!1)}return ne}function _(Z,ge,te){let ne={char:null,nexti:Z+4,error:!0};if(Z+3<ge&&v(te[Z])&&v(te[Z+1])&&v(te[Z+2])&&v(te[Z+3])){let W=String.fromCodePoint(te[Z],te[Z+1],te[Z+2],te[Z+3]);ne.char=parseInt(W,16),Number.isNaN(ne.char)||(ne.error=!1)}return ne}function I(Z,ge,te){let ne={char:null,nexti:Z+4,error:!0},W="";for(;Z<ge&&v(te[Z]);)W+=String.fromCodePoint(te[Z]),Z+=1;return ne.char=parseInt(W,16),te[Z]!==125||Number.isNaN(ne.char)||(ne.error=!1),ne.nexti=Z+1,ne}let E=[],C=S.length,N,M,J,$=0;for(;$<C;){for(;;){if(J=!0,S[$]!==96){E.push(S[$]),$+=1,J=!1;break}if(N=$+1,N>=C)break;if(S[N]===96){E.push(96),$+=2,J=!1;break}if(S[N]===120){if(M=f(N+1,C,S),M.error)break;E.push(M.char),$=M.nexti,J=!1;break}if(S[N]===117){if(S[N+1]===123){if(M=I(N+2,C,S),M.error)break;E.push(M.char),$=M.nexti,J=!1;break}if(M=_(N+1,C,S),M.error)break;E.push(M.char),$=M.nexti,J=!1;break}break}if(J)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${$}]`)}return E}};let A=10;r.lineEnds={crlf(S){let v=[],f=0;for(;f<S.length;)switch(S[f]){case 13:f+1<S.length&&S[f+1]===A?f+=2:f+=1,v.push(13),v.push(A);break;case A:v.push(13),v.push(A),f+=1;break;default:v.push(S[f]),f+=1}return v.length>0&&v[v.length-1]!==A&&(v.push(13),v.push(A)),v},lf(S){let v=[],f=0;for(;f<S.length;)switch(S[f]){case 13:f+1<S.length&&S[f+1]===A?f+=2:f+=1,v.push(A);break;case A:v.push(A),f+=1;break;default:v.push(S[f]),f+=1}return v.length>0&&v[v.length-1]!==A&&v.push(A),v}},r.base64={encode(S){if(S.length===0)return n.alloc(0);let v,f,_,I=S.length%3;I=I>0?3-I:0;let E=(S.length+I)/3,C=n.alloc(4*E);I>0&&(E-=1),v=0,f=0;for(let N=0;N<E;N+=1)_=S[v++]<<16,_+=S[v++]<<8,_+=S[v++],C[f++]=y[_>>18&h[6]],C[f++]=y[_>>12&h[6]],C[f++]=y[_>>6&h[6]],C[f++]=y[_&h[6]];return I===0?C:I===1?(_=S[v++]<<16,_+=S[v]<<8,C[f++]=y[_>>18&h[6]],C[f++]=y[_>>12&h[6]],C[f++]=y[_>>6&h[6]],C[f]=y[64],C):I===2?(_=S[v]<<16,C[f++]=y[_>>18&h[6]],C[f++]=y[_>>12&h[6]],C[f++]=y[64],C[f]=y[64],C):void 0},decode(S){if(S.length===0)return n.alloc(0);let v=function(J){let $=[],Z=0;for(let ge=0;ge<J.length;ge+=1){let te=J[ge],ne=!0;for(;ne&&te!==32&&te!==9&&te!==10&&te!==13;){if(te>=65&&te<=90){$.push(te-65);break}if(te>=97&&te<=122){$.push(te-71);break}if(te>=48&&te<=57){$.push(te+4);break}if(te===43){$.push(62);break}if(te===47){$.push(63);break}if(te===61){$.push(64),Z+=1;break}throw new RangeError(`base64.decode: invalid character buf[${ge}]: ${te}`)}}if($.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${$.length}`);switch(Z){case 0:break;case 1:if($[$.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if($[$.length-1]!==64||$[$.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${Z}`)}return{tail:Z,buf:n.from($)}}(S),{tail:f}=v,_=v.buf,I,E,C,N=_.length/4,M=n.alloc(3*N-f);f>0&&(N-=1),E=0,I=0;for(let J=0;J<N;J+=1)C=_[I++]<<18,C+=_[I++]<<12,C+=_[I++]<<6,C+=_[I++],M[E++]=C>>16&h[8],M[E++]=C>>8&h[8],M[E++]=C&h[8];return f===1&&(C=_[I++]<<18,C+=_[I++]<<12,C+=_[I]<<6,M[E++]=C>>16&h[8],M[E]=C>>8&h[8]),f===2&&(C=_[I++]<<18,C+=_[I++]<<12,M[E]=C>>16&h[8]),M},toString(S){if(S.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${S.length}`);let v="",f=0;function _(E,C,N,M){switch(f){case 76:v+=`\r
${E}${C}${N}${M}`,f=4;break;case 75:v+=`${E}\r
${C}${N}${M}`,f=3;break;case 74:v+=`${E+C}\r
${N}${M}`,f=2;break;case 73:v+=`${E+C+N}\r
${M}`,f=1;break;default:v+=E+C+N+M,f+=4}}for(let E=0;E<S.length;E+=4){for(let C=E;C<E+4;C+=1)if(!((I=S[C])>=65&&I<=90||I>=97&&I<=122||I>=48&&I<=57||I===43||I===47||I===61))throw new RangeError(`base64.toString: buf[${C}]: ${S[C]} : not valid base64 character code`);_(String.fromCharCode(S[E]),String.fromCharCode(S[E+1]),String.fromCharCode(S[E+2]),String.fromCharCode(S[E+3]))}var I;return v}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:2}],7:[function(e,t,r){t.exports=function(){let n=e("./identifiers"),s=e("./utilities"),o=this,a=null,d=null,u=null,h=0,x=[],g=[],y=[],A=[];function S(v){let f="";for(let _=0;_<v;_+=1)f+=" ";return f}this.callbacks=[],this.astObject="astObject",this.init=function(v,f,_){let I;y.length=0,A.length=0,x.length=0,h=0,a=v,d=f,u=_;let E=[];for(I=0;I<a.length;I+=1)E.push(a[I].lower);for(I=0;I<d.length;I+=1)E.push(d[I].lower);for(h=a.length+d.length,I=0;I<h;I+=1)x[I]=!1,g[I]=null;for(let C in o.callbacks){let N=C.toLowerCase();if(I=E.indexOf(N),I<0)throw new Error(`ast.js: init: node '${C}' not a rule or udt name`);typeof o.callbacks[C]=="function"&&(x[I]=!0,g[I]=o.callbacks[C]),o.callbacks[C]===!0&&(x[I]=!0)}},this.ruleDefined=function(v){return x[v]!==!1},this.udtDefined=function(v){return x[a.length+v]!==!1},this.down=function(v,f){let _=A.length;return y.push(_),A.push({name:f,thisIndex:_,thatIndex:null,state:n.SEM_PRE,callbackIndex:v,phraseIndex:null,phraseLength:null,stack:y.length}),_},this.up=function(v,f,_,I){let E=A.length,C=y.pop();return A.push({name:f,thisIndex:E,thatIndex:C,state:n.SEM_POST,callbackIndex:v,phraseIndex:_,phraseLength:I,stack:y.length}),A[C].thatIndex=E,A[C].phraseIndex=_,A[C].phraseLength=I,E},this.translate=function(v){let f,_,I;for(let E=0;E<A.length;E+=1)I=A[E],_=g[I.callbackIndex],I.state===n.SEM_PRE?_!==null&&(f=_(n.SEM_PRE,u,I.phraseIndex,I.phraseLength,v),f===n.SEM_SKIP&&(E=I.thatIndex)):_!==null&&_(n.SEM_POST,u,I.phraseIndex,I.phraseLength,v)},this.setLength=function(v){A.length=v,y.length=v>0?A[v-1].stack:0},this.getLength=function(){return A.length},this.toXml=function(v){let f=s.charsToDec,_="decimal integer character codes";if(typeof v=="string"&&v.length>=3){let C=v.slice(0,3).toLowerCase();C==="asc"?(f=s.charsToAscii,_="ASCII for printing characters, hex for non-printing"):C==="hex"?(f=s.charsToHex,_="hexadecimal integer character codes"):C==="uni"&&(f=s.charsToUnicode,_="Unicode UTF-32 integer character codes")}let I="",E=0;return I+=`<?xml version="1.0" encoding="utf-8"?>
`,I+=`<root nodes="${A.length/2}" characters="${u.length}">
`,I+=`<!-- input string, ${_} -->
`,I+=S(E+2),I+=f(u),I+=`
`,A.forEach(C=>{C.state===n.SEM_PRE?(E+=1,I+=S(E),I+=`<node name="${C.name}" index="${C.phraseIndex}" length="${C.phraseLength}">
`,I+=S(E+2),I+=f(u,C.phraseIndex,C.phraseLength),I+=`
`):(I+=S(E),I+=`</node><!-- name="${C.name}" -->
`,E-=1)}),I+=`</root>
`,I},this.phrases=function(){let v={},f,_;for(f=0;f<A.length;f+=1)_=A[f],_.state===n.SEM_PRE&&(Array.isArray(v[_.name])||(v[_.name]=[]),v[_.name].push({index:_.phraseIndex,length:_.phraseLength}));return v}}},{"./identifiers":10,"./utilities":16}],8:[function(e,t,r){t.exports=function(){let n=-1,s=0;this.init=function(o){if(typeof o!="number"||o<=0)throw new Error("circular-buffer.js: init: circular buffer size must an integer > 0");s=Math.ceil(o),n=-1},this.increment=function(){return n+=1,(n+s)%s},this.maxSize=function(){return s},this.items=function(){return n+1},this.getListIndex=function(o){return n===-1||o<0||o>n||n-o>=s?-1:(o+s)%s},this.forEach=function(o){if(n!==-1)if(n<s)for(let a=0;a<=n;a+=1)o(a,a);else for(let a=n-s+1;a<=n;a+=1)o((a+s)%s,a)}}},{}],9:[function(e,t,r){t.exports=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}},{}],10:[function(e,t,r){t.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}},{}],11:[function(e,t,r){t.exports={ast:e("./ast"),circular:e("./circular-buffer"),ids:e("./identifiers"),parser:e("./parser"),stats:e("./stats"),trace:e("./trace"),utils:e("./utilities"),emitcss:e("./emitcss"),style:e("./style")}},{"./ast":7,"./circular-buffer":8,"./emitcss":9,"./identifiers":10,"./parser":12,"./stats":13,"./style":14,"./trace":15,"./utilities":16}],12:[function(e,t,r){t.exports=function(){let n=e("./identifiers"),s=e("./utilities"),o=this,a;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let d,u,h,x,g=null,y=null,A=0,S=0,v=0,f=null,_=null,I=null,E=null,C=null,N=0,M=1/0,J=1/0,$=function(H,l,m){let w="parser.js: evaluateRule(): ";if(H>=I.length)throw new Error(`${w}rule index: ${H} out of range`);if(l>=h)throw new Error(`${w}phrase index: ${l} out of range`);let{length:k}=g;g.push({type:n.RNM,index:H}),a(k,l,m),g.pop()},Z=function(H,l,m){let w="parser.js: evaluateUdt(): ";if(H>=E.length)throw new Error(`${w}udt index: ${H} out of range`);if(l>=h)throw new Error(`${w}phrase index: ${l} out of range`);let{length:k}=g;g.push({type:n.UDT,empty:E[H].empty,index:H}),a(k,l,m),g.pop()},ge=function(){A=0,S=0,v=0,N=0,x=[{lookAround:n.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],I=null,E=null,y=null,d=0,u=0,h=0,f=null,_=null,C=null,g=null},te=function(){let H=[];this.push=function(){H.push(function(){let l=H[H.length-1],m={};for(let w in l)m[w]=l[w];return m}())},this.pop=function(l){let m=l;if(m||(m=H.length-1),m<1||m>H.length)throw new Error(`parser.js: backRef.pop(): bad length: ${m}`);return H.length=m,H[H.length-1]},this.length=function(){return H.length},this.savePhrase=function(l,m,w){H[H.length-1][l]={phraseIndex:m,phraseLength:w}},this.getPhrase=function(l){return H[H.length-1][l]},function(){let l={};I.forEach(m=>{m.isBkr&&(l[m.lower]=null)}),E.length>0&&E.forEach(m=>{m.isBkr&&(l[m.lower]=null)}),H.push(l)}()},ne=function(){let H=this;this.state=n.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=x[x.length-1],this.uFrame=new te,this.pFrame=new te,this.evaluateRule=$,this.evaluateUdt=Z,this.refresh=function(){H.state=n.ACTIVE,H.phraseLength=0,H.lookAround=x[x.length-1]}},W=function(){return x[x.length-1]},q=function(){return x.length>1},D=function(H,l,m){let w="parser.js: initializeInputChars(): ",k=H,B=l,T=m;if(k===void 0)throw new Error(`${w}input string is undefined`);if(k===null)throw new Error(`${w}input string is null`);if(typeof k=="string")k=s.stringToChars(k);else if(!Array.isArray(k))throw new Error(`${w}input string is not a string or array`);if(k.length>0&&typeof k[0]!="number")throw new Error(`${w}input string not an array of integers`);if(typeof B!="number")B=0;else if(B=Math.floor(B),B<0||B>k.length)throw new Error(`${w}input beginning index out of range: ${B}`);if(typeof T!="number")T=k.length-B;else if(T=Math.floor(T),T<0||T>k.length-B)throw new Error(`${w}input length out of range: ${T}`);y=k,d=B,u=T,h=d+u};this.setMaxTreeDepth=function(H){if(typeof H!="number")throw new Error(`parser: max tree depth must be integer > 0: ${H}`);if(M=Math.floor(H),M<=0)throw new Error(`parser: max tree depth must be integer > 0: ${H}`)},this.setMaxNodeHits=function(H){if(typeof H!="number")throw new Error(`parser: max node hits must be integer > 0: ${H}`);if(J=Math.floor(H),J<=0)throw new Error(`parser: max node hits must be integer > 0: ${H}`)};let P=function(H,l,m){let w;(function(T){let R="parser.js: initializeGrammar(): ";if(!T)throw new Error(`${R}grammar object undefined`);if(T.grammarObject!=="grammarObject")throw new Error(`${R}bad grammar object`);I=T.rules,E=T.udts})(H);let k=function(T){let R="parser.js: initializeStartRule(): ",O=null;if(typeof T=="number"){if(T>=I.length)throw new Error(`${R}start rule index too large: max: ${I.length}: index: ${T}`);O=T}else{if(typeof T!="string")throw new Error(`${R}type of start rule '${typeof T}' not recognized`);{let G=T.toLowerCase();for(let z=0;z<I.length;z+=1)if(G===I[z].lower){O=I[z].index;break}if(O===null)throw new Error(`${R}start rule name '${T}' not recognized`)}}return O}(l);(function(){let T="parser.js: initializeCallbacks(): ",R,O;for(f=[],_=[],R=0;R<I.length;R+=1)f[R]=null;for(R=0;R<E.length;R+=1)_[R]=null;let G=[];for(R=0;R<I.length;R+=1)G.push(I[R].lower);for(R=0;R<E.length;R+=1)G.push(E[R].lower);for(let z in o.callbacks){if(R=G.indexOf(z.toLowerCase()),R<0)throw new Error(`${T}syntax callback '${z}' not a rule or udt name`);if(O=o.callbacks[z],O||(O=null),typeof O!="function"&&O!==null)throw new Error(`${T}syntax callback[${z}] must be function reference or 'false' (false/null/undefined/etc.)`);R<I.length?f[R]=O:_[R-I.length]=O}for(R=0;R<E.length;R+=1)if(_[R]===null)throw new Error(`${T}all UDT callbacks must be defined. UDT callback[${E[R].lower}] not a function reference`)})(),function(){for(;;){if(o.trace===void 0){o.trace=null;break}if(o.trace===null)break;if(o.trace.traceObject!=="traceObject")throw new Error("parser.js: initializeTrace(): trace object not recognized");break}o.trace!==null&&o.trace.init(I,E,y)}(),function(){for(;;){if(o.stats===void 0){o.stats=null;break}if(o.stats===null)break;if(o.stats.statsObject!=="statsObject")throw new Error("parser.js: initializeStats(): stats object not recognized");break}o.stats!==null&&o.stats.init(I,E)}(),function(){for(;;){if(o.ast===void 0){o.ast=null;break}if(o.ast===null)break;if(o.ast.astObject!=="astObject")throw new Error("parser.js: initializeAst(): ast object not recognized");break}o.ast!==null&&o.ast.init(I,E,y)}();let B=new ne;switch(m!=null&&(C=m),g=[{type:n.RNM,index:k}],a(0,d,B),g=null,B.state){case n.ACTIVE:throw new Error("parser.js: parse(): final state should never be 'ACTIVE'");case n.NOMATCH:w=!1;break;case n.EMPTY:case n.MATCH:w=B.phraseLength===u;break;default:throw new Error("unrecognized state")}return{success:w,state:B.state,length:u,matched:B.phraseLength,maxMatched:N,maxTreeDepth:S,nodeHits:v,inputLength:y.length,subBegin:d,subEnd:h,subLength:u}};this.parseSubstring=function(H,l,m,w,k,B){return ge(),D(m,w,k),P(H,l,B)},this.parse=function(H,l,m,w){return ge(),D(m,0,m.length),P(H,l,w)};let L=function(H,l,m){let w=g[H];for(let k=0;k<w.children.length&&(a(w.children[k],l,m),m.state===n.NOMATCH);k+=1);},U=function(H,l,m,w){if(l.phraseLength>m){let k=`parser.js: opRNM(${H.name}): callback function error: `;throw k+=`sysData.phraseLength: ${l.phraseLength}`,k+=` must be <= remaining chars: ${m}`,new Error(k)}switch(l.state){case n.ACTIVE:if(w!==!0)throw new Error(`parser.js: opRNM(${H.name}): callback function return error. ACTIVE state not allowed.`);break;case n.EMPTY:l.phraseLength=0;break;case n.MATCH:l.phraseLength===0&&(l.state=n.EMPTY);break;case n.NOMATCH:l.phraseLength=0;break;default:throw new Error(`parser.js: opRNM(${H.name}): callback function return error. Unrecognized return state: ${l.state}`)}},Y=function(H,l,m){let w,k,B,T,R,O,G=g[H],z=I[G.index],ee=f[z.index],we=!q();if(we&&(k=o.ast&&o.ast.ruleDefined(G.index),k&&(w=o.ast.getLength(),o.ast.down(G.index,I[G.index].name)),T=m.uFrame.length(),R=m.pFrame.length(),m.uFrame.push(),m.pFrame.push(),O=m.pFrame,m.pFrame=new te),ee===null)B=g,g=z.opcodes,a(0,l,m),g=B;else{let Se=h-l;m.ruleIndex=z.index,ee(m,y,l,C),U(z,m,Se,!0),m.state===n.ACTIVE&&(B=g,g=z.opcodes,a(0,l,m),g=B,m.ruleIndex=z.index,ee(m,y,l,C),U(z,m,Se,!1))}we&&(k&&(m.state===n.NOMATCH?o.ast.setLength(w):o.ast.up(G.index,z.name,l,m.phraseLength)),m.pFrame=O,m.state===n.NOMATCH?(m.uFrame.pop(T),m.pFrame.pop(R)):z.isBkr&&(m.pFrame.savePhrase(z.lower,l,m.phraseLength),m.uFrame.savePhrase(z.lower,l,m.phraseLength)))},j=function(H,l,m){let w,k,B,T,R,O,G=g[H],z=E[G.index];m.UdtIndex=z.index;let ee=!q();ee&&(B=o.ast&&o.ast.udtDefined(G.index),B&&(k=I.length+G.index,w=o.ast.getLength(),o.ast.down(k,z.name)),T=m.uFrame.length(),R=m.pFrame.length(),m.uFrame.push(),m.pFrame.push(),O=m.pFrame,m.pFrame=new te);let we=h-l;_[G.index](m,y,l,C),function(Se,Re,Me){if(Re.phraseLength>Me){let Ne=`parser.js: opUDT(${Se.name}): callback function error: `;throw Ne+=`sysData.phraseLength: ${Re.phraseLength}`,Ne+=` must be <= remaining chars: ${Me}`,new Error(Ne)}switch(Re.state){case n.ACTIVE:throw new Error(`parser.js: opUDT(${Se.name}): callback function return error. ACTIVE state not allowed.`);case n.EMPTY:if(Se.empty===!1)throw new Error(`parser.js: opUDT(${Se.name}): callback function return error. May not return EMPTY.`);Re.phraseLength=0;break;case n.MATCH:if(Re.phraseLength===0){if(Se.empty===!1)throw new Error(`parser.js: opUDT(${Se.name}): callback function return error. May not return EMPTY.`);Re.state=n.EMPTY}break;case n.NOMATCH:Re.phraseLength=0;break;default:throw new Error(`parser.js: opUDT(${Se.name}): callback function return error. Unrecognized return state: ${Re.state}`)}}(z,m,we),ee&&(B&&(m.state===n.NOMATCH?o.ast.setLength(w):o.ast.up(k,z.name,l,m.phraseLength)),m.pFrame=O,m.state===n.NOMATCH?(m.uFrame.pop(T),m.pFrame.pop(R)):z.isBkr&&(m.pFrame.savePhrase(z.lower,l,m.phraseLength),m.uFrame.savePhrase(z.lower,l,m.phraseLength)))},de=function(H,l,m){x.push({lookAround:n.LOOKAROUND_AHEAD,anchor:l,charsEnd:h,charsLength:u}),h=y.length,u=y.length-d,a(H+1,l,m);let w=x.pop();switch(h=w.charsEnd,u=w.charsLength,m.phraseLength=0,m.state){case n.EMPTY:case n.MATCH:m.state=n.EMPTY;break;case n.NOMATCH:m.state=n.NOMATCH;break;default:throw new Error(`opAND: invalid state ${m.state}`)}},X=function(H,l,m){x.push({lookAround:n.LOOKAROUND_AHEAD,anchor:l,charsEnd:h,charsLength:u}),h=y.length,u=y.length-d,a(H+1,l,m);let w=x.pop();switch(h=w.charsEnd,u=w.charsLength,m.phraseLength=0,m.state){case n.EMPTY:case n.MATCH:m.state=n.NOMATCH;break;case n.NOMATCH:m.state=n.EMPTY;break;default:throw new Error(`opNOT: invalid state ${m.state}`)}},ce=function(H,l,m){m.state=n.NOMATCH,m.phraseLength=0,m.state=l===0?n.EMPTY:n.NOMATCH},Q=function(H,l,m){m.state=n.NOMATCH,m.phraseLength=0,m.state=l===y.length?n.EMPTY:n.NOMATCH},se=function(H,l,m){switch(x.push({lookAround:n.LOOKAROUND_BEHIND,anchor:l}),a(H+1,l,m),x.pop(),m.phraseLength=0,m.state){case n.EMPTY:case n.MATCH:m.state=n.EMPTY;break;case n.NOMATCH:m.state=n.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${m.state}`)}},pe=function(H,l,m){switch(x.push({lookAround:n.LOOKAROUND_BEHIND,anchor:l}),a(H+1,l,m),x.pop(),m.phraseLength=0,m.state){case n.EMPTY:case n.MATCH:m.state=n.NOMATCH;break;case n.NOMATCH:m.state=n.EMPTY;break;default:throw new Error(`opBKN: invalid state ${m.state}`)}};a=function(H,l,m){let w=!0,k=g[H];if(v+=1,v>J)throw new Error(`parser: maximum number of node hits exceeded: ${J}`);if(A+=1,A>S&&(S=A,S>M))throw new Error(`parser: maximum parse tree depth exceeded: ${M}`);if(m.refresh(),o.trace!==null){let B=W();o.trace.down(k,m.state,l,m.phraseLength,B.anchor,B.lookAround)}if(x[x.length-1].lookAround===n.LOOKAROUND_BEHIND)switch(k.type){case n.ALT:L(H,l,m);break;case n.CAT:(function(B,T,R){let O,G,z,ee,we=g[B],Se=R.uFrame.length(),Re=R.pFrame.length();o.ast&&(G=o.ast.getLength()),O=!0,z=T,ee=0;for(let Me=we.children.length-1;Me>=0;Me-=1)if(a(we.children[Me],z,R),z-=R.phraseLength,ee+=R.phraseLength,R.state===n.NOMATCH){O=!1;break}O?(R.state=ee===0?n.EMPTY:n.MATCH,R.phraseLength=ee):(R.state=n.NOMATCH,R.phraseLength=0,R.uFrame.pop(Se),R.pFrame.pop(Re),o.ast&&o.ast.setLength(G))})(H,l,m);break;case n.REP:(function(B,T,R){let O,G,z,ee,we=g[B];G=T,z=0,ee=0;let Se=R.uFrame.length(),Re=R.pFrame.length();for(o.ast&&(O=o.ast.getLength());!(G<=0)&&(a(B+1,G,R),R.state!==n.NOMATCH)&&R.state!==n.EMPTY&&(ee+=1,z+=R.phraseLength,G-=R.phraseLength,ee!==we.max););R.state===n.EMPTY||ee>=we.min?(R.state=z===0?n.EMPTY:n.MATCH,R.phraseLength=z):(R.state=n.NOMATCH,R.phraseLength=0,R.uFrame.pop(Se),R.pFrame.pop(Re),o.ast&&o.ast.setLength(O))})(H,l,m);break;case n.RNM:Y(H,l,m);break;case n.UDT:j(H,l,m);break;case n.AND:de(H,l,m);break;case n.NOT:X(H,l,m);break;case n.TRG:(function(B,T,R){let O=g[B];if(R.state=n.NOMATCH,R.phraseLength=0,T>0){let G=y[T-1];O.min<=G&&G<=O.max&&(R.state=n.MATCH,R.phraseLength=1)}})(H,l,m);break;case n.TBS:(function(B,T,R){let O,G=g[B];R.state=n.NOMATCH;let z=G.string.length,ee=T-z;if(ee>=0){for(O=0;O<z;O+=1)if(y[ee+O]!==G.string[O])return;R.state=n.MATCH,R.phraseLength=z}})(H,l,m);break;case n.TLS:(function(B,T,R){let O,G=g[B];R.state=n.NOMATCH;let z=G.string.length;if(z===0)return void(R.state=n.EMPTY);let ee=T-z;if(ee>=0){for(let we=0;we<z;we+=1)if(O=y[ee+we],O>=65&&O<=90&&(O+=32),O!==G.string[we])return;R.state=n.MATCH,R.phraseLength=z}})(H,l,m);break;case n.BKR:(function(B,T,R){let O,G,z,ee,we=g[B];R.state=n.NOMATCH,R.phraseLength=0,ee=we.index<I.length?I[we.index].lower:E[we.index-I.length].lower;let Se=we.bkrMode===n.BKR_MODE_PM?R.pFrame.getPhrase(ee):R.uFrame.getPhrase(ee),Re=we.bkrCase===n.BKR_MODE_CI;if(Se===null)return;let Me=Se.phraseIndex,Ne=Se.phraseLength;if(Ne===0)return R.state=n.EMPTY,void(R.phraseLength=0);let Ar=T-Ne;if(Ar>=0){if(Re){for(O=0;O<Ne;O+=1)if(G=y[Ar+O],z=y[Me+O],G>=65&&G<=90&&(G+=32),z>=65&&z<=90&&(z+=32),G!==z)return;R.state=n.MATCH,R.phraseLength=Ne}else for(O=0;O<Ne;O+=1)if(G=y[Ar+O],z=y[Me+O],G!==z)return;R.state=n.MATCH,R.phraseLength=Ne}})(H,l,m);break;case n.BKA:se(H,l,m);break;case n.BKN:pe(H,l,m);break;case n.ABG:ce(0,l,m);break;case n.AEN:Q(0,l,m);break;default:w=!1}else switch(k.type){case n.ALT:L(H,l,m);break;case n.CAT:(function(B,T,R){let O,G,z,ee,we=g[B],Se=R.uFrame.length(),Re=R.pFrame.length();o.ast&&(G=o.ast.getLength()),O=!0,z=T,ee=0;for(let Me=0;Me<we.children.length;Me+=1){if(a(we.children[Me],z,R),R.state===n.NOMATCH){O=!1;break}z+=R.phraseLength,ee+=R.phraseLength}O?(R.state=ee===0?n.EMPTY:n.MATCH,R.phraseLength=ee):(R.state=n.NOMATCH,R.phraseLength=0,R.uFrame.pop(Se),R.pFrame.pop(Re),o.ast&&o.ast.setLength(G))})(H,l,m);break;case n.REP:(function(B,T,R){let O,G,z,ee,we=g[B];G=T,z=0,ee=0;let Se=R.uFrame.length(),Re=R.pFrame.length();for(o.ast&&(O=o.ast.getLength());!(G>=h)&&(a(B+1,G,R),R.state!==n.NOMATCH)&&R.state!==n.EMPTY&&(ee+=1,z+=R.phraseLength,G+=R.phraseLength,ee!==we.max););R.state===n.EMPTY||ee>=we.min?(R.state=z===0?n.EMPTY:n.MATCH,R.phraseLength=z):(R.state=n.NOMATCH,R.phraseLength=0,R.uFrame.pop(Se),R.pFrame.pop(Re),o.ast&&o.ast.setLength(O))})(H,l,m);break;case n.RNM:Y(H,l,m);break;case n.UDT:j(H,l,m);break;case n.AND:de(H,l,m);break;case n.NOT:X(H,l,m);break;case n.TRG:(function(B,T,R){let O=g[B];R.state=n.NOMATCH,T<h&&O.min<=y[T]&&y[T]<=O.max&&(R.state=n.MATCH,R.phraseLength=1)})(H,l,m);break;case n.TBS:(function(B,T,R){let O,G=g[B],z=G.string.length;if(R.state=n.NOMATCH,T+z<=h){for(O=0;O<z;O+=1)if(y[T+O]!==G.string[O])return;R.state=n.MATCH,R.phraseLength=z}})(H,l,m);break;case n.TLS:(function(B,T,R){let O,G,z=g[B];R.state=n.NOMATCH;let ee=z.string.length;if(ee!==0){if(T+ee<=h){for(O=0;O<ee;O+=1)if(G=y[T+O],G>=65&&G<=90&&(G+=32),G!==z.string[O])return;R.state=n.MATCH,R.phraseLength=ee}}else R.state=n.EMPTY})(H,l,m);break;case n.BKR:(function(B,T,R){let O,G,z,ee,we=g[B];R.state=n.NOMATCH,ee=we.index<I.length?I[we.index].lower:E[we.index-I.length].lower;let Se=we.bkrMode===n.BKR_MODE_PM?R.pFrame.getPhrase(ee):R.uFrame.getPhrase(ee),Re=we.bkrCase===n.BKR_MODE_CI;if(Se===null)return;let Me=Se.phraseIndex,Ne=Se.phraseLength;if(Ne!==0){if(T+Ne<=h){if(Re){for(O=0;O<Ne;O+=1)if(G=y[T+O],z=y[Me+O],G>=65&&G<=90&&(G+=32),z>=65&&z<=90&&(z+=32),G!==z)return;R.state=n.MATCH,R.phraseLength=Ne}else for(O=0;O<Ne;O+=1)if(G=y[T+O],z=y[Me+O],G!==z)return;R.state=n.MATCH,R.phraseLength=Ne}}else R.state=n.EMPTY})(H,l,m);break;case n.BKA:se(H,l,m);break;case n.BKN:pe(H,l,m);break;case n.ABG:ce(0,l,m);break;case n.AEN:Q(0,l,m);break;default:w=!1}if(!q()&&l+m.phraseLength>N&&(N=l+m.phraseLength),o.stats!==null&&o.stats.collect(k,m),o.trace!==null){let B=W();o.trace.up(k,m.state,l,m.phraseLength,B.anchor,B.lookAround)}return A-=1,w}}},{"./identifiers":10,"./utilities":16}],13:[function(e,t,r){t.exports=function(){let n=e("./identifiers"),s=e("./utilities"),o=e("./style"),a=[],d=[],u=[],h,x=[],g=[];this.statsObject="statsObject";let y=function(C,N){return C.lower<N.lower?-1:C.lower>N.lower?1:0},A=function(C,N){return C.total<N.total?1:C.total>N.total?-1:y(C,N)},S=function(C,N){return C.index<N.index?-1:C.index>N.index?1:0},v=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},f=function(C,N){switch(C.total+=1,N){case n.EMPTY:C.empty+=1;break;case n.MATCH:C.match+=1;break;case n.NOMATCH:C.nomatch+=1;break;default:throw new Error(`stats.js: collect(): incStat(): unrecognized state: ${N}`)}},_=function(C,N){let M="";return M+="<tr>",M+=`<td class="${o.CLASS_ACTIVE}">${C}</td>`,M+=`<td class="${o.CLASS_EMPTY}">${N.empty}</td>`,M+=`<td class="${o.CLASS_MATCH}">${N.match}</td>`,M+=`<td class="${o.CLASS_NOMATCH}">${N.nomatch}</td>`,M+=`<td class="${o.CLASS_ACTIVE}">${N.total}</td>`,M+=`</tr>
`,M},I=function(){let C="";return C+=_("ALT",u[n.ALT]),C+=_("CAT",u[n.CAT]),C+=_("REP",u[n.REP]),C+=_("RNM",u[n.RNM]),C+=_("TRG",u[n.TRG]),C+=_("TBS",u[n.TBS]),C+=_("TLS",u[n.TLS]),C+=_("UDT",u[n.UDT]),C+=_("AND",u[n.AND]),C+=_("NOT",u[n.NOT]),C+=_("BKR",u[n.BKR]),C+=_("BKA",u[n.BKA]),C+=_("BKN",u[n.BKN]),C+=_("ABG",u[n.ABG]),C+=_("AEN",u[n.AEN]),C+=_("totals",h),C},E=function(){let C="";C+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,C+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let N=0;N<a.length;N+=1)x[N].total>0&&(C+="<tr>",C+=`<td class="${o.CLASS_ACTIVE}">${x[N].name}</td>`,C+=`<td class="${o.CLASS_EMPTY}">${x[N].empty}</td>`,C+=`<td class="${o.CLASS_MATCH}">${x[N].match}</td>`,C+=`<td class="${o.CLASS_NOMATCH}">${x[N].nomatch}</td>`,C+=`<td class="${o.CLASS_ACTIVE}">${x[N].total}</td>`,C+=`</tr>
`);if(d.length>0){C+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,C+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let N=0;N<d.length;N+=1)g[N].total>0&&(C+="<tr>",C+=`<td class="${o.CLASS_ACTIVE}">${g[N].name}</td>`,C+=`<td class="${o.CLASS_EMPTY}">${g[N].empty}</td>`,C+=`<td class="${o.CLASS_MATCH}">${g[N].match}</td>`,C+=`<td class="${o.CLASS_NOMATCH}">${g[N].nomatch}</td>`,C+=`<td class="${o.CLASS_ACTIVE}">${g[N].total}</td>`,C+=`</tr>
`)}return C};this.validate=function(C){let N=!1;return typeof C=="string"&&C==="stats"&&(N=!0),N},this.init=function(C,N){a=C,d=N,function(){u.length=0,h=new v,u[n.ALT]=new v,u[n.CAT]=new v,u[n.REP]=new v,u[n.RNM]=new v,u[n.TRG]=new v,u[n.TBS]=new v,u[n.TLS]=new v,u[n.UDT]=new v,u[n.AND]=new v,u[n.NOT]=new v,u[n.BKR]=new v,u[n.BKA]=new v,u[n.BKN]=new v,u[n.ABG]=new v,u[n.AEN]=new v,x.length=0;for(let M=0;M<a.length;M+=1)x.push({empty:0,match:0,nomatch:0,total:0,name:a[M].name,lower:a[M].lower,index:a[M].index});if(d.length>0){g.length=0;for(let M=0;M<d.length;M+=1)g.push({empty:0,match:0,nomatch:0,total:0,name:d[M].name,lower:d[M].lower,index:d[M].index})}}()},this.collect=function(C,N){f(h,N.state,N.phraseLength),f(u[C.type],N.state,N.phraseLength),C.type===n.RNM&&f(x[C.index],N.state,N.phraseLength),C.type===n.UDT&&f(g[C.index],N.state,N.phraseLength)},this.toHtml=function(C,N){let M="";for(M+=`<table class="${o.CLASS_STATS}">
`,typeof N=="string"&&(M+=`<caption>${N}</caption>
`),M+=`<tr><th class="${o.CLASS_ACTIVE}">ops</th>
`,M+=`<th class="${o.CLASS_EMPTY}">EMPTY</th>
`,M+=`<th class="${o.CLASS_MATCH}">MATCH</th>
`,M+=`<th class="${o.CLASS_NOMATCH}">NOMATCH</th>
`,M+=`<th class="${o.CLASS_ACTIVE}">totals</th></tr>
`;;){if(C===void 0){M+=I();break}if(C===null){M+=I();break}if(C==="ops"){M+=I();break}if(C==="index"){x.sort(S),g.length>0&&g.sort(S),M+=I(),M+=E();break}if(C==="hits"){x.sort(A),g.length>0&&g.sort(S),M+=I(),M+=E();break}if(C==="alpha"){x.sort(y),g.length>0&&g.sort(y),M+=I(),M+=E();break}break}return M+=`</table>
`,M},this.toHtmlPage=function(C,N,M){return s.htmlToPage(this.toHtml(C,N),M)}}},{"./identifiers":10,"./style":14,"./utilities":16}],14:[function(e,t,r){t.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}},{}],15:[function(e,t,r){t.exports=function(){let n=e("./utilities"),s=e("./style"),o=new(e("./circular-buffer")),a=e("./identifiers"),d=this,u=16,h=80,x=[],g=5e3,y=-1,A=0,S=0,v=[],f=null,_=null,I=null,E=[],C=[],N=`<span class="${s.CLASS_LINEEND}">&bull;</span>`,M=`<span class="${s.CLASS_LINEEND}">&hellip;</span>`,J=`<span class="${s.CLASS_EMPTY}">&#120634;</span>`;this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(W,q){y=-1,typeof W=="number"&&W>0?(g=Math.ceil(W),typeof q=="number"&&(y=Math.floor(q),y<0&&(y=-1))):g=0},this.getMaxRecords=function(){return g},this.getLastRecord=function(){return y},this.init=function(W,q,D){x.length=0,v.length=0,A=0,S=0,f=D,_=W,I=q,function(){let P=function(U){E[a.ALT]=U,E[a.CAT]=U,E[a.REP]=U,E[a.TLS]=U,E[a.TBS]=U,E[a.TRG]=U,E[a.AND]=U,E[a.NOT]=U,E[a.BKR]=U,E[a.BKA]=U,E[a.BKN]=U,E[a.ABG]=U,E[a.AEN]=U},L=0;for(let U in d.filter.operators)L+=1;if(L!==0){for(let U in d.filter.operators){let Y=U.toUpperCase();if(Y==="<ALL>")return void P(!0);if(Y==="<NONE>")return void P(!1)}P(!1);for(let U in d.filter.operators){let Y=U.toUpperCase();if(Y==="ALT")E[a.ALT]=d.filter.operators[U]===!0;else if(Y==="CAT")E[a.CAT]=d.filter.operators[U]===!0;else if(Y==="REP")E[a.REP]=d.filter.operators[U]===!0;else if(Y==="AND")E[a.AND]=d.filter.operators[U]===!0;else if(Y==="NOT")E[a.NOT]=d.filter.operators[U]===!0;else if(Y==="TLS")E[a.TLS]=d.filter.operators[U]===!0;else if(Y==="TBS")E[a.TBS]=d.filter.operators[U]===!0;else if(Y==="TRG")E[a.TRG]=d.filter.operators[U]===!0;else if(Y==="BKR")E[a.BKR]=d.filter.operators[U]===!0;else if(Y==="BKA")E[a.BKA]=d.filter.operators[U]===!0;else if(Y==="BKN")E[a.BKN]=d.filter.operators[U]===!0;else if(Y==="ABG")E[a.ABG]=d.filter.operators[U]===!0;else{if(Y!=="AEN")throw new Error(`trace.js: initOpratorFilter: '${U}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`);E[a.AEN]=d.filter.operators[U]===!0}}}else P(!1)}(),function(){let P=function(j){E[a.RNM]=j,E[a.UDT]=j;let de=_.length+I.length;C.length=0;for(let X=0;X<de;X+=1)C.push(j)},L,U,Y=[];for(U=0;U<_.length;U+=1)Y.push(_[U].lower);for(U=0;U<I.length;U+=1)Y.push(I[U].lower);C.length=0,L=0;for(let j in d.filter.rules)L+=1;if(L!==0){for(let j in d.filter.rules){let de=j.toLowerCase();if(de==="<all>")return void P(!0);if(de==="<none>")return void P(!1)}P(!1),E[a.RNM]=!0,E[a.UDT]=!0;for(let j in d.filter.rules){let de=j.toLowerCase();if(U=Y.indexOf(de),U<0)throw new Error(`trace.js: initRuleFilter: '${j}' not a valid rule or udt name`);C[U]=d.filter.rules[j]===!0}}else P(!0)}(),o.init(g)};let $=function(W){let q=!1;return q=W.type===a.RNM?!(!E[W.type]||!C[W.index]):W.type===a.UDT?!(!E[W.type]||!C[_.length+W.index]):E[W.type],q},Z=function(W){return y===-1||W<=y};this.down=function(W,q,D,P,L,U){Z(A)&&$(W)&&(v.push(A),x[o.increment()]={dirUp:!1,depth:S,thisLine:A,thatLine:void 0,opcode:W,state:q,phraseIndex:D,phraseLength:P,lookAnchor:L,lookAround:U},A+=1,S+=1)},this.up=function(W,q,D,P,L,U){if(Z(A)&&$(W)){let Y=A,j=v.pop(),de=o.getListIndex(j);de!==-1&&(x[de].thatLine=Y),S-=1,x[o.increment()]={dirUp:!0,depth:S,thisLine:Y,thatLine:j,opcode:W,state:q,phraseIndex:D,phraseLength:P,lookAnchor:L,lookAround:U},A+=1}},this.toTree=function(W){let q=function(){function D(T,R){let O,G,z;if(R)switch(T.op={id:R.type,name:n.opcodeToString(R.type)},T.opData=void 0,R.type){case a.RNM:T.opData=_[R.index].name;break;case a.UDT:T.opData=I[R.index].name;break;case a.BKR:O=R.index<_.length?_[R.index].name:I[R.index-_.length].name,G=R.bkrCase===a.BKR_MODE_CI?"%i":"%s",z=R.bkrMode===a.BKR_MODE_UM?"%u":"%p",T.opData=`\\\\${G}${z}${O}`;break;case a.TLS:T.opData=[];for(let ee=0;ee<R.string.length;ee+=1)T.opData.push(R.string[ee]);break;case a.TBS:T.opData=[];for(let ee=0;ee<R.string.length;ee+=1)T.opData.push(R.string[ee]);break;case a.TRG:case a.REP:T.opData=[R.min,R.max];break;default:throw new Error("unrecognized opcode")}else T.op={id:void 0,name:void 0},T.opData=void 0}function P(T,R,O){return T===a.MATCH?{index:R,length:O}:T===a.NOMATCH||T===a.EMPTY?{index:R,length:0}:null}let L=-1;function U(T,R,O){let G={id:L++,branch:-1,parent:T,up:!1,down:!1,depth:O,children:[]};return R?(G.down=!0,G.state={id:R.state,name:n.stateToString(R.state)},G.phrase=null,D(G,R.opcode)):(G.state={id:void 0,name:void 0},G.phrase=P(),D(G,void 0)),G}function Y(T,R){R&&(T.up=!0,T.state={id:R.state,name:n.stateToString(R.state)},T.phrase=P(R.state,R.phraseIndex,R.phraseLength),T.down||D(T,R.opcode))}let j=0,de=-1,X=1,ce=[],Q,se,pe,H,l=!0,m=U(null,null,-1);for(ce.push(m),se=m,o.forEach(T=>{if(H=x[T],l&&(l=!1,H.depth>0)){let R=H.dirUp?H.depth+1:H.depth;for(let O=0;O<R;O+=1)pe=se,se=U(se,null,O),ce.push(se),pe.children.push(se)}H.dirUp?(se=ce.pop(),Y(se,H),se=ce[ce.length-1]):(pe=se,se=U(se,H,H.depth),ce.push(se),pe.children.push(se))});ce.length>1;)se=ce.pop(),Y(se,null);if(m.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(ce.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");Q=m.children[0];let w=Q;for(;Q&&!Q.down&&!Q.up;)w=Q,Q=Q.children[0];Q=w,Q.leftMost=!0,Q.rightMost=!0,function T(R){if(de+=1,R.branch=X,de>S&&(S=de),R.children.length===0)j+=1;else for(let O=0;O<R.children.length;O+=1)O>0&&(X+=1),R.children[O].leftMost=!1,R.children[O].rightMost=!1,R.leftMost&&(R.children[O].leftMost=O===0),R.rightMost&&(R.children[O].rightMost=O===R.children.length-1),T(R.children[O]);de-=1}(Q),Q.branch=0;let k={string:[]};for(let T=0;T<f.length;T+=1)k.string[T]=f[T];k.rules=[];for(let T=0;T<_.length;T+=1)k.rules[T]=_[T].name;k.udts=[];for(let T=0;T<I.length;T+=1)k.udts[T]=I[T].name;let B;return k.id={},k.id.ALT={id:a.ALT,name:"ALT"},k.id.CAT={id:a.CAT,name:"CAT"},k.id.REP={id:a.REP,name:"REP"},k.id.RNM={id:a.RNM,name:"RNM"},k.id.TLS={id:a.TLS,name:"TLS"},k.id.TBS={id:a.TBS,name:"TBS"},k.id.TRG={id:a.TRG,name:"TRG"},k.id.UDT={id:a.UDT,name:"UDT"},k.id.AND={id:a.AND,name:"AND"},k.id.NOT={id:a.NOT,name:"NOT"},k.id.BKR={id:a.BKR,name:"BKR"},k.id.BKA={id:a.BKA,name:"BKA"},k.id.BKN={id:a.BKN,name:"BKN"},k.id.ABG={id:a.ABG,name:"ABG"},k.id.AEN={id:a.AEN,name:"AEN"},k.id.ACTIVE={id:a.ACTIVE,name:"ACTIVE"},k.id.MATCH={id:a.MATCH,name:"MATCH"},k.id.EMPTY={id:a.EMPTY,name:"EMPTY"},k.id.NOMATCH={id:a.NOMATCH,name:"NOMATCH"},k.treeDepth=S,k.leafNodes=j,B=Q.down?Q.up?"none":"right":Q.up?"left":"both",k.branchesIncomplete=B,k.tree=function T(R,O){let G,z={};if(z.id=R.id,z.branch=R.branch,z.leftMost=R.leftMost,z.rightMost=R.rightMost,G=R.state.name?R.state.name:"ACTIVE",z.state={id:R.state.id,name:G},G=R.op.name?R.op.name:"?",z.op={id:R.op.id,name:G},typeof R.opData=="string")z.opData=R.opData;else if(Array.isArray(R.opData)){z.opData=[];for(let ee=0;ee<R.opData.length;ee+=1)z.opData[ee]=R.opData[ee]}else z.opData=void 0;R.phrase?z.phrase={index:R.phrase.index,length:R.phrase.length}:z.phrase=null,z.depth=R.depth,z.children=[];for(let ee=0;ee<R.children.length;ee+=1)R.children.length,z.children[ee]=T(R.children[ee],O);return z}(Q,Q.depth),k}();return W?JSON.stringify(q):q},this.toHtmlPage=function(W,q,D){return n.htmlToPage(this.toHtml(W,q),D)},this.indent=function(W){let q="";for(let D=0;D<W;D+=1)q+=".";return q};let ge=function(W,q,D,P,L){if(P===0)return"";let U="",Y=L?",":"";switch(W){case u:U=Y+n.charsToHex(q,D,P);break;case 10:if(L)return`,${n.charsToDec(q,D,P)}`;U=Y+n.charsToDec(q,D,P);break;case 32:U=n.charsToUnicode(q,D,P);break;case 8:default:U=n.charsToAsciiHtml(q,D,P)}return U},te=function(W,q,D,P,L,U){let Y,j,de,X,ce="",Q=N,se=`<span class="${s.CLASS_REMAINDER}">`,pe="</span>",H=!1;switch(D){case a.EMPTY:ce+=J;case a.NOMATCH:case a.ACTIVE:Y=P,j=0,de=P,X=q.length-de;break;case a.MATCH:Y=P,j=L,de=P+j,X=q.length-de;break;default:throw new Error("unrecognized state")}return Q=N,j>h?(j=h,Q=M,X=0):j+X>h&&(Q=M,X=h-j),j>0&&(ce+=U,ce+=ge(W,q,Y,j,H),ce+=pe,H=!0),X>0&&(ce+=se,ce+=ge(W,q,de,X,H),ce+=pe),ce+Q},ne=function(W){if(_===null)return"";let q,D,P,L,U,Y,j="";return j+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",j+=`<th>operator</th><th>phrase</th></tr>
`,o.forEach(de=>{let X=x[de];switch(q=X.thisLine,D=X.thatLine!==void 0?X.thatLine:"--",P=!1,L=!1,U=!1,X.lookAround===a.LOOKAROUND_AHEAD&&(P=!0,U=!0,Y=X.lookAnchor),X.opcode.type!==a.AND&&X.opcode.type!==a.NOT||(P=!0,U=!0,Y=X.phraseIndex),X.lookAround===a.LOOKAROUND_BEHIND&&(L=!0,U=!0,Y=X.lookAnchor),X.opcode.type!==a.BKA&&X.opcode.type!==a.BKN||(L=!0,U=!0,Y=X.phraseIndex),j+="<tr>",j+=`<td>${q}</td><td>${D}</td>`,j+=`<td>${X.phraseIndex}</td>`,j+=`<td>${X.phraseLength}</td>`,j+=`<td>${X.depth}</td>`,j+="<td>",X.state){case a.ACTIVE:j+=`<span class="${s.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case a.MATCH:j+=`<span class="${s.CLASS_MATCH}">&uarr;M</span>`;break;case a.NOMATCH:j+=`<span class="${s.CLASS_NOMATCH}">&uarr;N</span>`;break;case a.EMPTY:j+=`<span class="${s.CLASS_EMPTY}">&uarr;E</span>`;break;default:j+=`<span class="${s.CLASS_ACTIVE}">--</span>`}if(j+="</td>",j+="<td>",j+=d.indent(X.depth),P?j+=`<span class="${s.CLASS_LOOKAHEAD}">`:L&&(j+=`<span class="${s.CLASS_LOOKBEHIND}">`),j+=n.opcodeToString(X.opcode.type),X.opcode.type===a.RNM&&(j+=`(${_[X.opcode.index].name}) `),X.opcode.type===a.BKR){let ce=X.opcode.bkrCase===a.BKR_MODE_CI?"%i":"%s",Q=X.opcode.bkrMode===a.BKR_MODE_UM?"%u":"%p";j+=`(\\${ce}${Q}${_[X.opcode.index].name}) `}X.opcode.type===a.UDT&&(j+=`(${I[X.opcode.index].name}) `),X.opcode.type===a.TRG&&(j+=`(${function(ce,Q){let se="";if(Q.type===a.TRG)if(ce===u||ce===32){let pe=Q.min.toString(16).toUpperCase();pe.length%2!=0&&(pe=`0${pe}`),se+=ce===u?"%x":"U+",se+=pe,pe=Q.max.toString(16).toUpperCase(),pe.length%2!=0&&(pe=`0${pe}`),se+=`&ndash;${pe}`}else se=`%d${Q.min.toString(10)}&ndash;${Q.max.toString(10)}`;return se}(W,X.opcode)}) `),X.opcode.type===a.TBS&&(j+=`(${function(ce,Q){let se="";if(Q.type===a.TBS){let pe=Math.min(Q.string.length,10);if(ce===u||ce===32){se+=ce===u?"%x":"U+";for(let H=0;H<pe;H+=1){let l;H>0&&(se+="."),l=Q.string[H].toString(16).toUpperCase(),l.length%2!=0&&(l=`0${l}`),se+=l}}else{se="%d";for(let H=0;H<pe;H+=1)H>0&&(se+="."),se+=Q.string[H].toString(10)}pe<Q.string.length&&(se+=M)}return se}(W,X.opcode)}) `),X.opcode.type===a.TLS&&(j+=`(${function(ce,Q){let se="";if(Q.type===a.TLS){let pe=Math.min(Q.string.length,5);if(ce===u||ce===10){let H,l,m;ce===u?(se="%x",m=16):(se="%d",m=10);for(let w=0;w<pe;w+=1)w>0&&(se+="."),l=Q.string[w],l>=97&&l<=122?(H=l-32,se+=`${H.toString(m)}/${l.toString(m)}`.toUpperCase()):l>=65&&l<=90?(H=l,l+=32,se+=`${H.toString(m)}/${l.toString(m)}`.toUpperCase()):se+=l.toString(m).toUpperCase();pe<Q.string.length&&(se+=M)}else{se='"';for(let H=0;H<pe;H+=1)se+=n.asciiChars[Q.string[H]];pe<Q.string.length&&(se+=M),se+='"'}}return se}(W,X.opcode)}) `),X.opcode.type===a.REP&&(j+=`(${function(ce,Q){let se="";if(Q.type===a.REP)if(ce===u){let pe=Q.min.toString(16).toUpperCase();pe.length%2!=0&&(pe=`0${pe}`),se=`x${pe}`,Q.max<1/0?(pe=Q.max.toString(16).toUpperCase(),pe.length%2!=0&&(pe=`0${pe}`)):pe="inf",se+=`&ndash;${pe}`}else se=Q.max<1/0?`${Q.min.toString(10)}&ndash;${Q.max.toString(10)}`:`${Q.min.toString(10)}&ndash;inf`;return se}(W,X.opcode)}) `),U&&(j+="</span>"),j+="</td>",j+="<td>",j+=L?function(ce,Q,se,pe,H,l){let m,w,k,B,T="",R=N,O=`<span class="${s.CLASS_LOOKBEHIND}">`,G=`<span class="${s.CLASS_REMAINDER}">`,z="</span>",ee=!1;switch(se){case a.EMPTY:T+=J;case a.NOMATCH:case a.MATCH:case a.ACTIVE:m=pe-H,w=l-m,k=l,B=Q.length-k;break;default:throw new Error("unrecognized state")}return R=N,w>h?(w=h,R=M,B=0):w+B>h&&(R=M,B=h-w),w>0&&(T+=O,T+=ge(ce,Q,m,w,ee),T+=z,ee=!0),B>0&&(T+=G,T+=ge(ce,Q,k,B,ee),T+=z),T+R}(W,f,X.state,X.phraseIndex,X.phraseLength,Y):P?function(ce,Q,se,pe,H){let l=`<span class="${s.CLASS_LOOKAHEAD}">`;return te(ce,Q,se,pe,H,l)}(W,f,X.state,X.phraseIndex,X.phraseLength):function(ce,Q,se,pe,H){let l=`<span class="${s.CLASS_MATCH}">`;return te(ce,Q,se,pe,H,l)}(W,f,X.state,X.phraseIndex,X.phraseLength),j+=`</td></tr>
`}),j+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",j+=`<th>operator</th><th>phrase</th></tr>
`,j+=`</table>
`,j};this.toHtml=function(W,q){let D=8;if(typeof W=="string"&&W.length>=3){let L=W.toLowerCase().slice(0,3);L==="hex"?D=u:L==="dec"?D=10:L==="uni"&&(D=32)}let P="";return P+=function(L,U){let Y;switch(L){case u:Y="hexadecimal";break;case 10:Y="decimal";break;case 8:Y="ASCII";break;case 32:Y="UNICODE";break;default:throw new Error(`trace.js: htmlHeader: unrecognized mode: ${L}`)}let j="";return j+=`<p>display mode: ${Y}</p>
`,j+=`<table class="${s.CLASS_TRACE}">
`,typeof U=="string"&&(j+=`<caption>${U}</caption>`),j}(D,q),P+=ne(D),P+=function(){let L="";return L+=`</table>
`,L+=`<p class="${s.CLASS_MONOSPACE}">legend:<br>
`,L+=`(a)&nbsp;-&nbsp;line number<br>
`,L+=`(b)&nbsp;-&nbsp;matching line number<br>
`,L+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,L+=`(d)&nbsp;-&nbsp;phrase length<br>
`,L+=`(e)&nbsp;-&nbsp;tree depth<br>
`,L+=`(f)&nbsp;-&nbsp;operator state<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,L+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,L+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to 80 characters of the phrase being matched<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_MATCH}">matched characters</span><br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${s.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${J} empty string<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${N} end of input string<br>
`,L+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${M} input string display truncated<br>
`,L+=`</p>
`,L+=`<p class="${s.CLASS_MONOSPACE}">
`,L+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,L+=`ALT - alternation<br>
`,L+=`CAT - concatenation<br>
`,L+=`REP - repetition<br>
`,L+=`RNM - rule name<br>
`,L+=`TRG - terminal range<br>
`,L+=`TLS - terminal literal string (case insensitive)<br>
`,L+=`TBS - terminal binary string (case sensitive)<br>
`,L+=`<br>
`,L+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,L+=`UDT - user-defined terminal<br>
`,L+=`AND - positive look ahead<br>
`,L+=`NOT - negative look ahead<br>
`,L+=`BKA - positive look behind<br>
`,L+=`BKN - negative look behind<br>
`,L+=`BKR - back reference<br>
`,L+=`ABG - anchor - begin of input string<br>
`,L+=`AEN - anchor - end of input string<br>
`,L+=`</p>
`,L}(),P}}},{"./circular-buffer":8,"./identifiers":10,"./style":14,"./utilities":16}],16:[function(e,t,r){let n=e("./style"),s=e("../apg-conv-api/converter"),o=e("./emitcss"),a=e("./identifiers"),d=this,u=function(h,x,g){let y,A=x;for(;;){if(h<=0){A=0,y=0;break}if(typeof A!="number"){A=0,y=h;break}if(A>=h){A=h,y=h;break}if(typeof g!="number"){y=h;break}if(y=A+g,y>h){y=h;break}break}return{beg:A,end:y}};r.htmlToPage=function(h,x){let g;if(typeof h!="string")throw new Error("utilities.js: htmlToPage: input HTML is not a string");g=typeof x!="string"?"htmlToPage":x;let y="";return y+=`<!DOCTYPE html>
`,y+=`<html lang="en">
`,y+=`<head>
`,y+=`<meta charset="utf-8">
`,y+=`<title>${g}</title>
`,y+=`<style>
`,y+=o(),y+=`</style>
`,y+=`</head>
<body>
`,y+=`<p>${new Date}</p>
`,y+=h,y+=`</body>
</html>
`,y},r.parserResultToHtml=function(h,x){let g,y,A=null;typeof x=="string"&&x!==""&&(A=x),g=h.success===!0?`<span class="${n.CLASS_MATCH}">true</span>`:`<span class="${n.CLASS_NOMATCH}">false</span>`,y=h.state===a.EMPTY?`<span class="${n.CLASS_EMPTY}">EMPTY</span>`:h.state===a.MATCH?`<span class="${n.CLASS_MATCH}">MATCH</span>`:h.state===a.NOMATCH?`<span class="${n.CLASS_NOMATCH}">NOMATCH</span>`:`<span class="${n.CLASS_NOMATCH}">unrecognized</span>`;let S="";return S+=`<table class="${n.CLASS_STATE}">
`,A&&(S+=`<caption>${A}</caption>
`),S+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,S+=`<tr><td>parser success</td><td>${g}</td>
`,S+=`<td><span class="${n.CLASS_MATCH}">true</span> if the parse succeeded,
`,S+=` <span class="${n.CLASS_NOMATCH}">false</span> otherwise`,S+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,S+=`<tr><td>parser state</td><td>${y}</td>
`,S+=`<td><span class="${n.CLASS_EMPTY}">EMPTY</span>, `,S+=`<span class="${n.CLASS_MATCH}">MATCH</span> or 
`,S+=`<span class="${n.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,S+=`<tr><td>string length</td><td>${h.length}</td><td>length of the input (sub)string</td></tr>
`,S+=`<tr><td>matched length</td><td>${h.matched}</td><td>number of input string characters matched</td></tr>
`,S+=`<tr><td>max matched</td><td>${h.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,S+=`<tr><td>max tree depth</td><td>${h.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,S+=`<tr><td>node hits</td><td>${h.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,S+=`<tr><td>input length</td><td>${h.inputLength}</td><td>length of full input string</td></tr>
`,S+=`<tr><td>sub-string begin</td><td>${h.subBegin}</td><td>sub-string first character index</td></tr>
`,S+=`<tr><td>sub-string end</td><td>${h.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,S+=`<tr><td>sub-string length</td><td>${h.subLength}</td><td>sub-string length</td></tr>
`,S+=`</table>
`,S},r.charsToString=function(h,x,g){let y,A;if(typeof x=="number"){if(x>=h.length)return"";y=x<0?0:x}else y=0;if(typeof g=="number"){if(g<=0)return"";A=g>h.length-y?h.length:y+g}else A=h.length;return y<A?s.encode("UTF16LE",h.slice(y,A)).toString("utf16le"):""},r.stringToChars=function(h){return s.decode("STRING",h)},r.opcodeToString=function(h){let x="unknown";switch(h){case a.ALT:x="ALT";break;case a.CAT:x="CAT";break;case a.RNM:x="RNM";break;case a.UDT:x="UDT";break;case a.AND:x="AND";break;case a.NOT:x="NOT";break;case a.REP:x="REP";break;case a.TRG:x="TRG";break;case a.TBS:x="TBS";break;case a.TLS:x="TLS";break;case a.BKR:x="BKR";break;case a.BKA:x="BKA";break;case a.BKN:x="BKN";break;case a.ABG:x="ABG";break;case a.AEN:x="AEN";break;default:throw new Error("unrecognized opcode")}return x},r.stateToString=function(h){let x="unknown";switch(h){case a.ACTIVE:x="ACTIVE";break;case a.MATCH:x="MATCH";break;case a.EMPTY:x="EMPTY";break;case a.NOMATCH:x="NOMATCH";break;default:throw new Error("unrecognized state")}return x},r.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],r.charToHex=function(h){let x=h.toString(16).toUpperCase();switch(x.length){case 1:case 3:case 7:x=`0${x}`;break;case 2:case 6:x=`00${x}`;break;case 4:break;case 5:x=`000${x}`;break;default:throw new Error("unrecognized option")}return x},r.charsToDec=function(h,x,g){let y="";if(!Array.isArray(h))throw new Error("utilities.js: charsToDec: input must be an array of integers");let A=u(h.length,x,g);if(A.end>A.beg){y+=h[A.beg];for(let S=A.beg+1;S<A.end;S+=1)y+=`,${h[S]}`}return y},r.charsToHex=function(h,x,g){let y="";if(!Array.isArray(h))throw new Error("utilities.js: charsToHex: input must be an array of integers");let A=u(h.length,x,g);if(A.end>A.beg){y+=`\\x${d.charToHex(h[A.beg])}`;for(let S=A.beg+1;S<A.end;S+=1)y+=`,\\x${d.charToHex(h[S])}`}return y},r.charsToHtmlEntities=function(h,x,g){let y="";if(!Array.isArray(h))throw new Error("utilities.js: charsToHex: input must be an array of integers");let A=u(h.length,x,g);if(A.end>A.beg)for(let S=A.beg;S<A.end;S+=1)y+=`&#x${h[S].toString(16)};`;return y},r.charsToUnicode=function(h,x,g){let y="";if(!Array.isArray(h))throw new Error("utilities.js: charsToUnicode: input must be an array of integers");let A=u(h.length,x,g);if(A.end>A.beg)for(let v=A.beg;v<A.end;v+=1)y+=(S=h[v])>=55296&&S<=57343||S>1114111?` U+${d.charToHex(h[v])}`:`&#${h[v]};`;var S;return y},r.charsToJsUnicode=function(h,x,g){let y="";if(!Array.isArray(h))throw new Error("utilities.js: charsToJsUnicode: input must be an array of integers");let A=u(h.length,x,g);if(A.end>A.beg){y+=`\\u${d.charToHex(h[A.beg])}`;for(let S=A.beg+1;S<A.end;S+=1)y+=`,\\u${d.charToHex(h[S])}`}return y},r.charsToAscii=function(h,x,g){let y="";if(!Array.isArray(h))throw new Error("utilities.js: charsToAscii: input must be an array of integers");let A=u(h.length,x,g);for(let S=A.beg;S<A.end;S+=1){let v=h[S];y+=v>=32&&v<=126?String.fromCharCode(v):`\\x${d.charToHex(v)}`}return y},r.charsToAsciiHtml=function(h,x,g){if(!Array.isArray(h))throw new Error("utilities.js: charsToAsciiHtml: input must be an array of integers");let y,A="",S=u(h.length,x,g);for(let v=S.beg;v<S.end;v+=1)y=h[v],A+=y<32||y===127?`<span class="${n.CLASS_CTRLCHAR}">${d.asciiChars[y]}</span>`:y>127?`<span class="${n.CLASS_CTRLCHAR}">U+${d.charToHex(y)}</span>`:d.asciiChars[y];return A},r.stringToAsciiHtml=function(h){let x=s.decode("STRING",h);return this.charsToAsciiHtml(x)}},{"../apg-conv-api/converter":4,"./emitcss":9,"./identifiers":10,"./style":14}],17:[function(e,t,r){globalThis.apgLib=e("./node-exports"),globalThis.apgConvApi=e("../apg-conv-api/node-exports")},{"../apg-conv-api/node-exports":5,"./node-exports":11}]},{},[17]);c();p();function pa(){let e={};return e.grammarObject="grammarObject",e.rules=[],e.rules[0]={name:"ALPHA",lower:"alpha",index:0,isBkr:!1},e.rules[1]={name:"BIT",lower:"bit",index:1,isBkr:!1},e.rules[2]={name:"CHAR",lower:"char",index:2,isBkr:!1},e.rules[3]={name:"CR",lower:"cr",index:3,isBkr:!1},e.rules[4]={name:"CRLF",lower:"crlf",index:4,isBkr:!1},e.rules[5]={name:"CTL",lower:"ctl",index:5,isBkr:!1},e.rules[6]={name:"DIGIT",lower:"digit",index:6,isBkr:!1},e.rules[7]={name:"DQUOTE",lower:"dquote",index:7,isBkr:!1},e.rules[8]={name:"HEXDIG",lower:"hexdig",index:8,isBkr:!1},e.rules[9]={name:"HTAB",lower:"htab",index:9,isBkr:!1},e.rules[10]={name:"LF",lower:"lf",index:10,isBkr:!1},e.rules[11]={name:"LWSP",lower:"lwsp",index:11,isBkr:!1},e.rules[12]={name:"OCTET",lower:"octet",index:12,isBkr:!1},e.rules[13]={name:"SP",lower:"sp",index:13,isBkr:!1},e.rules[14]={name:"VCHAR",lower:"vchar",index:14,isBkr:!1},e.rules[15]={name:"WSP",lower:"wsp",index:15,isBkr:!1},e.rules[16]={name:"date-fullyear",lower:"date-fullyear",index:16,isBkr:!1},e.rules[17]={name:"date-month",lower:"date-month",index:17,isBkr:!1},e.rules[18]={name:"date-mday",lower:"date-mday",index:18,isBkr:!1},e.rules[19]={name:"time-hour",lower:"time-hour",index:19,isBkr:!1},e.rules[20]={name:"time-minute",lower:"time-minute",index:20,isBkr:!1},e.rules[21]={name:"time-second",lower:"time-second",index:21,isBkr:!1},e.rules[22]={name:"time-secfrac",lower:"time-secfrac",index:22,isBkr:!1},e.rules[23]={name:"time-numoffset",lower:"time-numoffset",index:23,isBkr:!1},e.rules[24]={name:"time-offset",lower:"time-offset",index:24,isBkr:!1},e.rules[25]={name:"partial-time",lower:"partial-time",index:25,isBkr:!1},e.rules[26]={name:"full-date",lower:"full-date",index:26,isBkr:!1},e.rules[27]={name:"full-time",lower:"full-time",index:27,isBkr:!1},e.rules[28]={name:"date-time",lower:"date-time",index:28,isBkr:!1},e.rules[29]={name:"URI",lower:"uri",index:29,isBkr:!1},e.rules[30]={name:"hier-part",lower:"hier-part",index:30,isBkr:!1},e.rules[31]={name:"URI-reference",lower:"uri-reference",index:31,isBkr:!1},e.rules[32]={name:"absolute-URI",lower:"absolute-uri",index:32,isBkr:!1},e.rules[33]={name:"relative-ref",lower:"relative-ref",index:33,isBkr:!1},e.rules[34]={name:"relative-part",lower:"relative-part",index:34,isBkr:!1},e.rules[35]={name:"scheme",lower:"scheme",index:35,isBkr:!1},e.rules[36]={name:"authority",lower:"authority",index:36,isBkr:!1},e.rules[37]={name:"userinfo",lower:"userinfo",index:37,isBkr:!1},e.rules[38]={name:"host",lower:"host",index:38,isBkr:!1},e.rules[39]={name:"port",lower:"port",index:39,isBkr:!1},e.rules[40]={name:"IP-literal",lower:"ip-literal",index:40,isBkr:!1},e.rules[41]={name:"IPvFuture",lower:"ipvfuture",index:41,isBkr:!1},e.rules[42]={name:"IPv6address",lower:"ipv6address",index:42,isBkr:!1},e.rules[43]={name:"h16",lower:"h16",index:43,isBkr:!1},e.rules[44]={name:"ls32",lower:"ls32",index:44,isBkr:!1},e.rules[45]={name:"IPv4address",lower:"ipv4address",index:45,isBkr:!1},e.rules[46]={name:"dec-octet",lower:"dec-octet",index:46,isBkr:!1},e.rules[47]={name:"reg-name",lower:"reg-name",index:47,isBkr:!1},e.rules[48]={name:"path",lower:"path",index:48,isBkr:!1},e.rules[49]={name:"path-abempty",lower:"path-abempty",index:49,isBkr:!1},e.rules[50]={name:"path-absolute",lower:"path-absolute",index:50,isBkr:!1},e.rules[51]={name:"path-noscheme",lower:"path-noscheme",index:51,isBkr:!1},e.rules[52]={name:"path-rootless",lower:"path-rootless",index:52,isBkr:!1},e.rules[53]={name:"path-empty",lower:"path-empty",index:53,isBkr:!1},e.rules[54]={name:"segment",lower:"segment",index:54,isBkr:!1},e.rules[55]={name:"segment-nz",lower:"segment-nz",index:55,isBkr:!1},e.rules[56]={name:"segment-nz-nc",lower:"segment-nz-nc",index:56,isBkr:!1},e.rules[57]={name:"pchar",lower:"pchar",index:57,isBkr:!1},e.rules[58]={name:"query",lower:"query",index:58,isBkr:!1},e.rules[59]={name:"fragment",lower:"fragment",index:59,isBkr:!1},e.rules[60]={name:"pct-encoded",lower:"pct-encoded",index:60,isBkr:!1},e.rules[61]={name:"unreserved",lower:"unreserved",index:61,isBkr:!1},e.rules[62]={name:"reserved",lower:"reserved",index:62,isBkr:!1},e.rules[63]={name:"gen-delims",lower:"gen-delims",index:63,isBkr:!1},e.rules[64]={name:"sub-delims",lower:"sub-delims",index:64,isBkr:!1},e.rules[65]={name:"sign-in-with-ethereum",lower:"sign-in-with-ethereum",index:65,isBkr:!1},e.rules[66]={name:"message-domain",lower:"message-domain",index:66,isBkr:!1},e.rules[67]={name:"message-address",lower:"message-address",index:67,isBkr:!1},e.rules[68]={name:"message-statement",lower:"message-statement",index:68,isBkr:!1},e.rules[69]={name:"message-uri",lower:"message-uri",index:69,isBkr:!1},e.rules[70]={name:"message-version",lower:"message-version",index:70,isBkr:!1},e.rules[71]={name:"message-chain-id",lower:"message-chain-id",index:71,isBkr:!1},e.rules[72]={name:"message-nonce",lower:"message-nonce",index:72,isBkr:!1},e.rules[73]={name:"message-issued-at",lower:"message-issued-at",index:73,isBkr:!1},e.rules[74]={name:"message-expiration-time",lower:"message-expiration-time",index:74,isBkr:!1},e.rules[75]={name:"message-not-before",lower:"message-not-before",index:75,isBkr:!1},e.rules[76]={name:"message-request-id",lower:"message-request-id",index:76,isBkr:!1},e.rules[77]={name:"message-resources",lower:"message-resources",index:77,isBkr:!1},e.udts=[],e.rules[0].opcodes=[],e.rules[0].opcodes[0]={type:1,children:[1,2]},e.rules[0].opcodes[1]={type:5,min:65,max:90},e.rules[0].opcodes[2]={type:5,min:97,max:122},e.rules[1].opcodes=[],e.rules[1].opcodes[0]={type:1,children:[1,2]},e.rules[1].opcodes[1]={type:7,string:[48]},e.rules[1].opcodes[2]={type:7,string:[49]},e.rules[2].opcodes=[],e.rules[2].opcodes[0]={type:5,min:1,max:127},e.rules[3].opcodes=[],e.rules[3].opcodes[0]={type:6,string:[13]},e.rules[4].opcodes=[],e.rules[4].opcodes[0]={type:2,children:[1,2]},e.rules[4].opcodes[1]={type:4,index:3},e.rules[4].opcodes[2]={type:4,index:10},e.rules[5].opcodes=[],e.rules[5].opcodes[0]={type:1,children:[1,2]},e.rules[5].opcodes[1]={type:5,min:0,max:31},e.rules[5].opcodes[2]={type:6,string:[127]},e.rules[6].opcodes=[],e.rules[6].opcodes[0]={type:5,min:48,max:57},e.rules[7].opcodes=[],e.rules[7].opcodes[0]={type:6,string:[34]},e.rules[8].opcodes=[],e.rules[8].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[8].opcodes[1]={type:4,index:6},e.rules[8].opcodes[2]={type:7,string:[97]},e.rules[8].opcodes[3]={type:7,string:[98]},e.rules[8].opcodes[4]={type:7,string:[99]},e.rules[8].opcodes[5]={type:7,string:[100]},e.rules[8].opcodes[6]={type:7,string:[101]},e.rules[8].opcodes[7]={type:7,string:[102]},e.rules[9].opcodes=[],e.rules[9].opcodes[0]={type:6,string:[9]},e.rules[10].opcodes=[],e.rules[10].opcodes[0]={type:6,string:[10]},e.rules[11].opcodes=[],e.rules[11].opcodes[0]={type:3,min:0,max:1/0},e.rules[11].opcodes[1]={type:1,children:[2,3]},e.rules[11].opcodes[2]={type:4,index:15},e.rules[11].opcodes[3]={type:2,children:[4,5]},e.rules[11].opcodes[4]={type:4,index:4},e.rules[11].opcodes[5]={type:4,index:15},e.rules[12].opcodes=[],e.rules[12].opcodes[0]={type:5,min:0,max:255},e.rules[13].opcodes=[],e.rules[13].opcodes[0]={type:6,string:[32]},e.rules[14].opcodes=[],e.rules[14].opcodes[0]={type:5,min:33,max:126},e.rules[15].opcodes=[],e.rules[15].opcodes[0]={type:1,children:[1,2]},e.rules[15].opcodes[1]={type:4,index:13},e.rules[15].opcodes[2]={type:4,index:9},e.rules[16].opcodes=[],e.rules[16].opcodes[0]={type:3,min:4,max:4},e.rules[16].opcodes[1]={type:4,index:6},e.rules[17].opcodes=[],e.rules[17].opcodes[0]={type:3,min:2,max:2},e.rules[17].opcodes[1]={type:4,index:6},e.rules[18].opcodes=[],e.rules[18].opcodes[0]={type:3,min:2,max:2},e.rules[18].opcodes[1]={type:4,index:6},e.rules[19].opcodes=[],e.rules[19].opcodes[0]={type:3,min:2,max:2},e.rules[19].opcodes[1]={type:4,index:6},e.rules[20].opcodes=[],e.rules[20].opcodes[0]={type:3,min:2,max:2},e.rules[20].opcodes[1]={type:4,index:6},e.rules[21].opcodes=[],e.rules[21].opcodes[0]={type:3,min:2,max:2},e.rules[21].opcodes[1]={type:4,index:6},e.rules[22].opcodes=[],e.rules[22].opcodes[0]={type:2,children:[1,2]},e.rules[22].opcodes[1]={type:7,string:[46]},e.rules[22].opcodes[2]={type:3,min:1,max:1/0},e.rules[22].opcodes[3]={type:4,index:6},e.rules[23].opcodes=[],e.rules[23].opcodes[0]={type:2,children:[1,4,5,6]},e.rules[23].opcodes[1]={type:1,children:[2,3]},e.rules[23].opcodes[2]={type:7,string:[43]},e.rules[23].opcodes[3]={type:7,string:[45]},e.rules[23].opcodes[4]={type:4,index:19},e.rules[23].opcodes[5]={type:7,string:[58]},e.rules[23].opcodes[6]={type:4,index:20},e.rules[24].opcodes=[],e.rules[24].opcodes[0]={type:1,children:[1,2]},e.rules[24].opcodes[1]={type:7,string:[122]},e.rules[24].opcodes[2]={type:4,index:23},e.rules[25].opcodes=[],e.rules[25].opcodes[0]={type:2,children:[1,2,3,4,5,6]},e.rules[25].opcodes[1]={type:4,index:19},e.rules[25].opcodes[2]={type:7,string:[58]},e.rules[25].opcodes[3]={type:4,index:20},e.rules[25].opcodes[4]={type:7,string:[58]},e.rules[25].opcodes[5]={type:4,index:21},e.rules[25].opcodes[6]={type:3,min:0,max:1},e.rules[25].opcodes[7]={type:4,index:22},e.rules[26].opcodes=[],e.rules[26].opcodes[0]={type:2,children:[1,2,3,4,5]},e.rules[26].opcodes[1]={type:4,index:16},e.rules[26].opcodes[2]={type:7,string:[45]},e.rules[26].opcodes[3]={type:4,index:17},e.rules[26].opcodes[4]={type:7,string:[45]},e.rules[26].opcodes[5]={type:4,index:18},e.rules[27].opcodes=[],e.rules[27].opcodes[0]={type:2,children:[1,2]},e.rules[27].opcodes[1]={type:4,index:25},e.rules[27].opcodes[2]={type:4,index:24},e.rules[28].opcodes=[],e.rules[28].opcodes[0]={type:2,children:[1,2,3]},e.rules[28].opcodes[1]={type:4,index:26},e.rules[28].opcodes[2]={type:7,string:[116]},e.rules[28].opcodes[3]={type:4,index:27},e.rules[29].opcodes=[],e.rules[29].opcodes[0]={type:2,children:[1,2,3,4,8]},e.rules[29].opcodes[1]={type:4,index:35},e.rules[29].opcodes[2]={type:7,string:[58]},e.rules[29].opcodes[3]={type:4,index:30},e.rules[29].opcodes[4]={type:3,min:0,max:1},e.rules[29].opcodes[5]={type:2,children:[6,7]},e.rules[29].opcodes[6]={type:7,string:[63]},e.rules[29].opcodes[7]={type:4,index:58},e.rules[29].opcodes[8]={type:3,min:0,max:1},e.rules[29].opcodes[9]={type:2,children:[10,11]},e.rules[29].opcodes[10]={type:7,string:[35]},e.rules[29].opcodes[11]={type:4,index:59},e.rules[30].opcodes=[],e.rules[30].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[30].opcodes[1]={type:2,children:[2,3,4]},e.rules[30].opcodes[2]={type:7,string:[47,47]},e.rules[30].opcodes[3]={type:4,index:36},e.rules[30].opcodes[4]={type:4,index:49},e.rules[30].opcodes[5]={type:4,index:50},e.rules[30].opcodes[6]={type:4,index:52},e.rules[30].opcodes[7]={type:4,index:53},e.rules[31].opcodes=[],e.rules[31].opcodes[0]={type:1,children:[1,2]},e.rules[31].opcodes[1]={type:4,index:29},e.rules[31].opcodes[2]={type:4,index:33},e.rules[32].opcodes=[],e.rules[32].opcodes[0]={type:2,children:[1,2,3,4]},e.rules[32].opcodes[1]={type:4,index:35},e.rules[32].opcodes[2]={type:7,string:[58]},e.rules[32].opcodes[3]={type:4,index:30},e.rules[32].opcodes[4]={type:3,min:0,max:1},e.rules[32].opcodes[5]={type:2,children:[6,7]},e.rules[32].opcodes[6]={type:7,string:[63]},e.rules[32].opcodes[7]={type:4,index:58},e.rules[33].opcodes=[],e.rules[33].opcodes[0]={type:2,children:[1,2,6]},e.rules[33].opcodes[1]={type:4,index:34},e.rules[33].opcodes[2]={type:3,min:0,max:1},e.rules[33].opcodes[3]={type:2,children:[4,5]},e.rules[33].opcodes[4]={type:7,string:[63]},e.rules[33].opcodes[5]={type:4,index:58},e.rules[33].opcodes[6]={type:3,min:0,max:1},e.rules[33].opcodes[7]={type:2,children:[8,9]},e.rules[33].opcodes[8]={type:7,string:[35]},e.rules[33].opcodes[9]={type:4,index:59},e.rules[34].opcodes=[],e.rules[34].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[34].opcodes[1]={type:2,children:[2,3,4]},e.rules[34].opcodes[2]={type:7,string:[47,47]},e.rules[34].opcodes[3]={type:4,index:36},e.rules[34].opcodes[4]={type:4,index:49},e.rules[34].opcodes[5]={type:4,index:50},e.rules[34].opcodes[6]={type:4,index:51},e.rules[34].opcodes[7]={type:4,index:53},e.rules[35].opcodes=[],e.rules[35].opcodes[0]={type:2,children:[1,2]},e.rules[35].opcodes[1]={type:4,index:0},e.rules[35].opcodes[2]={type:3,min:0,max:1/0},e.rules[35].opcodes[3]={type:1,children:[4,5,6,7,8]},e.rules[35].opcodes[4]={type:4,index:0},e.rules[35].opcodes[5]={type:4,index:6},e.rules[35].opcodes[6]={type:7,string:[43]},e.rules[35].opcodes[7]={type:7,string:[45]},e.rules[35].opcodes[8]={type:7,string:[46]},e.rules[36].opcodes=[],e.rules[36].opcodes[0]={type:2,children:[1,5,6]},e.rules[36].opcodes[1]={type:3,min:0,max:1},e.rules[36].opcodes[2]={type:2,children:[3,4]},e.rules[36].opcodes[3]={type:4,index:37},e.rules[36].opcodes[4]={type:7,string:[64]},e.rules[36].opcodes[5]={type:4,index:38},e.rules[36].opcodes[6]={type:3,min:0,max:1},e.rules[36].opcodes[7]={type:2,children:[8,9]},e.rules[36].opcodes[8]={type:7,string:[58]},e.rules[36].opcodes[9]={type:4,index:39},e.rules[37].opcodes=[],e.rules[37].opcodes[0]={type:3,min:0,max:1/0},e.rules[37].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[37].opcodes[2]={type:4,index:61},e.rules[37].opcodes[3]={type:4,index:60},e.rules[37].opcodes[4]={type:4,index:64},e.rules[37].opcodes[5]={type:7,string:[58]},e.rules[38].opcodes=[],e.rules[38].opcodes[0]={type:1,children:[1,2,3]},e.rules[38].opcodes[1]={type:4,index:40},e.rules[38].opcodes[2]={type:4,index:45},e.rules[38].opcodes[3]={type:4,index:47},e.rules[39].opcodes=[],e.rules[39].opcodes[0]={type:3,min:0,max:1/0},e.rules[39].opcodes[1]={type:4,index:6},e.rules[40].opcodes=[],e.rules[40].opcodes[0]={type:2,children:[1,2,5]},e.rules[40].opcodes[1]={type:7,string:[91]},e.rules[40].opcodes[2]={type:1,children:[3,4]},e.rules[40].opcodes[3]={type:4,index:42},e.rules[40].opcodes[4]={type:4,index:41},e.rules[40].opcodes[5]={type:7,string:[93]},e.rules[41].opcodes=[],e.rules[41].opcodes[0]={type:2,children:[1,2,4,5]},e.rules[41].opcodes[1]={type:7,string:[118]},e.rules[41].opcodes[2]={type:3,min:1,max:1/0},e.rules[41].opcodes[3]={type:4,index:8},e.rules[41].opcodes[4]={type:7,string:[46]},e.rules[41].opcodes[5]={type:3,min:1,max:1/0},e.rules[41].opcodes[6]={type:1,children:[7,8,9]},e.rules[41].opcodes[7]={type:4,index:61},e.rules[41].opcodes[8]={type:4,index:64},e.rules[41].opcodes[9]={type:7,string:[58]},e.rules[42].opcodes=[],e.rules[42].opcodes[0]={type:1,children:[1,7,14,23,37,51,63,73,83]},e.rules[42].opcodes[1]={type:2,children:[2,6]},e.rules[42].opcodes[2]={type:3,min:6,max:6},e.rules[42].opcodes[3]={type:2,children:[4,5]},e.rules[42].opcodes[4]={type:4,index:43},e.rules[42].opcodes[5]={type:7,string:[58]},e.rules[42].opcodes[6]={type:4,index:44},e.rules[42].opcodes[7]={type:2,children:[8,9,13]},e.rules[42].opcodes[8]={type:7,string:[58,58]},e.rules[42].opcodes[9]={type:3,min:5,max:5},e.rules[42].opcodes[10]={type:2,children:[11,12]},e.rules[42].opcodes[11]={type:4,index:43},e.rules[42].opcodes[12]={type:7,string:[58]},e.rules[42].opcodes[13]={type:4,index:44},e.rules[42].opcodes[14]={type:2,children:[15,17,18,22]},e.rules[42].opcodes[15]={type:3,min:0,max:1},e.rules[42].opcodes[16]={type:4,index:43},e.rules[42].opcodes[17]={type:7,string:[58,58]},e.rules[42].opcodes[18]={type:3,min:4,max:4},e.rules[42].opcodes[19]={type:2,children:[20,21]},e.rules[42].opcodes[20]={type:4,index:43},e.rules[42].opcodes[21]={type:7,string:[58]},e.rules[42].opcodes[22]={type:4,index:44},e.rules[42].opcodes[23]={type:2,children:[24,31,32,36]},e.rules[42].opcodes[24]={type:3,min:0,max:1},e.rules[42].opcodes[25]={type:2,children:[26,30]},e.rules[42].opcodes[26]={type:3,min:0,max:1},e.rules[42].opcodes[27]={type:2,children:[28,29]},e.rules[42].opcodes[28]={type:4,index:43},e.rules[42].opcodes[29]={type:7,string:[58]},e.rules[42].opcodes[30]={type:4,index:43},e.rules[42].opcodes[31]={type:7,string:[58,58]},e.rules[42].opcodes[32]={type:3,min:3,max:3},e.rules[42].opcodes[33]={type:2,children:[34,35]},e.rules[42].opcodes[34]={type:4,index:43},e.rules[42].opcodes[35]={type:7,string:[58]},e.rules[42].opcodes[36]={type:4,index:44},e.rules[42].opcodes[37]={type:2,children:[38,45,46,50]},e.rules[42].opcodes[38]={type:3,min:0,max:1},e.rules[42].opcodes[39]={type:2,children:[40,44]},e.rules[42].opcodes[40]={type:3,min:0,max:2},e.rules[42].opcodes[41]={type:2,children:[42,43]},e.rules[42].opcodes[42]={type:4,index:43},e.rules[42].opcodes[43]={type:7,string:[58]},e.rules[42].opcodes[44]={type:4,index:43},e.rules[42].opcodes[45]={type:7,string:[58,58]},e.rules[42].opcodes[46]={type:3,min:2,max:2},e.rules[42].opcodes[47]={type:2,children:[48,49]},e.rules[42].opcodes[48]={type:4,index:43},e.rules[42].opcodes[49]={type:7,string:[58]},e.rules[42].opcodes[50]={type:4,index:44},e.rules[42].opcodes[51]={type:2,children:[52,59,60,61,62]},e.rules[42].opcodes[52]={type:3,min:0,max:1},e.rules[42].opcodes[53]={type:2,children:[54,58]},e.rules[42].opcodes[54]={type:3,min:0,max:3},e.rules[42].opcodes[55]={type:2,children:[56,57]},e.rules[42].opcodes[56]={type:4,index:43},e.rules[42].opcodes[57]={type:7,string:[58]},e.rules[42].opcodes[58]={type:4,index:43},e.rules[42].opcodes[59]={type:7,string:[58,58]},e.rules[42].opcodes[60]={type:4,index:43},e.rules[42].opcodes[61]={type:7,string:[58]},e.rules[42].opcodes[62]={type:4,index:44},e.rules[42].opcodes[63]={type:2,children:[64,71,72]},e.rules[42].opcodes[64]={type:3,min:0,max:1},e.rules[42].opcodes[65]={type:2,children:[66,70]},e.rules[42].opcodes[66]={type:3,min:0,max:4},e.rules[42].opcodes[67]={type:2,children:[68,69]},e.rules[42].opcodes[68]={type:4,index:43},e.rules[42].opcodes[69]={type:7,string:[58]},e.rules[42].opcodes[70]={type:4,index:43},e.rules[42].opcodes[71]={type:7,string:[58,58]},e.rules[42].opcodes[72]={type:4,index:44},e.rules[42].opcodes[73]={type:2,children:[74,81,82]},e.rules[42].opcodes[74]={type:3,min:0,max:1},e.rules[42].opcodes[75]={type:2,children:[76,80]},e.rules[42].opcodes[76]={type:3,min:0,max:5},e.rules[42].opcodes[77]={type:2,children:[78,79]},e.rules[42].opcodes[78]={type:4,index:43},e.rules[42].opcodes[79]={type:7,string:[58]},e.rules[42].opcodes[80]={type:4,index:43},e.rules[42].opcodes[81]={type:7,string:[58,58]},e.rules[42].opcodes[82]={type:4,index:43},e.rules[42].opcodes[83]={type:2,children:[84,91]},e.rules[42].opcodes[84]={type:3,min:0,max:1},e.rules[42].opcodes[85]={type:2,children:[86,90]},e.rules[42].opcodes[86]={type:3,min:0,max:6},e.rules[42].opcodes[87]={type:2,children:[88,89]},e.rules[42].opcodes[88]={type:4,index:43},e.rules[42].opcodes[89]={type:7,string:[58]},e.rules[42].opcodes[90]={type:4,index:43},e.rules[42].opcodes[91]={type:7,string:[58,58]},e.rules[43].opcodes=[],e.rules[43].opcodes[0]={type:3,min:1,max:4},e.rules[43].opcodes[1]={type:4,index:8},e.rules[44].opcodes=[],e.rules[44].opcodes[0]={type:1,children:[1,5]},e.rules[44].opcodes[1]={type:2,children:[2,3,4]},e.rules[44].opcodes[2]={type:4,index:43},e.rules[44].opcodes[3]={type:7,string:[58]},e.rules[44].opcodes[4]={type:4,index:43},e.rules[44].opcodes[5]={type:4,index:45},e.rules[45].opcodes=[],e.rules[45].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},e.rules[45].opcodes[1]={type:4,index:46},e.rules[45].opcodes[2]={type:7,string:[46]},e.rules[45].opcodes[3]={type:4,index:46},e.rules[45].opcodes[4]={type:7,string:[46]},e.rules[45].opcodes[5]={type:4,index:46},e.rules[45].opcodes[6]={type:7,string:[46]},e.rules[45].opcodes[7]={type:4,index:46},e.rules[46].opcodes=[],e.rules[46].opcodes[0]={type:1,children:[1,2,5,9,13]},e.rules[46].opcodes[1]={type:4,index:6},e.rules[46].opcodes[2]={type:2,children:[3,4]},e.rules[46].opcodes[3]={type:5,min:49,max:57},e.rules[46].opcodes[4]={type:4,index:6},e.rules[46].opcodes[5]={type:2,children:[6,7]},e.rules[46].opcodes[6]={type:7,string:[49]},e.rules[46].opcodes[7]={type:3,min:2,max:2},e.rules[46].opcodes[8]={type:4,index:6},e.rules[46].opcodes[9]={type:2,children:[10,11,12]},e.rules[46].opcodes[10]={type:7,string:[50]},e.rules[46].opcodes[11]={type:5,min:48,max:52},e.rules[46].opcodes[12]={type:4,index:6},e.rules[46].opcodes[13]={type:2,children:[14,15]},e.rules[46].opcodes[14]={type:7,string:[50,53]},e.rules[46].opcodes[15]={type:5,min:48,max:53},e.rules[47].opcodes=[],e.rules[47].opcodes[0]={type:3,min:0,max:1/0},e.rules[47].opcodes[1]={type:1,children:[2,3,4]},e.rules[47].opcodes[2]={type:4,index:61},e.rules[47].opcodes[3]={type:4,index:60},e.rules[47].opcodes[4]={type:4,index:64},e.rules[48].opcodes=[],e.rules[48].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[48].opcodes[1]={type:4,index:49},e.rules[48].opcodes[2]={type:4,index:50},e.rules[48].opcodes[3]={type:4,index:51},e.rules[48].opcodes[4]={type:4,index:52},e.rules[48].opcodes[5]={type:4,index:53},e.rules[49].opcodes=[],e.rules[49].opcodes[0]={type:3,min:0,max:1/0},e.rules[49].opcodes[1]={type:2,children:[2,3]},e.rules[49].opcodes[2]={type:7,string:[47]},e.rules[49].opcodes[3]={type:4,index:54},e.rules[50].opcodes=[],e.rules[50].opcodes[0]={type:2,children:[1,2]},e.rules[50].opcodes[1]={type:7,string:[47]},e.rules[50].opcodes[2]={type:3,min:0,max:1},e.rules[50].opcodes[3]={type:2,children:[4,5]},e.rules[50].opcodes[4]={type:4,index:55},e.rules[50].opcodes[5]={type:3,min:0,max:1/0},e.rules[50].opcodes[6]={type:2,children:[7,8]},e.rules[50].opcodes[7]={type:7,string:[47]},e.rules[50].opcodes[8]={type:4,index:54},e.rules[51].opcodes=[],e.rules[51].opcodes[0]={type:2,children:[1,2]},e.rules[51].opcodes[1]={type:4,index:56},e.rules[51].opcodes[2]={type:3,min:0,max:1/0},e.rules[51].opcodes[3]={type:2,children:[4,5]},e.rules[51].opcodes[4]={type:7,string:[47]},e.rules[51].opcodes[5]={type:4,index:54},e.rules[52].opcodes=[],e.rules[52].opcodes[0]={type:2,children:[1,2]},e.rules[52].opcodes[1]={type:4,index:55},e.rules[52].opcodes[2]={type:3,min:0,max:1/0},e.rules[52].opcodes[3]={type:2,children:[4,5]},e.rules[52].opcodes[4]={type:7,string:[47]},e.rules[52].opcodes[5]={type:4,index:54},e.rules[53].opcodes=[],e.rules[53].opcodes[0]={type:3,min:0,max:0},e.rules[53].opcodes[1]={type:4,index:57},e.rules[54].opcodes=[],e.rules[54].opcodes[0]={type:3,min:0,max:1/0},e.rules[54].opcodes[1]={type:4,index:57},e.rules[55].opcodes=[],e.rules[55].opcodes[0]={type:3,min:1,max:1/0},e.rules[55].opcodes[1]={type:4,index:57},e.rules[56].opcodes=[],e.rules[56].opcodes[0]={type:3,min:1,max:1/0},e.rules[56].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[56].opcodes[2]={type:4,index:61},e.rules[56].opcodes[3]={type:4,index:60},e.rules[56].opcodes[4]={type:4,index:64},e.rules[56].opcodes[5]={type:7,string:[64]},e.rules[57].opcodes=[],e.rules[57].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[57].opcodes[1]={type:4,index:61},e.rules[57].opcodes[2]={type:4,index:60},e.rules[57].opcodes[3]={type:4,index:64},e.rules[57].opcodes[4]={type:7,string:[58]},e.rules[57].opcodes[5]={type:7,string:[64]},e.rules[58].opcodes=[],e.rules[58].opcodes[0]={type:3,min:0,max:1/0},e.rules[58].opcodes[1]={type:1,children:[2,3,4]},e.rules[58].opcodes[2]={type:4,index:57},e.rules[58].opcodes[3]={type:7,string:[47]},e.rules[58].opcodes[4]={type:7,string:[63]},e.rules[59].opcodes=[],e.rules[59].opcodes[0]={type:3,min:0,max:1/0},e.rules[59].opcodes[1]={type:1,children:[2,3,4]},e.rules[59].opcodes[2]={type:4,index:57},e.rules[59].opcodes[3]={type:7,string:[47]},e.rules[59].opcodes[4]={type:7,string:[63]},e.rules[60].opcodes=[],e.rules[60].opcodes[0]={type:2,children:[1,2,3]},e.rules[60].opcodes[1]={type:7,string:[37]},e.rules[60].opcodes[2]={type:4,index:8},e.rules[60].opcodes[3]={type:4,index:8},e.rules[61].opcodes=[],e.rules[61].opcodes[0]={type:1,children:[1,2,3,4,5,6]},e.rules[61].opcodes[1]={type:4,index:0},e.rules[61].opcodes[2]={type:4,index:6},e.rules[61].opcodes[3]={type:7,string:[45]},e.rules[61].opcodes[4]={type:7,string:[46]},e.rules[61].opcodes[5]={type:7,string:[95]},e.rules[61].opcodes[6]={type:7,string:[126]},e.rules[62].opcodes=[],e.rules[62].opcodes[0]={type:1,children:[1,2]},e.rules[62].opcodes[1]={type:4,index:63},e.rules[62].opcodes[2]={type:4,index:64},e.rules[63].opcodes=[],e.rules[63].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[63].opcodes[1]={type:7,string:[58]},e.rules[63].opcodes[2]={type:7,string:[47]},e.rules[63].opcodes[3]={type:7,string:[63]},e.rules[63].opcodes[4]={type:7,string:[35]},e.rules[63].opcodes[5]={type:7,string:[91]},e.rules[63].opcodes[6]={type:7,string:[93]},e.rules[63].opcodes[7]={type:7,string:[64]},e.rules[64].opcodes=[],e.rules[64].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},e.rules[64].opcodes[1]={type:7,string:[33]},e.rules[64].opcodes[2]={type:7,string:[36]},e.rules[64].opcodes[3]={type:7,string:[38]},e.rules[64].opcodes[4]={type:7,string:[39]},e.rules[64].opcodes[5]={type:7,string:[40]},e.rules[64].opcodes[6]={type:7,string:[41]},e.rules[64].opcodes[7]={type:7,string:[42]},e.rules[64].opcodes[8]={type:7,string:[43]},e.rules[64].opcodes[9]={type:7,string:[44]},e.rules[64].opcodes[10]={type:7,string:[59]},e.rules[64].opcodes[11]={type:7,string:[61]},e.rules[65].opcodes=[],e.rules[65].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,36,41]},e.rules[65].opcodes[1]={type:4,index:66},e.rules[65].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,69,116,104,101,114,101,117,109,32,97,99,99,111,117,110,116,58]},e.rules[65].opcodes[3]={type:4,index:10},e.rules[65].opcodes[4]={type:4,index:67},e.rules[65].opcodes[5]={type:4,index:10},e.rules[65].opcodes[6]={type:4,index:10},e.rules[65].opcodes[7]={type:3,min:0,max:1},e.rules[65].opcodes[8]={type:2,children:[9,10]},e.rules[65].opcodes[9]={type:4,index:68},e.rules[65].opcodes[10]={type:4,index:10},e.rules[65].opcodes[11]={type:4,index:10},e.rules[65].opcodes[12]={type:6,string:[85,82,73,58,32]},e.rules[65].opcodes[13]={type:4,index:69},e.rules[65].opcodes[14]={type:4,index:10},e.rules[65].opcodes[15]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[65].opcodes[16]={type:4,index:70},e.rules[65].opcodes[17]={type:4,index:10},e.rules[65].opcodes[18]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[65].opcodes[19]={type:4,index:71},e.rules[65].opcodes[20]={type:4,index:10},e.rules[65].opcodes[21]={type:6,string:[78,111,110,99,101,58,32]},e.rules[65].opcodes[22]={type:4,index:72},e.rules[65].opcodes[23]={type:4,index:10},e.rules[65].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[65].opcodes[25]={type:4,index:73},e.rules[65].opcodes[26]={type:3,min:0,max:1},e.rules[65].opcodes[27]={type:2,children:[28,29,30]},e.rules[65].opcodes[28]={type:4,index:10},e.rules[65].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[65].opcodes[30]={type:4,index:74},e.rules[65].opcodes[31]={type:3,min:0,max:1},e.rules[65].opcodes[32]={type:2,children:[33,34,35]},e.rules[65].opcodes[33]={type:4,index:10},e.rules[65].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[65].opcodes[35]={type:4,index:75},e.rules[65].opcodes[36]={type:3,min:0,max:1},e.rules[65].opcodes[37]={type:2,children:[38,39,40]},e.rules[65].opcodes[38]={type:4,index:10},e.rules[65].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[65].opcodes[40]={type:4,index:76},e.rules[65].opcodes[41]={type:3,min:0,max:1},e.rules[65].opcodes[42]={type:2,children:[43,44,45]},e.rules[65].opcodes[43]={type:4,index:10},e.rules[65].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[65].opcodes[45]={type:4,index:77},e.rules[66].opcodes=[],e.rules[66].opcodes[0]={type:4,index:36},e.rules[67].opcodes=[],e.rules[67].opcodes[0]={type:2,children:[1,2]},e.rules[67].opcodes[1]={type:7,string:[48,120]},e.rules[67].opcodes[2]={type:3,min:40,max:40},e.rules[67].opcodes[3]={type:4,index:8},e.rules[68].opcodes=[],e.rules[68].opcodes[0]={type:3,min:1,max:1/0},e.rules[68].opcodes[1]={type:1,children:[2,3,4]},e.rules[68].opcodes[2]={type:4,index:62},e.rules[68].opcodes[3]={type:4,index:61},e.rules[68].opcodes[4]={type:7,string:[32]},e.rules[69].opcodes=[],e.rules[69].opcodes[0]={type:4,index:29},e.rules[70].opcodes=[],e.rules[70].opcodes[0]={type:7,string:[49]},e.rules[71].opcodes=[],e.rules[71].opcodes[0]={type:3,min:1,max:1/0},e.rules[71].opcodes[1]={type:4,index:6},e.rules[72].opcodes=[],e.rules[72].opcodes[0]={type:3,min:8,max:1/0},e.rules[72].opcodes[1]={type:1,children:[2,3]},e.rules[72].opcodes[2]={type:4,index:0},e.rules[72].opcodes[3]={type:4,index:6},e.rules[73].opcodes=[],e.rules[73].opcodes[0]={type:4,index:28},e.rules[74].opcodes=[],e.rules[74].opcodes[0]={type:4,index:28},e.rules[75].opcodes=[],e.rules[75].opcodes[0]={type:4,index:28},e.rules[76].opcodes=[],e.rules[76].opcodes[0]={type:3,min:0,max:1/0},e.rules[76].opcodes[1]={type:4,index:57},e.rules[77].opcodes=[],e.rules[77].opcodes[0]={type:3,min:0,max:1/0},e.rules[77].opcodes[1]={type:2,children:[2,3,4]},e.rules[77].opcodes[2]={type:4,index:10},e.rules[77].opcodes[3]={type:7,string:[45,32]},e.rules[77].opcodes[4]={type:4,index:29},e.toString=function(){let r="";return r+=`; ==============================================================================
`,r+=`; Core rules for ABNF (RFC 5234)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc5234#appendix-B.1
`,r+=`
`,r+=`ALPHA          =  %x41-5A / %x61-7A
`,r+=`               ; A-Z / a-z
`,r+=`
`,r+=`BIT            =  "0" / "1"
`,r+=`
`,r+=`CHAR           =  %x01-7F
`,r+=`               ; any 7-bit US-ASCII character,
`,r+=`               ;  excluding NUL
`,r+=`
`,r+=`CR             =  %x0D
`,r+=`               ; carriage return
`,r+=`
`,r+=`CRLF           =  CR LF
`,r+=`               ; Internet standard newline
`,r+=`
`,r+=`CTL            =  %x00-1F / %x7F
`,r+=`               ; controls
`,r+=`
`,r+=`DIGIT          =  %x30-39
`,r+=`               ; 0-9
`,r+=`
`,r+=`DQUOTE         =  %x22
`,r+=`               ; " (Double Quote)
`,r+=`
`,r+=`HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,r+=`
`,r+=`HTAB           =  %x09
`,r+=`               ; horizontal tab
`,r+=`
`,r+=`LF             =  %x0A
`,r+=`               ; linefeed
`,r+=`
`,r+=`LWSP           =  *(WSP / CRLF WSP)
`,r+=`               ; Use of this linear-white-space rule
`,r+=`               ;  permits lines containing only white
`,r+=`               ;  space that are no longer legal in
`,r+=`               ;  mail headers and have caused
`,r+=`               ;  interoperability problems in other
`,r+=`               ;  contexts.
`,r+=`               ; Do not use when defining mail
`,r+=`               ;  headers and use with caution in
`,r+=`               ;  other contexts.
`,r+=`
`,r+=`OCTET          =  %x00-FF
`,r+=`               ; 8 bits of data
`,r+=`
`,r+=`SP             =  %x20
`,r+=`
`,r+=`VCHAR          =  %x21-7E
`,r+=`               ; visible (printing) characters
`,r+=`
`,r+=`WSP            =  SP / HTAB
`,r+=`               ; white space
`,r+=`; ==============================================================================
`,r+=`; Internet Date/Time Format (RFC 3339)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3339#section-5.6
`,r+=`
`,r+=`date-fullyear   = 4DIGIT
`,r+=`
`,r+=`date-month      = 2DIGIT  ; 01-12
`,r+=`
`,r+=`date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
`,r+=`                          ; month/year
`,r+=`
`,r+=`time-hour       = 2DIGIT  ; 00-23
`,r+=`
`,r+=`time-minute     = 2DIGIT  ; 00-59
`,r+=`
`,r+=`time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
`,r+=`                          ; rules
`,r+=`
`,r+=`time-secfrac    = "." 1*DIGIT
`,r+=`
`,r+=`time-numoffset  = ("+" / "-") time-hour ":" time-minute
`,r+=`
`,r+=`time-offset     = "Z" / time-numoffset
`,r+=`
`,r+=`partial-time    = time-hour ":" time-minute ":" time-second
`,r+=`                  [time-secfrac]
`,r+=`
`,r+=`full-date       = date-fullyear "-" date-month "-" date-mday
`,r+=`
`,r+=`full-time       = partial-time time-offset
`,r+=`
`,r+=`date-time       = full-date "T" full-time
`,r+=`; ==============================================================================
`,r+=`; Uniform Resource Identifier (RFC 3986)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3986#appendix-A
`,r+=`
`,r+=`URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`hier-part     = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-rootless
`,r+=`              / path-empty
`,r+=`
`,r+=`URI-reference = URI / relative-ref
`,r+=`
`,r+=`absolute-URI  = scheme ":" hier-part [ "?" query ]
`,r+=`
`,r+=`relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`relative-part = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-noscheme
`,r+=`              / path-empty
`,r+=`
`,r+=`scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
`,r+=`
`,r+=`authority     = [ userinfo "@" ] host [ ":" port ]
`,r+=`userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
`,r+=`host          = IP-literal / IPv4address / reg-name
`,r+=`port          = *DIGIT
`,r+=`
`,r+=`IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
`,r+=`
`,r+=`IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )
`,r+=`
`,r+=`IPv6address   =                            6( h16 ":" ) ls32
`,r+=`              /                       "::" 5( h16 ":" ) ls32
`,r+=`              / [               h16 ] "::" 4( h16 ":" ) ls32
`,r+=`              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
`,r+=`              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
`,r+=`              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
`,r+=`              / [ *4( h16 ":" ) h16 ] "::"              ls32
`,r+=`              / [ *5( h16 ":" ) h16 ] "::"              h16
`,r+=`              / [ *6( h16 ":" ) h16 ] "::"
`,r+=`
`,r+=`h16           = 1*4HEXDIG
`,r+=`ls32          = ( h16 ":" h16 ) / IPv4address
`,r+=`IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
`,r+=`dec-octet     = DIGIT                 ; 0-9
`,r+=`              / %x31-39 DIGIT         ; 10-99
`,r+=`              / "1" 2DIGIT            ; 100-199
`,r+=`              / "2" %x30-34 DIGIT     ; 200-249
`,r+=`              / "25" %x30-35          ; 250-255
`,r+=`
`,r+=`reg-name      = *( unreserved / pct-encoded / sub-delims )
`,r+=`
`,r+=`path          = path-abempty    ; begins with "/" or is empty
`,r+=`              / path-absolute   ; begins with "/" but not "//"
`,r+=`              / path-noscheme   ; begins with a non-colon segment
`,r+=`              / path-rootless   ; begins with a segment
`,r+=`              / path-empty      ; zero characters
`,r+=`
`,r+=`path-abempty  = *( "/" segment )
`,r+=`path-absolute = "/" [ segment-nz *( "/" segment ) ]
`,r+=`path-noscheme = segment-nz-nc *( "/" segment )
`,r+=`path-rootless = segment-nz *( "/" segment )
`,r+=`path-empty    = 0pchar
`,r+=`
`,r+=`segment       = *pchar
`,r+=`segment-nz    = 1*pchar
`,r+=`segment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / "@" )
`,r+=`; non-zero-length segment without any colon ":"
`,r+=`
`,r+=`pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
`,r+=`
`,r+=`query         = *( pchar / "/" / "?" )
`,r+=`
`,r+=`fragment      = *( pchar / "/" / "?" )
`,r+=`
`,r+=`pct-encoded   = "%" HEXDIG HEXDIG
`,r+=`
`,r+=`unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
`,r+=`reserved      = gen-delims / sub-delims
`,r+=`gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
`,r+=`sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
`,r+=`              / "*" / "+" / "," / ";" / "="
`,r+=`; ==============================================================================
`,r+=`; Sign in with Ethereum (EIP-4361)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`; - datetime.bnf
`,r+=`; - uri.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://eips.ethereum.org/EIPS/eip-4361
`,r+=`
`,r+=`sign-in-with-ethereum =
`,r+=`  message-domain %s" wants you to sign in with your Ethereum account:" LF
`,r+=`  message-address LF
`,r+=`  LF
`,r+=`  [ message-statement LF ]
`,r+=`  LF
`,r+=`  %s"URI: " message-uri LF
`,r+=`  %s"Version: " message-version LF
`,r+=`  %s"Chain ID: " message-chain-id LF
`,r+=`  %s"Nonce: " message-nonce LF
`,r+=`  %s"Issued At: " message-issued-at
`,r+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,r+=`  [ LF %s"Not Before: " message-not-before ]
`,r+=`  [ LF %s"Request ID: " message-request-id ]
`,r+=`  [ LF %s"Resources:" message-resources ]
`,r+=`
`,r+=`message-domain          = authority
`,r+=`message-address         = "0x" 40*40HEXDIG
`,r+=`message-statement       = 1*( reserved / unreserved / " " )
`,r+=`message-uri             = URI
`,r+=`message-version         = "1"
`,r+=`message-chain-id        = 1*DIGIT
`,r+=`message-nonce           = 8*( ALPHA / DIGIT )
`,r+=`message-issued-at       = date-time
`,r+=`message-expiration-time = date-time
`,r+=`message-not-before      = date-time
`,r+=`message-request-id      = *pchar
`,r+=`message-resources       = *( LF "- " URI )
`,r},e}c();p();function da(){let e={};return e.grammarObject="grammarObject",e.rules=[],e.rules[0]={name:"ALPHA",lower:"alpha",index:0,isBkr:!1},e.rules[1]={name:"BIT",lower:"bit",index:1,isBkr:!1},e.rules[2]={name:"CHAR",lower:"char",index:2,isBkr:!1},e.rules[3]={name:"CR",lower:"cr",index:3,isBkr:!1},e.rules[4]={name:"CRLF",lower:"crlf",index:4,isBkr:!1},e.rules[5]={name:"CTL",lower:"ctl",index:5,isBkr:!1},e.rules[6]={name:"DIGIT",lower:"digit",index:6,isBkr:!1},e.rules[7]={name:"DQUOTE",lower:"dquote",index:7,isBkr:!1},e.rules[8]={name:"HEXDIG",lower:"hexdig",index:8,isBkr:!1},e.rules[9]={name:"HTAB",lower:"htab",index:9,isBkr:!1},e.rules[10]={name:"LF",lower:"lf",index:10,isBkr:!1},e.rules[11]={name:"LWSP",lower:"lwsp",index:11,isBkr:!1},e.rules[12]={name:"OCTET",lower:"octet",index:12,isBkr:!1},e.rules[13]={name:"SP",lower:"sp",index:13,isBkr:!1},e.rules[14]={name:"VCHAR",lower:"vchar",index:14,isBkr:!1},e.rules[15]={name:"WSP",lower:"wsp",index:15,isBkr:!1},e.rules[16]={name:"date-fullyear",lower:"date-fullyear",index:16,isBkr:!1},e.rules[17]={name:"date-month",lower:"date-month",index:17,isBkr:!1},e.rules[18]={name:"date-mday",lower:"date-mday",index:18,isBkr:!1},e.rules[19]={name:"time-hour",lower:"time-hour",index:19,isBkr:!1},e.rules[20]={name:"time-minute",lower:"time-minute",index:20,isBkr:!1},e.rules[21]={name:"time-second",lower:"time-second",index:21,isBkr:!1},e.rules[22]={name:"time-secfrac",lower:"time-secfrac",index:22,isBkr:!1},e.rules[23]={name:"time-numoffset",lower:"time-numoffset",index:23,isBkr:!1},e.rules[24]={name:"time-offset",lower:"time-offset",index:24,isBkr:!1},e.rules[25]={name:"partial-time",lower:"partial-time",index:25,isBkr:!1},e.rules[26]={name:"full-date",lower:"full-date",index:26,isBkr:!1},e.rules[27]={name:"full-time",lower:"full-time",index:27,isBkr:!1},e.rules[28]={name:"date-time",lower:"date-time",index:28,isBkr:!1},e.rules[29]={name:"URI",lower:"uri",index:29,isBkr:!1},e.rules[30]={name:"hier-part",lower:"hier-part",index:30,isBkr:!1},e.rules[31]={name:"URI-reference",lower:"uri-reference",index:31,isBkr:!1},e.rules[32]={name:"absolute-URI",lower:"absolute-uri",index:32,isBkr:!1},e.rules[33]={name:"relative-ref",lower:"relative-ref",index:33,isBkr:!1},e.rules[34]={name:"relative-part",lower:"relative-part",index:34,isBkr:!1},e.rules[35]={name:"scheme",lower:"scheme",index:35,isBkr:!1},e.rules[36]={name:"authority",lower:"authority",index:36,isBkr:!1},e.rules[37]={name:"userinfo",lower:"userinfo",index:37,isBkr:!1},e.rules[38]={name:"host",lower:"host",index:38,isBkr:!1},e.rules[39]={name:"port",lower:"port",index:39,isBkr:!1},e.rules[40]={name:"IP-literal",lower:"ip-literal",index:40,isBkr:!1},e.rules[41]={name:"IPvFuture",lower:"ipvfuture",index:41,isBkr:!1},e.rules[42]={name:"IPv6address",lower:"ipv6address",index:42,isBkr:!1},e.rules[43]={name:"h16",lower:"h16",index:43,isBkr:!1},e.rules[44]={name:"ls32",lower:"ls32",index:44,isBkr:!1},e.rules[45]={name:"IPv4address",lower:"ipv4address",index:45,isBkr:!1},e.rules[46]={name:"dec-octet",lower:"dec-octet",index:46,isBkr:!1},e.rules[47]={name:"reg-name",lower:"reg-name",index:47,isBkr:!1},e.rules[48]={name:"path",lower:"path",index:48,isBkr:!1},e.rules[49]={name:"path-abempty",lower:"path-abempty",index:49,isBkr:!1},e.rules[50]={name:"path-absolute",lower:"path-absolute",index:50,isBkr:!1},e.rules[51]={name:"path-noscheme",lower:"path-noscheme",index:51,isBkr:!1},e.rules[52]={name:"path-rootless",lower:"path-rootless",index:52,isBkr:!1},e.rules[53]={name:"path-empty",lower:"path-empty",index:53,isBkr:!1},e.rules[54]={name:"segment",lower:"segment",index:54,isBkr:!1},e.rules[55]={name:"segment-nz",lower:"segment-nz",index:55,isBkr:!1},e.rules[56]={name:"segment-nz-nc",lower:"segment-nz-nc",index:56,isBkr:!1},e.rules[57]={name:"pchar",lower:"pchar",index:57,isBkr:!1},e.rules[58]={name:"query",lower:"query",index:58,isBkr:!1},e.rules[59]={name:"fragment",lower:"fragment",index:59,isBkr:!1},e.rules[60]={name:"pct-encoded",lower:"pct-encoded",index:60,isBkr:!1},e.rules[61]={name:"unreserved",lower:"unreserved",index:61,isBkr:!1},e.rules[62]={name:"reserved",lower:"reserved",index:62,isBkr:!1},e.rules[63]={name:"gen-delims",lower:"gen-delims",index:63,isBkr:!1},e.rules[64]={name:"sub-delims",lower:"sub-delims",index:64,isBkr:!1},e.rules[65]={name:"sign-in-with-solana",lower:"sign-in-with-solana",index:65,isBkr:!1},e.rules[66]={name:"advanced-fields",lower:"advanced-fields",index:66,isBkr:!1},e.rules[67]={name:"message-domain",lower:"message-domain",index:67,isBkr:!1},e.rules[68]={name:"message-address",lower:"message-address",index:68,isBkr:!1},e.rules[69]={name:"message-statement",lower:"message-statement",index:69,isBkr:!1},e.rules[70]={name:"message-uri",lower:"message-uri",index:70,isBkr:!1},e.rules[71]={name:"message-version",lower:"message-version",index:71,isBkr:!1},e.rules[72]={name:"message-chain-id",lower:"message-chain-id",index:72,isBkr:!1},e.rules[73]={name:"message-nonce",lower:"message-nonce",index:73,isBkr:!1},e.rules[74]={name:"message-issued-at",lower:"message-issued-at",index:74,isBkr:!1},e.rules[75]={name:"message-expiration-time",lower:"message-expiration-time",index:75,isBkr:!1},e.rules[76]={name:"message-not-before",lower:"message-not-before",index:76,isBkr:!1},e.rules[77]={name:"message-request-id",lower:"message-request-id",index:77,isBkr:!1},e.rules[78]={name:"message-resources",lower:"message-resources",index:78,isBkr:!1},e.udts=[],e.rules[0].opcodes=[],e.rules[0].opcodes[0]={type:1,children:[1,2]},e.rules[0].opcodes[1]={type:5,min:65,max:90},e.rules[0].opcodes[2]={type:5,min:97,max:122},e.rules[1].opcodes=[],e.rules[1].opcodes[0]={type:1,children:[1,2]},e.rules[1].opcodes[1]={type:7,string:[48]},e.rules[1].opcodes[2]={type:7,string:[49]},e.rules[2].opcodes=[],e.rules[2].opcodes[0]={type:5,min:1,max:127},e.rules[3].opcodes=[],e.rules[3].opcodes[0]={type:6,string:[13]},e.rules[4].opcodes=[],e.rules[4].opcodes[0]={type:2,children:[1,2]},e.rules[4].opcodes[1]={type:4,index:3},e.rules[4].opcodes[2]={type:4,index:10},e.rules[5].opcodes=[],e.rules[5].opcodes[0]={type:1,children:[1,2]},e.rules[5].opcodes[1]={type:5,min:0,max:31},e.rules[5].opcodes[2]={type:6,string:[127]},e.rules[6].opcodes=[],e.rules[6].opcodes[0]={type:5,min:48,max:57},e.rules[7].opcodes=[],e.rules[7].opcodes[0]={type:6,string:[34]},e.rules[8].opcodes=[],e.rules[8].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[8].opcodes[1]={type:4,index:6},e.rules[8].opcodes[2]={type:7,string:[97]},e.rules[8].opcodes[3]={type:7,string:[98]},e.rules[8].opcodes[4]={type:7,string:[99]},e.rules[8].opcodes[5]={type:7,string:[100]},e.rules[8].opcodes[6]={type:7,string:[101]},e.rules[8].opcodes[7]={type:7,string:[102]},e.rules[9].opcodes=[],e.rules[9].opcodes[0]={type:6,string:[9]},e.rules[10].opcodes=[],e.rules[10].opcodes[0]={type:6,string:[10]},e.rules[11].opcodes=[],e.rules[11].opcodes[0]={type:3,min:0,max:1/0},e.rules[11].opcodes[1]={type:1,children:[2,3]},e.rules[11].opcodes[2]={type:4,index:15},e.rules[11].opcodes[3]={type:2,children:[4,5]},e.rules[11].opcodes[4]={type:4,index:4},e.rules[11].opcodes[5]={type:4,index:15},e.rules[12].opcodes=[],e.rules[12].opcodes[0]={type:5,min:0,max:255},e.rules[13].opcodes=[],e.rules[13].opcodes[0]={type:6,string:[32]},e.rules[14].opcodes=[],e.rules[14].opcodes[0]={type:5,min:33,max:126},e.rules[15].opcodes=[],e.rules[15].opcodes[0]={type:1,children:[1,2]},e.rules[15].opcodes[1]={type:4,index:13},e.rules[15].opcodes[2]={type:4,index:9},e.rules[16].opcodes=[],e.rules[16].opcodes[0]={type:3,min:4,max:4},e.rules[16].opcodes[1]={type:4,index:6},e.rules[17].opcodes=[],e.rules[17].opcodes[0]={type:3,min:2,max:2},e.rules[17].opcodes[1]={type:4,index:6},e.rules[18].opcodes=[],e.rules[18].opcodes[0]={type:3,min:2,max:2},e.rules[18].opcodes[1]={type:4,index:6},e.rules[19].opcodes=[],e.rules[19].opcodes[0]={type:3,min:2,max:2},e.rules[19].opcodes[1]={type:4,index:6},e.rules[20].opcodes=[],e.rules[20].opcodes[0]={type:3,min:2,max:2},e.rules[20].opcodes[1]={type:4,index:6},e.rules[21].opcodes=[],e.rules[21].opcodes[0]={type:3,min:2,max:2},e.rules[21].opcodes[1]={type:4,index:6},e.rules[22].opcodes=[],e.rules[22].opcodes[0]={type:2,children:[1,2]},e.rules[22].opcodes[1]={type:7,string:[46]},e.rules[22].opcodes[2]={type:3,min:1,max:1/0},e.rules[22].opcodes[3]={type:4,index:6},e.rules[23].opcodes=[],e.rules[23].opcodes[0]={type:2,children:[1,4,5,6]},e.rules[23].opcodes[1]={type:1,children:[2,3]},e.rules[23].opcodes[2]={type:7,string:[43]},e.rules[23].opcodes[3]={type:7,string:[45]},e.rules[23].opcodes[4]={type:4,index:19},e.rules[23].opcodes[5]={type:7,string:[58]},e.rules[23].opcodes[6]={type:4,index:20},e.rules[24].opcodes=[],e.rules[24].opcodes[0]={type:1,children:[1,2]},e.rules[24].opcodes[1]={type:7,string:[122]},e.rules[24].opcodes[2]={type:4,index:23},e.rules[25].opcodes=[],e.rules[25].opcodes[0]={type:2,children:[1,2,3,4,5,6]},e.rules[25].opcodes[1]={type:4,index:19},e.rules[25].opcodes[2]={type:7,string:[58]},e.rules[25].opcodes[3]={type:4,index:20},e.rules[25].opcodes[4]={type:7,string:[58]},e.rules[25].opcodes[5]={type:4,index:21},e.rules[25].opcodes[6]={type:3,min:0,max:1},e.rules[25].opcodes[7]={type:4,index:22},e.rules[26].opcodes=[],e.rules[26].opcodes[0]={type:2,children:[1,2,3,4,5]},e.rules[26].opcodes[1]={type:4,index:16},e.rules[26].opcodes[2]={type:7,string:[45]},e.rules[26].opcodes[3]={type:4,index:17},e.rules[26].opcodes[4]={type:7,string:[45]},e.rules[26].opcodes[5]={type:4,index:18},e.rules[27].opcodes=[],e.rules[27].opcodes[0]={type:2,children:[1,2]},e.rules[27].opcodes[1]={type:4,index:25},e.rules[27].opcodes[2]={type:4,index:24},e.rules[28].opcodes=[],e.rules[28].opcodes[0]={type:2,children:[1,2,3]},e.rules[28].opcodes[1]={type:4,index:26},e.rules[28].opcodes[2]={type:7,string:[116]},e.rules[28].opcodes[3]={type:4,index:27},e.rules[29].opcodes=[],e.rules[29].opcodes[0]={type:2,children:[1,2,3,4,8]},e.rules[29].opcodes[1]={type:4,index:35},e.rules[29].opcodes[2]={type:7,string:[58]},e.rules[29].opcodes[3]={type:4,index:30},e.rules[29].opcodes[4]={type:3,min:0,max:1},e.rules[29].opcodes[5]={type:2,children:[6,7]},e.rules[29].opcodes[6]={type:7,string:[63]},e.rules[29].opcodes[7]={type:4,index:58},e.rules[29].opcodes[8]={type:3,min:0,max:1},e.rules[29].opcodes[9]={type:2,children:[10,11]},e.rules[29].opcodes[10]={type:7,string:[35]},e.rules[29].opcodes[11]={type:4,index:59},e.rules[30].opcodes=[],e.rules[30].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[30].opcodes[1]={type:2,children:[2,3,4]},e.rules[30].opcodes[2]={type:7,string:[47,47]},e.rules[30].opcodes[3]={type:4,index:36},e.rules[30].opcodes[4]={type:4,index:49},e.rules[30].opcodes[5]={type:4,index:50},e.rules[30].opcodes[6]={type:4,index:52},e.rules[30].opcodes[7]={type:4,index:53},e.rules[31].opcodes=[],e.rules[31].opcodes[0]={type:1,children:[1,2]},e.rules[31].opcodes[1]={type:4,index:29},e.rules[31].opcodes[2]={type:4,index:33},e.rules[32].opcodes=[],e.rules[32].opcodes[0]={type:2,children:[1,2,3,4]},e.rules[32].opcodes[1]={type:4,index:35},e.rules[32].opcodes[2]={type:7,string:[58]},e.rules[32].opcodes[3]={type:4,index:30},e.rules[32].opcodes[4]={type:3,min:0,max:1},e.rules[32].opcodes[5]={type:2,children:[6,7]},e.rules[32].opcodes[6]={type:7,string:[63]},e.rules[32].opcodes[7]={type:4,index:58},e.rules[33].opcodes=[],e.rules[33].opcodes[0]={type:2,children:[1,2,6]},e.rules[33].opcodes[1]={type:4,index:34},e.rules[33].opcodes[2]={type:3,min:0,max:1},e.rules[33].opcodes[3]={type:2,children:[4,5]},e.rules[33].opcodes[4]={type:7,string:[63]},e.rules[33].opcodes[5]={type:4,index:58},e.rules[33].opcodes[6]={type:3,min:0,max:1},e.rules[33].opcodes[7]={type:2,children:[8,9]},e.rules[33].opcodes[8]={type:7,string:[35]},e.rules[33].opcodes[9]={type:4,index:59},e.rules[34].opcodes=[],e.rules[34].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[34].opcodes[1]={type:2,children:[2,3,4]},e.rules[34].opcodes[2]={type:7,string:[47,47]},e.rules[34].opcodes[3]={type:4,index:36},e.rules[34].opcodes[4]={type:4,index:49},e.rules[34].opcodes[5]={type:4,index:50},e.rules[34].opcodes[6]={type:4,index:51},e.rules[34].opcodes[7]={type:4,index:53},e.rules[35].opcodes=[],e.rules[35].opcodes[0]={type:2,children:[1,2]},e.rules[35].opcodes[1]={type:4,index:0},e.rules[35].opcodes[2]={type:3,min:0,max:1/0},e.rules[35].opcodes[3]={type:1,children:[4,5,6,7,8]},e.rules[35].opcodes[4]={type:4,index:0},e.rules[35].opcodes[5]={type:4,index:6},e.rules[35].opcodes[6]={type:7,string:[43]},e.rules[35].opcodes[7]={type:7,string:[45]},e.rules[35].opcodes[8]={type:7,string:[46]},e.rules[36].opcodes=[],e.rules[36].opcodes[0]={type:2,children:[1,5,6]},e.rules[36].opcodes[1]={type:3,min:0,max:1},e.rules[36].opcodes[2]={type:2,children:[3,4]},e.rules[36].opcodes[3]={type:4,index:37},e.rules[36].opcodes[4]={type:7,string:[64]},e.rules[36].opcodes[5]={type:4,index:38},e.rules[36].opcodes[6]={type:3,min:0,max:1},e.rules[36].opcodes[7]={type:2,children:[8,9]},e.rules[36].opcodes[8]={type:7,string:[58]},e.rules[36].opcodes[9]={type:4,index:39},e.rules[37].opcodes=[],e.rules[37].opcodes[0]={type:3,min:0,max:1/0},e.rules[37].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[37].opcodes[2]={type:4,index:61},e.rules[37].opcodes[3]={type:4,index:60},e.rules[37].opcodes[4]={type:4,index:64},e.rules[37].opcodes[5]={type:7,string:[58]},e.rules[38].opcodes=[],e.rules[38].opcodes[0]={type:1,children:[1,2,3]},e.rules[38].opcodes[1]={type:4,index:40},e.rules[38].opcodes[2]={type:4,index:45},e.rules[38].opcodes[3]={type:4,index:47},e.rules[39].opcodes=[],e.rules[39].opcodes[0]={type:3,min:0,max:1/0},e.rules[39].opcodes[1]={type:4,index:6},e.rules[40].opcodes=[],e.rules[40].opcodes[0]={type:2,children:[1,2,5]},e.rules[40].opcodes[1]={type:7,string:[91]},e.rules[40].opcodes[2]={type:1,children:[3,4]},e.rules[40].opcodes[3]={type:4,index:42},e.rules[40].opcodes[4]={type:4,index:41},e.rules[40].opcodes[5]={type:7,string:[93]},e.rules[41].opcodes=[],e.rules[41].opcodes[0]={type:2,children:[1,2,4,5]},e.rules[41].opcodes[1]={type:7,string:[118]},e.rules[41].opcodes[2]={type:3,min:1,max:1/0},e.rules[41].opcodes[3]={type:4,index:8},e.rules[41].opcodes[4]={type:7,string:[46]},e.rules[41].opcodes[5]={type:3,min:1,max:1/0},e.rules[41].opcodes[6]={type:1,children:[7,8,9]},e.rules[41].opcodes[7]={type:4,index:61},e.rules[41].opcodes[8]={type:4,index:64},e.rules[41].opcodes[9]={type:7,string:[58]},e.rules[42].opcodes=[],e.rules[42].opcodes[0]={type:1,children:[1,7,14,23,37,51,63,73,83]},e.rules[42].opcodes[1]={type:2,children:[2,6]},e.rules[42].opcodes[2]={type:3,min:6,max:6},e.rules[42].opcodes[3]={type:2,children:[4,5]},e.rules[42].opcodes[4]={type:4,index:43},e.rules[42].opcodes[5]={type:7,string:[58]},e.rules[42].opcodes[6]={type:4,index:44},e.rules[42].opcodes[7]={type:2,children:[8,9,13]},e.rules[42].opcodes[8]={type:7,string:[58,58]},e.rules[42].opcodes[9]={type:3,min:5,max:5},e.rules[42].opcodes[10]={type:2,children:[11,12]},e.rules[42].opcodes[11]={type:4,index:43},e.rules[42].opcodes[12]={type:7,string:[58]},e.rules[42].opcodes[13]={type:4,index:44},e.rules[42].opcodes[14]={type:2,children:[15,17,18,22]},e.rules[42].opcodes[15]={type:3,min:0,max:1},e.rules[42].opcodes[16]={type:4,index:43},e.rules[42].opcodes[17]={type:7,string:[58,58]},e.rules[42].opcodes[18]={type:3,min:4,max:4},e.rules[42].opcodes[19]={type:2,children:[20,21]},e.rules[42].opcodes[20]={type:4,index:43},e.rules[42].opcodes[21]={type:7,string:[58]},e.rules[42].opcodes[22]={type:4,index:44},e.rules[42].opcodes[23]={type:2,children:[24,31,32,36]},e.rules[42].opcodes[24]={type:3,min:0,max:1},e.rules[42].opcodes[25]={type:2,children:[26,30]},e.rules[42].opcodes[26]={type:3,min:0,max:1},e.rules[42].opcodes[27]={type:2,children:[28,29]},e.rules[42].opcodes[28]={type:4,index:43},e.rules[42].opcodes[29]={type:7,string:[58]},e.rules[42].opcodes[30]={type:4,index:43},e.rules[42].opcodes[31]={type:7,string:[58,58]},e.rules[42].opcodes[32]={type:3,min:3,max:3},e.rules[42].opcodes[33]={type:2,children:[34,35]},e.rules[42].opcodes[34]={type:4,index:43},e.rules[42].opcodes[35]={type:7,string:[58]},e.rules[42].opcodes[36]={type:4,index:44},e.rules[42].opcodes[37]={type:2,children:[38,45,46,50]},e.rules[42].opcodes[38]={type:3,min:0,max:1},e.rules[42].opcodes[39]={type:2,children:[40,44]},e.rules[42].opcodes[40]={type:3,min:0,max:2},e.rules[42].opcodes[41]={type:2,children:[42,43]},e.rules[42].opcodes[42]={type:4,index:43},e.rules[42].opcodes[43]={type:7,string:[58]},e.rules[42].opcodes[44]={type:4,index:43},e.rules[42].opcodes[45]={type:7,string:[58,58]},e.rules[42].opcodes[46]={type:3,min:2,max:2},e.rules[42].opcodes[47]={type:2,children:[48,49]},e.rules[42].opcodes[48]={type:4,index:43},e.rules[42].opcodes[49]={type:7,string:[58]},e.rules[42].opcodes[50]={type:4,index:44},e.rules[42].opcodes[51]={type:2,children:[52,59,60,61,62]},e.rules[42].opcodes[52]={type:3,min:0,max:1},e.rules[42].opcodes[53]={type:2,children:[54,58]},e.rules[42].opcodes[54]={type:3,min:0,max:3},e.rules[42].opcodes[55]={type:2,children:[56,57]},e.rules[42].opcodes[56]={type:4,index:43},e.rules[42].opcodes[57]={type:7,string:[58]},e.rules[42].opcodes[58]={type:4,index:43},e.rules[42].opcodes[59]={type:7,string:[58,58]},e.rules[42].opcodes[60]={type:4,index:43},e.rules[42].opcodes[61]={type:7,string:[58]},e.rules[42].opcodes[62]={type:4,index:44},e.rules[42].opcodes[63]={type:2,children:[64,71,72]},e.rules[42].opcodes[64]={type:3,min:0,max:1},e.rules[42].opcodes[65]={type:2,children:[66,70]},e.rules[42].opcodes[66]={type:3,min:0,max:4},e.rules[42].opcodes[67]={type:2,children:[68,69]},e.rules[42].opcodes[68]={type:4,index:43},e.rules[42].opcodes[69]={type:7,string:[58]},e.rules[42].opcodes[70]={type:4,index:43},e.rules[42].opcodes[71]={type:7,string:[58,58]},e.rules[42].opcodes[72]={type:4,index:44},e.rules[42].opcodes[73]={type:2,children:[74,81,82]},e.rules[42].opcodes[74]={type:3,min:0,max:1},e.rules[42].opcodes[75]={type:2,children:[76,80]},e.rules[42].opcodes[76]={type:3,min:0,max:5},e.rules[42].opcodes[77]={type:2,children:[78,79]},e.rules[42].opcodes[78]={type:4,index:43},e.rules[42].opcodes[79]={type:7,string:[58]},e.rules[42].opcodes[80]={type:4,index:43},e.rules[42].opcodes[81]={type:7,string:[58,58]},e.rules[42].opcodes[82]={type:4,index:43},e.rules[42].opcodes[83]={type:2,children:[84,91]},e.rules[42].opcodes[84]={type:3,min:0,max:1},e.rules[42].opcodes[85]={type:2,children:[86,90]},e.rules[42].opcodes[86]={type:3,min:0,max:6},e.rules[42].opcodes[87]={type:2,children:[88,89]},e.rules[42].opcodes[88]={type:4,index:43},e.rules[42].opcodes[89]={type:7,string:[58]},e.rules[42].opcodes[90]={type:4,index:43},e.rules[42].opcodes[91]={type:7,string:[58,58]},e.rules[43].opcodes=[],e.rules[43].opcodes[0]={type:3,min:1,max:4},e.rules[43].opcodes[1]={type:4,index:8},e.rules[44].opcodes=[],e.rules[44].opcodes[0]={type:1,children:[1,5]},e.rules[44].opcodes[1]={type:2,children:[2,3,4]},e.rules[44].opcodes[2]={type:4,index:43},e.rules[44].opcodes[3]={type:7,string:[58]},e.rules[44].opcodes[4]={type:4,index:43},e.rules[44].opcodes[5]={type:4,index:45},e.rules[45].opcodes=[],e.rules[45].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},e.rules[45].opcodes[1]={type:4,index:46},e.rules[45].opcodes[2]={type:7,string:[46]},e.rules[45].opcodes[3]={type:4,index:46},e.rules[45].opcodes[4]={type:7,string:[46]},e.rules[45].opcodes[5]={type:4,index:46},e.rules[45].opcodes[6]={type:7,string:[46]},e.rules[45].opcodes[7]={type:4,index:46},e.rules[46].opcodes=[],e.rules[46].opcodes[0]={type:1,children:[1,2,5,9,13]},e.rules[46].opcodes[1]={type:4,index:6},e.rules[46].opcodes[2]={type:2,children:[3,4]},e.rules[46].opcodes[3]={type:5,min:49,max:57},e.rules[46].opcodes[4]={type:4,index:6},e.rules[46].opcodes[5]={type:2,children:[6,7]},e.rules[46].opcodes[6]={type:7,string:[49]},e.rules[46].opcodes[7]={type:3,min:2,max:2},e.rules[46].opcodes[8]={type:4,index:6},e.rules[46].opcodes[9]={type:2,children:[10,11,12]},e.rules[46].opcodes[10]={type:7,string:[50]},e.rules[46].opcodes[11]={type:5,min:48,max:52},e.rules[46].opcodes[12]={type:4,index:6},e.rules[46].opcodes[13]={type:2,children:[14,15]},e.rules[46].opcodes[14]={type:7,string:[50,53]},e.rules[46].opcodes[15]={type:5,min:48,max:53},e.rules[47].opcodes=[],e.rules[47].opcodes[0]={type:3,min:0,max:1/0},e.rules[47].opcodes[1]={type:1,children:[2,3,4]},e.rules[47].opcodes[2]={type:4,index:61},e.rules[47].opcodes[3]={type:4,index:60},e.rules[47].opcodes[4]={type:4,index:64},e.rules[48].opcodes=[],e.rules[48].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[48].opcodes[1]={type:4,index:49},e.rules[48].opcodes[2]={type:4,index:50},e.rules[48].opcodes[3]={type:4,index:51},e.rules[48].opcodes[4]={type:4,index:52},e.rules[48].opcodes[5]={type:4,index:53},e.rules[49].opcodes=[],e.rules[49].opcodes[0]={type:3,min:0,max:1/0},e.rules[49].opcodes[1]={type:2,children:[2,3]},e.rules[49].opcodes[2]={type:7,string:[47]},e.rules[49].opcodes[3]={type:4,index:54},e.rules[50].opcodes=[],e.rules[50].opcodes[0]={type:2,children:[1,2]},e.rules[50].opcodes[1]={type:7,string:[47]},e.rules[50].opcodes[2]={type:3,min:0,max:1},e.rules[50].opcodes[3]={type:2,children:[4,5]},e.rules[50].opcodes[4]={type:4,index:55},e.rules[50].opcodes[5]={type:3,min:0,max:1/0},e.rules[50].opcodes[6]={type:2,children:[7,8]},e.rules[50].opcodes[7]={type:7,string:[47]},e.rules[50].opcodes[8]={type:4,index:54},e.rules[51].opcodes=[],e.rules[51].opcodes[0]={type:2,children:[1,2]},e.rules[51].opcodes[1]={type:4,index:56},e.rules[51].opcodes[2]={type:3,min:0,max:1/0},e.rules[51].opcodes[3]={type:2,children:[4,5]},e.rules[51].opcodes[4]={type:7,string:[47]},e.rules[51].opcodes[5]={type:4,index:54},e.rules[52].opcodes=[],e.rules[52].opcodes[0]={type:2,children:[1,2]},e.rules[52].opcodes[1]={type:4,index:55},e.rules[52].opcodes[2]={type:3,min:0,max:1/0},e.rules[52].opcodes[3]={type:2,children:[4,5]},e.rules[52].opcodes[4]={type:7,string:[47]},e.rules[52].opcodes[5]={type:4,index:54},e.rules[53].opcodes=[],e.rules[53].opcodes[0]={type:3,min:0,max:0},e.rules[53].opcodes[1]={type:4,index:57},e.rules[54].opcodes=[],e.rules[54].opcodes[0]={type:3,min:0,max:1/0},e.rules[54].opcodes[1]={type:4,index:57},e.rules[55].opcodes=[],e.rules[55].opcodes[0]={type:3,min:1,max:1/0},e.rules[55].opcodes[1]={type:4,index:57},e.rules[56].opcodes=[],e.rules[56].opcodes[0]={type:3,min:1,max:1/0},e.rules[56].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[56].opcodes[2]={type:4,index:61},e.rules[56].opcodes[3]={type:4,index:60},e.rules[56].opcodes[4]={type:4,index:64},e.rules[56].opcodes[5]={type:7,string:[64]},e.rules[57].opcodes=[],e.rules[57].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[57].opcodes[1]={type:4,index:61},e.rules[57].opcodes[2]={type:4,index:60},e.rules[57].opcodes[3]={type:4,index:64},e.rules[57].opcodes[4]={type:7,string:[58]},e.rules[57].opcodes[5]={type:7,string:[64]},e.rules[58].opcodes=[],e.rules[58].opcodes[0]={type:3,min:0,max:1/0},e.rules[58].opcodes[1]={type:1,children:[2,3,4]},e.rules[58].opcodes[2]={type:4,index:57},e.rules[58].opcodes[3]={type:7,string:[47]},e.rules[58].opcodes[4]={type:7,string:[63]},e.rules[59].opcodes=[],e.rules[59].opcodes[0]={type:3,min:0,max:1/0},e.rules[59].opcodes[1]={type:1,children:[2,3,4]},e.rules[59].opcodes[2]={type:4,index:57},e.rules[59].opcodes[3]={type:7,string:[47]},e.rules[59].opcodes[4]={type:7,string:[63]},e.rules[60].opcodes=[],e.rules[60].opcodes[0]={type:2,children:[1,2,3]},e.rules[60].opcodes[1]={type:7,string:[37]},e.rules[60].opcodes[2]={type:4,index:8},e.rules[60].opcodes[3]={type:4,index:8},e.rules[61].opcodes=[],e.rules[61].opcodes[0]={type:1,children:[1,2,3,4,5,6]},e.rules[61].opcodes[1]={type:4,index:0},e.rules[61].opcodes[2]={type:4,index:6},e.rules[61].opcodes[3]={type:7,string:[45]},e.rules[61].opcodes[4]={type:7,string:[46]},e.rules[61].opcodes[5]={type:7,string:[95]},e.rules[61].opcodes[6]={type:7,string:[126]},e.rules[62].opcodes=[],e.rules[62].opcodes[0]={type:1,children:[1,2]},e.rules[62].opcodes[1]={type:4,index:63},e.rules[62].opcodes[2]={type:4,index:64},e.rules[63].opcodes=[],e.rules[63].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[63].opcodes[1]={type:7,string:[58]},e.rules[63].opcodes[2]={type:7,string:[47]},e.rules[63].opcodes[3]={type:7,string:[63]},e.rules[63].opcodes[4]={type:7,string:[35]},e.rules[63].opcodes[5]={type:7,string:[91]},e.rules[63].opcodes[6]={type:7,string:[93]},e.rules[63].opcodes[7]={type:7,string:[64]},e.rules[64].opcodes=[],e.rules[64].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},e.rules[64].opcodes[1]={type:7,string:[33]},e.rules[64].opcodes[2]={type:7,string:[36]},e.rules[64].opcodes[3]={type:7,string:[38]},e.rules[64].opcodes[4]={type:7,string:[39]},e.rules[64].opcodes[5]={type:7,string:[40]},e.rules[64].opcodes[6]={type:7,string:[41]},e.rules[64].opcodes[7]={type:7,string:[42]},e.rules[64].opcodes[8]={type:7,string:[43]},e.rules[64].opcodes[9]={type:7,string:[44]},e.rules[64].opcodes[10]={type:7,string:[59]},e.rules[64].opcodes[11]={type:7,string:[61]},e.rules[65].opcodes=[],e.rules[65].opcodes[0]={type:2,children:[1,2,3,4,5,10]},e.rules[65].opcodes[1]={type:4,index:67},e.rules[65].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,83,111,108,97,110,97,32,97,99,99,111,117,110,116,58]},e.rules[65].opcodes[3]={type:4,index:10},e.rules[65].opcodes[4]={type:4,index:68},e.rules[65].opcodes[5]={type:3,min:0,max:1},e.rules[65].opcodes[6]={type:2,children:[7,8,9]},e.rules[65].opcodes[7]={type:4,index:10},e.rules[65].opcodes[8]={type:4,index:10},e.rules[65].opcodes[9]={type:4,index:69},e.rules[65].opcodes[10]={type:3,min:0,max:1},e.rules[65].opcodes[11]={type:2,children:[12,13]},e.rules[65].opcodes[12]={type:4,index:10},e.rules[65].opcodes[13]={type:4,index:66},e.rules[66].opcodes=[],e.rules[66].opcodes[0]={type:2,children:[1,6,11,16,21,26,31,36,41]},e.rules[66].opcodes[1]={type:3,min:0,max:1},e.rules[66].opcodes[2]={type:2,children:[3,4,5]},e.rules[66].opcodes[3]={type:4,index:10},e.rules[66].opcodes[4]={type:6,string:[85,82,73,58,32]},e.rules[66].opcodes[5]={type:4,index:70},e.rules[66].opcodes[6]={type:3,min:0,max:1},e.rules[66].opcodes[7]={type:2,children:[8,9,10]},e.rules[66].opcodes[8]={type:4,index:10},e.rules[66].opcodes[9]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[66].opcodes[10]={type:4,index:71},e.rules[66].opcodes[11]={type:3,min:0,max:1},e.rules[66].opcodes[12]={type:2,children:[13,14,15]},e.rules[66].opcodes[13]={type:4,index:10},e.rules[66].opcodes[14]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[66].opcodes[15]={type:4,index:72},e.rules[66].opcodes[16]={type:3,min:0,max:1},e.rules[66].opcodes[17]={type:2,children:[18,19,20]},e.rules[66].opcodes[18]={type:4,index:10},e.rules[66].opcodes[19]={type:6,string:[78,111,110,99,101,58,32]},e.rules[66].opcodes[20]={type:4,index:73},e.rules[66].opcodes[21]={type:3,min:0,max:1},e.rules[66].opcodes[22]={type:2,children:[23,24,25]},e.rules[66].opcodes[23]={type:4,index:10},e.rules[66].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[66].opcodes[25]={type:4,index:74},e.rules[66].opcodes[26]={type:3,min:0,max:1},e.rules[66].opcodes[27]={type:2,children:[28,29,30]},e.rules[66].opcodes[28]={type:4,index:10},e.rules[66].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[66].opcodes[30]={type:4,index:75},e.rules[66].opcodes[31]={type:3,min:0,max:1},e.rules[66].opcodes[32]={type:2,children:[33,34,35]},e.rules[66].opcodes[33]={type:4,index:10},e.rules[66].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[66].opcodes[35]={type:4,index:76},e.rules[66].opcodes[36]={type:3,min:0,max:1},e.rules[66].opcodes[37]={type:2,children:[38,39,40]},e.rules[66].opcodes[38]={type:4,index:10},e.rules[66].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[66].opcodes[40]={type:4,index:77},e.rules[66].opcodes[41]={type:3,min:0,max:1},e.rules[66].opcodes[42]={type:2,children:[43,44,45]},e.rules[66].opcodes[43]={type:4,index:10},e.rules[66].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[66].opcodes[45]={type:4,index:78},e.rules[67].opcodes=[],e.rules[67].opcodes[0]={type:4,index:36},e.rules[68].opcodes=[],e.rules[68].opcodes[0]={type:3,min:32,max:44},e.rules[68].opcodes[1]={type:1,children:[2,3,4,5,6,7]},e.rules[68].opcodes[2]={type:5,min:49,max:57},e.rules[68].opcodes[3]={type:5,min:65,max:72},e.rules[68].opcodes[4]={type:5,min:74,max:78},e.rules[68].opcodes[5]={type:5,min:80,max:90},e.rules[68].opcodes[6]={type:5,min:97,max:107},e.rules[68].opcodes[7]={type:5,min:109,max:122},e.rules[69].opcodes=[],e.rules[69].opcodes[0]={type:3,min:1,max:1/0},e.rules[69].opcodes[1]={type:1,children:[2,3,4]},e.rules[69].opcodes[2]={type:4,index:62},e.rules[69].opcodes[3]={type:4,index:61},e.rules[69].opcodes[4]={type:7,string:[32]},e.rules[70].opcodes=[],e.rules[70].opcodes[0]={type:4,index:29},e.rules[71].opcodes=[],e.rules[71].opcodes[0]={type:7,string:[49]},e.rules[72].opcodes=[],e.rules[72].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[72].opcodes[1]={type:6,string:[109,97,105,110,110,101,116]},e.rules[72].opcodes[2]={type:6,string:[116,101,115,116,110,101,116]},e.rules[72].opcodes[3]={type:6,string:[100,101,118,110,101,116]},e.rules[72].opcodes[4]={type:6,string:[108,111,99,97,108,110,101,116]},e.rules[72].opcodes[5]={type:6,string:[115,111,108,97,110,97,58,109,97,105,110,110,101,116]},e.rules[72].opcodes[6]={type:6,string:[115,111,108,97,110,97,58,116,101,115,116,110,101,116]},e.rules[72].opcodes[7]={type:6,string:[115,111,108,97,110,97,58,100,101,118,110,101,116]},e.rules[73].opcodes=[],e.rules[73].opcodes[0]={type:3,min:8,max:1/0},e.rules[73].opcodes[1]={type:1,children:[2,3]},e.rules[73].opcodes[2]={type:4,index:0},e.rules[73].opcodes[3]={type:4,index:6},e.rules[74].opcodes=[],e.rules[74].opcodes[0]={type:4,index:28},e.rules[75].opcodes=[],e.rules[75].opcodes[0]={type:4,index:28},e.rules[76].opcodes=[],e.rules[76].opcodes[0]={type:4,index:28},e.rules[77].opcodes=[],e.rules[77].opcodes[0]={type:3,min:0,max:1/0},e.rules[77].opcodes[1]={type:4,index:57},e.rules[78].opcodes=[],e.rules[78].opcodes[0]={type:3,min:0,max:1/0},e.rules[78].opcodes[1]={type:2,children:[2,3,4]},e.rules[78].opcodes[2]={type:4,index:10},e.rules[78].opcodes[3]={type:7,string:[45,32]},e.rules[78].opcodes[4]={type:4,index:29},e.toString=function(){let r="";return r+=`; ==============================================================================
`,r+=`; Core rules for ABNF (RFC 5234)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc5234#appendix-B.1
`,r+=`
`,r+=`ALPHA          =  %x41-5A / %x61-7A
`,r+=`               ; A-Z / a-z
`,r+=`
`,r+=`BIT            =  "0" / "1"
`,r+=`
`,r+=`CHAR           =  %x01-7F
`,r+=`               ; any 7-bit US-ASCII character,
`,r+=`               ;  excluding NUL
`,r+=`
`,r+=`CR             =  %x0D
`,r+=`               ; carriage return
`,r+=`
`,r+=`CRLF           =  CR LF
`,r+=`               ; Internet standard newline
`,r+=`
`,r+=`CTL            =  %x00-1F / %x7F
`,r+=`               ; controls
`,r+=`
`,r+=`DIGIT          =  %x30-39
`,r+=`               ; 0-9
`,r+=`
`,r+=`DQUOTE         =  %x22
`,r+=`               ; " (Double Quote)
`,r+=`
`,r+=`HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,r+=`
`,r+=`HTAB           =  %x09
`,r+=`               ; horizontal tab
`,r+=`
`,r+=`LF             =  %x0A
`,r+=`               ; linefeed
`,r+=`
`,r+=`LWSP           =  *(WSP / CRLF WSP)
`,r+=`               ; Use of this linear-white-space rule
`,r+=`               ;  permits lines containing only white
`,r+=`               ;  space that are no longer legal in
`,r+=`               ;  mail headers and have caused
`,r+=`               ;  interoperability problems in other
`,r+=`               ;  contexts.
`,r+=`               ; Do not use when defining mail
`,r+=`               ;  headers and use with caution in
`,r+=`               ;  other contexts.
`,r+=`
`,r+=`OCTET          =  %x00-FF
`,r+=`               ; 8 bits of data
`,r+=`
`,r+=`SP             =  %x20
`,r+=`
`,r+=`VCHAR          =  %x21-7E
`,r+=`               ; visible (printing) characters
`,r+=`
`,r+=`WSP            =  SP / HTAB
`,r+=`               ; white space
`,r+=`; ==============================================================================
`,r+=`; Internet Date/Time Format (RFC 3339)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3339#section-5.6
`,r+=`
`,r+=`date-fullyear   = 4DIGIT
`,r+=`
`,r+=`date-month      = 2DIGIT  ; 01-12
`,r+=`
`,r+=`date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
`,r+=`                          ; month/year
`,r+=`
`,r+=`time-hour       = 2DIGIT  ; 00-23
`,r+=`
`,r+=`time-minute     = 2DIGIT  ; 00-59
`,r+=`
`,r+=`time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
`,r+=`                          ; rules
`,r+=`
`,r+=`time-secfrac    = "." 1*DIGIT
`,r+=`
`,r+=`time-numoffset  = ("+" / "-") time-hour ":" time-minute
`,r+=`
`,r+=`time-offset     = "Z" / time-numoffset
`,r+=`
`,r+=`partial-time    = time-hour ":" time-minute ":" time-second
`,r+=`                  [time-secfrac]
`,r+=`
`,r+=`full-date       = date-fullyear "-" date-month "-" date-mday
`,r+=`
`,r+=`full-time       = partial-time time-offset
`,r+=`
`,r+=`date-time       = full-date "T" full-time
`,r+=`; ==============================================================================
`,r+=`; Uniform Resource Identifier (RFC 3986)
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://www.rfc-editor.org/rfc/rfc3986#appendix-A
`,r+=`
`,r+=`URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`hier-part     = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-rootless
`,r+=`              / path-empty
`,r+=`
`,r+=`URI-reference = URI / relative-ref
`,r+=`
`,r+=`absolute-URI  = scheme ":" hier-part [ "?" query ]
`,r+=`
`,r+=`relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
`,r+=`
`,r+=`relative-part = "//" authority path-abempty
`,r+=`              / path-absolute
`,r+=`              / path-noscheme
`,r+=`              / path-empty
`,r+=`
`,r+=`scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
`,r+=`
`,r+=`authority     = [ userinfo "@" ] host [ ":" port ]
`,r+=`userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
`,r+=`host          = IP-literal / IPv4address / reg-name
`,r+=`port          = *DIGIT
`,r+=`
`,r+=`IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
`,r+=`
`,r+=`IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )
`,r+=`
`,r+=`IPv6address   =                            6( h16 ":" ) ls32
`,r+=`              /                       "::" 5( h16 ":" ) ls32
`,r+=`              / [               h16 ] "::" 4( h16 ":" ) ls32
`,r+=`              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
`,r+=`              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
`,r+=`              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
`,r+=`              / [ *4( h16 ":" ) h16 ] "::"              ls32
`,r+=`              / [ *5( h16 ":" ) h16 ] "::"              h16
`,r+=`              / [ *6( h16 ":" ) h16 ] "::"
`,r+=`
`,r+=`h16           = 1*4HEXDIG
`,r+=`ls32          = ( h16 ":" h16 ) / IPv4address
`,r+=`IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
`,r+=`dec-octet     = DIGIT                 ; 0-9
`,r+=`              / %x31-39 DIGIT         ; 10-99
`,r+=`              / "1" 2DIGIT            ; 100-199
`,r+=`              / "2" %x30-34 DIGIT     ; 200-249
`,r+=`              / "25" %x30-35          ; 250-255
`,r+=`
`,r+=`reg-name      = *( unreserved / pct-encoded / sub-delims )
`,r+=`
`,r+=`path          = path-abempty    ; begins with "/" or is empty
`,r+=`              / path-absolute   ; begins with "/" but not "//"
`,r+=`              / path-noscheme   ; begins with a non-colon segment
`,r+=`              / path-rootless   ; begins with a segment
`,r+=`              / path-empty      ; zero characters
`,r+=`
`,r+=`path-abempty  = *( "/" segment )
`,r+=`path-absolute = "/" [ segment-nz *( "/" segment ) ]
`,r+=`path-noscheme = segment-nz-nc *( "/" segment )
`,r+=`path-rootless = segment-nz *( "/" segment )
`,r+=`path-empty    = 0pchar
`,r+=`
`,r+=`segment       = *pchar
`,r+=`segment-nz    = 1*pchar
`,r+=`segment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / "@" )
`,r+=`; non-zero-length segment without any colon ":"
`,r+=`
`,r+=`pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
`,r+=`
`,r+=`query         = *( pchar / "/" / "?" )
`,r+=`
`,r+=`fragment      = *( pchar / "/" / "?" )
`,r+=`
`,r+=`pct-encoded   = "%" HEXDIG HEXDIG
`,r+=`
`,r+=`unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
`,r+=`reserved      = gen-delims / sub-delims
`,r+=`gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
`,r+=`sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
`,r+=`              / "*" / "+" / "," / ";" / "="
`,r+=`; ==============================================================================
`,r+=`; Sign in with Solana
`,r+=`; ==============================================================================
`,r+=`;
`,r+=`; Requires:
`,r+=`; - core.bnf
`,r+=`; - datetime.bnf
`,r+=`; - uri.bnf
`,r+=`; - dns.bnf
`,r+=`;
`,r+=`; References:
`,r+=`; - https://eips.ethereum.org/EIPS/eip-4361
`,r+=` 
`,r+=`sign-in-with-solana =
`,r+=`  message-domain %s" wants you to sign in with your Solana account:" LF
`,r+=`  message-address
`,r+=`  [ LF LF message-statement ]
`,r+=`  [ LF advanced-fields ]
`,r+=`
`,r+=`advanced-fields =
`,r+=`  [ LF %s"URI: " message-uri ]
`,r+=`  [ LF %s"Version: " message-version ]
`,r+=`  [ LF %s"Chain ID: " message-chain-id ]
`,r+=`  [ LF %s"Nonce: " message-nonce ]
`,r+=`  [ LF %s"Issued At: " message-issued-at ]
`,r+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,r+=`  [ LF %s"Not Before: " message-not-before ]
`,r+=`  [ LF %s"Request ID: " message-request-id ]
`,r+=`  [ LF %s"Resources:" message-resources ]
`,r+=`
`,r+=`message-domain          = authority
`,r+=`message-address         = 32*44( %x31-39 / %x41-48 / %x4A-4E / %x50-5A / %x61-6B / %x6D-7A )
`,r+=`message-statement       = 1*( reserved / unreserved / " " )
`,r+=`message-uri             = URI
`,r+=`message-version         = "1"
`,r+=`message-chain-id        = %s"mainnet" / %s"testnet" / %s"devnet" / %s"localnet" / %s"solana:mainnet" / %s"solana:testnet" / %s"solana:devnet"
`,r+=`message-nonce           = 8*( ALPHA / DIGIT )
`,r+=`message-issued-at       = date-time
`,r+=`message-expiration-time = date-time
`,r+=`message-not-before      = date-time
`,r+=`message-request-id      = *pchar
`,r+=`message-resources       = *( LF "- " URI )
`,r},e}c();p();function la(){let e={};return e.grammarObject="grammarObject",e.rules=[],e.rules[0]={name:"ALPHA",lower:"alpha",index:0,isBkr:!1},e.rules[1]={name:"BIT",lower:"bit",index:1,isBkr:!1},e.rules[2]={name:"CHAR",lower:"char",index:2,isBkr:!1},e.rules[3]={name:"CR",lower:"cr",index:3,isBkr:!1},e.rules[4]={name:"CRLF",lower:"crlf",index:4,isBkr:!1},e.rules[5]={name:"CTL",lower:"ctl",index:5,isBkr:!1},e.rules[6]={name:"DIGIT",lower:"digit",index:6,isBkr:!1},e.rules[7]={name:"DQUOTE",lower:"dquote",index:7,isBkr:!1},e.rules[8]={name:"HEXDIG",lower:"hexdig",index:8,isBkr:!1},e.rules[9]={name:"HTAB",lower:"htab",index:9,isBkr:!1},e.rules[10]={name:"LF",lower:"lf",index:10,isBkr:!1},e.rules[11]={name:"LWSP",lower:"lwsp",index:11,isBkr:!1},e.rules[12]={name:"OCTET",lower:"octet",index:12,isBkr:!1},e.rules[13]={name:"SP",lower:"sp",index:13,isBkr:!1},e.rules[14]={name:"VCHAR",lower:"vchar",index:14,isBkr:!1},e.rules[15]={name:"WSP",lower:"wsp",index:15,isBkr:!1},e.rules[16]={name:"date-fullyear",lower:"date-fullyear",index:16,isBkr:!1},e.rules[17]={name:"date-month",lower:"date-month",index:17,isBkr:!1},e.rules[18]={name:"date-mday",lower:"date-mday",index:18,isBkr:!1},e.rules[19]={name:"time-hour",lower:"time-hour",index:19,isBkr:!1},e.rules[20]={name:"time-minute",lower:"time-minute",index:20,isBkr:!1},e.rules[21]={name:"time-second",lower:"time-second",index:21,isBkr:!1},e.rules[22]={name:"time-secfrac",lower:"time-secfrac",index:22,isBkr:!1},e.rules[23]={name:"time-numoffset",lower:"time-numoffset",index:23,isBkr:!1},e.rules[24]={name:"time-offset",lower:"time-offset",index:24,isBkr:!1},e.rules[25]={name:"partial-time",lower:"partial-time",index:25,isBkr:!1},e.rules[26]={name:"full-date",lower:"full-date",index:26,isBkr:!1},e.rules[27]={name:"full-time",lower:"full-time",index:27,isBkr:!1},e.rules[28]={name:"date-time",lower:"date-time",index:28,isBkr:!1},e.rules[29]={name:"URI",lower:"uri",index:29,isBkr:!1},e.rules[30]={name:"hier-part",lower:"hier-part",index:30,isBkr:!1},e.rules[31]={name:"URI-reference",lower:"uri-reference",index:31,isBkr:!1},e.rules[32]={name:"absolute-URI",lower:"absolute-uri",index:32,isBkr:!1},e.rules[33]={name:"relative-ref",lower:"relative-ref",index:33,isBkr:!1},e.rules[34]={name:"relative-part",lower:"relative-part",index:34,isBkr:!1},e.rules[35]={name:"scheme",lower:"scheme",index:35,isBkr:!1},e.rules[36]={name:"authority",lower:"authority",index:36,isBkr:!1},e.rules[37]={name:"userinfo",lower:"userinfo",index:37,isBkr:!1},e.rules[38]={name:"host",lower:"host",index:38,isBkr:!1},e.rules[39]={name:"port",lower:"port",index:39,isBkr:!1},e.rules[40]={name:"IP-literal",lower:"ip-literal",index:40,isBkr:!1},e.rules[41]={name:"IPvFuture",lower:"ipvfuture",index:41,isBkr:!1},e.rules[42]={name:"IPv6address",lower:"ipv6address",index:42,isBkr:!1},e.rules[43]={name:"h16",lower:"h16",index:43,isBkr:!1},e.rules[44]={name:"ls32",lower:"ls32",index:44,isBkr:!1},e.rules[45]={name:"IPv4address",lower:"ipv4address",index:45,isBkr:!1},e.rules[46]={name:"dec-octet",lower:"dec-octet",index:46,isBkr:!1},e.rules[47]={name:"reg-name",lower:"reg-name",index:47,isBkr:!1},e.rules[48]={name:"path",lower:"path",index:48,isBkr:!1},e.rules[49]={name:"path-abempty",lower:"path-abempty",index:49,isBkr:!1},e.rules[50]={name:"path-absolute",lower:"path-absolute",index:50,isBkr:!1},e.rules[51]={name:"path-noscheme",lower:"path-noscheme",index:51,isBkr:!1},e.rules[52]={name:"path-rootless",lower:"path-rootless",index:52,isBkr:!1},e.rules[53]={name:"path-empty",lower:"path-empty",index:53,isBkr:!1},e.rules[54]={name:"segment",lower:"segment",index:54,isBkr:!1},e.rules[55]={name:"segment-nz",lower:"segment-nz",index:55,isBkr:!1},e.rules[56]={name:"segment-nz-nc",lower:"segment-nz-nc",index:56,isBkr:!1},e.rules[57]={name:"pchar",lower:"pchar",index:57,isBkr:!1},e.rules[58]={name:"query",lower:"query",index:58,isBkr:!1},e.rules[59]={name:"fragment",lower:"fragment",index:59,isBkr:!1},e.rules[60]={name:"pct-encoded",lower:"pct-encoded",index:60,isBkr:!1},e.rules[61]={name:"unreserved",lower:"unreserved",index:61,isBkr:!1},e.rules[62]={name:"reserved",lower:"reserved",index:62,isBkr:!1},e.rules[63]={name:"gen-delims",lower:"gen-delims",index:63,isBkr:!1},e.rules[64]={name:"sub-delims",lower:"sub-delims",index:64,isBkr:!1},e.rules[65]={name:"dnsurl",lower:"dnsurl",index:65,isBkr:!1},e.rules[66]={name:"dnsauthority",lower:"dnsauthority",index:66,isBkr:!1},e.rules[67]={name:"dnsname",lower:"dnsname",index:67,isBkr:!1},e.rules[68]={name:"dnsquery",lower:"dnsquery",index:68,isBkr:!1},e.rules[69]={name:"dnsqueryelement",lower:"dnsqueryelement",index:69,isBkr:!1},e.rules[70]={name:"dnsclassval",lower:"dnsclassval",index:70,isBkr:!1},e.rules[71]={name:"dnstypeval",lower:"dnstypeval",index:71,isBkr:!1},e.rules[72]={name:"chain-id",lower:"chain-id",index:72,isBkr:!1},e.rules[73]={name:"eth-namespace",lower:"eth-namespace",index:73,isBkr:!1},e.rules[74]={name:"eth-network-id",lower:"eth-network-id",index:74,isBkr:!1},e.rules[75]={name:"eth-chain-id",lower:"eth-chain-id",index:75,isBkr:!1},e.rules[76]={name:"sol-namespace",lower:"sol-namespace",index:76,isBkr:!1},e.rules[77]={name:"sol-network-id",lower:"sol-network-id",index:77,isBkr:!1},e.rules[78]={name:"sol-chain-id",lower:"sol-chain-id",index:78,isBkr:!1},e.rules[79]={name:"account-id",lower:"account-id",index:79,isBkr:!1},e.rules[80]={name:"eth-address",lower:"eth-address",index:80,isBkr:!1},e.rules[81]={name:"eth-account-id",lower:"eth-account-id",index:81,isBkr:!1},e.rules[82]={name:"sol-address",lower:"sol-address",index:82,isBkr:!1},e.rules[83]={name:"sol-account-id",lower:"sol-account-id",index:83,isBkr:!1},e.rules[84]={name:"sign-in-with-x",lower:"sign-in-with-x",index:84,isBkr:!1},e.rules[85]={name:"sign-in-with-eth",lower:"sign-in-with-eth",index:85,isBkr:!1},e.rules[86]={name:"sign-in-with-sol",lower:"sign-in-with-sol",index:86,isBkr:!1},e.rules[87]={name:"message-domain",lower:"message-domain",index:87,isBkr:!1},e.rules[88]={name:"message-address",lower:"message-address",index:88,isBkr:!1},e.rules[89]={name:"message-statement",lower:"message-statement",index:89,isBkr:!1},e.rules[90]={name:"message-uri",lower:"message-uri",index:90,isBkr:!1},e.rules[91]={name:"message-version",lower:"message-version",index:91,isBkr:!1},e.rules[92]={name:"message-chain-id",lower:"message-chain-id",index:92,isBkr:!1},e.rules[93]={name:"message-nonce",lower:"message-nonce",index:93,isBkr:!1},e.rules[94]={name:"message-issued-at",lower:"message-issued-at",index:94,isBkr:!1},e.rules[95]={name:"message-expiration-time",lower:"message-expiration-time",index:95,isBkr:!1},e.rules[96]={name:"message-not-before",lower:"message-not-before",index:96,isBkr:!1},e.rules[97]={name:"message-request-id",lower:"message-request-id",index:97,isBkr:!1},e.rules[98]={name:"message-resources",lower:"message-resources",index:98,isBkr:!1},e.udts=[],e.rules[0].opcodes=[],e.rules[0].opcodes[0]={type:1,children:[1,2]},e.rules[0].opcodes[1]={type:5,min:65,max:90},e.rules[0].opcodes[2]={type:5,min:97,max:122},e.rules[1].opcodes=[],e.rules[1].opcodes[0]={type:1,children:[1,2]},e.rules[1].opcodes[1]={type:7,string:[48]},e.rules[1].opcodes[2]={type:7,string:[49]},e.rules[2].opcodes=[],e.rules[2].opcodes[0]={type:5,min:1,max:127},e.rules[3].opcodes=[],e.rules[3].opcodes[0]={type:6,string:[13]},e.rules[4].opcodes=[],e.rules[4].opcodes[0]={type:2,children:[1,2]},e.rules[4].opcodes[1]={type:4,index:3},e.rules[4].opcodes[2]={type:4,index:10},e.rules[5].opcodes=[],e.rules[5].opcodes[0]={type:1,children:[1,2]},e.rules[5].opcodes[1]={type:5,min:0,max:31},e.rules[5].opcodes[2]={type:6,string:[127]},e.rules[6].opcodes=[],e.rules[6].opcodes[0]={type:5,min:48,max:57},e.rules[7].opcodes=[],e.rules[7].opcodes[0]={type:6,string:[34]},e.rules[8].opcodes=[],e.rules[8].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[8].opcodes[1]={type:4,index:6},e.rules[8].opcodes[2]={type:7,string:[97]},e.rules[8].opcodes[3]={type:7,string:[98]},e.rules[8].opcodes[4]={type:7,string:[99]},e.rules[8].opcodes[5]={type:7,string:[100]},e.rules[8].opcodes[6]={type:7,string:[101]},e.rules[8].opcodes[7]={type:7,string:[102]},e.rules[9].opcodes=[],e.rules[9].opcodes[0]={type:6,string:[9]},e.rules[10].opcodes=[],e.rules[10].opcodes[0]={type:6,string:[10]},e.rules[11].opcodes=[],e.rules[11].opcodes[0]={type:3,min:0,max:1/0},e.rules[11].opcodes[1]={type:1,children:[2,3]},e.rules[11].opcodes[2]={type:4,index:15},e.rules[11].opcodes[3]={type:2,children:[4,5]},e.rules[11].opcodes[4]={type:4,index:4},e.rules[11].opcodes[5]={type:4,index:15},e.rules[12].opcodes=[],e.rules[12].opcodes[0]={type:5,min:0,max:255},e.rules[13].opcodes=[],e.rules[13].opcodes[0]={type:6,string:[32]},e.rules[14].opcodes=[],e.rules[14].opcodes[0]={type:5,min:33,max:126},e.rules[15].opcodes=[],e.rules[15].opcodes[0]={type:1,children:[1,2]},e.rules[15].opcodes[1]={type:4,index:13},e.rules[15].opcodes[2]={type:4,index:9},e.rules[16].opcodes=[],e.rules[16].opcodes[0]={type:3,min:4,max:4},e.rules[16].opcodes[1]={type:4,index:6},e.rules[17].opcodes=[],e.rules[17].opcodes[0]={type:3,min:2,max:2},e.rules[17].opcodes[1]={type:4,index:6},e.rules[18].opcodes=[],e.rules[18].opcodes[0]={type:3,min:2,max:2},e.rules[18].opcodes[1]={type:4,index:6},e.rules[19].opcodes=[],e.rules[19].opcodes[0]={type:3,min:2,max:2},e.rules[19].opcodes[1]={type:4,index:6},e.rules[20].opcodes=[],e.rules[20].opcodes[0]={type:3,min:2,max:2},e.rules[20].opcodes[1]={type:4,index:6},e.rules[21].opcodes=[],e.rules[21].opcodes[0]={type:3,min:2,max:2},e.rules[21].opcodes[1]={type:4,index:6},e.rules[22].opcodes=[],e.rules[22].opcodes[0]={type:2,children:[1,2]},e.rules[22].opcodes[1]={type:7,string:[46]},e.rules[22].opcodes[2]={type:3,min:1,max:1/0},e.rules[22].opcodes[3]={type:4,index:6},e.rules[23].opcodes=[],e.rules[23].opcodes[0]={type:2,children:[1,4,5,6]},e.rules[23].opcodes[1]={type:1,children:[2,3]},e.rules[23].opcodes[2]={type:7,string:[43]},e.rules[23].opcodes[3]={type:7,string:[45]},e.rules[23].opcodes[4]={type:4,index:19},e.rules[23].opcodes[5]={type:7,string:[58]},e.rules[23].opcodes[6]={type:4,index:20},e.rules[24].opcodes=[],e.rules[24].opcodes[0]={type:1,children:[1,2]},e.rules[24].opcodes[1]={type:7,string:[122]},e.rules[24].opcodes[2]={type:4,index:23},e.rules[25].opcodes=[],e.rules[25].opcodes[0]={type:2,children:[1,2,3,4,5,6]},e.rules[25].opcodes[1]={type:4,index:19},e.rules[25].opcodes[2]={type:7,string:[58]},e.rules[25].opcodes[3]={type:4,index:20},e.rules[25].opcodes[4]={type:7,string:[58]},e.rules[25].opcodes[5]={type:4,index:21},e.rules[25].opcodes[6]={type:3,min:0,max:1},e.rules[25].opcodes[7]={type:4,index:22},e.rules[26].opcodes=[],e.rules[26].opcodes[0]={type:2,children:[1,2,3,4,5]},e.rules[26].opcodes[1]={type:4,index:16},e.rules[26].opcodes[2]={type:7,string:[45]},e.rules[26].opcodes[3]={type:4,index:17},e.rules[26].opcodes[4]={type:7,string:[45]},e.rules[26].opcodes[5]={type:4,index:18},e.rules[27].opcodes=[],e.rules[27].opcodes[0]={type:2,children:[1,2]},e.rules[27].opcodes[1]={type:4,index:25},e.rules[27].opcodes[2]={type:4,index:24},e.rules[28].opcodes=[],e.rules[28].opcodes[0]={type:2,children:[1,2,3]},e.rules[28].opcodes[1]={type:4,index:26},e.rules[28].opcodes[2]={type:7,string:[116]},e.rules[28].opcodes[3]={type:4,index:27},e.rules[29].opcodes=[],e.rules[29].opcodes[0]={type:2,children:[1,2,3,4,8]},e.rules[29].opcodes[1]={type:4,index:35},e.rules[29].opcodes[2]={type:7,string:[58]},e.rules[29].opcodes[3]={type:4,index:30},e.rules[29].opcodes[4]={type:3,min:0,max:1},e.rules[29].opcodes[5]={type:2,children:[6,7]},e.rules[29].opcodes[6]={type:7,string:[63]},e.rules[29].opcodes[7]={type:4,index:58},e.rules[29].opcodes[8]={type:3,min:0,max:1},e.rules[29].opcodes[9]={type:2,children:[10,11]},e.rules[29].opcodes[10]={type:7,string:[35]},e.rules[29].opcodes[11]={type:4,index:59},e.rules[30].opcodes=[],e.rules[30].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[30].opcodes[1]={type:2,children:[2,3,4]},e.rules[30].opcodes[2]={type:7,string:[47,47]},e.rules[30].opcodes[3]={type:4,index:36},e.rules[30].opcodes[4]={type:4,index:49},e.rules[30].opcodes[5]={type:4,index:50},e.rules[30].opcodes[6]={type:4,index:52},e.rules[30].opcodes[7]={type:4,index:53},e.rules[31].opcodes=[],e.rules[31].opcodes[0]={type:1,children:[1,2]},e.rules[31].opcodes[1]={type:4,index:29},e.rules[31].opcodes[2]={type:4,index:33},e.rules[32].opcodes=[],e.rules[32].opcodes[0]={type:2,children:[1,2,3,4]},e.rules[32].opcodes[1]={type:4,index:35},e.rules[32].opcodes[2]={type:7,string:[58]},e.rules[32].opcodes[3]={type:4,index:30},e.rules[32].opcodes[4]={type:3,min:0,max:1},e.rules[32].opcodes[5]={type:2,children:[6,7]},e.rules[32].opcodes[6]={type:7,string:[63]},e.rules[32].opcodes[7]={type:4,index:58},e.rules[33].opcodes=[],e.rules[33].opcodes[0]={type:2,children:[1,2,6]},e.rules[33].opcodes[1]={type:4,index:34},e.rules[33].opcodes[2]={type:3,min:0,max:1},e.rules[33].opcodes[3]={type:2,children:[4,5]},e.rules[33].opcodes[4]={type:7,string:[63]},e.rules[33].opcodes[5]={type:4,index:58},e.rules[33].opcodes[6]={type:3,min:0,max:1},e.rules[33].opcodes[7]={type:2,children:[8,9]},e.rules[33].opcodes[8]={type:7,string:[35]},e.rules[33].opcodes[9]={type:4,index:59},e.rules[34].opcodes=[],e.rules[34].opcodes[0]={type:1,children:[1,5,6,7]},e.rules[34].opcodes[1]={type:2,children:[2,3,4]},e.rules[34].opcodes[2]={type:7,string:[47,47]},e.rules[34].opcodes[3]={type:4,index:36},e.rules[34].opcodes[4]={type:4,index:49},e.rules[34].opcodes[5]={type:4,index:50},e.rules[34].opcodes[6]={type:4,index:51},e.rules[34].opcodes[7]={type:4,index:53},e.rules[35].opcodes=[],e.rules[35].opcodes[0]={type:2,children:[1,2]},e.rules[35].opcodes[1]={type:4,index:0},e.rules[35].opcodes[2]={type:3,min:0,max:1/0},e.rules[35].opcodes[3]={type:1,children:[4,5,6,7,8]},e.rules[35].opcodes[4]={type:4,index:0},e.rules[35].opcodes[5]={type:4,index:6},e.rules[35].opcodes[6]={type:7,string:[43]},e.rules[35].opcodes[7]={type:7,string:[45]},e.rules[35].opcodes[8]={type:7,string:[46]},e.rules[36].opcodes=[],e.rules[36].opcodes[0]={type:2,children:[1,5,6]},e.rules[36].opcodes[1]={type:3,min:0,max:1},e.rules[36].opcodes[2]={type:2,children:[3,4]},e.rules[36].opcodes[3]={type:4,index:37},e.rules[36].opcodes[4]={type:7,string:[64]},e.rules[36].opcodes[5]={type:4,index:38},e.rules[36].opcodes[6]={type:3,min:0,max:1},e.rules[36].opcodes[7]={type:2,children:[8,9]},e.rules[36].opcodes[8]={type:7,string:[58]},e.rules[36].opcodes[9]={type:4,index:39},e.rules[37].opcodes=[],e.rules[37].opcodes[0]={type:3,min:0,max:1/0},e.rules[37].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[37].opcodes[2]={type:4,index:61},e.rules[37].opcodes[3]={type:4,index:60},e.rules[37].opcodes[4]={type:4,index:64},e.rules[37].opcodes[5]={type:7,string:[58]},e.rules[38].opcodes=[],e.rules[38].opcodes[0]={type:1,children:[1,2,3]},e.rules[38].opcodes[1]={type:4,index:40},e.rules[38].opcodes[2]={type:4,index:45},e.rules[38].opcodes[3]={type:4,index:47},e.rules[39].opcodes=[],e.rules[39].opcodes[0]={type:3,min:0,max:1/0},e.rules[39].opcodes[1]={type:4,index:6},e.rules[40].opcodes=[],e.rules[40].opcodes[0]={type:2,children:[1,2,5]},e.rules[40].opcodes[1]={type:7,string:[91]},e.rules[40].opcodes[2]={type:1,children:[3,4]},e.rules[40].opcodes[3]={type:4,index:42},e.rules[40].opcodes[4]={type:4,index:41},e.rules[40].opcodes[5]={type:7,string:[93]},e.rules[41].opcodes=[],e.rules[41].opcodes[0]={type:2,children:[1,2,4,5]},e.rules[41].opcodes[1]={type:7,string:[118]},e.rules[41].opcodes[2]={type:3,min:1,max:1/0},e.rules[41].opcodes[3]={type:4,index:8},e.rules[41].opcodes[4]={type:7,string:[46]},e.rules[41].opcodes[5]={type:3,min:1,max:1/0},e.rules[41].opcodes[6]={type:1,children:[7,8,9]},e.rules[41].opcodes[7]={type:4,index:61},e.rules[41].opcodes[8]={type:4,index:64},e.rules[41].opcodes[9]={type:7,string:[58]},e.rules[42].opcodes=[],e.rules[42].opcodes[0]={type:1,children:[1,7,14,23,37,51,63,73,83]},e.rules[42].opcodes[1]={type:2,children:[2,6]},e.rules[42].opcodes[2]={type:3,min:6,max:6},e.rules[42].opcodes[3]={type:2,children:[4,5]},e.rules[42].opcodes[4]={type:4,index:43},e.rules[42].opcodes[5]={type:7,string:[58]},e.rules[42].opcodes[6]={type:4,index:44},e.rules[42].opcodes[7]={type:2,children:[8,9,13]},e.rules[42].opcodes[8]={type:7,string:[58,58]},e.rules[42].opcodes[9]={type:3,min:5,max:5},e.rules[42].opcodes[10]={type:2,children:[11,12]},e.rules[42].opcodes[11]={type:4,index:43},e.rules[42].opcodes[12]={type:7,string:[58]},e.rules[42].opcodes[13]={type:4,index:44},e.rules[42].opcodes[14]={type:2,children:[15,17,18,22]},e.rules[42].opcodes[15]={type:3,min:0,max:1},e.rules[42].opcodes[16]={type:4,index:43},e.rules[42].opcodes[17]={type:7,string:[58,58]},e.rules[42].opcodes[18]={type:3,min:4,max:4},e.rules[42].opcodes[19]={type:2,children:[20,21]},e.rules[42].opcodes[20]={type:4,index:43},e.rules[42].opcodes[21]={type:7,string:[58]},e.rules[42].opcodes[22]={type:4,index:44},e.rules[42].opcodes[23]={type:2,children:[24,31,32,36]},e.rules[42].opcodes[24]={type:3,min:0,max:1},e.rules[42].opcodes[25]={type:2,children:[26,30]},e.rules[42].opcodes[26]={type:3,min:0,max:1},e.rules[42].opcodes[27]={type:2,children:[28,29]},e.rules[42].opcodes[28]={type:4,index:43},e.rules[42].opcodes[29]={type:7,string:[58]},e.rules[42].opcodes[30]={type:4,index:43},e.rules[42].opcodes[31]={type:7,string:[58,58]},e.rules[42].opcodes[32]={type:3,min:3,max:3},e.rules[42].opcodes[33]={type:2,children:[34,35]},e.rules[42].opcodes[34]={type:4,index:43},e.rules[42].opcodes[35]={type:7,string:[58]},e.rules[42].opcodes[36]={type:4,index:44},e.rules[42].opcodes[37]={type:2,children:[38,45,46,50]},e.rules[42].opcodes[38]={type:3,min:0,max:1},e.rules[42].opcodes[39]={type:2,children:[40,44]},e.rules[42].opcodes[40]={type:3,min:0,max:2},e.rules[42].opcodes[41]={type:2,children:[42,43]},e.rules[42].opcodes[42]={type:4,index:43},e.rules[42].opcodes[43]={type:7,string:[58]},e.rules[42].opcodes[44]={type:4,index:43},e.rules[42].opcodes[45]={type:7,string:[58,58]},e.rules[42].opcodes[46]={type:3,min:2,max:2},e.rules[42].opcodes[47]={type:2,children:[48,49]},e.rules[42].opcodes[48]={type:4,index:43},e.rules[42].opcodes[49]={type:7,string:[58]},e.rules[42].opcodes[50]={type:4,index:44},e.rules[42].opcodes[51]={type:2,children:[52,59,60,61,62]},e.rules[42].opcodes[52]={type:3,min:0,max:1},e.rules[42].opcodes[53]={type:2,children:[54,58]},e.rules[42].opcodes[54]={type:3,min:0,max:3},e.rules[42].opcodes[55]={type:2,children:[56,57]},e.rules[42].opcodes[56]={type:4,index:43},e.rules[42].opcodes[57]={type:7,string:[58]},e.rules[42].opcodes[58]={type:4,index:43},e.rules[42].opcodes[59]={type:7,string:[58,58]},e.rules[42].opcodes[60]={type:4,index:43},e.rules[42].opcodes[61]={type:7,string:[58]},e.rules[42].opcodes[62]={type:4,index:44},e.rules[42].opcodes[63]={type:2,children:[64,71,72]},e.rules[42].opcodes[64]={type:3,min:0,max:1},e.rules[42].opcodes[65]={type:2,children:[66,70]},e.rules[42].opcodes[66]={type:3,min:0,max:4},e.rules[42].opcodes[67]={type:2,children:[68,69]},e.rules[42].opcodes[68]={type:4,index:43},e.rules[42].opcodes[69]={type:7,string:[58]},e.rules[42].opcodes[70]={type:4,index:43},e.rules[42].opcodes[71]={type:7,string:[58,58]},e.rules[42].opcodes[72]={type:4,index:44},e.rules[42].opcodes[73]={type:2,children:[74,81,82]},e.rules[42].opcodes[74]={type:3,min:0,max:1},e.rules[42].opcodes[75]={type:2,children:[76,80]},e.rules[42].opcodes[76]={type:3,min:0,max:5},e.rules[42].opcodes[77]={type:2,children:[78,79]},e.rules[42].opcodes[78]={type:4,index:43},e.rules[42].opcodes[79]={type:7,string:[58]},e.rules[42].opcodes[80]={type:4,index:43},e.rules[42].opcodes[81]={type:7,string:[58,58]},e.rules[42].opcodes[82]={type:4,index:43},e.rules[42].opcodes[83]={type:2,children:[84,91]},e.rules[42].opcodes[84]={type:3,min:0,max:1},e.rules[42].opcodes[85]={type:2,children:[86,90]},e.rules[42].opcodes[86]={type:3,min:0,max:6},e.rules[42].opcodes[87]={type:2,children:[88,89]},e.rules[42].opcodes[88]={type:4,index:43},e.rules[42].opcodes[89]={type:7,string:[58]},e.rules[42].opcodes[90]={type:4,index:43},e.rules[42].opcodes[91]={type:7,string:[58,58]},e.rules[43].opcodes=[],e.rules[43].opcodes[0]={type:3,min:1,max:4},e.rules[43].opcodes[1]={type:4,index:8},e.rules[44].opcodes=[],e.rules[44].opcodes[0]={type:1,children:[1,5]},e.rules[44].opcodes[1]={type:2,children:[2,3,4]},e.rules[44].opcodes[2]={type:4,index:43},e.rules[44].opcodes[3]={type:7,string:[58]},e.rules[44].opcodes[4]={type:4,index:43},e.rules[44].opcodes[5]={type:4,index:45},e.rules[45].opcodes=[],e.rules[45].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},e.rules[45].opcodes[1]={type:4,index:46},e.rules[45].opcodes[2]={type:7,string:[46]},e.rules[45].opcodes[3]={type:4,index:46},e.rules[45].opcodes[4]={type:7,string:[46]},e.rules[45].opcodes[5]={type:4,index:46},e.rules[45].opcodes[6]={type:7,string:[46]},e.rules[45].opcodes[7]={type:4,index:46},e.rules[46].opcodes=[],e.rules[46].opcodes[0]={type:1,children:[1,2,5,9,13]},e.rules[46].opcodes[1]={type:4,index:6},e.rules[46].opcodes[2]={type:2,children:[3,4]},e.rules[46].opcodes[3]={type:5,min:49,max:57},e.rules[46].opcodes[4]={type:4,index:6},e.rules[46].opcodes[5]={type:2,children:[6,7]},e.rules[46].opcodes[6]={type:7,string:[49]},e.rules[46].opcodes[7]={type:3,min:2,max:2},e.rules[46].opcodes[8]={type:4,index:6},e.rules[46].opcodes[9]={type:2,children:[10,11,12]},e.rules[46].opcodes[10]={type:7,string:[50]},e.rules[46].opcodes[11]={type:5,min:48,max:52},e.rules[46].opcodes[12]={type:4,index:6},e.rules[46].opcodes[13]={type:2,children:[14,15]},e.rules[46].opcodes[14]={type:7,string:[50,53]},e.rules[46].opcodes[15]={type:5,min:48,max:53},e.rules[47].opcodes=[],e.rules[47].opcodes[0]={type:3,min:0,max:1/0},e.rules[47].opcodes[1]={type:1,children:[2,3,4]},e.rules[47].opcodes[2]={type:4,index:61},e.rules[47].opcodes[3]={type:4,index:60},e.rules[47].opcodes[4]={type:4,index:64},e.rules[48].opcodes=[],e.rules[48].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[48].opcodes[1]={type:4,index:49},e.rules[48].opcodes[2]={type:4,index:50},e.rules[48].opcodes[3]={type:4,index:51},e.rules[48].opcodes[4]={type:4,index:52},e.rules[48].opcodes[5]={type:4,index:53},e.rules[49].opcodes=[],e.rules[49].opcodes[0]={type:3,min:0,max:1/0},e.rules[49].opcodes[1]={type:2,children:[2,3]},e.rules[49].opcodes[2]={type:7,string:[47]},e.rules[49].opcodes[3]={type:4,index:54},e.rules[50].opcodes=[],e.rules[50].opcodes[0]={type:2,children:[1,2]},e.rules[50].opcodes[1]={type:7,string:[47]},e.rules[50].opcodes[2]={type:3,min:0,max:1},e.rules[50].opcodes[3]={type:2,children:[4,5]},e.rules[50].opcodes[4]={type:4,index:55},e.rules[50].opcodes[5]={type:3,min:0,max:1/0},e.rules[50].opcodes[6]={type:2,children:[7,8]},e.rules[50].opcodes[7]={type:7,string:[47]},e.rules[50].opcodes[8]={type:4,index:54},e.rules[51].opcodes=[],e.rules[51].opcodes[0]={type:2,children:[1,2]},e.rules[51].opcodes[1]={type:4,index:56},e.rules[51].opcodes[2]={type:3,min:0,max:1/0},e.rules[51].opcodes[3]={type:2,children:[4,5]},e.rules[51].opcodes[4]={type:7,string:[47]},e.rules[51].opcodes[5]={type:4,index:54},e.rules[52].opcodes=[],e.rules[52].opcodes[0]={type:2,children:[1,2]},e.rules[52].opcodes[1]={type:4,index:55},e.rules[52].opcodes[2]={type:3,min:0,max:1/0},e.rules[52].opcodes[3]={type:2,children:[4,5]},e.rules[52].opcodes[4]={type:7,string:[47]},e.rules[52].opcodes[5]={type:4,index:54},e.rules[53].opcodes=[],e.rules[53].opcodes[0]={type:3,min:0,max:0},e.rules[53].opcodes[1]={type:4,index:57},e.rules[54].opcodes=[],e.rules[54].opcodes[0]={type:3,min:0,max:1/0},e.rules[54].opcodes[1]={type:4,index:57},e.rules[55].opcodes=[],e.rules[55].opcodes[0]={type:3,min:1,max:1/0},e.rules[55].opcodes[1]={type:4,index:57},e.rules[56].opcodes=[],e.rules[56].opcodes[0]={type:3,min:1,max:1/0},e.rules[56].opcodes[1]={type:1,children:[2,3,4,5]},e.rules[56].opcodes[2]={type:4,index:61},e.rules[56].opcodes[3]={type:4,index:60},e.rules[56].opcodes[4]={type:4,index:64},e.rules[56].opcodes[5]={type:7,string:[64]},e.rules[57].opcodes=[],e.rules[57].opcodes[0]={type:1,children:[1,2,3,4,5]},e.rules[57].opcodes[1]={type:4,index:61},e.rules[57].opcodes[2]={type:4,index:60},e.rules[57].opcodes[3]={type:4,index:64},e.rules[57].opcodes[4]={type:7,string:[58]},e.rules[57].opcodes[5]={type:7,string:[64]},e.rules[58].opcodes=[],e.rules[58].opcodes[0]={type:3,min:0,max:1/0},e.rules[58].opcodes[1]={type:1,children:[2,3,4]},e.rules[58].opcodes[2]={type:4,index:57},e.rules[58].opcodes[3]={type:7,string:[47]},e.rules[58].opcodes[4]={type:7,string:[63]},e.rules[59].opcodes=[],e.rules[59].opcodes[0]={type:3,min:0,max:1/0},e.rules[59].opcodes[1]={type:1,children:[2,3,4]},e.rules[59].opcodes[2]={type:4,index:57},e.rules[59].opcodes[3]={type:7,string:[47]},e.rules[59].opcodes[4]={type:7,string:[63]},e.rules[60].opcodes=[],e.rules[60].opcodes[0]={type:2,children:[1,2,3]},e.rules[60].opcodes[1]={type:7,string:[37]},e.rules[60].opcodes[2]={type:4,index:8},e.rules[60].opcodes[3]={type:4,index:8},e.rules[61].opcodes=[],e.rules[61].opcodes[0]={type:1,children:[1,2,3,4,5,6]},e.rules[61].opcodes[1]={type:4,index:0},e.rules[61].opcodes[2]={type:4,index:6},e.rules[61].opcodes[3]={type:7,string:[45]},e.rules[61].opcodes[4]={type:7,string:[46]},e.rules[61].opcodes[5]={type:7,string:[95]},e.rules[61].opcodes[6]={type:7,string:[126]},e.rules[62].opcodes=[],e.rules[62].opcodes[0]={type:1,children:[1,2]},e.rules[62].opcodes[1]={type:4,index:63},e.rules[62].opcodes[2]={type:4,index:64},e.rules[63].opcodes=[],e.rules[63].opcodes[0]={type:1,children:[1,2,3,4,5,6,7]},e.rules[63].opcodes[1]={type:7,string:[58]},e.rules[63].opcodes[2]={type:7,string:[47]},e.rules[63].opcodes[3]={type:7,string:[63]},e.rules[63].opcodes[4]={type:7,string:[35]},e.rules[63].opcodes[5]={type:7,string:[91]},e.rules[63].opcodes[6]={type:7,string:[93]},e.rules[63].opcodes[7]={type:7,string:[64]},e.rules[64].opcodes=[],e.rules[64].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},e.rules[64].opcodes[1]={type:7,string:[33]},e.rules[64].opcodes[2]={type:7,string:[36]},e.rules[64].opcodes[3]={type:7,string:[38]},e.rules[64].opcodes[4]={type:7,string:[39]},e.rules[64].opcodes[5]={type:7,string:[40]},e.rules[64].opcodes[6]={type:7,string:[41]},e.rules[64].opcodes[7]={type:7,string:[42]},e.rules[64].opcodes[8]={type:7,string:[43]},e.rules[64].opcodes[9]={type:7,string:[44]},e.rules[64].opcodes[10]={type:7,string:[59]},e.rules[64].opcodes[11]={type:7,string:[61]},e.rules[65].opcodes=[],e.rules[65].opcodes[0]={type:2,children:[1,2,7,8]},e.rules[65].opcodes[1]={type:7,string:[100,110,115,58]},e.rules[65].opcodes[2]={type:3,min:0,max:1},e.rules[65].opcodes[3]={type:2,children:[4,5,6]},e.rules[65].opcodes[4]={type:7,string:[47,47]},e.rules[65].opcodes[5]={type:4,index:66},e.rules[65].opcodes[6]={type:7,string:[47]},e.rules[65].opcodes[7]={type:4,index:67},e.rules[65].opcodes[8]={type:3,min:0,max:1},e.rules[65].opcodes[9]={type:2,children:[10,11]},e.rules[65].opcodes[10]={type:7,string:[63]},e.rules[65].opcodes[11]={type:4,index:68},e.rules[66].opcodes=[],e.rules[66].opcodes[0]={type:2,children:[1,2]},e.rules[66].opcodes[1]={type:4,index:38},e.rules[66].opcodes[2]={type:3,min:0,max:1},e.rules[66].opcodes[3]={type:2,children:[4,5]},e.rules[66].opcodes[4]={type:7,string:[58]},e.rules[66].opcodes[5]={type:4,index:39},e.rules[67].opcodes=[],e.rules[67].opcodes[0]={type:3,min:0,max:1/0},e.rules[67].opcodes[1]={type:4,index:57},e.rules[68].opcodes=[],e.rules[68].opcodes[0]={type:2,children:[1,2]},e.rules[68].opcodes[1]={type:4,index:69},e.rules[68].opcodes[2]={type:3,min:0,max:1},e.rules[68].opcodes[3]={type:2,children:[4,5]},e.rules[68].opcodes[4]={type:7,string:[59]},e.rules[68].opcodes[5]={type:4,index:68},e.rules[69].opcodes=[],e.rules[69].opcodes[0]={type:1,children:[1,4]},e.rules[69].opcodes[1]={type:2,children:[2,3]},e.rules[69].opcodes[2]={type:7,string:[99,108,97,115,115,61]},e.rules[69].opcodes[3]={type:4,index:70},e.rules[69].opcodes[4]={type:2,children:[5,6]},e.rules[69].opcodes[5]={type:7,string:[116,121,112,101,61]},e.rules[69].opcodes[6]={type:4,index:71},e.rules[70].opcodes=[],e.rules[70].opcodes[0]={type:1,children:[1,3,4]},e.rules[70].opcodes[1]={type:3,min:1,max:1/0},e.rules[70].opcodes[2]={type:4,index:6},e.rules[70].opcodes[3]={type:7,string:[105,110]},e.rules[70].opcodes[4]={type:7,string:[99,104]},e.rules[71].opcodes=[],e.rules[71].opcodes[0]={type:1,children:[1,3,4,5]},e.rules[71].opcodes[1]={type:3,min:1,max:1/0},e.rules[71].opcodes[2]={type:4,index:6},e.rules[71].opcodes[3]={type:7,string:[97]},e.rules[71].opcodes[4]={type:7,string:[110,115]},e.rules[71].opcodes[5]={type:7,string:[109,100]},e.rules[72].opcodes=[],e.rules[72].opcodes[0]={type:1,children:[1,2]},e.rules[72].opcodes[1]={type:4,index:75},e.rules[72].opcodes[2]={type:4,index:78},e.rules[73].opcodes=[],e.rules[73].opcodes[0]={type:6,string:[101,105,112,49,53,53]},e.rules[74].opcodes=[],e.rules[74].opcodes[0]={type:3,min:1,max:32},e.rules[74].opcodes[1]={type:4,index:6},e.rules[75].opcodes=[],e.rules[75].opcodes[0]={type:2,children:[1,2,3]},e.rules[75].opcodes[1]={type:4,index:73},e.rules[75].opcodes[2]={type:7,string:[58]},e.rules[75].opcodes[3]={type:4,index:74},e.rules[76].opcodes=[],e.rules[76].opcodes[0]={type:6,string:[115,111,108,97,110,97]},e.rules[77].opcodes=[],e.rules[77].opcodes[0]={type:1,children:[1,2,3,4]},e.rules[77].opcodes[1]={type:6,string:[109,97,105,110,110,101,116]},e.rules[77].opcodes[2]={type:6,string:[116,101,115,116,110,101,116]},e.rules[77].opcodes[3]={type:6,string:[100,101,118,110,101,116]},e.rules[77].opcodes[4]={type:6,string:[108,111,99,97,108,110,101,116]},e.rules[78].opcodes=[],e.rules[78].opcodes[0]={type:2,children:[1,2,3]},e.rules[78].opcodes[1]={type:4,index:76},e.rules[78].opcodes[2]={type:7,string:[58]},e.rules[78].opcodes[3]={type:4,index:77},e.rules[79].opcodes=[],e.rules[79].opcodes[0]={type:1,children:[1,2]},e.rules[79].opcodes[1]={type:4,index:81},e.rules[79].opcodes[2]={type:4,index:83},e.rules[80].opcodes=[],e.rules[80].opcodes[0]={type:2,children:[1,2]},e.rules[80].opcodes[1]={type:7,string:[48,120]},e.rules[80].opcodes[2]={type:3,min:40,max:40},e.rules[80].opcodes[3]={type:4,index:8},e.rules[81].opcodes=[],e.rules[81].opcodes[0]={type:2,children:[1,2,3]},e.rules[81].opcodes[1]={type:4,index:75},e.rules[81].opcodes[2]={type:7,string:[58]},e.rules[81].opcodes[3]={type:4,index:80},e.rules[82].opcodes=[],e.rules[82].opcodes[0]={type:3,min:32,max:44},e.rules[82].opcodes[1]={type:1,children:[2,3,4,5,6,7]},e.rules[82].opcodes[2]={type:5,min:49,max:57},e.rules[82].opcodes[3]={type:5,min:65,max:72},e.rules[82].opcodes[4]={type:5,min:74,max:78},e.rules[82].opcodes[5]={type:5,min:80,max:90},e.rules[82].opcodes[6]={type:5,min:97,max:107},e.rules[82].opcodes[7]={type:5,min:109,max:122},e.rules[83].opcodes=[],e.rules[83].opcodes[0]={type:2,children:[1,2,3]},e.rules[83].opcodes[1]={type:4,index:78},e.rules[83].opcodes[2]={type:7,string:[58]},e.rules[83].opcodes[3]={type:4,index:82},e.rules[84].opcodes=[],e.rules[84].opcodes[0]={type:1,children:[1,2]},e.rules[84].opcodes[1]={type:4,index:85},e.rules[84].opcodes[2]={type:4,index:86},e.rules[85].opcodes=[],e.rules[85].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,36,41]},e.rules[85].opcodes[1]={type:4,index:87},e.rules[85].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,69,116,104,101,114,101,117,109,32,97,99,99,111,117,110,116,58]},e.rules[85].opcodes[3]={type:4,index:10},e.rules[85].opcodes[4]={type:4,index:81},e.rules[85].opcodes[5]={type:4,index:10},e.rules[85].opcodes[6]={type:4,index:10},e.rules[85].opcodes[7]={type:3,min:0,max:1},e.rules[85].opcodes[8]={type:2,children:[9,10]},e.rules[85].opcodes[9]={type:4,index:89},e.rules[85].opcodes[10]={type:4,index:10},e.rules[85].opcodes[11]={type:4,index:10},e.rules[85].opcodes[12]={type:6,string:[85,82,73,58,32]},e.rules[85].opcodes[13]={type:4,index:90},e.rules[85].opcodes[14]={type:4,index:10},e.rules[85].opcodes[15]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[85].opcodes[16]={type:4,index:91},e.rules[85].opcodes[17]={type:4,index:10},e.rules[85].opcodes[18]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[85].opcodes[19]={type:4,index:75},e.rules[85].opcodes[20]={type:4,index:10},e.rules[85].opcodes[21]={type:6,string:[78,111,110,99,101,58,32]},e.rules[85].opcodes[22]={type:4,index:93},e.rules[85].opcodes[23]={type:4,index:10},e.rules[85].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[85].opcodes[25]={type:4,index:94},e.rules[85].opcodes[26]={type:3,min:0,max:1},e.rules[85].opcodes[27]={type:2,children:[28,29,30]},e.rules[85].opcodes[28]={type:4,index:10},e.rules[85].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[85].opcodes[30]={type:4,index:95},e.rules[85].opcodes[31]={type:3,min:0,max:1},e.rules[85].opcodes[32]={type:2,children:[33,34,35]},e.rules[85].opcodes[33]={type:4,index:10},e.rules[85].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[85].opcodes[35]={type:4,index:96},e.rules[85].opcodes[36]={type:3,min:0,max:1},e.rules[85].opcodes[37]={type:2,children:[38,39,40]},e.rules[85].opcodes[38]={type:4,index:10},e.rules[85].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[85].opcodes[40]={type:4,index:97},e.rules[85].opcodes[41]={type:3,min:0,max:1},e.rules[85].opcodes[42]={type:2,children:[43,44,45]},e.rules[85].opcodes[43]={type:4,index:10},e.rules[85].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[85].opcodes[45]={type:4,index:98},e.rules[86].opcodes=[],e.rules[86].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,31,36,41]},e.rules[86].opcodes[1]={type:4,index:87},e.rules[86].opcodes[2]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,83,111,108,97,110,97,32,97,99,99,111,117,110,116,58]},e.rules[86].opcodes[3]={type:4,index:10},e.rules[86].opcodes[4]={type:4,index:83},e.rules[86].opcodes[5]={type:4,index:10},e.rules[86].opcodes[6]={type:4,index:10},e.rules[86].opcodes[7]={type:3,min:0,max:1},e.rules[86].opcodes[8]={type:2,children:[9,10]},e.rules[86].opcodes[9]={type:4,index:89},e.rules[86].opcodes[10]={type:4,index:10},e.rules[86].opcodes[11]={type:4,index:10},e.rules[86].opcodes[12]={type:6,string:[85,82,73,58,32]},e.rules[86].opcodes[13]={type:4,index:90},e.rules[86].opcodes[14]={type:4,index:10},e.rules[86].opcodes[15]={type:6,string:[86,101,114,115,105,111,110,58,32]},e.rules[86].opcodes[16]={type:4,index:91},e.rules[86].opcodes[17]={type:4,index:10},e.rules[86].opcodes[18]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},e.rules[86].opcodes[19]={type:4,index:78},e.rules[86].opcodes[20]={type:4,index:10},e.rules[86].opcodes[21]={type:6,string:[78,111,110,99,101,58,32]},e.rules[86].opcodes[22]={type:4,index:93},e.rules[86].opcodes[23]={type:4,index:10},e.rules[86].opcodes[24]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},e.rules[86].opcodes[25]={type:4,index:94},e.rules[86].opcodes[26]={type:3,min:0,max:1},e.rules[86].opcodes[27]={type:2,children:[28,29,30]},e.rules[86].opcodes[28]={type:4,index:10},e.rules[86].opcodes[29]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},e.rules[86].opcodes[30]={type:4,index:95},e.rules[86].opcodes[31]={type:3,min:0,max:1},e.rules[86].opcodes[32]={type:2,children:[33,34,35]},e.rules[86].opcodes[33]={type:4,index:10},e.rules[86].opcodes[34]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},e.rules[86].opcodes[35]={type:4,index:96},e.rules[86].opcodes[36]={type:3,min:0,max:1},e.rules[86].opcodes[37]={type:2,children:[38,39,40]},e.rules[86].opcodes[38]={type:4,index:10},e.rules[86].opcodes[39]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},e.rules[86].opcodes[40]={type:4,index:97},e.rules[86].opcodes[41]={type:3,min:0,max:1},e.rules[86].opcodes[42]={type:2,children:[43,44,45]},e.rules[86].opcodes[43]={type:4,index:10},e.rules[86].opcodes[44]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},e.rules[86].opcodes[45]={type:4,index:98},e.rules[87].opcodes=[],e.rules[87].opcodes[0]={type:4,index:66},e.rules[88].opcodes=[],e.rules[88].opcodes[0]={type:1,children:[1,2]},e.rules[88].opcodes[1]={type:4,index:81},e.rules[88].opcodes[2]={type:4,index:83},e.rules[89].opcodes=[],e.rules[89].opcodes[0]={type:3,min:1,max:1/0},e.rules[89].opcodes[1]={type:1,children:[2,3,4]},e.rules[89].opcodes[2]={type:4,index:62},e.rules[89].opcodes[3]={type:4,index:61},e.rules[89].opcodes[4]={type:7,string:[32]},e.rules[90].opcodes=[],e.rules[90].opcodes[0]={type:4,index:29},e.rules[91].opcodes=[],e.rules[91].opcodes[0]={type:7,string:[49]},e.rules[92].opcodes=[],e.rules[92].opcodes[0]={type:1,children:[1,2]},e.rules[92].opcodes[1]={type:4,index:75},e.rules[92].opcodes[2]={type:4,index:78},e.rules[93].opcodes=[],e.rules[93].opcodes[0]={type:3,min:8,max:1/0},e.rules[93].opcodes[1]={type:1,children:[2,3]},e.rules[93].opcodes[2]={type:4,index:0},e.rules[93].opcodes[3]={type:4,index:6},e.rules[94].opcodes=[],e.rules[94].opcodes[0]={type:4,index:28},e.rules[95].opcodes=[],e.rules[95].opcodes[0]={type:4,index:28},e.rules[96].opcodes=[],e.rules[96].opcodes[0]={type:4,index:28},e.rules[97].opcodes=[],e.rules[97].opcodes[0]={type:3,min:0,max:1/0},e.rules[97].opcodes[1]={type:4,index:57},e.rules[98].opcodes=[],e.rules[98].opcodes[0]={type:3,min:0,max:1/0},e.rules[98].opcodes[1]={type:2,children:[2,3,4]},e.rules[98].opcodes[2]={type:4,index:10},e.rules[98].opcodes[3]={type:7,string:[45,32]},e.rules[98].opcodes[4]={type:4,index:29},e.toString=()=>{let t="";return t+=`; ==============================================================================
`,t+=`; Core rules for ABNF (RFC 5234)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc5234#appendix-B.1
`,t+=`
`,t+=`ALPHA          =  %x41-5A / %x61-7A
`,t+=`               ; A-Z / a-z
`,t+=`
`,t+=`BIT            =  "0" / "1"
`,t+=`
`,t+=`CHAR           =  %x01-7F
`,t+=`               ; any 7-bit US-ASCII character,
`,t+=`               ;  excluding NUL
`,t+=`
`,t+=`CR             =  %x0D
`,t+=`               ; carriage return
`,t+=`
`,t+=`CRLF           =  CR LF
`,t+=`               ; Internet standard newline
`,t+=`
`,t+=`CTL            =  %x00-1F / %x7F
`,t+=`               ; controls
`,t+=`
`,t+=`DIGIT          =  %x30-39
`,t+=`               ; 0-9
`,t+=`
`,t+=`DQUOTE         =  %x22
`,t+=`               ; " (Double Quote)
`,t+=`
`,t+=`HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,t+=`
`,t+=`HTAB           =  %x09
`,t+=`               ; horizontal tab
`,t+=`
`,t+=`LF             =  %x0A
`,t+=`               ; linefeed
`,t+=`
`,t+=`LWSP           =  *(WSP / CRLF WSP)
`,t+=`               ; Use of this linear-white-space rule
`,t+=`               ;  permits lines containing only white
`,t+=`               ;  space that are no longer legal in
`,t+=`               ;  mail headers and have caused
`,t+=`               ;  interoperability problems in other
`,t+=`               ;  contexts.
`,t+=`               ; Do not use when defining mail
`,t+=`               ;  headers and use with caution in
`,t+=`               ;  other contexts.
`,t+=`
`,t+=`OCTET          =  %x00-FF
`,t+=`               ; 8 bits of data
`,t+=`
`,t+=`SP             =  %x20
`,t+=`
`,t+=`VCHAR          =  %x21-7E
`,t+=`               ; visible (printing) characters
`,t+=`
`,t+=`WSP            =  SP / HTAB
`,t+=`               ; white space
`,t+=`; ==============================================================================
`,t+=`; Internet Date/Time Format (RFC 3339)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc3339#section-5.6
`,t+=`
`,t+=`date-fullyear   = 4DIGIT
`,t+=`
`,t+=`date-month      = 2DIGIT  ; 01-12
`,t+=`
`,t+=`date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
`,t+=`                          ; month/year
`,t+=`
`,t+=`time-hour       = 2DIGIT  ; 00-23
`,t+=`
`,t+=`time-minute     = 2DIGIT  ; 00-59
`,t+=`
`,t+=`time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
`,t+=`                          ; rules
`,t+=`
`,t+=`time-secfrac    = "." 1*DIGIT
`,t+=`
`,t+=`time-numoffset  = ("+" / "-") time-hour ":" time-minute
`,t+=`
`,t+=`time-offset     = "Z" / time-numoffset
`,t+=`
`,t+=`partial-time    = time-hour ":" time-minute ":" time-second
`,t+=`                  [time-secfrac]
`,t+=`
`,t+=`full-date       = date-fullyear "-" date-month "-" date-mday
`,t+=`
`,t+=`full-time       = partial-time time-offset
`,t+=`
`,t+=`date-time       = full-date "T" full-time
`,t+=`; ==============================================================================
`,t+=`; Uniform Resource Identifier (RFC 3986)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc3986#appendix-A
`,t+=`
`,t+=`URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]
`,t+=`
`,t+=`hier-part     = "//" authority path-abempty
`,t+=`              / path-absolute
`,t+=`              / path-rootless
`,t+=`              / path-empty
`,t+=`
`,t+=`URI-reference = URI / relative-ref
`,t+=`
`,t+=`absolute-URI  = scheme ":" hier-part [ "?" query ]
`,t+=`
`,t+=`relative-ref  = relative-part [ "?" query ] [ "#" fragment ]
`,t+=`
`,t+=`relative-part = "//" authority path-abempty
`,t+=`              / path-absolute
`,t+=`              / path-noscheme
`,t+=`              / path-empty
`,t+=`
`,t+=`scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )
`,t+=`
`,t+=`authority     = [ userinfo "@" ] host [ ":" port ]
`,t+=`userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
`,t+=`host          = IP-literal / IPv4address / reg-name
`,t+=`port          = *DIGIT
`,t+=`
`,t+=`IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"
`,t+=`
`,t+=`IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )
`,t+=`
`,t+=`IPv6address   =                            6( h16 ":" ) ls32
`,t+=`              /                       "::" 5( h16 ":" ) ls32
`,t+=`              / [               h16 ] "::" 4( h16 ":" ) ls32
`,t+=`              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
`,t+=`              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
`,t+=`              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
`,t+=`              / [ *4( h16 ":" ) h16 ] "::"              ls32
`,t+=`              / [ *5( h16 ":" ) h16 ] "::"              h16
`,t+=`              / [ *6( h16 ":" ) h16 ] "::"
`,t+=`
`,t+=`h16           = 1*4HEXDIG
`,t+=`ls32          = ( h16 ":" h16 ) / IPv4address
`,t+=`IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
`,t+=`dec-octet     = DIGIT                 ; 0-9
`,t+=`              / %x31-39 DIGIT         ; 10-99
`,t+=`              / "1" 2DIGIT            ; 100-199
`,t+=`              / "2" %x30-34 DIGIT     ; 200-249
`,t+=`              / "25" %x30-35          ; 250-255
`,t+=`
`,t+=`reg-name      = *( unreserved / pct-encoded / sub-delims )
`,t+=`
`,t+=`path          = path-abempty    ; begins with "/" or is empty
`,t+=`              / path-absolute   ; begins with "/" but not "//"
`,t+=`              / path-noscheme   ; begins with a non-colon segment
`,t+=`              / path-rootless   ; begins with a segment
`,t+=`              / path-empty      ; zero characters
`,t+=`
`,t+=`path-abempty  = *( "/" segment )
`,t+=`path-absolute = "/" [ segment-nz *( "/" segment ) ]
`,t+=`path-noscheme = segment-nz-nc *( "/" segment )
`,t+=`path-rootless = segment-nz *( "/" segment )
`,t+=`path-empty    = 0pchar
`,t+=`
`,t+=`segment       = *pchar
`,t+=`segment-nz    = 1*pchar
`,t+=`segment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / "@" )
`,t+=`; non-zero-length segment without any colon ":"
`,t+=`
`,t+=`pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"
`,t+=`
`,t+=`query         = *( pchar / "/" / "?" )
`,t+=`
`,t+=`fragment      = *( pchar / "/" / "?" )
`,t+=`
`,t+=`pct-encoded   = "%" HEXDIG HEXDIG
`,t+=`
`,t+=`unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
`,t+=`reserved      = gen-delims / sub-delims
`,t+=`gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
`,t+=`sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
`,t+=`              / "*" / "+" / "," / ";" / "="
`,t+=`; ==============================================================================
`,t+=`; DNS URI (RFC 4501)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`; - uri.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://www.rfc-editor.org/rfc/rfc4501.html#section-3
`,t+=`;
`,t+=`; Note:
`,t+=`; dnsclassval and dnstypeval are not defined exhaustively
`,t+=`; but their definitions are unused in SIW grammars.
`,t+=`
`,t+=`
`,t+=`dnsurl          = "dns:" [ "//" dnsauthority "/" ]
`,t+=`                  dnsname ["?" dnsquery]
`,t+=`
`,t+=`dnsauthority    = host [ ":" port ]
`,t+=`                ; See RFC 3986 for the
`,t+=`                ; definition of "host" and "port".
`,t+=`
`,t+=`dnsname         = *pchar
`,t+=`                ; See RFC 3986 for the
`,t+=`                ; definition of "pchar".
`,t+=`
`,t+=`                ; The "dnsname" field may be a
`,t+=`                ; "relative" or "absolute" name,
`,t+=`                ; as per RFC 1034, section 3.1.
`,t+=`
`,t+=`                ; Note further that an empty
`,t+=`                ; "dnsname" value is to be
`,t+=`                ; interpreted as the root itself.
`,t+=`                ; See below on relative dnsnames.
`,t+=`
`,t+=`dnsquery        = dnsqueryelement [";" dnsquery]
`,t+=`
`,t+=`dnsqueryelement = ( "CLASS=" dnsclassval ) / ( "TYPE=" dnstypeval )
`,t+=`                ; Each clause MUST NOT be used more
`,t+=`                ; than once.
`,t+=`
`,t+=`dnsclassval     = 1*digit / "IN" / "CH"
`,t+=`                ; omitted:
`,t+=`                ; / <Any IANA registered DNS class mnemonic>
`,t+=`
`,t+=`dnstypeval      = 1*digit / "A" / "NS" / "MD"
`,t+=`                ; omitted:
`,t+=`                ; / <Any IANA registered DNS type mnemonic>
`,t+=`; ==============================================================================
`,t+=`; Chain-agnostic IDs (CAIP-2)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md#syntax
`,t+=`
`,t+=`chain-id        = eth-chain-id
`,t+=`                / sol-chain-id
`,t+=`                ; NOTE: Only Ethereum and Solana are supported at the moment
`,t+=`
`,t+=`
`,t+=`; Ethereum
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`eth-namespace   = %s"eip155"
`,t+=`                ; The chain-id namespace for evm chains
`,t+=`
`,t+=`eth-network-id  = 1*32DIGIT
`,t+=`                ; Accept up to 32 digits. Could probably be lowered
`,t+=`
`,t+=`eth-chain-id    = eth-namespace ":" eth-network-id
`,t+=`                ; Examples:
`,t+=`                ; - eip155:1   (eth mainnet)
`,t+=`                ; - eip155:137 (polygon mainnet)
`,t+=`
`,t+=`; Solana
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`sol-namespace   = %s"solana"
`,t+=`                ; The chain-id namespace for solana
`,t+=`
`,t+=`sol-network-id  = %s"mainnet" / %s"testnet" / %s"devnet" / %s"localnet"
`,t+=`                ; This enumeration comes from https://github.com/solana-labs/wallet-standard/blob/master/packages/core/chains/src/index.ts
`,t+=`
`,t+=`sol-chain-id    = sol-namespace ":" sol-network-id
`,t+=`                ; Examples:
`,t+=`                ; - solana:mainnet (solana mainnet)
`,t+=`                ; - solana:testnet (solana testnet)
`,t+=`; ==============================================================================
`,t+=`; Chain-agnostic account identifiers (CAIP-10)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`; - chain-id.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md#syntax
`,t+=`
`,t+=`account-id      = eth-account-id
`,t+=`                / sol-account-id
`,t+=`                ; NOTE: Only Ethereum and Solana are supported at the moment
`,t+=`
`,t+=`; Ethereum
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`eth-address     = "0x" 40HEXDIG
`,t+=`                ; Must also conform to captilization
`,t+=`                ; checksum encoding specified in EIP-55
`,t+=`                ; where applicable (EOAs).
`,t+=`
`,t+=`eth-account-id  = eth-chain-id ":" eth-address
`,t+=`                ; See CAIP-2 for definition of "eth-chain-id"
`,t+=`                ; Examples:
`,t+=`                ; - eip155:1:0xb9c5714089478a327f09197987f16f9e5d936e8a   (eth mainnet)
`,t+=`                ; - eip155:137:0xb9c5714089478a327f09197987f16f9e5d936e8a (polygon mainnet)
`,t+=`
`,t+=`; Solana
`,t+=`; ------------------------------------------------------------------------------
`,t+=`
`,t+=`sol-address     = 32*44( %x31-39 / %x41-48 / %x4A-4E / %x50-5A / %x61-6B / %x6D-7A )
`,t+=`                ; Valid Solana addresses are 32-44 base58-encoded chars: 1-9 / A-H / J-N / P-Z / a-k / m-z
`,t+=`                ; Note: this doesn't validate whether the address is "on the curve"
`,t+=`
`,t+=`sol-account-id  = sol-chain-id ":" sol-address
`,t+=`                ; See CAIP-2 for definition of "sol-chain-id"
`,t+=`                ; Examples:
`,t+=`                ; - solana:mainnet:FYpB58cLw5cwiN763ayB2sFT8HLF2MRUBbbyRgHYiRpK (solana mainnet)
`,t+=`                ; - solana:testnet:QhnBSSbjScn9VHBBqwosy99icpeJrW4iuEwkJ3d9Fn9  (solana testnet)
`,t+=`; ==============================================================================
`,t+=`; Sign in with X (CAIP-122)
`,t+=`; ==============================================================================
`,t+=`;
`,t+=`; Requires:
`,t+=`; - core.bnf
`,t+=`; - datetime.bnf
`,t+=`; - uri.bnf
`,t+=`; - dns.bnf
`,t+=`; - chain-id.bnf
`,t+=`; - account-id.bnf
`,t+=`;
`,t+=`; References:
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-2.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-10.md#syntax
`,t+=`; - https://github.com/ChainAgnostic/CAIPs/blob/master/CAIPs/caip-122.md
`,t+=`;
`,t+=`; Note:
`,t+=`; Currently, this grammar file only supports the Ethereum and Solana blockchains
`,t+=`
`,t+=`sign-in-with-x = sign-in-with-eth
`,t+=`               / sign-in-with-sol
`,t+=`
`,t+=`; Ethereum
`,t+=`;-----------------------------------------------------------------------------
`,t+=`
`,t+=`sign-in-with-eth =
`,t+=`  message-domain %s" wants you to sign in with your Ethereum account:" LF
`,t+=`  eth-account-id LF
`,t+=`  LF
`,t+=`  [ message-statement LF ]
`,t+=`  LF
`,t+=`  %s"URI: " message-uri LF
`,t+=`  %s"Version: " message-version LF
`,t+=`  %s"Chain ID: " eth-chain-id LF
`,t+=`  %s"Nonce: " message-nonce LF
`,t+=`  %s"Issued At: " message-issued-at
`,t+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,t+=`  [ LF %s"Not Before: " message-not-before ]
`,t+=`  [ LF %s"Request ID: " message-request-id ]
`,t+=`  [ LF %s"Resources:" message-resources ]
`,t+=`
`,t+=`; Solana
`,t+=`;-----------------------------------------------------------------------------
`,t+=`
`,t+=`sign-in-with-sol =
`,t+=`  message-domain %s" wants you to sign in with your Solana account:" LF
`,t+=`  sol-account-id LF
`,t+=`  LF
`,t+=`  [ message-statement LF ]
`,t+=`  LF
`,t+=`  %s"URI: " message-uri LF
`,t+=`  %s"Version: " message-version LF
`,t+=`  %s"Chain ID: " sol-chain-id LF
`,t+=`  %s"Nonce: " message-nonce LF
`,t+=`  %s"Issued At: " message-issued-at
`,t+=`  [ LF %s"Expiration Time: " message-expiration-time ]
`,t+=`  [ LF %s"Not Before: " message-not-before ]
`,t+=`  [ LF %s"Request ID: " message-request-id ]
`,t+=`  [ LF %s"Resources:" message-resources ]
`,t+=`
`,t+=`; Common
`,t+=`;-----------------------------------------------------------------------------
`,t+=`
`,t+=`message-domain          = dnsauthority ; CAIP-10 spec defines domain as dnsauthority unlike EIP-4361, which uses authority
`,t+=`message-address         = eth-account-id / sol-account-id ; See CAIP-10 for address identifier definition
`,t+=`message-statement       = 1*( reserved / unreserved / " " )
`,t+=`message-uri             = URI
`,t+=`message-version         = "1"
`,t+=`message-chain-id        = eth-chain-id / sol-chain-id
`,t+=`message-nonce           = 8*( ALPHA / DIGIT )
`,t+=`message-issued-at       = date-time
`,t+=`message-expiration-time = date-time
`,t+=`message-not-before      = date-time
`,t+=`message-request-id      = *pchar
`,t+=`message-resources       = *( LF "- " URI )
`,t},e}c();p();var ct=(e,t)=>(r,n,s,o,a)=>(r===200&&(a[e]=t(n,s,o,a)),300);var{apgLib:hn}=globalThis;function cs(e,t){let r=new hn.parser;r.stats=new hn.stats,r.trace=new hn.trace,r.ast=new hn.ast;let n=hn.utils.charsToString,s=(x,g,y)=>new Date(n(x,g,y)),o=(x,g,y)=>new URL(n(x,g,y));r.ast.callbacks["message-domain"]=ct("domain",n),r.ast.callbacks["message-address"]=ct("address",n),r.ast.callbacks["message-statement"]=ct("statement",n),r.ast.callbacks["message-uri"]=ct("uri",o),r.ast.callbacks["message-version"]=ct("version",n),r.ast.callbacks["message-chain-id"]=ct("chainId",n),r.ast.callbacks["message-nonce"]=ct("nonce",n),r.ast.callbacks["message-issued-at"]=ct("issuedAt",s),r.ast.callbacks["message-expiration-time"]=ct("expirationTime",s),r.ast.callbacks["message-not-before"]=ct("notBefore",s),r.ast.callbacks["message-request-id"]=ct("requestId",n),r.ast.callbacks["message-resources"]=ct("resources",(x,g,y)=>y?n(x,g,y).slice(3).split(`
- `).map(A=>new URL(A)):[]),e==="sign-in-with-x"&&(r.ast.callbacks["eth-account-id"]=r.ast.callbacks["message-address"],r.ast.callbacks["eth-chain-id"]=r.ast.callbacks["message-chain-id"],r.ast.callbacks["sol-account-id"]=r.ast.callbacks["message-address"],r.ast.callbacks["sol-chain-id"]=r.ast.callbacks["message-chain-id"]);let a=null;switch(e){case"sign-in-with-ethereum":a=pa;break;case"sign-in-with-solana":a=da;break;case"sign-in-with-x":a=la;break}if(!a)throw new Error(`Could not find grammar for ${e}`);let d=a(),u=r.parse(d,e,t);if(!u.success){let g=u.maxMatched+1,y=t.slice(0,g),A=y.split(`
`),S=A[A.length-1].length-1,v=[y,S>-1?" ".repeat(S)+"^":"^"].join(`
`);return{success:!1,error:new Error(v)}}let h={type:e};return r.ast.translate(h),{success:!0,data:h}}c();p();c();p();var ua={ADDRESS_MISMATCH:"address",DOMAIN_MISMATCH:"domain",URI_MISMATCH:"uri",CHAIN_ID_MISMATCH:"chainId",ISSUED_TOO_FAR_IN_THE_PAST:"issuedAt",ISSUED_TOO_FAR_IN_THE_FUTURE:"issuedAt",EXPIRED:"expirationTime",EXPIRES_BEFORE_ISSUANCE:"expirationTime",VALID_AFTER_EXPIRATION:"notBefore"};var fn=re(Tt()),ou={eth:{hexToCAIP2:e=>`eip155:${parseInt(e,16)}`,getBufferedGasLimit(e){return"0x"+new Rr(Kc(new Rr(e))).toString(16)}},sol:{chainIdToCAIP2:et,chainIdToCluster:vc,serializeSolanaSignInMessage(e,{expectedChainId:t,expectedAddress:r,expectedURL:n}){let s=e.domain||n.host,o=e.address||r,a=`${s} wants you to sign in with your Solana account:
`;a+=`${o}`,e.statement&&(a+=`

${e.statement}`);let d=[];if(e.uri&&d.push(`URI: ${e.uri}`),e.version&&d.push(`Version: ${e.version}`),e.chainId&&d.push(`Chain ID: ${e.chainId}`),e.nonce&&d.push(`Nonce: ${e.nonce}`),e.issuedAt&&d.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&d.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&d.push(`Not Before: ${e.notBefore}`),e.requestId&&d.push(`Request ID: ${e.requestId}`),e.resources){d.push("Resources:");for(let g of e.resources)d.push(`- ${g}`)}d.length&&(a+=`

${d.join(`
`)}`);let u=cs("sign-in-with-solana",a);if(!u.success)return{type:"fail",data:fn.default.encode(Buffer.from(a)),error:[{label:"PARSE_ERROR",message:u.error.message}]};let h=1e3*60*10,x=as(u.data,{expectedAddress:r,expectedURL:n,expectedChainId:t,issuedAtThreshold:h});return x.length?{type:"fail",data:fn.default.encode(Buffer.from(a)),error:x.map(g=>({label:ua[g],message:`siwsErrorMessage_${g}`}))}:{type:"success",data:fn.default.encode(Buffer.from(a))}},base58Encode:e=>fn.default.encode(e)},getFaviconURL:zn,parseURL:Kn,getOrigin:Wn,getHostname:Sp,getOriginAndHostname:Mr};var Ga={};Ie(Ga,{addTrustedApp:()=>au,btc:()=>ba,deleteTrustedApp:()=>cu,disableAutoConfirm:()=>Iu,enableAutoConfirm:()=>Eu,eth:()=>ga,fetchAutoConfirmSupportedNetworks:()=>Bu,getAutoConfirmStatus:()=>Cu,getMetaMaskOverrideSetting:()=>pu,getUser:()=>_u,isTrustedApp:()=>du,isUserOnboarded:()=>vu,login:()=>Ru,logout:()=>ku,navigate:()=>yu,onboardQuickly:()=>xu,openNotificationCenter:()=>wu,openTokenChat:()=>bu,openUserProfile:()=>Su,requestUserApproval:()=>fu,requestUserOnboard:()=>Au,setMetaMaskOverrideSetting:()=>gu,sol:()=>xa,sui:()=>$a});c();p();c();p();c();p();var Rt=class{storage;target;numListeners;unsubscribeFromStorageChanges;constructor(t){this.storage=t,this.target=new EventTarget,this.numListeners={revoked:0},this.unsubscribeFromStorageChanges=null}async get(t){return(await Br(this.storage)).apps[t]??{}}async add(t,r,n){let s=await Br(this.storage),o=s?.apps?.[t]?.[r]??{},a={...s?.apps[t]??{},[r]:{...o,...n}},d={...s.apps,[t]:a},u={...s,apps:d};return await Fs(this.storage,u)}async delete(t,r){let n=await Br(this.storage),s={...n?.apps[t]??{}};delete s[r];let o={...n.apps,[t]:s},a={...n,apps:o};return await Fs(this.storage,a)}dispatchEvent({type:t,data:r}){let n=new Event(t);n.data=r,this.target.dispatchEvent(n)}removeEventListener(t,r){this.target.removeEventListener(t,r),this.numListeners[t]--,Object.values(this.numListeners).reduce((s,o)=>s+o,0)===0&&(this.unsubscribeFromStorageChanges?.(),this.unsubscribeFromStorageChanges=null)}addEventListener(t,r){this.target.addEventListener(t,r),this.numListeners[t]++,Object.values(this.numListeners).reduce((s,o)=>s+o,0)===1&&(this.unsubscribeFromStorageChanges=this.subscribeToStorageChanges())}subscribeToStorageChanges(){let t=null,r=Br(this.storage);return this.storage.subscribe(async n=>{if(n!==Oc)return;let s=await Br(this.storage);if(t??await r){let o=this.getRevokedApps(t??await r,s);for(let a of o)try{this.dispatchEvent({type:"revoked",data:a})}catch(d){le.captureError(d,"trustedApps")}}t=s})}getRevokedApps(t,r){let n=[],s=Object.entries(t.apps);for(let[o,a]of s){let d=Object.entries(a);for(let[u,h]of d)r.apps[o]?.[u]||n.push({origin:u,accountId:o})}return n}};c();p();var dg=new Error("There is no currently selected account"),iu=new _e,fe=async()=>{let e=await Nc(xe,iu,await Bn(iu));if(!e)throw dg;return e};var lg=new _e,ug=new Rt(lg),au=async(e,t)=>{let r=(await fe()).identifier;await ug.add(r,e,{dappMeta:{appUrl:t.url.origin,title:t.title,imageUrl:t.icon?.toString()},lastConnectedTimestamp:Date.now()})};c();p();var mg=new _e,hg=new Rt(mg),cu=async e=>{let t=(await fe()).identifier;await hg.delete(t,e)};c();p();var fg=new _e,pu=async()=>await ur(fg);c();p();var gg=new _e,yg=new Rt(gg),du=async e=>{let t=(await fe()).identifier;return!!(await yg.get(t))[e]};c();p();var ps=re(St());c();p();var uu=re(St());var lu=30,ma=class{findPopupIfExists=async()=>{try{le.addBreadcrumb("NotificationManager","focusPopupIfExists","debug");let t=await fp();for(let r of t){if(typeof r.id!="number"){le.addBreadcrumb("NotificationManager","popup has no id","debug");continue}if(r.type!=="popup"){le.addBreadcrumb("NotificationManager","found a non-popup type window","error");continue}let n=!1;if(r.tabs?.length===1){let[s]=r.tabs;if(s.url){let o=new URL(s.url).hostname,a=uu.default.runtime.id;n=o===a}}if(!n){le.addBreadcrumb("NotificationManager","popup tab url does not have the extension origin","debug");continue}return r.id}return}catch(t){le.addBreadcrumb("NotificationManager","failed to get open popups","error"),le.captureError(t instanceof Error?t:new Error("failed to get open popups"),"provider");return}};showNotificationPopupAsync=async()=>{le.addBreadcrumb("NotificationManager","showNotificationPopupAsync","debug");let t=await this.findPopupIfExists();t&&await hp(t);let r=0,n=0;try{let o=await mp();if(o.top!==void 0&&o.left!==void 0&&o.width!==void 0&&o.height!==void 0)n=o.top,r=o.left+o.width-an;else throw new Error("Couldn't get last focused window")}catch(o){le.addBreadcrumb("NotificationManager","failed to get last focused window","error"),le.captureError(o instanceof Error?o:new Error("failed to get last focused window"),"provider");let{screenX:a,screenY:d,outerWidth:u}=self;n=Math.max(d,0),r=Math.max(a+(u-an),0)}let s;try{s=await zs({url:"notification.html",type:"popup",width:an,height:Zs+lu,left:r,top:n,focused:!0})}catch{n=0,r=0,s=await zs({url:"notification.html",type:"popup",width:an,height:Zs+lu,left:r,top:n,focused:!0})}if(!s){let o=new Error("Could not open new popup notification");throw le.captureError(o,"provider"),o}try{(s.left!==r||s.top!==n)&&s.id&&s.state!=="fullscreen"&&await up(s.id,r,n)}catch(o){le.addBreadcrumb("NotificationManager","failed to update window position","error"),le.captureError(o instanceof Error?o:new Error("failed to update window position"),"provider")}return s}},mu=new ma;var xg=(e,t,r)=>{if(typeof r!="string")throw new Error("message must be a string");try{let s=Vt(r);console.log("> Received message from popup:",s);let o=lr[t].response.parse(s);if(o.id===e)return o}catch(s){console.error(s)}throw new Error("RPC response ID does not match RPC request ID")},hu=(e,t,r)=>async n=>await xg(t,r,n),wg=async(e,t,r)=>{let n=!1,o=ps.default.runtime.connect({name:"popup/sidepanel"}),a=hu(o,e,t);return new Promise((d,u)=>{o.postMessage(r),o.onMessage.addListener(async h=>{o.onMessage.removeListener(a);try{let x=await a(h);return n=!0,o.disconnect(),d(x)}catch(x){return u(x)}}),o.onDisconnect.addListener(()=>{if(!n)return o.onMessage.removeListener(a),i.userRejectedRequest(e)})})},bg=async(e,t,r)=>{let n=await mu.showNotificationPopupAsync();if(!n)return i.resourceUnavailable(e);let s=n.id;if(typeof s!="number")throw new Error("No notification window id");let o=`notification/${s}`,a=`${jn()}/notification.html`;return await new Promise((d,u)=>{let h=!1,x=g=>{let y=hu(g,e,t);g.name===o&&g.sender&&g.sender.tab?.url===a&&(g.onMessage.addListener(async S=>{try{let v=await y(S);return h=!0,g.disconnect(),g.onMessage.removeListener(y),d(v)}catch(v){return u(v)}}),g.onDisconnect.addListener(()=>{h||(g.onMessage.removeListener(y),d(i.userRejectedRequest(e))),ps.default.runtime.onConnect.removeListener(x)}),g.postMessage(r))};ps.default.runtime.onConnect.addListener(x)})},fu=async e=>{let[t]=e.params,r=t.icon??void 0,n=await Tp(),s=kp(t.url),o=Ct({url:s,req:e,icon:r});return n?wg(e.id,e.method,o):bg(e.id,e.method,o)};c();p();var Sg=new _e,gu=async e=>await Fc(Sg,e);c();p();var yu=()=>{};c();p();var xu=()=>{throw new Error("This method is unsupported on extension.")};c();p();var wu=()=>{throw new Error("This method is unsupported on extension.")};c();p();var bu=()=>{throw new Error("This method is unsupported on extension.")};c();p();var Su=()=>{throw new Error("This method is unsupported on extension.")};c();p();var vu=async()=>!0;c();p();var Au=async()=>{throw new Error("not implemented")};c();p();var _u=()=>Promise.resolve(null);c();p();var Ru=()=>Promise.resolve();c();p();var ku=()=>Promise.resolve();c();p();c();p();var Tu=re(St());var vg=new _e,ha=class extends Rp{constructor(){super(vg)}async isTabFocused(t){this.executedChecksAudit.push("IS_TAB_FOCUSED");let n=(await Tu.default.tabs.query({active:!0,lastFocusedWindow:!0}))[0]?.url;return n?new URL(n).hostname===new URL(t).hostname:!1}async isFeatureEnabled(){return this.executedChecksAudit.push("IS_FEATURE_FLAG_ENABLED"),await Cn.isFeatureEnabledAsync("kill-automatic-approval")!==!0}async isWalletUnlocked(){return this.executedChecksAudit.push("IS_WALLET_UNLOCKED"),!!He()}},Ke=new ha;var Eu=async(e,t)=>{let r=(await fe()).identifier,n=await Ke.fetchAutoConfirmSupportedNetworks(e),{enabled:s}=await Ke.getAutoConfirmStatus({origin:e,accountIdentifier:r});if(s)return;let o=[];t&&t.length>0?o=t.filter(a=>n.includes(a)):o=n,await Ke.enableAutoConfirm({origin:e,accountIdentifier:r,networkIDs:o}),await Gt.invalidateQueries({queryKey:Kt.trustedApps()}),await Gt.invalidateQueries({queryKey:Kt.allAutoConfirm(r)}),await Gt.invalidateQueries({queryKey:Kt.autoConfirm(r,e)})};c();p();var Iu=async e=>{let t=(await fe()).identifier,{enabled:r}=await Ke.getAutoConfirmStatus({origin:e,accountIdentifier:t});r&&(await Ke.disableAutoConfirm({origin:e,accountIdentifier:t}),await Gt.invalidateQueries({queryKey:Kt.trustedApps()}),await Gt.invalidateQueries({queryKey:Kt.allAutoConfirm(t)}),await Gt.invalidateQueries({queryKey:Kt.autoConfirm(t,e)}))};c();p();var Cu=async e=>{let t=(await fe()).identifier,{enabled:r,networkIDs:n}=await Ke.getAutoConfirmStatus({origin:e,accountIdentifier:t});return{enabled:r,networks:n}};c();p();var Bu=async e=>await Ke.fetchAutoConfirmSupportedNetworks(e);var ga={};Ie(ga,{addChain:()=>Lu,autoConfirmValidateMessage:()=>Uu,autoConfirmValidateTransaction:()=>Nu,doesSupportEth:()=>Du,getAccountNonce:()=>qu,getAccounts:()=>Ou,getEnabledChains:()=>Hu,getNetworkId:()=>Wr,getRpcURL:()=>Fu,getSelectedAccount:()=>Wu,getSupportedNetworks:()=>ju,sendTransaction:()=>zu,signAndSendTransaction:()=>Ku,signMessage:()=>$u,signTypedData:()=>Gu,switchChain:()=>Yu});c();p();c();p();var Lu=async e=>{let t=parseInt(e.chainId.substring(2),16);return!!Cr(t)};c();p();c();p();c();p();var ds={};c();p();var fa=[new _e];async function Pu(){for(let e of fa){let t=await e.get("developerMode");if(t)return t.isDeveloperMode}return!1}var Wr=async e=>{if(await Pu()){let o=(await qc(fa)).eip155;if(!o)throw new Error("No evm developer mode chainId set");let a=o.replace("eip155:","");return Ns(a)}let r=ds[e]??"eip155:1",n=Ye.getEVMNetworkIDValue(r);return Ns(n.toString())};var Uu=async(e,t)=>{let r=await Wr(e.origin);if(!r)return{status:"UNSUPPORTED_NETWORK_ID"};let n=Ir(r);if(!Ye.isEVMNetworkID(n))return{status:"UNSUPPORTED_NETWORK_ID"};let s=await fe(),o=await Ce(s,"eip155"),a=zt(tt.language)??"en",d=await Te.getDeviceId();return await Ke.isEthMessageAutoConfirmable({url:e,networkID:n,data:t,account:s,userAccountAddress:o,accountIdentifier:s.identifier},{locale:a,deviceId:d})};c();p();var Nu=async(e,t)=>{let r=t[0]?.chainId;if(!r)return{status:"UNSUPPORTED_NETWORK_ID"};let n=Ir(r);if(!Ye.isEVMNetworkID(n))return{status:"UNSUPPORTED_NETWORK_ID"};let s=await fe(),o=await Ce(s,"eip155"),a=zt(tt.language)??"en",d=await Te.getDeviceId();return Ke.isEthTransactionAutoConfirmable({url:e,networkID:n,data:t,account:s,userAccountAddress:o,accountIdentifier:s.identifier},{locale:a,deviceId:d})};c();p();var Du=async()=>(await fe()).addresses.some(t=>t.addressType==="eip155");c();p();var Ag=new _e,qu=async(e,t)=>{let r=parseInt(e.replace("0x",""),16),n=Cr(r);if(!n)throw new Error(`Unsupported EVM Network ID: ${r}`);return np(n,t,Ag)};c();p();var Ou=async()=>{let e=await fe();return[Ce(e,"eip155").toLowerCase()]};c();p();var Hu=async(e=!1)=>{let t=new _e,r=await Bn(t),n=await t.get("developerMode");return e?r.enabledNetworkIDs.map(In):n?.isDeveloperMode===!0?r.enabledTestnetOnlyNetworkIDs.map(In):r.enabledMainnetOnlyNetworkIDs.map(In)};c();p();var Fu=async e=>{let t=En.parse(`eip155:${parseInt(e,16)}`);if(!Ye.isEVMNetworkID(t))throw new Error(`Invalid EVM NetworkID for chainID: ${e}`);let r=Ye.getRpcProxyUrl(t);if(!r)throw new Error(`No RPC URL found for chainID ${e}`);return r};c();p();var Wu=async()=>{let e=await fe();return Ce(e,"eip155").toLowerCase()};c();p();var ju=()=>_c();c();p();c();p();var _g=new _e,ls=async(e,t)=>{let r=await fe();Ce(r,"eip155");let n=tt.t("transactionsAppInteraction"),s=En.parse(`eip155:${e.chainId?parseInt(e.chainId,16):void 0}`),o=Lc(e.to??"",void 0,void 0,5),a=$c(e.value??"",Ye.getTokenDecimals(s)),d=Ye.getTokenSymbol(s);if(e.nonce===void 0)throw new Error("nonce missing on unsigned transaction");if(e.maxFeePerGas==null||e.maxPriorityFeePerGas==null){let x=(await zc(s,!0))?.standard;if(x)e.maxFeePerGas==null&&(e.maxFeePerGas=`0x${x.maxFeePerGas.integerValue(Rr.ROUND_CEIL).toString(16)}`),e.maxPriorityFeePerGas==null&&(e.maxPriorityFeePerGas=`0x${x.maxPriorityFeePerGas.integerValue(Rr.ROUND_CEIL).toString(16)}`);else throw new Error("Standard transaction speed price information is missing.")}let u={accountSigner:xe,accountIdentifier:r.identifier,networkID:s,unsignedTransaction:e,callPayload:void 0,pendingTransactionInput:{ownerAddress:e.from,networkID:s,data:{nonce:e.nonce,hash:"",unsignedTransaction:oc.parse({from:e.from})},type:"dappInteraction",display:{summary:{topLeft:{text:n},topRight:{text:a?`- ${a} ${d}`:""}},detail:{uiRecipient:o}}},storage:_g};return t?await sp({...u,signature:t}):await op(u)};var zu=ls;c();p();var Ku=ls;c();p();var $u=async e=>{let t=Ep(e),r=await fe();Ce(r,"eip155");let n=await xe.sign(r.identifier,{chainType:"eip155",signingType:"message",message:t});if(n.status==="error")throw new Error(`[${n.type}] ${n.message}`);return n.signature};c();p();var Gu=async e=>{let t=await fe();Ce(t,"eip155");let r=await xe.sign(t.identifier,{chainType:"eip155",signingType:"typedData",...e});if(r.status==="error")throw new Error(`[${r.type}] ${r.message}`);return r.signature};c();p();var Yu=async(e,t)=>{let r=parseInt(e.substring(2),16),n=Cr(r);return n?(ds[t]=n,!0):!1};var xa={};Ie(xa,{addPriorityFee:()=>Xu,autoConfirmValidateMessage:()=>Ju,autoConfirmValidateTransaction:()=>Qu,getNetworkId:()=>st,getSelectedAccount:()=>em,handleSolanaPayTransaction:()=>cm,handleSolanaPayTransfer:()=>pm,sendAllTransactions:()=>sm,sendTransaction:()=>rm,signAllTransactions:()=>us,signMessage:()=>im,signTransaction:()=>am});c();p();c();p();c();p();var st=async()=>{let e=await fe(),t=Bc(e,"solana").networkID;return Ye.getSolanaNetworkIDValue(t)};var Xu=async e=>{let{transaction:t}=mt.deserializeVersionedTransaction(e);t.version==="legacy"&&(t=mt.deserializeWithVersion({transaction:e,type:"legacy"}).transaction);let r=await st(),n=await rp(t,{connection:$t(et(r)),calculators:{cost:tp,budget:new ep(2e5,2e5)}});return mt.serialize(n).transaction};c();p();var Ju=async(e,t)=>{let r=await st();if(r==="localnet")return{status:"UNSUPPORTED_NETWORK_ID"};let n=await fe(),s=await Ce(n,"solana"),o=zt(tt.language)??"en",a=await Te.getDeviceId();return Ke.isSolMessageAutoConfirmable({url:e,data:t,networkID:et(r),account:n,userAccountAddress:s,accountIdentifier:n.identifier??""},{locale:o,deviceId:a})};c();p();var Qu=async(e,t)=>{let r=await st();if(r==="localnet")return{status:"UNSUPPORTED_NETWORK_ID"};let n=await fe(),s=await Ce(n,"solana"),o=zt(tt.language)??"en",a=await Te.getDeviceId();return Ke.isSolTransactionAutoConfirmable({url:e,networkID:et(r),data:t,account:n,userAccountAddress:s,accountIdentifier:n.identifier??""},{locale:o,deviceId:a})};c();p();var em=async()=>{let e=await fe();return Ce(e,"solana")};c();p();var tm=re(Tt());var rm=async(e,t)=>{let r=await st(),n=jt.VersionedMessage.deserializeMessageVersion(tm.default.decode(Tr(e))),s=mt.deserializeWithVersion({transaction:e,type:n}),o;t?.method&&(o={"x-phantom-method":t.method}),await ap({connection:$t(et(r),o),signedTx:s.transaction,opts:t})};c();p();var nm=re(Tt());var sm=async(e,t)=>{let r=await st(),n=$t(et(r)),s=e.map(o=>{let a=jt.VersionedMessage.deserializeMessageVersion(nm.default.decode(Tr(o)));return mt.deserializeWithVersion({transaction:o,type:a}).transaction});return await cp({connection:n,signedTxs:s,opts:t})};c();p();var om=re(Tt());var im=async e=>{let t=await fe();Ce(t,"solana");let r=om.default.decode(e).toString("utf-8"),n=await xe.sign(t.identifier,{chainType:"solana",signingType:"message",message:r});if(n.status!=="success")throw new Error(`[${n.type}] ${n.message}`);return n.signature};c();p();c();p();var ya=re(Tt());var Rg=new _e,us=async e=>{let t=await fe();Ce(t,"solana");let r=Ce(t,"solana"),n=await st(),s={ownerAddress:r,networkID:et(n),data:{signature:""},type:"dappInteraction",display:{summary:{topLeft:{text:tt.t("transactionsPendingAppInteraction")}}}};return(async()=>{let a=[];for(let d=0;d<e.length;d++){let u=e[d],h=jt.VersionedMessage.deserializeMessageVersion(ya.default.decode(Tr(u))),x=mt.deserializeWithVersion({transaction:u,type:h}),g=await pp({pendingTransactionInput:s,accountIdentifier:t.identifier,feePayer:new Ae.PublicKey(r),connection:$t(et(n)),accountSigner:xe,transaction:x.transaction,storage:Rg}),y=mt.serialize(g);a.push({transaction:y.transaction,signature:ya.default.encode(dc(g)[0]),version:"version"in g?g.version:"legacy"})}return a})()};var am=async e=>(await us([e]))[0];c();p();var cm=async()=>{};c();p();var pm=async()=>!1;var ba={};Ie(ba,{getSelectedAccount:()=>ms,signMessage:()=>lm,signPSBT:()=>dm});c();p();c();p();var ms=async()=>{let e=await fe();return wa(e)},wa=e=>{let t=e.addresses.filter(s=>s.networkID==="bip122:000000000019d6689c085ae165831e93"||s.networkID==="bip122:000000000933ea01ad0ee984209779ba");if(t.length===0)throw Ic;if(t.length===1){let[s]=t;if(!s?.publicKey)throw new Error("[btc provider] selected account account does not have a public key");return[{address:s.address,publicKey:Buffer.from(s.publicKey).toString("hex"),addressType:s.addressType,purpose:"payment"},{address:s.address,publicKey:Buffer.from(s.publicKey).toString("hex"),addressType:s.addressType,purpose:"ordinals"}]}let r=t.find(s=>s.addressType==="bip122_p2tr");if(!r?.publicKey)throw new Error("[btc provider] ordinalAddress does not have a public key");let n=t.find(s=>s.addressType==="bip122_p2wpkh");if(!n?.publicKey)throw new Error("[btc provider] paymentAddress does not have a public key");return[{address:n.address,publicKey:Buffer.from(n.publicKey).toString("hex"),addressType:n.addressType,purpose:"payment"},{address:r.address,publicKey:Buffer.from(r.publicKey).toString("hex"),addressType:r.addressType,purpose:"ordinals"}]};c();p();var dm=async(e,t)=>{let r=await fe(),n=await xe.sign(r.identifier,{chainType:"bip122_p2tr",signingType:"transaction",message:Buffer.from(e).toString("hex"),inputsToSign:t.inputsToSign,finalize:t.finalize});if(n.status==="error")throw new Error(`[${n.type}] ${n.message}`);return Buffer.from(n.signature,"hex")};c();p();var lm=async(e,t)=>{let r=await fe(),n=Ac("bip122:000000000019d6689c085ae165831e93",e),s=await xe.sign(r.identifier,{chainType:n,signingType:"message",message:t});if(s.status==="error")throw new Error(`[btc provider][${s.type}] ${s.message}`);let o=s.message;if(!o)throw new Error("[btc provider] no message on vault response");return{signature:Buffer.from(s.signature,"hex"),signedMessage:o}};var $a={};Ie($a,{getSelectedAccount:()=>Ms,getSuiAddressWithPubkey:()=>vn,signAndExecuteTransaction:()=>Ym,signMessage:()=>Gm,signTransaction:()=>$m});c();p();c();p();c();p();c();p();c();p();c();p();function Tg(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let s=BigInt(32),o=BigInt(4294967295),a=Number(r>>s&o),d=Number(r&o),u=n?4:0,h=n?0:4;e.setUint32(t+u,a,n),e.setUint32(t+h,d,n)}var um=(e,t,r)=>e&t^~e&r,mm=(e,t,r)=>e&t^e&r^t&r,jr=class extends Dn{constructor(t,r,n,s){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Pn(this.buffer)}update(t){Lr(this);let{view:r,buffer:n,blockLen:s}=this;t=Nn(t);let o=t.length;for(let a=0;a<o;){let d=Math.min(s-this.pos,o-a);if(d===s){let u=Pn(t);for(;s<=o-a;a+=s)this.process(u,a);continue}n.set(t.subarray(a,a+d),this.pos),this.pos+=d,a+=d,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Lr(this),Jc(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:o}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(n,0),a=0);for(let g=a;g<s;g++)r[g]=0;Tg(n,s-8,BigInt(this.length*8),o),this.process(n,0);let d=Pn(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=u/4,x=this.get();if(h>x.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<h;g++)d.setUint32(4*g,x[g],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:o,destroyed:a,pos:d}=this;return t.length=s,t.pos=d,t.finished=o,t.destroyed=a,s%r&&t.buffer.set(n),t}};var[Eg,Ig]=be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),er=new Uint32Array(80),tr=new Uint32Array(80),Sa=class extends jr{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:r,Bh:n,Bl:s,Ch:o,Cl:a,Dh:d,Dl:u,Eh:h,El:x,Fh:g,Fl:y,Gh:A,Gl:S,Hh:v,Hl:f}=this;return[t,r,n,s,o,a,d,u,h,x,g,y,A,S,v,f]}set(t,r,n,s,o,a,d,u,h,x,g,y,A,S,v,f){this.Ah=t|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=o|0,this.Cl=a|0,this.Dh=d|0,this.Dl=u|0,this.Eh=h|0,this.El=x|0,this.Fh=g|0,this.Fl=y|0,this.Gh=A|0,this.Gl=S|0,this.Hh=v|0,this.Hl=f|0}process(t,r){for(let E=0;E<16;E++,r+=4)er[E]=t.getUint32(r),tr[E]=t.getUint32(r+=4);for(let E=16;E<80;E++){let C=er[E-15]|0,N=tr[E-15]|0,M=be.rotrSH(C,N,1)^be.rotrSH(C,N,8)^be.shrSH(C,N,7),J=be.rotrSL(C,N,1)^be.rotrSL(C,N,8)^be.shrSL(C,N,7),$=er[E-2]|0,Z=tr[E-2]|0,ge=be.rotrSH($,Z,19)^be.rotrBH($,Z,61)^be.shrSH($,Z,6),te=be.rotrSL($,Z,19)^be.rotrBL($,Z,61)^be.shrSL($,Z,6),ne=be.add4L(J,te,tr[E-7],tr[E-16]),W=be.add4H(ne,M,ge,er[E-7],er[E-16]);er[E]=W|0,tr[E]=ne|0}let{Ah:n,Al:s,Bh:o,Bl:a,Ch:d,Cl:u,Dh:h,Dl:x,Eh:g,El:y,Fh:A,Fl:S,Gh:v,Gl:f,Hh:_,Hl:I}=this;for(let E=0;E<80;E++){let C=be.rotrSH(g,y,14)^be.rotrSH(g,y,18)^be.rotrBH(g,y,41),N=be.rotrSL(g,y,14)^be.rotrSL(g,y,18)^be.rotrBL(g,y,41),M=g&A^~g&v,J=y&S^~y&f,$=be.add5L(I,N,J,Ig[E],tr[E]),Z=be.add5H($,_,C,M,Eg[E],er[E]),ge=$|0,te=be.rotrSH(n,s,28)^be.rotrBH(n,s,34)^be.rotrBH(n,s,39),ne=be.rotrSL(n,s,28)^be.rotrBL(n,s,34)^be.rotrBL(n,s,39),W=n&o^n&d^o&d,q=s&a^s&u^a&u;_=v|0,I=f|0,v=A|0,f=S|0,A=g|0,S=y|0,{h:g,l:y}=be.add(h|0,x|0,Z|0,ge|0),h=d|0,x=u|0,d=o|0,u=a|0,o=n|0,a=s|0;let D=be.add3L(ge,ne,q);n=be.add3H(D,Z,te,W),s=D|0}({h:n,l:s}=be.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:o,l:a}=be.add(this.Bh|0,this.Bl|0,o|0,a|0),{h:d,l:u}=be.add(this.Ch|0,this.Cl|0,d|0,u|0),{h,l:x}=be.add(this.Dh|0,this.Dl|0,h|0,x|0),{h:g,l:y}=be.add(this.Eh|0,this.El|0,g|0,y|0),{h:A,l:S}=be.add(this.Fh|0,this.Fl|0,A|0,S|0),{h:v,l:f}=be.add(this.Gh|0,this.Gl|0,v|0,f|0),{h:_,l:I}=be.add(this.Hh|0,this.Hl|0,_|0,I|0),this.set(n,s,o,a,d,u,h,x,g,y,A,S,v,f,_,I)}roundClean(){er.fill(0),tr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var hm=qn(()=>new Sa);c();p();c();p();c();p();var fs={};Ie(fs,{aInRange:()=>ot,abool:()=>gt,abytes:()=>Vr,bitGet:()=>Ug,bitLen:()=>ka,bitMask:()=>yn,bitSet:()=>Ng,bytesToHex:()=>Nt,bytesToNumberBE:()=>Dt,bytesToNumberLE:()=>nr,concatBytes:()=>qt,createHmacDrbg:()=>Ta,ensureBytes:()=>Fe,equalBytes:()=>Mg,hexToBytes:()=>wr,hexToNumber:()=>Ra,inRange:()=>gn,isBytes:()=>rr,memoized:()=>Sr,notImplemented:()=>qg,numberToBytesBE:()=>sr,numberToBytesLE:()=>br,numberToHexUnpadded:()=>xr,numberToVarBytesBE:()=>Lg,utf8ToBytes:()=>Pg,validateObject:()=>kt});c();p();var _a=BigInt(0),hs=BigInt(1),Cg=BigInt(2);function rr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Vr(e){if(!rr(e))throw new Error("Uint8Array expected")}function gt(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}var Bg=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Nt(e){Vr(e);let t="";for(let r=0;r<e.length;r++)t+=Bg[e[r]];return t}function xr(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Ra(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}var Ut={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function fm(e){if(e>=Ut._0&&e<=Ut._9)return e-Ut._0;if(e>=Ut._A&&e<=Ut._F)return e-(Ut._A-10);if(e>=Ut._a&&e<=Ut._f)return e-(Ut._a-10)}function wr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let s=0,o=0;s<r;s++,o+=2){let a=fm(e.charCodeAt(o)),d=fm(e.charCodeAt(o+1));if(a===void 0||d===void 0){let u=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}n[s]=a*16+d}return n}function Dt(e){return Ra(Nt(e))}function nr(e){return Vr(e),Ra(Nt(Uint8Array.from(e).reverse()))}function sr(e,t){return wr(e.toString(16).padStart(t*2,"0"))}function br(e,t){return sr(e,t).reverse()}function Lg(e){return wr(xr(e))}function Fe(e,t,r){let n;if(typeof t=="string")try{n=wr(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(rr(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${e} expected ${r} bytes, got ${s}`);return n}function qt(...e){let t=0;for(let n=0;n<e.length;n++){let s=e[n];Vr(s),t+=s.length}let r=new Uint8Array(t);for(let n=0,s=0;n<e.length;n++){let o=e[n];r.set(o,s),s+=o.length}return r}function Mg(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return r===0}function Pg(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}var va=e=>typeof e=="bigint"&&_a<=e;function gn(e,t,r){return va(e)&&va(t)&&va(r)&&t<=e&&e<r}function ot(e,t,r,n){if(!gn(t,r,n))throw new Error(`expected valid ${e}: ${r} <= n < ${n}, got ${typeof t} ${t}`)}function ka(e){let t;for(t=0;e>_a;e>>=hs,t+=1);return t}function Ug(e,t){return e>>BigInt(t)&hs}function Ng(e,t,r){return e|(r?hs:_a)<<BigInt(t)}var yn=e=>(Cg<<BigInt(e-1))-hs,Aa=e=>new Uint8Array(e),gm=e=>Uint8Array.from(e);function Ta(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Aa(e),s=Aa(e),o=0,a=()=>{n.fill(1),s.fill(0),o=0},d=(...g)=>r(s,n,...g),u=(g=Aa())=>{s=d(gm([0]),g),n=d(),g.length!==0&&(s=d(gm([1]),g),n=d())},h=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let g=0,y=[];for(;g<t;){n=d();let A=n.slice();y.push(A),g+=n.length}return qt(...y)};return(g,y)=>{a(),u(g);let A;for(;!(A=y(h()));)u();return a(),A}}var Dg={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||rr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function kt(e,t,r={}){let n=(s,o,a)=>{let d=Dg[o];if(typeof d!="function")throw new Error(`Invalid validator "${o}", expected function`);let u=e[s];if(!(a&&u===void 0)&&!d(u,e))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${o}`)};for(let[s,o]of Object.entries(t))n(s,o,!1);for(let[s,o]of Object.entries(r))n(s,o,!0);return e}var qg=()=>{throw new Error("not implemented")};function Sr(e){let t=new WeakMap;return(r,...n)=>{let s=t.get(r);if(s!==void 0)return s;let o=e(r,...n);return t.set(r,o),o}}var $e=BigInt(0),Oe=BigInt(1),vr=BigInt(2),Og=BigInt(3),Ea=BigInt(4),ym=BigInt(5),xm=BigInt(8),Hg=BigInt(9),Fg=BigInt(16);function Ue(e,t){let r=e%t;return r>=$e?r:t+r}function Wg(e,t,r){if(r<=$e||t<$e)throw new Error("Expected power/modulo > 0");if(r===Oe)return $e;let n=Oe;for(;t>$e;)t&Oe&&(n=n*e%r),e=e*e%r,t>>=Oe;return n}function yt(e,t,r){let n=e;for(;t-- >$e;)n*=n,n%=r;return n}function gs(e,t){if(e===$e||t<=$e)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Ue(e,t),n=t,s=$e,o=Oe,a=Oe,d=$e;for(;r!==$e;){let h=n/r,x=n%r,g=s-a*h,y=o-d*h;n=r,r=x,s=a,o=d,a=g,d=y}if(n!==Oe)throw new Error("invert: does not exist");return Ue(s,t)}function jg(e){let t=(e-Oe)/vr,r,n,s;for(r=e-Oe,n=0;r%vr===$e;r/=vr,n++);for(s=vr;s<e&&Wg(s,t,e)!==e-Oe;s++);if(n===1){let a=(e+Oe)/Ea;return function(u,h){let x=u.pow(h,a);if(!u.eql(u.sqr(x),h))throw new Error("Cannot find square root");return x}}let o=(r+Oe)/vr;return function(d,u){if(d.pow(u,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let h=n,x=d.pow(d.mul(d.ONE,s),r),g=d.pow(u,o),y=d.pow(u,r);for(;!d.eql(y,d.ONE);){if(d.eql(y,d.ZERO))return d.ZERO;let A=1;for(let v=d.sqr(y);A<h&&!d.eql(v,d.ONE);A++)v=d.sqr(v);let S=d.pow(x,Oe<<BigInt(h-A-1));x=d.sqr(S),g=d.mul(g,S),y=d.mul(y,x),h=A}return g}}function Vg(e){if(e%Ea===Og){let t=(e+Oe)/Ea;return function(n,s){let o=n.pow(s,t);if(!n.eql(n.sqr(o),s))throw new Error("Cannot find square root");return o}}if(e%xm===ym){let t=(e-ym)/xm;return function(n,s){let o=n.mul(s,vr),a=n.pow(o,t),d=n.mul(s,a),u=n.mul(n.mul(d,vr),a),h=n.mul(d,n.sub(u,n.ONE));if(!n.eql(n.sqr(h),s))throw new Error("Cannot find square root");return h}}return e%Fg,jg(e)}var wm=(e,t)=>(Ue(e,t)&Oe)===Oe,zg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ia(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=zg.reduce((n,s)=>(n[s]="function",n),t);return kt(e,r)}function Kg(e,t,r){if(r<$e)throw new Error("Expected power > 0");if(r===$e)return e.ONE;if(r===Oe)return t;let n=e.ONE,s=t;for(;r>$e;)r&Oe&&(n=e.mul(n,s)),s=e.sqr(s),r>>=Oe;return n}function $g(e,t){let r=new Array(t.length),n=t.reduce((o,a,d)=>e.is0(a)?o:(r[d]=o,e.mul(o,a)),e.ONE),s=e.inv(n);return t.reduceRight((o,a,d)=>e.is0(a)?o:(r[d]=e.mul(o,r[d]),e.mul(o,a)),s),r}function Ca(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function or(e,t,r=!1,n={}){if(e<=$e)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:s,nByteLength:o}=Ca(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=Vg(e),d=Object.freeze({ORDER:e,BITS:s,BYTES:o,MASK:yn(s),ZERO:$e,ONE:Oe,create:u=>Ue(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return $e<=u&&u<e},is0:u=>u===$e,isOdd:u=>(u&Oe)===Oe,neg:u=>Ue(-u,e),eql:(u,h)=>u===h,sqr:u=>Ue(u*u,e),add:(u,h)=>Ue(u+h,e),sub:(u,h)=>Ue(u-h,e),mul:(u,h)=>Ue(u*h,e),pow:(u,h)=>Kg(d,u,h),div:(u,h)=>Ue(u*gs(h,e),e),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>gs(u,e),sqrt:n.sqrt||(u=>a(d,u)),invertBatch:u=>$g(d,u),cmov:(u,h,x)=>x?h:u,toBytes:u=>r?br(u,o):sr(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return r?nr(u):Dt(u)}});return Object.freeze(d)}function bm(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Ba(e){let t=bm(e);return t+Math.ceil(t/2)}function Sm(e,t,r=!1){let n=e.length,s=bm(t),o=Ba(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let a=r?Dt(e):nr(e),d=Ue(a,t-Oe)+Oe;return r?br(d,s):sr(d,s)}var Yg=BigInt(0),La=BigInt(1),Ma=new WeakMap,vm=new WeakMap;function ys(e,t){let r=(o,a)=>{let d=a.negate();return o?d:a},n=o=>{if(!Number.isSafeInteger(o)||o<=0||o>t)throw new Error(`Wrong window size=${o}, should be [1..${t}]`)},s=o=>{n(o);let a=Math.ceil(t/o)+1,d=2**(o-1);return{windows:a,windowSize:d}};return{constTimeNegate:r,unsafeLadder(o,a){let d=e.ZERO,u=o;for(;a>Yg;)a&La&&(d=d.add(u)),u=u.double(),a>>=La;return d},precomputeWindow(o,a){let{windows:d,windowSize:u}=s(a),h=[],x=o,g=x;for(let y=0;y<d;y++){g=x,h.push(g);for(let A=1;A<u;A++)g=g.add(x),h.push(g);x=g.double()}return h},wNAF(o,a,d){let{windows:u,windowSize:h}=s(o),x=e.ZERO,g=e.BASE,y=BigInt(2**o-1),A=2**o,S=BigInt(o);for(let v=0;v<u;v++){let f=v*h,_=Number(d&y);d>>=S,_>h&&(_-=A,d+=La);let I=f,E=f+Math.abs(_)-1,C=v%2!==0,N=_<0;_===0?g=g.add(r(C,a[I])):x=x.add(r(N,a[E]))}return{p:x,f:g}},wNAFCached(o,a,d){let u=vm.get(o)||1,h=Ma.get(o);return h||(h=this.precomputeWindow(o,u),u!==1&&Ma.set(o,d(h))),this.wNAF(u,h,a)},setWindowSize(o,a){n(a),vm.set(o,a),Ma.delete(o)}}}function xs(e,t,r,n){if(!Array.isArray(r)||!Array.isArray(n)||n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((x,g)=>{if(!t.isValid(x))throw new Error(`wrong scalar at index ${g}`)}),r.forEach((x,g)=>{if(!(x instanceof e))throw new Error(`wrong point at index ${g}`)});let s=ka(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,d=new Array(a+1).fill(e.ZERO),u=Math.floor((t.BITS-1)/o)*o,h=e.ZERO;for(let x=u;x>=0;x-=o){d.fill(e.ZERO);for(let y=0;y<n.length;y++){let A=n[y],S=Number(A>>BigInt(x)&BigInt(a));d[S]=d[S].add(r[y])}let g=e.ZERO;for(let y=d.length-1,A=e.ZERO;y>0;y--)A=A.add(d[y]),g=g.add(A);if(h=h.add(g),x!==0)for(let y=0;y<o;y++)h=h.double()}return h}function xn(e){return Ia(e.Fp),kt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ca(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var xt=BigInt(0),it=BigInt(1),ws=BigInt(2),Zg=BigInt(8),Xg={zip215:!0};function Jg(e){let t=xn(e);return kt(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Am(e){let t=Jg(e),{Fp:r,n,prehash:s,hash:o,randomBytes:a,nByteLength:d,h:u}=t,h=ws<<BigInt(d*8)-it,x=r.create,g=or(t.n,t.nBitLength),y=t.uvRatio||((P,L)=>{try{return{isValid:!0,value:r.sqrt(P*r.inv(L))}}catch{return{isValid:!1,value:xt}}}),A=t.adjustScalarBytes||(P=>P),S=t.domain||((P,L,U)=>{if(gt("phflag",U),L.length||U)throw new Error("Contexts/pre-hash are not supported");return P});function v(P,L){ot("coordinate "+P,L,xt,h)}function f(P){if(!(P instanceof E))throw new Error("ExtendedPoint expected")}let _=Sr((P,L)=>{let{ex:U,ey:Y,ez:j}=P,de=P.is0();L==null&&(L=de?Zg:r.inv(j));let X=x(U*L),ce=x(Y*L),Q=x(j*L);if(de)return{x:xt,y:it};if(Q!==it)throw new Error("invZ was invalid");return{x:X,y:ce}}),I=Sr(P=>{let{a:L,d:U}=t;if(P.is0())throw new Error("bad point: ZERO");let{ex:Y,ey:j,ez:de,et:X}=P,ce=x(Y*Y),Q=x(j*j),se=x(de*de),pe=x(se*se),H=x(ce*L),l=x(se*x(H+Q)),m=x(pe+x(U*x(ce*Q)));if(l!==m)throw new Error("bad point: equation left != right (1)");let w=x(Y*j),k=x(de*X);if(w!==k)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(L,U,Y,j){this.ex=L,this.ey=U,this.ez=Y,this.et=j,v("x",L),v("y",U),v("z",Y),v("t",j),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(L){if(L instanceof E)throw new Error("extended point not allowed");let{x:U,y:Y}=L||{};return v("x",U),v("y",Y),new E(U,Y,it,x(U*Y))}static normalizeZ(L){let U=r.invertBatch(L.map(Y=>Y.ez));return L.map((Y,j)=>Y.toAffine(U[j])).map(E.fromAffine)}static msm(L,U){return xs(E,g,L,U)}_setWindowSize(L){M.setWindowSize(this,L)}assertValidity(){I(this)}equals(L){f(L);let{ex:U,ey:Y,ez:j}=this,{ex:de,ey:X,ez:ce}=L,Q=x(U*ce),se=x(de*j),pe=x(Y*ce),H=x(X*j);return Q===se&&pe===H}is0(){return this.equals(E.ZERO)}negate(){return new E(x(-this.ex),this.ey,this.ez,x(-this.et))}double(){let{a:L}=t,{ex:U,ey:Y,ez:j}=this,de=x(U*U),X=x(Y*Y),ce=x(ws*x(j*j)),Q=x(L*de),se=U+Y,pe=x(x(se*se)-de-X),H=Q+X,l=H-ce,m=Q-X,w=x(pe*l),k=x(H*m),B=x(pe*m),T=x(l*H);return new E(w,k,T,B)}add(L){f(L);let{a:U,d:Y}=t,{ex:j,ey:de,ez:X,et:ce}=this,{ex:Q,ey:se,ez:pe,et:H}=L;if(U===BigInt(-1)){let Se=x((de-j)*(se+Q)),Re=x((de+j)*(se-Q)),Me=x(Re-Se);if(Me===xt)return this.double();let Ne=x(X*ws*H),Ar=x(ce*ws*pe),tc=Ar+Ne,rc=Re+Se,nc=Ar-Ne,ph=x(tc*Me),dh=x(rc*nc),lh=x(tc*nc),uh=x(Me*rc);return new E(ph,dh,uh,lh)}let l=x(j*Q),m=x(de*se),w=x(ce*Y*H),k=x(X*pe),B=x((j+de)*(Q+se)-l-m),T=k-w,R=k+w,O=x(m-U*l),G=x(B*T),z=x(R*O),ee=x(B*O),we=x(T*R);return new E(G,z,we,ee)}subtract(L){return this.add(L.negate())}wNAF(L){return M.wNAFCached(this,L,E.normalizeZ)}multiply(L){let U=L;ot("scalar",U,it,n);let{p:Y,f:j}=this.wNAF(U);return E.normalizeZ([Y,j])[0]}multiplyUnsafe(L){let U=L;return ot("scalar",U,xt,n),U===xt?N:this.equals(N)||U===it?this:this.equals(C)?this.wNAF(U).p:M.unsafeLadder(this,U)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return M.unsafeLadder(this,n).is0()}toAffine(L){return _(this,L)}clearCofactor(){let{h:L}=t;return L===it?this:this.multiplyUnsafe(L)}static fromHex(L,U=!1){let{d:Y,a:j}=t,de=r.BYTES;L=Fe("pointHex",L,de),gt("zip215",U);let X=L.slice(),ce=L[de-1];X[de-1]=ce&-129;let Q=nr(X),se=U?h:r.ORDER;ot("pointHex.y",Q,xt,se);let pe=x(Q*Q),H=x(pe-it),l=x(Y*pe-j),{isValid:m,value:w}=y(H,l);if(!m)throw new Error("Point.fromHex: invalid y coordinate");let k=(w&it)===it,B=(ce&128)!==0;if(!U&&w===xt&&B)throw new Error("Point.fromHex: x=0 and x_0=1");return B!==k&&(w=x(-w)),E.fromAffine({x:w,y:Q})}static fromPrivateKey(L){return Z(L).point}toRawBytes(){let{x:L,y:U}=this.toAffine(),Y=br(U,r.BYTES);return Y[Y.length-1]|=L&it?128:0,Y}toHex(){return Nt(this.toRawBytes())}}E.BASE=new E(t.Gx,t.Gy,it,x(t.Gx*t.Gy)),E.ZERO=new E(xt,it,it,xt);let{BASE:C,ZERO:N}=E,M=ys(E,d*8);function J(P){return Ue(P,n)}function $(P){return J(nr(P))}function Z(P){let L=d;P=Fe("private key",P,L);let U=Fe("hashed private key",o(P),2*L),Y=A(U.slice(0,L)),j=U.slice(L,2*L),de=$(Y),X=C.multiply(de),ce=X.toRawBytes();return{head:Y,prefix:j,scalar:de,point:X,pointBytes:ce}}function ge(P){return Z(P).pointBytes}function te(P=new Uint8Array,...L){let U=qt(...L);return $(o(S(U,Fe("context",P),!!s)))}function ne(P,L,U={}){P=Fe("message",P),s&&(P=s(P));let{prefix:Y,scalar:j,pointBytes:de}=Z(L),X=te(U.context,Y,P),ce=C.multiply(X).toRawBytes(),Q=te(U.context,ce,de,P),se=J(X+Q*j);ot("signature.s",se,xt,n);let pe=qt(ce,br(se,r.BYTES));return Fe("result",pe,d*2)}let W=Xg;function q(P,L,U,Y=W){let{context:j,zip215:de}=Y,X=r.BYTES;P=Fe("signature",P,2*X),L=Fe("message",L),de!==void 0&&gt("zip215",de),s&&(L=s(L));let ce=nr(P.slice(X,2*X)),Q,se,pe;try{Q=E.fromHex(U,de),se=E.fromHex(P.slice(0,X),de),pe=C.multiplyUnsafe(ce)}catch{return!1}if(!de&&Q.isSmallOrder())return!1;let H=te(j,se.toRawBytes(),Q.toRawBytes(),L);return se.add(Q.multiplyUnsafe(H)).subtract(pe).clearCofactor().equals(E.ZERO)}return C._setWindowSize(8),{CURVE:t,getPublicKey:ge,sign:ne,verify:q,ExtendedPoint:E,utils:{getExtendedPublicKey:Z,randomPrivateKey:()=>a(r.BYTES),precompute(P=8,L=E.BASE){return L._setWindowSize(P),L.multiply(BigInt(3)),L}}}}var Pa=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_m=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Zj=BigInt(0),Qg=BigInt(1),Rm=BigInt(2),Xj=BigInt(3),ey=BigInt(5),ty=BigInt(8);function ry(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),o=Pa,d=e*e%o*e%o,u=yt(d,Rm,o)*d%o,h=yt(u,Qg,o)*e%o,x=yt(h,ey,o)*h%o,g=yt(x,t,o)*x%o,y=yt(g,r,o)*g%o,A=yt(y,n,o)*y%o,S=yt(A,s,o)*A%o,v=yt(S,s,o)*A%o,f=yt(v,t,o)*x%o;return{pow_p_5_8:yt(f,Rm,o)*e%o,b2:d}}function ny(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function sy(e,t){let r=Pa,n=Ue(t*t*t,r),s=Ue(n*n*t,r),o=ry(e*s).pow_p_5_8,a=Ue(e*n*o,r),d=Ue(t*a*a,r),u=a,h=Ue(a*_m,r),x=d===e,g=d===Ue(-e,r),y=d===Ue(-e*_m,r);return x&&(a=u),(g||y)&&(a=h),wm(a,r)&&(a=Ue(-a,r)),{isValid:x||g,value:a}}var oy=or(Pa,void 0,!0),iy={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:oy,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ty,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:hm,randomBytes:On,adjustScalarBytes:ny,uvRatio:sy},km=Am(iy);c();p();function Tm(e,t){return Bt.IntentMessage(Bt.fixedArray(t.length,Bt.u8())).serialize({intent:{scope:{[e]:!0},version:{V0:!0},appId:{Sui:!0}},value:t}).toBytes()}c();p();var Ot={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},Em={ED25519:32,Secp256k1:33,Secp256r1:33},Im={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};c();p();c();p();c();p();c();p();var ay=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ir=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ar=new Uint32Array(64),Ua=class extends jr{constructor(){super(64,32,8,!1),this.A=ir[0]|0,this.B=ir[1]|0,this.C=ir[2]|0,this.D=ir[3]|0,this.E=ir[4]|0,this.F=ir[5]|0,this.G=ir[6]|0,this.H=ir[7]|0}get(){let{A:t,B:r,C:n,D:s,E:o,F:a,G:d,H:u}=this;return[t,r,n,s,o,a,d,u]}set(t,r,n,s,o,a,d,u){this.A=t|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=o|0,this.F=a|0,this.G=d|0,this.H=u|0}process(t,r){for(let g=0;g<16;g++,r+=4)ar[g]=t.getUint32(r,!1);for(let g=16;g<64;g++){let y=ar[g-15],A=ar[g-2],S=ut(y,7)^ut(y,18)^y>>>3,v=ut(A,17)^ut(A,19)^A>>>10;ar[g]=v+ar[g-7]+S+ar[g-16]|0}let{A:n,B:s,C:o,D:a,E:d,F:u,G:h,H:x}=this;for(let g=0;g<64;g++){let y=ut(d,6)^ut(d,11)^ut(d,25),A=x+y+um(d,u,h)+ay[g]+ar[g]|0,v=(ut(n,2)^ut(n,13)^ut(n,22))+mm(n,s,o)|0;x=h,h=u,u=d,d=a+A|0,a=o,o=s,s=n,n=A+v|0}n=n+this.A|0,s=s+this.B|0,o=o+this.C|0,a=a+this.D|0,d=d+this.E|0,u=u+this.F|0,h=h+this.G|0,x=x+this.H|0,this.set(n,s,o,a,d,u,h,x)}roundClean(){ar.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var wn=qn(()=>new Ua);c();p();c();p();var bs=class extends Dn{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,Xc(t);let n=Nn(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?t.create().update(n).digest():n);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return Lr(this),this.iHash.update(t),this}digestInto(t){Lr(this),Zc(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:o,blockLen:a,outputLen:d}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=a,t.outputLen=d,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Na=(e,t,r)=>new bs(e,t).update(r).digest();Na.create=(e,t)=>new bs(e,t);c();p();function Cm(e){e.lowS!==void 0&&gt("lowS",e.lowS),e.prehash!==void 0&&gt("prehash",e.prehash)}function cy(e){let t=xn(e);kt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:py,hexToBytes:dy}=fs,Ht={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{let{Err:r}=Ht;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length&1)throw new r("tlv.encode: unpadded data");let n=t.length/2,s=xr(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");let o=n>127?xr(s.length/2|128):"";return`${xr(e)}${o}${s}${t}`},decode(e,t){let{Err:r}=Ht,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let s=t[n++],o=!!(s&128),a=0;if(!o)a=s;else{let u=s&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");let h=t.subarray(n,n+u);if(h.length!==u)throw new r("tlv.decode: length bytes not complete");if(h[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(let x of h)a=a<<8|x;if(n+=u,a<128)throw new r("tlv.decode(long): not minimal encoding")}let d=t.subarray(n,n+a);if(d.length!==a)throw new r("tlv.decode: wrong value length");return{v:d,l:t.subarray(n+a)}}},_int:{encode(e){let{Err:t}=Ht;if(e<Ft)throw new t("integer: negative integers are not allowed");let r=xr(e);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new t("unexpected assertion");return r},decode(e){let{Err:t}=Ht;if(e[0]&128)throw new t("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return py(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=Ht,s=typeof e=="string"?dy(e):e;Vr(s);let{v:o,l:a}=n.decode(48,s);if(a.length)throw new t("Invalid signature: left bytes after parsing");let{v:d,l:u}=n.decode(2,o),{v:h,l:x}=n.decode(2,u);if(x.length)throw new t("Invalid signature: left bytes after parsing");return{r:r.decode(d),s:r.decode(h)}},hexFromSig(e){let{_tlv:t,_int:r}=Ht,n=`${t.encode(2,r.encode(e.r))}${t.encode(2,r.encode(e.s))}`;return t.encode(48,n)}},Ft=BigInt(0),Ge=BigInt(1),SV=BigInt(2),Bm=BigInt(3),vV=BigInt(4);function ly(e){let t=cy(e),{Fp:r}=t,n=or(t.n,t.nBitLength),s=t.toBytes||((v,f,_)=>{let I=f.toAffine();return qt(Uint8Array.from([4]),r.toBytes(I.x),r.toBytes(I.y))}),o=t.fromBytes||(v=>{let f=v.subarray(1),_=r.fromBytes(f.subarray(0,r.BYTES)),I=r.fromBytes(f.subarray(r.BYTES,2*r.BYTES));return{x:_,y:I}});function a(v){let{a:f,b:_}=t,I=r.sqr(v),E=r.mul(I,v);return r.add(r.add(E,r.mul(v,f)),_)}if(!r.eql(r.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function d(v){return gn(v,Ge,t.n)}function u(v){let{allowedPrivateKeyLengths:f,nByteLength:_,wrapPrivateKey:I,n:E}=t;if(f&&typeof v!="bigint"){if(rr(v)&&(v=Nt(v)),typeof v!="string"||!f.includes(v.length))throw new Error("Invalid key");v=v.padStart(_*2,"0")}let C;try{C=typeof v=="bigint"?v:Dt(Fe("private key",v,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof v}`)}return I&&(C=Ue(C,E)),ot("private key",C,Ge,E),C}function h(v){if(!(v instanceof y))throw new Error("ProjectivePoint expected")}let x=Sr((v,f)=>{let{px:_,py:I,pz:E}=v;if(r.eql(E,r.ONE))return{x:_,y:I};let C=v.is0();f==null&&(f=C?r.ONE:r.inv(E));let N=r.mul(_,f),M=r.mul(I,f),J=r.mul(E,f);if(C)return{x:r.ZERO,y:r.ZERO};if(!r.eql(J,r.ONE))throw new Error("invZ was invalid");return{x:N,y:M}}),g=Sr(v=>{if(v.is0()){if(t.allowInfinityPoint&&!r.is0(v.py))return;throw new Error("bad point: ZERO")}let{x:f,y:_}=v.toAffine();if(!r.isValid(f)||!r.isValid(_))throw new Error("bad point: x or y not FE");let I=r.sqr(_),E=a(f);if(!r.eql(I,E))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(f,_,I){if(this.px=f,this.py=_,this.pz=I,f==null||!r.isValid(f))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(I==null||!r.isValid(I))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:_,y:I}=f||{};if(!f||!r.isValid(_)||!r.isValid(I))throw new Error("invalid affine point");if(f instanceof y)throw new Error("projective point not allowed");let E=C=>r.eql(C,r.ZERO);return E(_)&&E(I)?y.ZERO:new y(_,I,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let _=r.invertBatch(f.map(I=>I.pz));return f.map((I,E)=>I.toAffine(_[E])).map(y.fromAffine)}static fromHex(f){let _=y.fromAffine(o(Fe("pointHex",f)));return _.assertValidity(),_}static fromPrivateKey(f){return y.BASE.multiply(u(f))}static msm(f,_){return xs(y,n,f,_)}_setWindowSize(f){S.setWindowSize(this,f)}assertValidity(){g(this)}hasEvenY(){let{y:f}=this.toAffine();if(r.isOdd)return!r.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){h(f);let{px:_,py:I,pz:E}=this,{px:C,py:N,pz:M}=f,J=r.eql(r.mul(_,M),r.mul(C,E)),$=r.eql(r.mul(I,M),r.mul(N,E));return J&&$}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){let{a:f,b:_}=t,I=r.mul(_,Bm),{px:E,py:C,pz:N}=this,M=r.ZERO,J=r.ZERO,$=r.ZERO,Z=r.mul(E,E),ge=r.mul(C,C),te=r.mul(N,N),ne=r.mul(E,C);return ne=r.add(ne,ne),$=r.mul(E,N),$=r.add($,$),M=r.mul(f,$),J=r.mul(I,te),J=r.add(M,J),M=r.sub(ge,J),J=r.add(ge,J),J=r.mul(M,J),M=r.mul(ne,M),$=r.mul(I,$),te=r.mul(f,te),ne=r.sub(Z,te),ne=r.mul(f,ne),ne=r.add(ne,$),$=r.add(Z,Z),Z=r.add($,Z),Z=r.add(Z,te),Z=r.mul(Z,ne),J=r.add(J,Z),te=r.mul(C,N),te=r.add(te,te),Z=r.mul(te,ne),M=r.sub(M,Z),$=r.mul(te,ge),$=r.add($,$),$=r.add($,$),new y(M,J,$)}add(f){h(f);let{px:_,py:I,pz:E}=this,{px:C,py:N,pz:M}=f,J=r.ZERO,$=r.ZERO,Z=r.ZERO,ge=t.a,te=r.mul(t.b,Bm),ne=r.mul(_,C),W=r.mul(I,N),q=r.mul(E,M),D=r.add(_,I),P=r.add(C,N);D=r.mul(D,P),P=r.add(ne,W),D=r.sub(D,P),P=r.add(_,E);let L=r.add(C,M);return P=r.mul(P,L),L=r.add(ne,q),P=r.sub(P,L),L=r.add(I,E),J=r.add(N,M),L=r.mul(L,J),J=r.add(W,q),L=r.sub(L,J),Z=r.mul(ge,P),J=r.mul(te,q),Z=r.add(J,Z),J=r.sub(W,Z),Z=r.add(W,Z),$=r.mul(J,Z),W=r.add(ne,ne),W=r.add(W,ne),q=r.mul(ge,q),P=r.mul(te,P),W=r.add(W,q),q=r.sub(ne,q),q=r.mul(ge,q),P=r.add(P,q),ne=r.mul(W,P),$=r.add($,ne),ne=r.mul(L,P),J=r.mul(D,J),J=r.sub(J,ne),ne=r.mul(D,W),Z=r.mul(L,Z),Z=r.add(Z,ne),new y(J,$,Z)}subtract(f){return this.add(f.negate())}is0(){return this.equals(y.ZERO)}wNAF(f){return S.wNAFCached(this,f,y.normalizeZ)}multiplyUnsafe(f){ot("scalar",f,Ft,t.n);let _=y.ZERO;if(f===Ft)return _;if(f===Ge)return this;let{endo:I}=t;if(!I)return S.unsafeLadder(this,f);let{k1neg:E,k1:C,k2neg:N,k2:M}=I.splitScalar(f),J=_,$=_,Z=this;for(;C>Ft||M>Ft;)C&Ge&&(J=J.add(Z)),M&Ge&&($=$.add(Z)),Z=Z.double(),C>>=Ge,M>>=Ge;return E&&(J=J.negate()),N&&($=$.negate()),$=new y(r.mul($.px,I.beta),$.py,$.pz),J.add($)}multiply(f){let{endo:_,n:I}=t;ot("scalar",f,Ge,I);let E,C;if(_){let{k1neg:N,k1:M,k2neg:J,k2:$}=_.splitScalar(f),{p:Z,f:ge}=this.wNAF(M),{p:te,f:ne}=this.wNAF($);Z=S.constTimeNegate(N,Z),te=S.constTimeNegate(J,te),te=new y(r.mul(te.px,_.beta),te.py,te.pz),E=Z.add(te),C=ge.add(ne)}else{let{p:N,f:M}=this.wNAF(f);E=N,C=M}return y.normalizeZ([E,C])[0]}multiplyAndAddUnsafe(f,_,I){let E=y.BASE,C=(M,J)=>J===Ft||J===Ge||!M.equals(E)?M.multiplyUnsafe(J):M.multiply(J),N=C(this,_).add(C(f,I));return N.is0()?void 0:N}toAffine(f){return x(this,f)}isTorsionFree(){let{h:f,isTorsionFree:_}=t;if(f===Ge)return!0;if(_)return _(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:_}=t;return f===Ge?this:_?_(y,this):this.multiplyUnsafe(t.h)}toRawBytes(f=!0){return gt("isCompressed",f),this.assertValidity(),s(y,this,f)}toHex(f=!0){return gt("isCompressed",f),Nt(this.toRawBytes(f))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);let A=t.nBitLength,S=ys(y,t.endo?Math.ceil(A/2):A);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:u,weierstrassEquation:a,isWithinCurveOrder:d}}function uy(e){let t=xn(e);return kt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Lm(e){let t=uy(e),{Fp:r,n}=t,s=r.BYTES+1,o=2*r.BYTES+1;function a(q){return Ue(q,n)}function d(q){return gs(q,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:h,weierstrassEquation:x,isWithinCurveOrder:g}=ly({...t,toBytes(q,D,P){let L=D.toAffine(),U=r.toBytes(L.x),Y=qt;return gt("isCompressed",P),P?Y(Uint8Array.from([D.hasEvenY()?2:3]),U):Y(Uint8Array.from([4]),U,r.toBytes(L.y))},fromBytes(q){let D=q.length,P=q[0],L=q.subarray(1);if(D===s&&(P===2||P===3)){let U=Dt(L);if(!gn(U,Ge,r.ORDER))throw new Error("Point is not on curve");let Y=x(U),j;try{j=r.sqrt(Y)}catch(ce){let Q=ce instanceof Error?": "+ce.message:"";throw new Error("Point is not on curve"+Q)}let de=(j&Ge)===Ge;return(P&1)===1!==de&&(j=r.neg(j)),{x:U,y:j}}else if(D===o&&P===4){let U=r.fromBytes(L.subarray(0,r.BYTES)),Y=r.fromBytes(L.subarray(r.BYTES,2*r.BYTES));return{x:U,y:Y}}else throw new Error(`Point of length ${D} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),y=q=>Nt(sr(q,t.nByteLength));function A(q){let D=n>>Ge;return q>D}function S(q){return A(q)?a(-q):q}let v=(q,D,P)=>Dt(q.slice(D,P));class f{constructor(D,P,L){this.r=D,this.s=P,this.recovery=L,this.assertValidity()}static fromCompact(D){let P=t.nByteLength;return D=Fe("compactSignature",D,P*2),new f(v(D,0,P),v(D,P,2*P))}static fromDER(D){let{r:P,s:L}=Ht.toSig(Fe("DER",D));return new f(P,L)}assertValidity(){ot("r",this.r,Ge,n),ot("s",this.s,Ge,n)}addRecoveryBit(D){return new f(this.r,this.s,D)}recoverPublicKey(D){let{r:P,s:L,recovery:U}=this,Y=M(Fe("msgHash",D));if(U==null||![0,1,2,3].includes(U))throw new Error("recovery id invalid");let j=U===2||U===3?P+t.n:P;if(j>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let de=U&1?"03":"02",X=u.fromHex(de+y(j)),ce=d(j),Q=a(-Y*ce),se=a(L*ce),pe=u.BASE.multiplyAndAddUnsafe(X,Q,se);if(!pe)throw new Error("point at infinify");return pe.assertValidity(),pe}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return wr(this.toDERHex())}toDERHex(){return Ht.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return wr(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let _={isValidPrivateKey(q){try{return h(q),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let q=Ba(t.n);return Sm(t.randomBytes(q),t.n)},precompute(q=8,D=u.BASE){return D._setWindowSize(q),D.multiply(BigInt(3)),D}};function I(q,D=!0){return u.fromPrivateKey(q).toRawBytes(D)}function E(q){let D=rr(q),P=typeof q=="string",L=(D||P)&&q.length;return D?L===s||L===o:P?L===2*s||L===2*o:q instanceof u}function C(q,D,P=!0){if(E(q))throw new Error("first arg must be private key");if(!E(D))throw new Error("second arg must be public key");return u.fromHex(D).multiply(h(q)).toRawBytes(P)}let N=t.bits2int||function(q){let D=Dt(q),P=q.length*8-t.nBitLength;return P>0?D>>BigInt(P):D},M=t.bits2int_modN||function(q){return a(N(q))},J=yn(t.nBitLength);function $(q){return ot(`num < 2^${t.nBitLength}`,q,Ft,J),sr(q,t.nByteLength)}function Z(q,D,P=ge){if(["recovered","canonical"].some(l=>l in P))throw new Error("sign() legacy options not supported");let{hash:L,randomBytes:U}=t,{lowS:Y,prehash:j,extraEntropy:de}=P;Y==null&&(Y=!0),q=Fe("msgHash",q),Cm(P),j&&(q=Fe("prehashed msgHash",L(q)));let X=M(q),ce=h(D),Q=[$(ce),$(X)];if(de!=null&&de!==!1){let l=de===!0?U(r.BYTES):de;Q.push(Fe("extraEntropy",l))}let se=qt(...Q),pe=X;function H(l){let m=N(l);if(!g(m))return;let w=d(m),k=u.BASE.multiply(m).toAffine(),B=a(k.x);if(B===Ft)return;let T=a(w*a(pe+B*ce));if(T===Ft)return;let R=(k.x===B?0:2)|Number(k.y&Ge),O=T;return Y&&A(T)&&(O=S(T),R^=1),new f(B,O,R)}return{seed:se,k2sig:H}}let ge={lowS:t.lowS,prehash:!1},te={lowS:t.lowS,prehash:!1};function ne(q,D,P=ge){let{seed:L,k2sig:U}=Z(q,D,P),Y=t;return Ta(Y.hash.outputLen,Y.nByteLength,Y.hmac)(L,U)}u.BASE._setWindowSize(8);function W(q,D,P,L=te){let U=q;if(D=Fe("msgHash",D),P=Fe("publicKey",P),"strict"in L)throw new Error("options.strict was renamed to lowS");Cm(L);let{lowS:Y,prehash:j}=L,de,X;try{if(typeof U=="string"||rr(U))try{de=f.fromDER(U)}catch(k){if(!(k instanceof Ht.Err))throw k;de=f.fromCompact(U)}else if(typeof U=="object"&&typeof U.r=="bigint"&&typeof U.s=="bigint"){let{r:k,s:B}=U;de=new f(k,B)}else throw new Error("PARSE");X=u.fromHex(P)}catch(k){if(k.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&de.hasHighS())return!1;j&&(D=t.hash(D));let{r:ce,s:Q}=de,se=M(D),pe=d(Q),H=a(se*pe),l=a(ce*pe),m=u.BASE.multiplyAndAddUnsafe(X,H,l)?.toAffine();return m?a(m.x)===ce:!1}return{CURVE:t,getPublicKey:I,getSharedSecret:C,sign:ne,verify:W,ProjectivePoint:u,Signature:f,utils:_}}function my(e){return{hash:e,hmac:(t,...r)=>Na(e,t,Ws(...r)),randomBytes:On}}function Mm(e,t){let r=n=>Lm({...e,...my(n)});return Object.freeze({...r(t),create:r})}var Pm=or(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),hy=Pm.create(BigInt("-3")),fy=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),gy=Mm({a:hy,b:fy,Fp:Pm,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},wn),Um=gy;c();p();function zr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var cr=class{equals(t){return zr(this.toRawBytes(),t.toRawBytes())}toBase64(){return lt(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){let t=this.toSuiBytes();return lt(t)}verifyWithIntent(t,r,n){let s=Tm(n,t),o=tn(s,{dkLen:32});return this.verify(o,r)}verifyPersonalMessage(t,r){return this.verifyWithIntent(Bt.vector(Bt.u8()).serialize(t).toBytes(),r,"PersonalMessage")}verifyTransaction(t,r){return this.verifyWithIntent(t,r,"TransactionData")}verifyAddress(t){return this.toSuiAddress()===t}toSuiBytes(){let t=this.toRawBytes(),r=new Uint8Array(t.length+1);return r.set([this.flag()]),r.set(t,1),r}toSuiAddress(){return Mn(Un(tn(this.toSuiBytes(),{dkLen:32})).slice(0,Ln*2))}};var Da=33;var qa=64,QV=new Uint8Array([48,89,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,3,66,0]),Oa=class extends cr{constructor(t){if(super(),typeof t=="string"?this.data=at(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Da)throw new Error(`Invalid public key input. Expected ${Da} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Ot.Passkey}async verify(t,r){let n=Ha(r),s=JSON.parse(n.clientDataJson);if(s.type!=="webauthn.get")return!1;let o=at(s.challenge.replace(/-/g,"+").replace(/_/g,"/"));if(!zr(t,o))return!1;let a=n.userSignature.slice(1+qa);if(!zr(this.toRawBytes(),a))return!1;let d=new Uint8Array([...n.authenticatorData,...wn(n.clientDataJson)]),u=n.userSignature.slice(1,qa+1);return Um.verify(u,wn(d),a)}};Oa.SIZE=Da;function Ha(e){let t=typeof e=="string"?at(e):e;if(t[0]!==Ot.Passkey)throw new Error("Invalid signature scheme");let r=Yc.parse(t.slice(1));return{signatureScheme:"Passkey",serializedSignature:lt(t),signature:t,authenticatorData:r.authenticatorData,clientDataJson:r.clientDataJson,userSignature:new Uint8Array(r.userSignature),publicKey:new Uint8Array(r.userSignature.slice(1+qa))}}c();p();c();p();var Nm=e=>{throw TypeError(e)},Dm=(e,t,r)=>t.has(e)||Nm("Cannot "+r),Ss=(e,t,r)=>(Dm(e,t,"read from private field"),r?r.call(e):t.get(e)),vs=(e,t,r)=>t.has(e)?Nm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),As=(e,t,r,n)=>(Dm(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),_s,Rs,ks,Ts,Fa=class extends Error{},Es=class{constructor({url:t,fetch:r=fetch,headers:n={},queries:s={}}){vs(this,_s),vs(this,Rs),vs(this,ks),vs(this,Ts),As(this,_s,t),As(this,Rs,s),As(this,ks,n),As(this,Ts,(...o)=>r(...o))}async query(t){let r=await Ss(this,Ts).call(this,Ss(this,_s),{method:"POST",headers:{"Content-Type":"application/json",...Ss(this,ks)},body:JSON.stringify({query:typeof t.query=="string"?String(t.query):wc(t.query),variables:t.variables,extensions:t.extensions,operationName:t.operationName})});if(!r.ok)throw new Fa(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(t,r){return this.query({...r,query:Ss(this,Rs)[t]})}};_s=new WeakMap;Rs=new WeakMap;ks=new WeakMap;Ts=new WeakMap;c();p();var qm=bc();c();p();function yy(e){if(e.length!==1)throw new Error("Invalid base64Url character: "+e);let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(e);if(r===-1)throw new Error("Invalid base64Url character: "+e);let n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function xy(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r),s=yy(n);t=t.concat(s)}return t}function wy(e,t){if(e.length<2)throw new Error(`Input (s = ${e}) is not tightly packed because s.length < 2`);let r=xy(e),n=t%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${e}) is not tightly packed because i%4 = 3 (i = ${t}))`);let s=(t+e.length-1)%4;if(s!==3)if(s===2)r=r.slice(0,r.length-2);else if(s===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${e}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${t}))`);if(r.length%8!==0)throw new Error("We should never reach here...");let o=new Uint8Array(Math.floor(r.length/8)),a=0;for(let d=0;d<r.length;d+=8){let u=r.slice(d,d+8),h=parseInt(u.join(""),2);o[a++]=h}return new TextDecoder().decode(o)}function by(e){if(!(e.slice(-1)==="}"||e.slice(-1)===","))throw new Error("Invalid claim");let t=JSON.parse("{"+e.slice(0,-1)+"}");if(Object.keys(t).length!==1)throw new Error("Invalid claim");let r=Object.keys(t)[0];return[r,t[r]]}function Om(e,t){let r=wy(e.value,e.indexMod4),[n,s]=by(r);if(n!==t)throw new Error(`Invalid field name: found ${n} expected ${t}`);return s}c();p();c();p();var Hm=ze.struct("ZkLoginSignature",{inputs:ze.struct("ZkLoginSignatureInputs",{proofPoints:ze.struct("ZkLoginSignatureInputsProofPoints",{a:ze.vector(ze.string()),b:ze.vector(ze.vector(ze.string())),c:ze.vector(ze.string())}),issBase64Details:ze.struct("ZkLoginSignatureInputsClaim",{value:ze.string(),indexMod4:ze.u8()}),headerBase64:ze.string(),addressSeed:ze.string()}),maxEpoch:ze.u64(),userSignature:ze.vector(ze.u8())});function Fm(e){return Hm.parse(typeof e=="string"?at(e):e)}c();p();function Sy(e){for(let t=0;t<e.length;t++)if(e[t]!==0)return t;return-1}function Is(e,t){let r=e.toString(16);return Qc(r.padStart(t*2,"0").slice(-t*2))}function Wa(e,t){let r=Is(e,t),n=Sy(r);return n===-1?new Uint8Array([0]):r.slice(n)}var Vm=e=>{throw TypeError(e)},za=(e,t,r)=>t.has(e)||Vm("Cannot "+r),Wt=(e,t,r)=>(za(e,t,"read from private field"),r?r.call(e):t.get(e)),Cs=(e,t,r)=>t.has(e)?Vm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Kr=(e,t,r,n)=>(za(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Wm=(e,t,r)=>(za(e,t,"access private method"),r),wt,bn,Sn,Bs,ja,vy=class Va extends cr{constructor(t,{client:r}={}){super(),Cs(this,Bs),Cs(this,wt),Cs(this,bn),Cs(this,Sn),Kr(this,bn,r),typeof t=="string"?Kr(this,wt,at(t)):t instanceof Uint8Array?Kr(this,wt,t):Kr(this,wt,Uint8Array.from(t)),Kr(this,Sn,Wt(this,wt).length!==Wt(this,wt)[0]+1+32),Wt(this,Sn)&&Kr(this,wt,zm(Wt(this,wt)))}equals(t){return super.equals(t)}toSuiAddress(){return Wt(this,Sn)?Wm(this,Bs,ja).call(this):super.toSuiAddress()}toRawBytes(){return Wt(this,wt)}flag(){return Ot.ZkLogin}async verify(t,r){throw Error("does not support")}verifyPersonalMessage(t,r){let n=Ls(r),s=new Va(n.publicKey).toSuiAddress();return jm({address:s,bytes:lt(t),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:Wt(this,bn)})}verifyTransaction(t,r){let n=Ls(r),s=new Va(n.publicKey).toSuiAddress();return jm({address:s,bytes:lt(t),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:Wt(this,bn)})}verifyAddress(t){return t===super.toSuiAddress()||t===Wm(this,Bs,ja).call(this)}};wt=new WeakMap;bn=new WeakMap;Sn=new WeakMap;Bs=new WeakSet;ja=function(){let e=zm(Wt(this,wt),!0),t=new Uint8Array(e.length+1);return t[0]=this.flag(),t.set(e,1),Mn(Un(tn(t,{dkLen:32})).slice(0,Ln*2))};var Ay=vy;function _y(e,t,r){let n=r?.legacyAddress?Wa(e,32):Is(e,32),s=new TextEncoder().encode(t),o=new Uint8Array(1+s.length+n.length);return o.set([s.length],0),o.set(s,1),o.set(n,1+s.length),new Ay(o,r)}var Ry=qm(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function zm(e,t=!1){let r=e[0]+1,n=BigInt(`0x${Gc(e.slice(r))}`),s=t?Wa(n,32):Is(n,32),o=new Uint8Array(r+s.length);return o.set(e.slice(0,r),0),o.set(s,r),o}async function jm({address:e,bytes:t,signature:r,intentScope:n,client:s=new Es({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){let o=await s.query({query:Ry,variables:{bytes:t,signature:r,intentScope:n,author:e}});return o.data?.verifyZkloginSignature.success===!0&&o.data?.verifyZkloginSignature.errors.length===0}function Ls(e){let t=typeof e=="string"?at(e):e;if(t[0]!==Ot.ZkLogin)throw new Error("Invalid signature scheme");let r=t.slice(1),{inputs:n,maxEpoch:s,userSignature:o}=Fm(r),{issBase64Details:a,addressSeed:d}=n,u=Om(a,"iss"),h=_y(BigInt(d),u);return{serializedSignature:lt(t),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:s,userSignature:o,iss:u,addressSeed:BigInt(d)},signature:t,publicKey:h.toRawBytes()}}function Km(e){let t=at(e),r=Im[t[0]];switch(r){case"Passkey":return Ha(e);case"MultiSig":let n=Bt.MultiSig.parse(t.slice(1));return{serializedSignature:e,signatureScheme:r,multisig:n,bytes:t};case"ZkLogin":return Ls(e);case"ED25519":case"Secp256k1":case"Secp256r1":let s=Em[r],o=t.slice(1,t.length-s),a=t.slice(1+o.length);return{serializedSignature:e,signatureScheme:r,signature:o,publicKey:a,bytes:t};default:throw new Error("Unsupported signature scheme")}}c();p();var Ka=32,$r=class extends cr{constructor(t){if(super(),typeof t=="string"?this.data=at(t):t instanceof Uint8Array?this.data=t:this.data=Uint8Array.from(t),this.data.length!==Ka)throw new Error(`Invalid public key input. Expected ${Ka} bytes, got ${this.data.length}`)}equals(t){return super.equals(t)}toRawBytes(){return this.data}flag(){return Ot.ED25519}async verify(t,r){let n;if(typeof r=="string"){let s=Km(r);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!zr(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return km.verify(n,t,this.toRawBytes())}};$r.SIZE=Ka;var Ms=async()=>{let e=await fe();return vn(e)},vn=e=>{let t=e.addresses.filter(r=>r.networkID==="sui:mainnet"||r.networkID==="sui:testnet");if(t.length===0)throw Cc;if(t.length===1){let[r]=t;if(!r?.publicKey)throw new Error("[sui provider] selected account account does not have a public key");let{publicKey:n,address:s}=r;return{address:s,publicKey:new $r(n).toSuiBytes().toString()}}throw new Error("[sui provider] multiple accounts provided")};c();p();var $m=async(e,t,r)=>{let n=await fe(),s=Hn.from(t);s.setSenderIfNotSet(e);let o=await Fn({transaction:s,networkID:r}),a=await xe.sign(n.identifier,{chainType:"sui",signingType:"transaction",transaction:new Uint8Array(o)});if(a.status==="error")throw new Error(`[sui provider][${a.type}] ${a.message}`);let d=a.signature;if(!d)throw new Error("[sui provider] no message on vault response");return{signature:d,transaction:Er(o)}};c();p();var Gm=async(e,t)=>{let r=await fe(),n=await xe.sign(r.identifier,{chainType:"sui",signingType:"personalMessage",message:t});if(n.status==="error")throw new Error(`[sui provider][${n.type}] ${n.message}`);if(!n.signature)throw new Error("[sui provider] no message on vault response");return{signature:n.signature,message:Er(t)}};c();p();var ky=new _e,Ym=async(e,t,r)=>{let n=await fe(),s=Hn.from(t);s.setSenderIfNotSet(e);let o=await Fn({transaction:s,networkID:r}),a={ownerAddress:e,networkID:r,data:{digest:""},type:"dappInteraction",display:{summary:{topLeft:{text:tt.t("transactionsPendingAppInteraction")}}}},{signature:d,digest:u,effects:h}=await ip({accountSigner:xe,accountIdentifier:n.identifier,transaction:o,pendingTransactionInput:a,storage:ky});return{signature:d,transaction:Er(o),digest:u,effects:h}};var pr={analytics:Ql,config:eu,i18n:tu,logger:ru,remoteConfig:Jl,rpc:nu,utils:ou,wallet:Ga,featureFlags:Xl,secrets:{setSharedSecret:()=>{throw new Error("unimplemented")},encryptDeepLinkDappPayload:()=>{throw new Error("unimplemented")},deleteSharedSecret:()=>{throw new Error("unimplemented")},generateSharedSecret:()=>{throw new Error("unimplemented")},generateSession:()=>{throw new Error("unimplemented")},decryptDeepLinkDappPayload:()=>{throw new Error("unimplemented")}}};var Ty=At.eth.initialize(pr),Ey=At.sol.initialize(pr),Iy=At.sol_blink.initialize(pr),Cy=At.eth_blink.initialize(pr),By=At.btc.initialize(pr),Ly=At.sui.initialize(pr),My=At.phantom_auto_confirm.initialize(pr),Zm={...By,...Ty,...Cy,...Ey,...Iy,...Ly,...My};c();p();var Ya=re(St()),Xm=async e=>{let t=await Ya.default.tabs.get(e);if(!t?.url?.startsWith("http"))return{iconUrl:void 0,title:void 0};let r=await Py(e);return{iconUrl:r?.iconUrl??t?.favIconUrl,title:r?.title??t?.title}},Py=async e=>{try{let r=(await Ya.default.scripting.executeScript({target:{tabId:e},func:()=>{let o={},a=document.querySelectorAll("head link[rel^=apple-touch-icon]");a&&(o.iconTuples=Array.from(a).map(u=>[u.href,u.sizes?.[0]??"0x0"]));let d=document.querySelector("meta[property='og:title']");return d&&(o.title=d.content),o}}))[0].result;if(!r)return{iconUrl:void 0,title:void 0};let n,s=0;for(let[o,a]of r.iconTuples??[]){if(n||(n=o),!a)continue;parseInt(a.split("x")[0]??0)>s&&(n=o)}return{title:r.title,iconUrl:n}}catch(t){return console.error("Failed to get tab meta",t),{iconUrl:void 0,title:void 0}}};c();p();var Ps=[],Za=e=>{Ps.push(e)},Xa=e=>{Ps.splice(Ps.findIndex(t=>{let{origin:r,tabId:n,port:s}=t;return e.origin===r&&e.tabId===n&&s===e.port}),1)},Gr=()=>Ps.map(({origin:e,tabId:t,port:r})=>({origin:e,tabId:t,send:n=>r.postMessage(JSON.stringify(n))}));var Jm=async e=>{if(!e.sender||!e.sender.tab||!e.sender.url||!e.sender.tab.id)throw new Error("sender information is undefined");let t=e.sender.url,r=e.sender.tab.id;Za({origin:new URL(t).origin,url:t,tabId:r,port:e}),e.onDisconnect.addListener(()=>{Xa({origin:new URL(t).origin,url:t,tabId:r,port:e})});let n=[],s=x=>{if(typeof x=="string")try{let g=Rn.parse(Vt(x));n.push(g)}catch{}};e.onMessage.addListener(s);let o=await Xm(r),a={type:"BrowserTabRpcRequestSource",url:new URL(t),icon:o.iconUrl?new URL(o.iconUrl):void 0},d=Uy(e,a,n),u=Ny(e);Za({origin:new URL(t).origin,url:t,tabId:r,port:e}),e.onDisconnect.addListener(()=>{Xa({origin:new URL(t).origin,url:t,tabId:r,port:e})});let h=new bp({routes:Zm}).init(d,u);return e.onMessage.removeListener(s),h};function Uy(e,t,r=[]){return new ReadableStream({async start(n){for(let s of r)n.enqueue(Ks(s,t));e.onMessage.addListener(async s=>{let o=null;try{o=Rn.parse(Vt(s))}catch{}if(o)try{n.enqueue(Ks(o,t))}catch(a){le.captureError(new Error(`Stream enqueue failure (${a})`),"provider")}}),e.onDisconnect.addListener(()=>{n.close()})},async cancel(){e.disconnect()}},new CountQueuingStrategy({highWaterMark:1/0}))}function Ny(e){return new WritableStream({write([t,r]){e.postMessage(Ct(r))}})}c();p();var An=async({enabledChains:e,metamaskOverrideSetting:t})=>{let r=["solana.js","phantom.js"];if(e.includes("eip155"))switch(t){case"ALWAYS_ASK":{r.push("evmAsk.js");break}case"USE_PHANTOM":{r.push("evmPhantom.js");break}case"USE_METAMASK":{r.push("evmMetamask.js");break}default:yc(t)}e.some(n=>n==="bip122_p2tr"||n==="bip122_p2wpkh")&&r.push("btc.js"),e.some(n=>n==="sui")&&r.push("sui.js");try{await chrome.scripting.registerContentScripts([{id:"inpageScripts",matches:["file://*/*","http://*/*","https://*/*"],js:r,runAt:"document_start",allFrames:!0,world:"MAIN"},{id:"contentScript",matches:["file://*/*","http://*/*","https://*/*"],js:["contentScript.js","solanaActionsContentScript.js"],runAt:"document_start",allFrames:!0,world:"ISOLATED"}])}catch{}};async function _n(){try{let t=(await chrome.scripting.getRegisteredContentScripts()).map(r=>r.id);return chrome.scripting.unregisterContentScripts({ids:t})}catch(e){throw console.error("ERROR REGISTERING",e),new Error("An unexpected error occurred while unregistering dynamic content scripts: "+e.message,{cause:e})}}c();p();var Qm=re(fh()),eh=re(St());var Dy=new Uc(Te,Ip,Cp),Yr=new _e,Ja=new Rt(Yr);async function qy(){let{isOnboarded:e}=await xe.checkVaultIntegrity();e&&th()}var Oy=(0,Qm.default)(th,500);async function th(){let e=await fe(),t=await Yt(),r=await Hs(xe,Yr,t);await Dy.identifyAccount(r,e,t)}async function rh(){qy(),Yr.subscribe(e=>{switch(e){case".phantom-labs.account.selectedAccount":{Fy();return}case"developerMode":case"networkSetting":{Hy();return}case"metaMaskOverride":{jy();return}case Tc:{Vy();return}}}),Ja.addEventListener("revoked",e=>{Wy(e.data)})}async function Hy(){try{let e=await fe(),t=await Ja.get(e.identifier);for(let r of Gr()){let n=r.origin.toLowerCase();if(n in t){let a={jsonrpc:"2.0",method:"phantom_chainChanged",params:{evm:await Wr(n)}};r.send(a)}}}catch(e){le.captureError(e,"provider")}}async function Fy(){try{await Oy()}catch(o){le.captureError(o,"provider")}let e=await fe(),t;try{t=Ce(e,"eip155")}catch{}let r;try{r=Ce(e,"solana")}catch{}let n;try{n=await ms()}catch{}let s;try{s=await Ms()}catch{}if(t||r||n||s){let o=await Ja.get(e.identifier);for(let a of Gr()){let d={btc:[]};t&&(d.evm=t),r&&(d.sol=r),n&&(d.btc=n),s&&(d.sui=s),a.send({jsonrpc:"2.0",method:"phantom_accountChanged",params:a.origin in o?d:null})}}else for(let o of Gr())o.send({jsonrpc:"2.0",method:"phantom_accountChanged",params:null})}async function Wy(e){let t=await Yt(),n=(await Hs(xe,Yr,t)).find(h=>h.identifier===e.accountId),s=n?.addresses?.find(h=>h.addressType==="eip155")?.address,o=n?.addresses?.find(h=>h.addressType==="solana")?.address,a;try{a=n?wa(n):void 0}catch{}let d;try{d=n?vn(n):void 0}catch{}if(!s&&!o&&!a&&!d)return;let u={};s&&(u.evm=s),o&&(u.sol=o),a&&(u.btc=a),d&&(u.sui=d);for(let h of Gr())h.origin.toLowerCase()===e.origin.toLowerCase()&&h.send({jsonrpc:"2.0",method:"phantom_trustRevoked",params:u})}function jy(){for(let e of Gr())(async()=>{try{await eh.default.tabs.sendMessage(e.tabId,{jsonrpc:"2.0",method:"phantom_metaMaskOverrideSettingsChanged",params:null})}catch{}})();(async()=>{try{let e=await Yt(),t=await ur(Yr);await _n(),await An({enabledChains:e.enabledAddressTypes,metamaskOverrideSetting:t})}catch(e){console.error("Could not re-register content scripts",e)}})()}function Vy(){(async()=>{try{let e=await Yt(),t=await ur(Yr);await _n(),await An({enabledChains:e.enabledAddressTypes,metamaskOverrideSetting:t})}catch(e){console.error("Could not re-register content scripts",e)}})()}c();p();function nh(e){switch(e){case"solana:101":return Ze.SOLANA_MAINNET;case"solana:102":return Ze.SOLANA_TESTNET;case"solana:103":return Ze.SOLANA_DEVNET;case"eip155:143":case"eip155:10143":case"eip155:41454":case"eip155:1":case"eip155:11155111":case"eip155:8453":case"eip155:84532":case"eip155:137":case"eip155:80002":return e;default:return Object.values(Ze).find(t=>t===e)?e:null}}var ih=20*1e3,dt=new _e,zy=async()=>{await dp(),await $y(),en.init({provider:gp}),await xp("background"),dt.remove("unencryptedSeedAndMnemonic"),Ky(),rh(),await _n(),await An({enabledChains:(await Yt().catch(()=>({enabledAddressTypes:xc.getAll()}))).enabledAddressTypes,metamaskOverrideSetting:await ur(dt).catch(()=>Hc.enum.ALWAYS_ASK)})};zy().catch(e=>{console.error("w error",e)});async function Ky(){if((await Je.default.tabs.query({url:Je.default.runtime.getURL("onboarding.html")})).length>0)return;let r=await mr.hasPersistedDeviceEncryptionKey(),n=await dt.get($s);!r&&!n&&(await dt.set("firstTimeOnboarding",{isFirstTimeOnboarding:!0}),lp({url:"onboarding.html"}),dt.set($s,!0))}function $y(){Je.default.runtime.onInstalled.addListener(Zy),Je.default.runtime.onConnect.addListener(Qy),Je.default.alarms.onAlarm.addListener(e1),Je.default.runtime.onMessage.addListener(uc(s1)),Je.default.tabs.onRemoved.addListener(Jy),Je.default.webRequest.onBeforeRequest.addListener(Gy,{urls:["http://*/*","https://*/*"]})}async function Gy(e){return e.tabId===Je.default.tabs.TAB_ID_NONE?{}:"documentLifecycle"in e&&e.documentLifecycle==="prerender"?{}:((e.type==="main_frame"||e.type==="sub_frame")&&await Yy(e.url,e.tabId),{})}async function Yy(e,t){let r=new _e,n=await jc(r,Te,e);if(!n.result)return;if(n.isSubdomainDomainWhitelisted){let a=await dt.get("userWhitelistedSubdomains");if(JSON.parse(`${a}`)?.includes(`${n.source}`))return}let s=await dt.get("userWhitelistedOrigins");JSON.parse(`${s}`)?.includes(`${n.source}`)||(Te.capture("phishingBlocklistRedirect",{data:{targetURL:e}}),await Je.default.tabs.update(t,{url:`phishing.html?origin=${e}&subdomain=${n.isSubdomainDomainWhitelisted}`}))}function Zy(e){switch(e.reason){case"install":{Te&&Te.capture("appInstall");break}case"update":{le.addBreadcrumb("startUp",`Extension updated from ${e.previousVersion} to ${fc}`,"debug");break}default:break}}var ah=e=>e.sender?.url===Je.default.runtime.getURL("popup.html")||e.sender?.url===Je.default.runtime.getURL("notification.html");async function Xy(e){if(!go()&&ah(e)){mo(e.sender.url);let t=await dt.get("lockTimerMs"),r=Date.now()+(t??Dc);le.addBreadcrumb("account","Lock alarm created","debug",{skipFileLogger:!0}),Je.default.alarms.create("lockExtension",{when:r})}}function Jy(e){mo(e)}async function Qy(e){if(e.onDisconnect.addListener(Xy),ah(e)&&(go()?(sn(),ch(Qa),ec()):await Je.default.alarms.clear("lockExtension")),e.name==="contentscript"){if(e.sender&&e.sender.url&&e.sender.tab&&e.sender.tab.id){let r=e.postMessage.bind(e);e.postMessage=s=>{r(s)},(await Jm(e)).start()}e.postMessage("phantom#background#initialized"),e.onMessage.addListener(r=>{typeof r=="string"&&r==="phantom#ready_to_setup_streams"&&e.postMessage("phantom#background#initialized")})}}function e1(e){if(e.name.startsWith("deleteStorageValue")){let[t,r]=e.name.split(":");dt.remove(r)}e.name==="lockExtension"&&(le.addBreadcrumb("account","Locked by alarm","debug"),Td(!0),sn(),ec())}async function ec(){await Promise.all([dt.set(Gs,!0),yp("idle")])}async function t1(){await dt.set(Gs,!1)}async function r1(e,t){try{let r=await a1.get().catch(()=>[]),n=co(t),{hideProvidersArray:s,dontOverrideWindowEthereum:o}=io(n,r);return i.result(e.id,{hideProvidersArray:s,dontOverrideWindowEthereum:o})}catch(r){return le.captureError(r,"provider"),i.internalError(e.id,r?.message)}}async function n1(e){try{if(e.method==="blinksEnabled"){let t=await Wc(dt,!1);return i.result(e.id,t)}if(e.method==="BlinksV2Config"){let t=await Yt();return i.result(e.id,{supportedBlockchains:t.enabledNetworkIDs.map(nh).filter(r=>r!=null)})}return i.methodNotFound(e.id)}catch(t){return le.captureError(t,"provider"),i.internalError(e.id)}}async function s1(e,t){let r=t.url,n=t.tab?.id;if(r&&e.method==="providerInjectionOptions")return r1(e,r);if(r&&e.method==="blinksEnabled"||e.method==="BlinksV2Config")return n1(e);if(r&&e.method==="blinksLog"){let{event:a,body:d}=e.params;return Te.capture(a,{data:d}),i.result(e.id,"success")}if(!r||!r.startsWith(jn()))return le.captureMessage(`Unauthorized request from origin: ${Wn(r)}`,"generic","error"),i.result(e.id,`${e.method} not permitted`);if(!Object.values(wp).includes(e.method))return le.captureMessage("Unauthorized method","generic","error"),i.result(e.id,`${e.method} not permitted`);switch(e.method){case"hasOnboarded":return Rd(e);case"resetHasOnboarded":return kd(e);case"lockExtension":{let a=Cd(e);return ch(Qa),ec(),a}case"unlockExtension":{let a=Ed(e);return o1().then(d=>{Qa=d}),t1(),a}case"IsExtensionUnlocked":return Id(e);case"setPassword":return Bd(e);case"verifyPassword":return Ld(e);case"updatePassword":return Md(e);case"importPrivateKeyAccount":return rd(e);case"importReadOnlyAccount":return nd(e);case"importSeedAccount":return sd(e);case"importSocialSeedAccount":return od(e);case"isExistingSeed":return id(e);case"addAccountForSeed":return ad(e);case"addAccountForSeedless":return cd(e);case"addLedgerAccounts":return pd(e);case"exportPrivateKey":return dd(e);case"exportEntropy":return ld(e);case"setAccountIcon":return ud(e);case"deriveAddresses":return md(e);case"removeAccount":return hd(e);case"reorderAccount":return fd(e);case"getAllAccounts":return gd(e);case"getAllSeeds":return yd(e);case"getAllSeedlessSeeds":return xd(e);case"sign":return wd(e);case"getAuthenticationPublicKey":return bd(e);case"checkVaultIntegrity":return Sd(e);case"logMessage":return Pd(e);case"downloadLogs":return Ud(e);case"serviceWorkerMutexAcquire":return Ad(e,n??r);case"serviceWorkerMutexRelease":return _d(e)}return i.methodNotFound(e.id)}var Qa,sh=(0,oh.default)(async()=>await Je.default.storage.local.set({"last-sw-ping":new Date().getTime()}),ih);async function o1(){return await sh(),setInterval(sh,ih)}async function ch(e){clearInterval(e)}var i1=60*10*1e3,a1=new rs(new _e,i1,()=>ao().catch(e=>(le.captureError(e,"provider"),[])),"phantomwallet-dApps-list");export{a1 as dAppsListCache};
/*! Bundled license information:

apg-js/dist/apg-lib-bundle.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=serviceWorker.js.map
