import{a as $}from"./chunk-GD6MXSPN.js";import{a as me}from"./chunk-25S7ECPH.js";import{c as pe,d as he,na as fe,pa as xe,u as V,wa as Se,ya as Ce}from"./chunk-XZRRLELF.js";import{s as A}from"./chunk-MOTGUR2H.js";import{g as ue}from"./chunk-TALMQQTZ.js";import{a as ge,b as ye}from"./chunk-S32BDL22.js";import{tb as ce,ub as de}from"./chunk-ZYPI3ESJ.js";import{a as le}from"./chunk-6EZHAYJL.js";import{Ta as X,aa as se}from"./chunk-QSYOXIBV.js";import{m as P}from"./chunk-FVUSQHVT.js";import{Db as j,gf as ne,wc as te}from"./chunk-E2A6YDRV.js";import{Ba as re,Ca as ie,Da as p,Ma as N,Na as ae,X as oe,c as q,kb as W,lb as U,wa as m,ya as C}from"./chunk-BEUYJGED.js";import{f as z,h as E,n as L}from"./chunk-64CIGK2X.js";E();L();var t=z(q());E();L();var a=z(q());E();L();var w=z(q());var be=e=>{if(typeof e=="number")return e;switch(e??"small"){case"normal":return 48;case"small":return 32;case"xsmall":return 24;case"xxsmall":return 16}},Oe=e=>{switch(e){case"square":return 6;case"circle":default:return 0}},ze=P.div`
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  align-items: center;
  justify-content: center;
  background-color: ${e=>ge(e.color,e.alpha??.1)};
`,F=({src:e,fallback:o,alt:r,size:n="normal",shape:i="circle",style:c,onDragStart:h})=>{let u=o??w.default.createElement(qe,null,"?"),d=be(n),f=be(n),b=Oe(i);return i==="circle"?w.default.createElement(ye,{color:C.colors.legacy.areaBase,diameter:d,style:c},w.default.createElement(W,{src:e,fallback:u,alt:r||void 0,width:d,height:f,borderRadius:b,onDragStart:h,loader:w.default.createElement(A,{borderRadius:`${b}px`,width:`${d}px`,height:`${f}px`})})):w.default.createElement(ze,{color:C.colors.legacy.areaBase,width:d,height:f,style:c},w.default.createElement(W,{src:e,fallback:u,alt:r||"",width:d,height:f,borderRadius:b,onDragStart:h,loader:w.default.createElement(A,{borderRadius:`${b}px`,width:`${d}px`,height:`${f}px`})}))},qe=P.div`
  font-size: 22px;
  line-height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
`;var je=({item:e,index:o,onClick:r})=>{let n=e.type==="token"?e.data.data.symbol:e.type==="perp"?e.data.data.name:e.data.name,i=(0,a.useCallback)(u=>{u.preventDefault()},[]),c=e.type==="token"?a.default.createElement(V,{image:{type:"fungible",src:e.data.data.logoUri,fallback:e.data.data.symbol??""},tokenType:e.data.type,chainMeta:e.data.data.chain,size:36}):e.type==="dapp"?a.default.createElement(F,{src:e.data.imageUrl,size:36,shape:"square",onDragStart:i}):e.type==="category"?a.default.createElement(U,{src:e.data.imageUri,size:36,backgroundColor:"elementAccent",shape:"square",onDragStart:i}):null,h=(0,a.useCallback)(()=>{r(o,e)},[o,r,e]);return a.default.createElement("div",{className:O.buttonContainer},a.default.createElement("div",{className:O.button,onClick:h},c,a.default.createElement(p,{className:O.text,color:"white",children:n??""})))},ve=({items:e,onClick:o})=>{let r=ae(0),n=(0,a.useRef)(null),[i,c]=(0,a.useState)(0),h=(0,a.useMemo)(()=>{let u=self.innerWidth-i;return Math.min(0,u)},[i]);return(0,a.useEffect)(()=>{n.current&&c(n.current.scrollWidth)},[e]),a.default.createElement(ie,{overflow:"hidden"},a.default.createElement(N.div,{ref:n},a.default.createElement(N.div,{className:O.scrollView,style:{x:r},drag:"x",dragConstraints:{left:h,right:0}},e.map((u,d)=>a.default.createElement(je,{key:d,item:u,index:d,onClick:o})))))},O={scrollView:m({paddingTop:8,display:"flex",flexDirection:"row",paddingLeft:8}),buttonContainer:m({paddingRight:10}),button:m({display:"flex",flexDirection:"row",alignItems:"center",backgroundColor:{base:"elementBase",hover:"elementAccent"},cursor:"pointer",borderRadius:12,paddingX:6,paddingY:6,height:48}),text:m({font:"body",color:"white",paddingLeft:6,whiteSpace:"nowrap"})};var We=P.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: solid 1px;
  width: 100%;
  padding: 10px 0;
  padding-right: 16px;
  flex: 1;
  overflow: hidden;
  border-color: ${e=>e.isLast?C.colors.legacy.areaBase:C.colors.legacy.borderDiminished};
`,I={searchResultsContainer:m({marginTop:16,width:"100%"}),searchResultsHeaderContainer:m({paddingX:16,paddingY:4,display:"flex",alignItems:"center",justifyContent:"space-between"}),searchResult:m({display:"flex",alignItems:"center",paddingLeft:16,gap:16,height:56,maxHeight:56,cursor:"pointer",width:"100%",maxWidth:"100%"}),searchResultTextContainer:m({display:"flex",flexDirection:"column",minWidth:0,flex:1,marginRight:8}),hover:m({cursor:"pointer"}),picturePlaceholder:m({borderRadius:6,height:32,width:32}),noResultsContainer:m({position:"absolute",top:64,right:0,bottom:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:56}),tokenSecondaryContainer:m({display:"flex",gap:4,alignItems:"center"}),dotContainer:m({display:"flex",justifyContent:"center",alignItems:"center",width:8}),dot:m({backgroundColor:"textDiminished",width:4,height:4,borderRadius:"circle"}),secondaryAction:m({display:"flex",justifyContent:"center",alignItems:"center",width:32,height:32,borderRadius:10,padding:6})},ke=(e,o,{priceMap:r,isPriceMapLoading:n,isReadOnlyAccount:i,entryPoint:c,navigateToSwapper:h,handleHideModalVisibility:u,addRecentlySearchedItem:d,dappsItems:f,pushDetailView:b})=>{let s=j(X(e)),v=r[s],M=v?.price,R=M!==void 0,g=v?.usd_24h_change,x=g!==void 0,T=R||x;return{type:"generic",key:s,"data-testid":`search-result-token-${e.data.symbol}`,image:t.default.createElement(V,{image:{type:"fungible",src:e.data.logoUri,fallback:e.data.symbol??""},tokenType:e.type,chainMeta:e.data.chain,size:32}),textMain:t.default.createElement(pe,{children:le(e.data.name||"",25),spamStatus:e.data.spamStatus||null,font:"body"}),textDiminished:t.default.createElement("div",{className:I.tokenSecondaryContainer},t.default.createElement(p,{children:e.data.symbol||"",font:"caption",color:"textDiminished"}),n?t.default.createElement(t.default.Fragment,null,t.default.createElement(A,{width:"36px",height:"14px",borderRadius:"8px"}),t.default.createElement(A,{width:"48px",height:"14px",borderRadius:"8px"})):t.default.createElement(t.default.Fragment,null,T?t.default.createElement("div",{className:I.dotContainer},t.default.createElement("div",{className:I.dot})):null,R?t.default.createElement(he,{value:M,font:"caption",color:"textDiminished"}):null,x?t.default.createElement(p,{children:`${se(g,{includePlusPrefix:!0})}%`,font:"caption",color:g>=0?"spotPositive":"spotNegative",truncate:"ellipsis"}):null)),secondaryAction:i?void 0:{icon:t.default.createElement(re.Swap,null),onClick:k=>{k.stopPropagation(),h({buyFungibleCaip19:s}),c==="home"&&setTimeout(()=>{u("searchPage")},50)}},onClick:async()=>{Ee({addRecentlySearchedItem:d,token:e,position:f.length+o+1,entryPoint:c,handleHideModalVisibility:u,pushDetailView:b})}}},Rt=({searchedDapps:e,tokens:o,trendingTokens:r,priceMap:n,isPriceMapLoading:i,showMoreDapps:c,setShowMoreDapps:h,renderShowMoreDappsButton:u,showMoreTokens:d,setShowMoreTokens:f,renderShowMoreTokensButton:b,entryPoint:s,recentlyViewedSearchItems:v=[],searchQuery:M,categories:R})=>{let{t:g}=oe(),{pushDetailView:x}=ue(),T=xe(),{handleHideModalVisibility:k}=Ce(),J=s==="home",G=te(),{mutate:S}=ce(G),{mutate:Y}=de(G),{data:Le}=ne(),H=!!Le?.isReadOnly,D=(0,t.useMemo)(()=>e.map((l,y)=>({type:"generic",key:l.id,"data-testid":`search-result-dapp-${l.name}`,image:t.default.createElement(F,{src:l.imageUrl,size:"small",shape:"square"}),textMain:t.default.createElement(p,{children:l.name,font:"body"}),textDiminished:t.default.createElement(p,{children:l.category||"",font:"caption",color:"textDiminished"}),onClick:async()=>{Te({addRecentlySearchedItem:S,dapp:l,position:y+1,entryPoint:s})}})),[e,S,s]),_=(0,t.useMemo)(()=>o.map((l,y)=>ke(l,y,{priceMap:n,isPriceMapLoading:i,isReadOnlyAccount:H,entryPoint:s,navigateToSwapper:T,handleHideModalVisibility:k,addRecentlySearchedItem:S,dappsItems:D,pushDetailView:x})),[o,n,i,H,s,T,k,S,D,x]),Q=(0,t.useMemo)(()=>r.map((l,y)=>ke(l,y,{priceMap:n,isPriceMapLoading:i,isReadOnlyAccount:H,entryPoint:s,navigateToSwapper:T,handleHideModalVisibility:k,addRecentlySearchedItem:S,dappsItems:D,pushDetailView:x})),[r,n,i,H,s,T,k,S,D,x]),K=(0,t.useMemo)(()=>(R||[]).map((l,y)=>({type:"generic",key:l.id,"data-testid":`search-result-category-${l.name}`,image:t.default.createElement(U,{src:l.imageUri,size:32,backgroundColor:"elementAccent",shape:"square"}),textMain:t.default.createElement(p,{children:l.name,font:"body"}),textDiminished:t.default.createElement(p,{children:g("fungibleCategoriesNumTokens",{numTokens:l.numTokens}),font:"caption",color:"textDiminished"}),onClick:()=>{De({addRecentlySearchedItem:S,category:l,index:y,entryPoint:s,pushDetailView:x})}})),[R,g,x,S,s]),Ae=(0,t.useMemo)(()=>({type:"recentSearchItems",key:"recentSearchItems",items:v,onClick:async(l,y)=>{if(y.type==="token")Ee({addRecentlySearchedItem:S,token:y.data,position:l,entryPoint:s,handleHideModalVisibility:k,pushDetailView:x});else if(y.type==="dapp")Te({addRecentlySearchedItem:S,dapp:y.data,position:l,entryPoint:s});else if(y.type==="category")De({addRecentlySearchedItem:S,category:y.data,index:l,entryPoint:s,pushDetailView:x});else throw new Error("Unknown item type")}}),[S,k,s,x,v]),Me=v.length?g("commandClear"):void 0,Re=(0,t.useCallback)(()=>{Y()},[Y]),Ne=b?g(d?"exploreShowLess":"exploreShowMore"):void 0,Pe=(0,t.useCallback)(()=>{f(!d)},[f,d]),Be=u?g(c?"exploreShowLess":"exploreShowMore"):void 0,He=(0,t.useCallback)(()=>{h(!c)},[h,c]);if(!e.length&&!o.length)return t.default.createElement("div",{className:I.noResultsContainer,"data-testid":"explore-search-results-nodata"},t.default.createElement(p,{children:g("searchNoResultsFound"),font:"bodyMedium",color:"textDiminished"}));let Z=M==null||M.length===0,Ue=v.length&&Z?t.default.createElement(B,{testId:"explore-search-results",title:t.default.createElement(p,{children:g("dAppBrowserRecents"),font:"title1Semibold"}),items:[Ae],accessoryText:Me,accessoryOnPress:Re}):null,Ve=K.length?t.default.createElement(B,{testId:"explore-search-results-categories",title:t.default.createElement(p,{children:g("exploreCategories"),font:"title1Semibold"}),items:K}):null,ee=D.length?t.default.createElement(B,{testId:"explore-search-results",title:t.default.createElement(p,{children:g("exploreSites"),font:"title1Semibold"}),items:D,accessoryText:Be,accessoryOnPress:He}):null,$e=_.length?t.default.createElement(B,{testId:"explore-search-results",title:t.default.createElement(p,{children:g("exploreTokens"),font:"title1Semibold"}),items:_,accessoryText:Ne,accessoryOnPress:Pe}):null,Fe=Z&&Q.length?t.default.createElement(B,{testId:"explore-search-results",title:t.default.createElement(p,{children:g("exploreTrendingTokens"),font:"title1Semibold"}),items:Q}):null;return t.default.createElement(t.default.Fragment,null,Ue,J?void 0:ee,Fe,$e,Ve,J?ee:void 0)},we=({hoverColor:e,baseColor:o,...r})=>t.default.createElement(N.div,{...r,whileHover:{background:e},style:{background:o},transition:{ease:[.5,1,.89,1],duration:.1}}),B=({items:e,title:o,testId:r,accessoryText:n,accessoryOnPress:i})=>t.default.createElement("div",{className:I.searchResultsContainer,"data-testid":r},t.default.createElement("div",{className:I.searchResultsHeaderContainer},o,n?t.default.createElement(p,{className:I.hover,children:n,font:"caption",color:"textDiminished",onPress:i}):null),e.map((c,h)=>t.default.createElement(Xe,{...c,isLast:h===e.length-1}))),Xe=e=>{let[o,r]=(0,t.useState)(!1),[n,i]=(0,t.useState)(!1);if(e.type==="recentSearchItems")return t.default.createElement(ve,{items:e.items,onClick:e.onClick});let{onClick:h,image:u,isLast:d,textMain:f,textDiminished:b,secondaryAction:s,"data-testid":v}=e;return t.default.createElement(we,{className:I.searchResult,onClick:h,"data-testid":v,baseColor:C.colors.legacy.areaBase,hoverColor:n?C.colors.legacy.areaBase:C.colors.legacy.elementAccent,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1)},t.default.createElement("div",null,u),t.default.createElement(We,{isLast:d},t.default.createElement("div",{className:I.searchResultTextContainer},f,b),s?t.default.createElement(we,{className:I.secondaryAction,onClick:s.onClick,baseColor:o?C.colors.legacy.borderBase:C.colors.legacy.elementAccent,hoverColor:C.colors.legacy.borderBase,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},s.icon):null))};function Te({addRecentlySearchedItem:e,dapp:o,position:r,entryPoint:n}){e({type:"dapp",data:o}),self.open(me(o.domain).origin),$.searchItemClickedByUser({itemDetails:{position:r,title:o.name,id:o.id,type:"site",uiContext:n}})}function Ee({addRecentlySearchedItem:e,token:o,position:r,entryPoint:n,pushDetailView:i}){let c=j(X(o));$.searchItemClickedByUser({itemDetails:{position:r,title:o.data.name||o.data.symbol||c,id:c,type:"token",uiContext:n}}),i(t.default.createElement(Se,{caip19:c,title:o.data.name??void 0,entryPoint:"exploreSearch"})),e({type:"token",data:o})}function De({addRecentlySearchedItem:e,category:o,pushDetailView:r,index:n,entryPoint:i}){r(t.default.createElement(fe,{category:o})),$.onExploreListItemClickedByUser({datasourceId:"",listName:"token-categories",context:i,itemDetails:{position:n,title:o.name,id:o.id}}),e({type:"category",data:o})}export{Rt as a};
//# sourceMappingURL=chunk-LNZ2BMOD.js.map
